window.Q=function(u,y){function o(t,i,e){if(t.hasChildren()){var n=t._fr||t.getChildren();if(n){for(var r=0,s=(n=n._j2||n).length;r<s;r++)if(!1===i.call(e,n[r])||!1===o(n[r],i,e))return!1;return!0}}}function s(t){if(!t.hasChildren())return t instanceof Jn?t:null;for(var i,e=t._fr._j2,n=e.length-1;0<=n;){if(i=s(i=e[n]))return i;n--}return null}function n(t,i,e,n){return n?function t(i,e,n){for(var r,s=0,o=(i=i._j2||i).length;s<o;s++)if((r=i[s]).hasChildren()&&!t(r.children,e,n)||!1===e.call(n,r))return!1;return!0}(t,i,e):function t(i,e,n){for(var r,s=0,o=(i=i._j2||i).length;s<o;s++)if(r=i[s],!1===e.call(n,r)||r.hasChildren()&&!t(r.children,e,n))return!1;return!0}(t,i,e)}function r(t,i,e,n){return n?function t(i,e,n){for(var r,s=(i=i._j2||i).length-1;0<=s;s--)if((r=i[s]).hasChildren()&&!t(r.children,e,n)||!1===e.call(n,r))return!1;return!0}(t,i,e):function t(i,e,n){for(var r,s=(i=i._j2||i).length-1;0<=s;s--)if(r=i[s],!1===e.call(n,r)||r.hasChildren()&&!t(r.children,e,n))return!1;return!0}(t,i,e)}function e(t,i,e){for(var n,r=(t._j2||t).slice(0);r.length;){if(n=r[0],r=r.splice(1),!1===i.call(e,n))return!1;if(n.hasChildren()){var s=n.children;s=s._j2||s,r=r.concat(s)}}return!0}function a(t,l){function n(t,i){for(var e=t.length,n=i.length,r=e+n,s=new Array(r),o=0,h=0,a=0;a<r;)o===e?s[a++]=i[h++]:h===n||l(t[o],i[h])<=0?s[a++]=t[o++]:s[a++]=i[h++];return s}function r(t){var i=t.length,e=Math.ceil(i/2);return i<=1?t:n(r(t.slice(0,e)),r(t.slice(e)))}return r(t)}function b(t,i,e,n){t instanceof ht&&(t=t._j2);for(var r=0,s=(t._j2||t).length;r<s;r++)if(!1===i.call(e,t[r],r,n))return!1;return!0}function h(t,i,e){for(var n=t instanceof ht,r=t._j2||t,s=0,o=r.length;s<o;s++){var h=r[s];i.call(e,h)&&(n?t.remove(h):t.splice(s,1),s--,o--)}}function g(t,i,e,n){t instanceof ht&&(t=t._j2);for(var r=(t._j2||t).length-1;0<=r;r--)if(!1===i.call(e,t[r],r,n))return!1;return!0}function l(t){if(t.clone instanceof Function)return t.clone(!0);var i,e=[];return b(t,function(t){i=t&&t.clone instanceof Function?t.clone():t,e.push(i)},this),e}function T(t,i,e){void 0===e||e<0?t.push(i):t.splice(e,0,i)}function O(t,i){var e=t.indexOf(i);return!(e<0||e>=t.length)&&t.splice(e,1)}function _(t,i){var e=t;for(var n in i)if(i.__lookupGetter__){var r=i.__lookupGetter__(n),s=i.__lookupSetter__(n);r||s?(r&&e.__defineGetter__(n,r),s&&e.__defineSetter__(n,s)):e[n]=i[n]}else e[n]=i[n];return e}function t(t,i,e){if(!(t instanceof Function))throw new Error("subclass must be type of Function");var n=null;function r(){}"object"==typeof i&&(n=i,i=t,t=function(){i.apply(this,arguments)});var s=t.prototype;return r.prototype=i.prototype,t.prototype=new r,t.superclass=i.prototype,t.superclass.constructor=i,_(t.prototype,s),n&&_(t.prototype,n),e&&_(t.prototype,e),t.prototype.class=t}function c(t,i,e){return v(t,i,"constructor",e)}function v(t,i,e,n){var r=i.superclass;if(r){var s=r[e];return s?s.apply(t,n):void 0}}function f(t,i,e,n){if("constructor"==e)return d(t,i,n);if(i.super_ instanceof Function){var r=i.super_.prototype[e];return r instanceof Function?r.apply(t,n):void 0}}function d(t,i,e){if(i.super_ instanceof Function)return i.super_.apply(t,e)}function E(t,i,e){var n,r,s;if(!(t instanceof Function)&&t instanceof Object)return i=t.super,t.hasOwnProperty("constructor")?(n=t.constructor,delete t.constructor):n=i?function(){i.apply(this,arguments)}:function(){},E(n,i,t);if(i&&!(i instanceof Function)&&i instanceof Object)return E(t,i.super,i);if(i&&(s=i,(r=t).super_=s,r.prototype=Object.create(s.prototype,{super_:{value:s,enumerable:!1},constructor:{value:r,enumerable:!1}})),e){var o=t.prototype;for(var h in e)o[h]=e[h]}return t}function p(t,n,i,e,r){if(e)Object.defineProperty(t,n,{value:i,enumerable:!0});else{var s={configurable:!0,enumerable:!0},o="$"+n;void 0!==i&&(t[o]=i),s.get=function(){return this[o]},s.set=function(t){var i=this[o];if(i==t)return!1;var e=new Dt(this,n,t,i);return!!this.beforeEvent(e)&&(this[o]=t,r&&r.call(this,t,i),this.onEvent(e),!0)},Object.defineProperty(t,n,s)}}function i(t,i){for(var e=0,n=i.length;e<n;e++){var r=i[e];p(t,r.name||r,r.defaultValue||r.value,r.readOnly,r.onSetting)}}var m=0;if(u.navigator){var A=navigator.userAgent,w=/opera/i.test(A),L=!w&&/msie/i.test(A),S=/rv:11.0/i.test(A),I=/MSIE 10./i.test(A);/Edge/i.test(A);if(S&&(L=!0),/msie\s[6,7,8]/i.test(A))throw new Error("your browser is not supported");var x=/webkit|khtml/i.test(A),D=!x&&/gecko/i.test(A),C=/firefox\//i.test(A),R=/Chrome\//i.test(A),P=!R&&/Safari\//i.test(A),N=/Macintosh;/i.test(A),k=/(iPad|iPhone|iPod)/g.test(A),M=/Android/g.test(A),B=/Windows Phone/g.test(A),G=(k||M||B)&&"ontouchstart"in u,F=A.match(/AppleWebKit\/([0-9\.]*)/);if(F&&1<F.length)var $=parseFloat(F[1]);if(M){parseFloat(A.match(/Android\s([0-9\.]*)/)[1]);if($&&$<=534.3);}}function j(t,i){return t.className=i,t}function z(t,i){if(!t.hasOwnProperty("classList")){var e=t.getAttribute("class");if(!e)return j(t,i);for(var n=e.split(" "),r=0,s=n.length;r<s;r++)if(n[r]==i)return;return j(t,e+=" "+i)}t.classList.add(i)}function Y(t,i){if(!t.hasOwnProperty("classList")){var e=t.getAttribute("class");if(!e||!e.indexOf(i))return;for(var n="",r=e.split(" "),s=0,o=r.length;s<o;s++)r[s]!=i&&(n+=r[s]+" ");return j(t,n)}t.classList.remove(i)}function U(t){return!isNaN(t)&&t instanceof Number||"number"==typeof t}function H(t){return void 0!==t&&(t instanceof String||"string"==typeof t)}function W(t){return Array.isArray(t)}function q(t){(t=t||u.event).preventDefault?t.preventDefault():t.returnValue=!1}function V(t){(t=t||u.event).stopPropagation?t.stopPropagation():t.cancelBubble||(t.cancelBubble=!0)}function X(t){q(t),V(t)}function K(t){return Math.floor(Math.random()*t)}function Z(t){return 0<t?Math.floor(t):Math.ceil(t)}function J(t){return 0<t?Math.ceil(t):Math.floor(t)}function Q(t){return t<16777216?"#"+("000000"+t.toString(16)).slice(-6):"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+((t>>24&255)/255).toFixed(2)+")"}function tt(t,i,e){"object"!=typeof e||e.hasOwnProperty("enumerable")||(e.enumerable=!0),Object.defineProperty(t,i,e)}function it(t,i){for(var e in i)if("_"!=e[0]){var n=i[e];"object"!=typeof n||n.hasOwnProperty("enumerable")||(n.enumerable=!0)}Object.defineProperties(t,i)}function et(t,i){i=i||u;for(var e=t.split("."),n=0,r=e.length;n<r;n++)i=i[e[n]];return i}function nt(t){return t instanceof MouseEvent||t instanceof Object&&void 0!==t.touches}function rt(t){u.console&&console.log.apply(console,arguments)}function st(t){u.console&&console.error(t)}u.requestAnimationFrame||(u.requestAnimationFrame=u.webkitRequestAnimationFrame||u.mozRequestAnimationFrame||u.oRequestAnimationFrame||u.msRequestAnimationFrame||function(t,i){return u.setTimeout(function(){t()},1e3/60)}),u.cancelAnimationFrame||(u.cancelAnimationFrame=u.webkitCancelAnimationFrame||u.mozCancelAnimationFrame||u.oCancelAnimationFrame||u.msCancelAnimationFrame||function(t){return u.clearTimeout(t)});var ot={SELECTION_TOLERANCE:G?7:4,LABEL_COLOR:"#333"};it(ot,{FONT_STYLE:{get:function(){return this._fontStyle||(this._fontStyle="normal")},set:function(t){this._fontStyle!=t&&(this._fontStyle=t,this._fontChanged=!0)}},FONT_SIZE:{get:function(){return this._fontSize||(this._fontSize=12)},set:function(t){this._fontSize!=t&&(this._fontSize=t,this._fontChanged=!0)}},FONT_FAMILY:{get:function(){return this._fontFamily||(this._fontFamily="Verdana,helvetica,arial,sans-serif")},set:function(t){this._fontFamily!=t&&(this._fontFamily=t,this._fontChanged=!0)}},FONT:{get:function(){return!this._fontChanged&&void 0!==this._fontChanged||(this._fontChanged=!1,this._font=this.FONT_STYLE+" "+this.FONT_SIZE+"px "+this.FONT_FAMILY),this._font}}});var ht=function(t){this._j2=[],this._kw={},t&&this.add(t)};ht.prototype={_j2:null,_kw:null,get:function(t){return this.getByIndex(t)},getById:function(t){return this._kw[t]},getByIndex:function(t){return this._j2[t]},forEach:function(t,i,e){return b(this._j2,t,i,e)},forEachReverse:function(t,i,e){return g(this._j2,t,i,e)},size:function(){return this._j2.length},contains:function(t){return this.containsById(t.id)},containsById:function(t){return this._kw.hasOwnProperty(t)},setIndex:function(t,i){var e=this._j2.indexOf(t);if(e<0)throw new Error("'"+t.id+"' not exist");return e!=i&&(this._j2.splice(e,1),this._j2.splice(i,0,t),!0)},setIndexAfter:function(t,i){var e=this._j2.indexOf(t);if(e<0)throw new Error("'"+t.id+"' not exist");return e==i?i:e==i+1?i+1:(i<e&&(i+=1),this._j2.splice(e,1),this._j2.splice(i,0,t),i)},setIndexBefore:function(t,i){var e=this._j2.indexOf(t);if(e<0)throw new Error("'"+t.id+"' not exist");return e==i?i:e==i-1?i-1:(e<i&&--i,this._j2.splice(e,1),this._j2.splice(i,0,t),i)},indexOf:function(t){return this._j2.indexOf(t)},getIndexById:function(t){var i=this.getById(t);return i?this._j2.indexOf(i):-1},add:function(t,i){return W(t)?this._fp(t,i):this._ka(t,i)},addFirst:function(t){return this.add(t,0)},_fp:function(t,i){if(0==t.length)return!1;for(var e=!1,n=0<=i,r=0,s=(t=t._j2||t).length;r<s;r++){var o=t[r];null!=o&&this._ka(o,i,!0)&&(e=!0,n&&i++)}return e},_ka:function(t,i,e){var n=t.id;return void 0!==n&&!this.containsById(n)&&(T(this._j2,t,i),this._kw[n]=t)},remove:function(t){return W(t)?this._m0q(t):t.id?this._fk(t.id,t):this.removeById(t)},_m0q:function(t){if(0==t.length)return!1;for(var i=!1,e=0,n=(t=t._j2||t).length;e<n;e++){var r=t[e];if(null!=r){void 0===r.id&&(r=this._kw[r]);var s=r.id;this._fk(s,r,!0)&&(i=!0)}}return i},_fk:function(t,i,e){return!(void 0===t||!this.containsById(t)||(null==i&&(i=this.getById(t)),delete this._kw[t],O(this._j2,i),0))},removeById:function(t){var i=this._kw[t];return!!i&&this._fk(t,i)},set:function(t){if(!t||0==t)return this.clear();if(this.isEmpty()||!W(t))return this.clear(),this.add(t);var i=[],e={},n=0;if(b(t,function(t){this._kw[t.id]?(e[t.id]=t,n++):i.push(t)},this),n!=this.length){var r=[];this.forEach(function(t){e[t.id]||r.push(t)},this),r.length&&this._m0q(r)}return i.length&&this._fp(i),!0},clear:function(){return!this.isEmpty()&&(this._j2.length=0,this._kw={},!0)},toDatas:function(){return this._j2.slice(0)},isEmpty:function(){return 0==this._j2.length},valueOf:function(){return this._j2.length},clone:function(t){var i=new ht;return t?i.add(l(this._j2)):i.add(this.toDatas()),i}},it(ht.prototype,{datas:{get:function(){return this._j2}},random:{get:function(){return this._j2&&this._j2.length?this._j2[K(this._j2.length)]:null}},length:{get:function(){return this._j2?this._j2.length:0}}});Math.PI;var at=.5*Math.PI,lt=function(t,i,e){t instanceof lt&&(i=t.y,e=(t=t.x).rotate),this.set(t,i,e)},_t=function(t,i,e,n){var r=t-e,s=i-n;return Math.sqrt(r*r+s*s)};lt.prototype={x:0,y:0,rotate:void 0,set:function(t,i,e){this.x=t||0,this.y=i||0,this.rotate=e||0},negate:function(){this.x=-this.x,this.y=-this.y},offset:function(t,i){this.x+=t,this.y+=i},equals:function(t){return this.x==t.x&&this.y==t.y},distanceTo:function(t){return _t(this.x,this.y,t.x,t.y)},toString:function(){return"Point("+this.x+", "+this.y+")"},clone:function(){return new lt(this.x,this.y)}},Object.defineProperty(lt.prototype,"distance",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}});var ut=function(t,i,e,n){void 0!==t&&this._lo(t,i,e,n)};function ct(t,i,e){var n,r,s;0==t._m0?(n=-1,s=0,r=i):0==t._m3?(n=0,s=1,r=e):(n=-1/t._m0,r=(t._m0-n)*i+t._m1,s=1);var o=new ut;return o._m0=n,o._m1=r,o._m3=s,o._lu=i,o._lv=e,o._kq=Math.atan2(n,s),o._m3os=Math.cos(o._kq),o._sin=Math.sin(o._kq),o}function ft(t,i,e,n,r){var s,o,h,a;if(n<i?s=-1:i<n&&(s=1),r<e?o=-1:e<r&&(o=1),!s)return{x:i,y:a=o<0?t.y:t.bottom};if(!o)return{x:h=s<0?t.x:t.right,y:e};var l=(e-r)/(i-n),_=e-l*i,u=s<0?i-t.x:i-t.right,c=o<0?e-t.y:e-t.bottom;return Math.abs(l)>=Math.abs(c/u)?h=((a=o<0?t.y:t.bottom)-_)/l:a=l*(h=s<0?t.x:t.right)+_,{x:h,y:a}}ut.prototype={_lu:null,_lv:null,_lw:null,_ly:null,_m0:null,_m1:null,_m3:1,_lo:function(t,i,e,n){this._lu=t,this._lv=i,this._lw=e,this._ly=n,t==e?(this._m0=-1,this._m3=0,this._m1=t):(this._m0=(i-n)/(t-e),this._m1=i-this._m0*t,this._m3=1),this._kq=Math.atan2(this._ly-this._lv,this._lw-this._lu),this._m3os=Math.cos(this._kq),this._sin=Math.sin(this._kq)},_m3i:function(t){return 0==this._m3?Number.NaN:this._m0*t+this._m1},_m3j:function(t){return 0==this._m0?Number.NaN:(t-this._m1)/this._m0},_$b:function(t){var i,e,n,r,s,o,h,a=t[0],l=t[2],_=t[4],u=t[1],c=t[3],f=t[5],d=this._m0,E=this._m1;if(0!=(s=0==this._m3?(n=Math.sqrt((-d*d*a-d*E)*_+d*d*l*l+2*d*E*l-d*E*a),r=-d*l+d*a,d*_-2*d*l+d*a):(n=Math.sqrt((d*a-u+E)*f+c*c+(-2*d*l-2*E)*c+(d*_+E)*u+(-d*d*a-d*E)*_+d*d*l*l+2*d*E*l-d*E*a),r=-c+u+d*l-d*a,f-2*c+u-d*_+2*d*l-d*a)))return e=(-n+r)/s,0<=(i=(n+r)/s)&&i<=1&&(o=Ui(i,t)),0<=e&&e<=1&&(h=Ui(e,t)),o&&h?[o,h]:o||h||void 0},_3b:function(t,i,e){if(this._m0==t._m0||0==this._m3&&0==t._m3)return null;var n,r,s,o,h;if(n=0==this._m3?this._m1:0==t._m3?t._m1:(t._m1-this._m1)/(this._m0-t._m0),r=0==this._m0?this._m1:0==t._m0?t._m1:this._m3?this._m0*n+this._m1:t._m0*n+t._m1,!i)return{x:n,y:r};if(e)o=-(s=-i/2);else{var a=-(s=-_t(this._lu,this._lv,n,r))+(o=_t(this._lw,this._ly,n,r));if(i<a){var l=i/a;s*=l,o*=l}else h=(i-a)/2}var _=this._6t(n,r,s),u=this._6t(n,r,o);return h&&(_._rest=h,u._rest=h),[_,u]},_6t:function(t,i,e){return 0==this._m3?{x:t,y:i+e}:{x:t+e*this._m3os,y:i+e*this._sin}}};function dt(t,i){this.width=t,this.height=i}function Et(t,i,e,n,r,s,o,h){return!(o<=0||h<=0||e<=0||n<=0)&&(h+=s,e+=t,n+=i,((o+=r)<r||t<o)&&(h<s||i<h)&&(e<t||r<e)&&(n<i||s<n))}function gt(t,i,e,n,r,s){return t<=r&&r<=t+e&&i<=s&&s<=i+n}function vt(t,i,e,n,r,s,o,h,a){return a&&(t-=a,i-=a,e+=a+a,n+=a+a),t<=r&&i<=s&&r+o<=t+e&&s+h<=i+n}dt.prototype={width:0,height:0,isEmpty:function(){return this.width<=0||this.height<=0},clone:function(){return new dt(this.width,this.height)},toString:function(){return"Size("+this.width+", "+this.height+")"}};var pt=function(t,i,e,n){t instanceof Object&&!U(t)&&(i=t.y,e=t.width,n=t.height,t=t.x),void 0===e&&(e=-1),void 0===n&&(n=-1),this.x=t||0,this.y=i||0,this.width=e,this.height=n};pt.prototype={x:0,y:0,width:-1,height:-1,setByRect:function(t){this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0},set:function(t,i,e,n){this.x=t||0,this.y=i||0,this.width=e||0,this.height=n||0},offset:function(t,i){return this.x+=t,this.y+=i,this},contains:function(t,i,e,n){if(1!=arguments.length)return 2==arguments.length?t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height:vt(this.x,this.y,this.width,this.height,t,i,e||0,n||0);if("object"==typeof t&&("x"in(r=t)&&"y"in r))return this.contains(t.x,t.y,t.width,t.height);var r;throw{message:"arguments error"}},intersectsPoint:function(t,i,e){return!(this.width<=0&&this.height<=0)&&(e?this.intersectsRect(t-e,i-e,2*e,2*e):t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height)},intersectsRect:function(t,i,e,n){return Et(this.x,this.y,this.width,this.height,t,i,e,n)},intersects:function(t,i){return U(t.width)?this.intersectsRect(t.x,t.y,t.width,t.height):this.intersectsPoint(t,i)},intersection:function(t,i,e,n){var r=this.x,s=this.y,o=r,h=s,a=t,l=i;return r<t&&(r=t),s<i&&(s=i),(a+=e)<(o+=this.width)&&(o=a),(l+=n)<(h+=this.height)&&(h=l),h-=s,(o-=r)<0||h<0?null:new pt(r,s,o,h)},addPoint:function(t){this.add(t.x,t.y)},add:function(t,i){if(U(t.width))return this.addRect(t.x,t.y,t.width,t.height);if(U(t.x)&&(i=t.y,t=t.x),this.width<0||this.height<0)return this.x=t,this.y=i,void(this.width=this.height=0);var e=this.x,n=this.y,r=this.width,s=this.height;r+=e,s+=n,t<e&&(e=t),i<n&&(n=i),r<t&&(r=t),s<i&&(s=i),s-=n,(r-=e)>Number.MAX_VALUE&&(r=Number.MAX_VALUE),s>Number.MAX_VALUE&&(s=Number.MAX_VALUE),this.set(e,n,r,s)},addRect:function(t,i,e,n){var r=this.width,s=this.height;(r<0||s<0)&&this.set(t,i,e,n);var o=e,h=n;if(!(o<0||h<0)){var a=this.x,l=this.y;r+=a,s+=l,t<a&&(a=t),i<l&&(l=i),r<(o+=t)&&(r=o),s<(h+=i)&&(s=h),s-=l,(r-=a)>Number.MAX_VALUE&&(r=Number.MAX_VALUE),s>Number.MAX_VALUE&&(s=Number.MAX_VALUE),this.set(a,l,r,s)}},shrink:function(t,i,e,n){return U(t)?n=1==arguments.length?i=e=t||0:2==arguments.length?(e=t||0,i||0):(t=t||0,i=i||0,e=e||0,n||0):(i=t.left||0,e=t.bottom||0,n=t.right||0,t=t.top||0),this.x+=i,this.y+=t,this.width-=i+n,this.height-=t+e,this},grow:function(t,i,e,n){return U(t)?n=1==arguments.length?i=e=t||0:2==arguments.length?(e=t||0,i||0):(t=t||0,i=i||0,e=e||0,n||0):(i=t.left||0,e=t.bottom||0,n=t.right||0,t=t.top||0),this.x-=i,this.y-=t,this.width+=i+n,this.height+=t+e,this},scale:function(t){return this.x*=t,this.y*=t,this.width*=t,this.height*=t,this},isEmpty:function(){return this.width<=0&&this.height<=0},toString:function(){return this.x+" , "+this.y+" , "+this.width+" , "+this.height},union:function(t){var i=this.width,e=this.height;if(i<0||e<0)return new pt(t.x,t.y,t.width,t.height);var n=t.width,r=t.height;if(n<0||r<0)return new pt(this.x,this.y,this.width,this.height);var s=this.x,o=this.y;i+=s,e+=o;var h=t.x,a=t.y;return h<s&&(s=h),a<o&&(o=a),i<(n+=h)&&(i=n),e<(r+=a)&&(e=r),e-=o,(i-=s)>Number.MAX_VALUE&&(i=Number.MAX_VALUE),e>Number.MAX_VALUE&&(e=Number.MAX_VALUE),new pt(s,o,i,e)},clear:function(){this.set(0,0,-1,-1)},equals:function(t){return t&&this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},clone:function(t,i){return new pt(this.x+(t||0),this.y+(i||0),this.width,this.height)},toArray:function(){return[this.x,this.y,this.width,this.height]},getIntersectionPoint:function(t,i,e,n){return ft(this,t,i,e,n)}},t(pt,dt),pt.equals=function(t,i){return t==i||t&&i&&t.x==i.x&&t.y==i.y&&t.width==i.width&&t.height==i.height},it(pt.prototype,{left:{get:function(){return this.x}},top:{get:function(){return this.y}},bottom:{get:function(){return this.y+this.height}},right:{get:function(){return this.x+this.width}},cx:{get:function(){return this.x+this.width/2}},cy:{get:function(){return this.y+this.height/2}},center:{get:function(){return new lt(this.cx,this.cy)}}}),pt.intersects=Et,pt.intersection=function(t,i,e,n,r,s,o,h){var a=t,l=i,_=r,u=s;return t<r&&(t=r),i<s&&(i=s),(_+=o)<(a+=e)&&(a=_),(u+=h)<(l+=n)&&(l=u),l-=i,(a-=t)<0||l<0?null:new pt(t,i,a,l)},pt.intersectsPoint=gt;function mt(t,i,e,n){1==arguments.length?i=e=n=t:2==arguments.length&&(e=t,n=i),this.set(t,i,e,n)}mt.prototype={top:0,bottom:0,left:0,right:0,set:function(t,i,e,n){this.top=t||0,this.left=i||0,this.bottom=e||0,this.right=n||0},clone:function(){return new mt(this.top,this.left,this.bottom,this.right)},equals:function(t){return t&&this.top==t.top&&this.bottom==t.bottom&&this.left==t.left&&this.right==t.right}};var yt=function(t,i){this.horizontalPosition=t,this.verticalPosition=i};yt.prototype={verticalPosition:!1,horizontalPosition:!1,toString:function(){return(this.horizontalPosition||"")+(this.verticalPosition||"")}},tt(yt.prototype,"sortName",{get:function(){return(this.horizontalPosition||"")+(this.verticalPosition||"")}});var Tt="l",Ot="r",At="t",wt="b";yt.LEFT_TOP=new yt(Tt,At),yt.LEFT_MIDDLE=new yt(Tt,"m"),yt.LEFT_BOTTOM=new yt(Tt,wt),yt.CENTER_TOP=new yt("c",At),yt.CENTER_MIDDLE=new yt("c","m"),yt.CENTER_BOTTOM=new yt("c",wt),yt.RIGHT_TOP=new yt(Ot,At),yt.RIGHT_MIDDLE=new yt(Ot,"m"),yt.RIGHT_BOTTOM=new yt(Ot,wt);var bt=[yt.LEFT_TOP,yt.LEFT_MIDDLE,yt.LEFT_BOTTOM,yt.CENTER_TOP,yt.CENTER_MIDDLE,yt.CENTER_BOTTOM,yt.RIGHT_TOP,yt.RIGHT_MIDDLE,yt.RIGHT_BOTTOM];function Lt(t,i){var e=St(t,i.width,i.height);return e.x+=i.x||0,e.y+=i.y||0,e}function St(t,i,e){if(!t)return{x:0,y:0};if(H(t)&&(t=yt.fromString(t)),t instanceof yt){var n,r,s=t.horizontalPosition,o=t.verticalPosition;switch(s){case Tt:n=0;break;case Ot:n=i;break;default:n=i/2}switch(o){case At:r=0;break;case wt:r=e;break;default:r=e/2}return{x:n,y:r}}if(void 0!==t.x)return t.byPercent?{x:t.x*i,y:t.y*e}:{x:t.x,y:t.y};throw new Error("Position not be supported - "+t)}tt(yt,"random",{get:function(){return bt[K(bt.length)]}}),yt.fromString=function(t){for(var i in yt){var e=yt[i];if(e&&"random"!=i&&e instanceof yt&&e.toString()==t)return e}throw new Error("Position not be supported - "+t)};function It(t,i,e,n,r){this.set(t,i,e,n),this.radius=r}It.prototype={radius:0,classify:function(t,i,e,n){return t<i?0:t<i+n?1:t<e-n?2:t<e?3:4},intersectsRect:function(t,i,e,n){if(!1===v(this,It,"intersectsRect",arguments))return!1;var r=this.x,s=this.y,o=r+this.width,h=s+this.height,a=2*radius,l=2*radius,_=Math.min(this.width,Math.abs(a))/2,u=Math.min(this.height,Math.abs(l))/2,c=this.classify(t,r,o,_),f=this.classify(t+e,r,o,_),d=this.classify(i,s,h,u),E=this.classify(i+n,s,h,u);return 2==c||2==f||2==d||2==E||c<2&&2<f||d<2&&2<E||(t=1==f?t=t+e-(r+_):t-=o-_,i=1==E?i=i+n-(s+u):i-=h-u,(t/=_)*t+(i/=u)*i<=1)},intersectsPoint:function(t,i){if(!1===v(this,It,"intersectsPoint",arguments))return!1;var e=this.x,n=this.y,r=e+this.width,s=n+this.height;if(t<e||i<n||r<=t||s<=i)return!1;var o=2*radius,h=2*radius,a=Math.min(this.width,Math.abs(o))/2,l=Math.min(this.height,Math.abs(h))/2;return t>=(e+=a)&&t<(e=r-a)||i>=(n+=l)&&i<(n=s-l)||(t=(t-e)/a)*t+(i=(i-n)/l)*i<=1},clone:function(){return new It(this.x,this.y,this.width,this.height,this.radius)}},t(It,pt);function xt(t,i,e,n){this.source=t,this.type=i,this.kind=e,this.value=n}xt.prototype={source:null,type:null,kind:null,value:null,toString:function(){return"source: "+this.source+", type: "+this.type+", kind: "+this.kind}};var Dt=function(t,i,e,n,r){this.source=t,this.kind=i,this.oldValue=n,this.value=e,this.propertyType=r};Dt.prototype={type:"property.change",propertyType:null,toString:function(){return"source: "+this.source+", type: "+this.type+", propertyName: "+this.kind+", oldValue: "+this.oldValue+", value: "+this.value}},t(Dt,xt),tt(Dt.prototype,"propertyName",{get:function(){return this.kind},set:function(t){this.kind=t}});function Ct(t,i,e){this.source=t,this.oldValue=t.parent,this.value=i,this.newIndex=e,this.oldValue&&(this.oldIndex=this.oldValue.getChildIndex(t))}Ct.prototype={kind:"parent"},t(Ct,Dt);function Rt(t,i){this.source=t,this.value=i}Rt.prototype.kind="child.add",t(Rt,Dt);function Pt(t,i){this.source=t,this.value=i}Pt.prototype.kind="child.remove",t(Pt,Dt);function Nt(t,i,e,n){this.source=i,this.oldValue=e,this.value=n,this.parent=t,this.child=i,this.oldIndex=e,this.newIndex=n}Nt.prototype.kind="child.index",t(Nt,Dt);function kt(){}kt.prototype={listener:null,beforeEvent:function(t){return null==this.listener||!this.listener.beforeEvent||this.listener.beforeEvent(t)},onEvent:function(t){null!=this.listener&&this.listener.onEvent&&this.listener.onEvent(t)}};function Mt(t,i){this.listener=t,this.scope=i,t instanceof Function?this.onEvent=t:(this.onEvent=t.onEvent,this.beforeEvent=t.beforeEvent),this.equals=function(t){return t&&this.listener==t.listener&&this.scope==t.scope}}var Bt=function(){c(this,Bt,arguments),this.events={},this.listeners=[]};Mt.prototype={equals:function(t){return t&&this.listener==t.listener&&this.scope==t.scope},destroy:function(){delete this.scope,delete this.listener}},Bt.prototype={listeners:null,_m17:function(){return this.listeners&&0<this.listeners.length},_6v:function(t,i){return t instanceof Bt?t:new Mt(t,i)},_9r:function(t,i){if(t instanceof Bt)return this.listeners.indexOf(t);for(var e=this.listeners,n=0,r=e.length;n<r;n++){var s=e[n];if(s.listener==t&&s.scope==i)return n}return-1},contains:function(t,i){return 0<=this._9r(t,i)},addListener:function(t,i){if(this.contains(t,i))return!1;this.listeners.push(this._6v(t,i))},removeListener:function(t,i,e){var n=this._9r(t,i);0<=n&&this.listeners.splice(n,1)},on:function(t,i){this.addListener(t,i)},un:function(t,i,e){this.removeListener(t,i,e)},onEvent:function(i){if(!this.listeners)return!1;b(this.listeners,function(t){t.onEvent&&(t.scope?t.onEvent.call(t.scope,i):t.onEvent(i))},this)},beforeEvent:function(i){return!this.listeners||b(this.listeners,function(t){return!t.beforeEvent||(t.scope?t.beforeEvent.call(t.scope,i):t.beforeEvent(i))},this)},_dg:function(t){return!1!==this.beforeEvent(t)&&(this.onEvent(t),!0)},clear:function(){this.listeners=[]},destroy:function(){this.clear()}},t(Bt,kt);function Gt(t,i,e,n,r){this.source=t,this.type="list",this.kind=i,this.data=e,this.index=n,this.oldIndex=r}Gt.prototype={index:-1,oldIndex:-1,toString:function(){return"source: "+this.source+", type: "+this.type+", kind: "+this.kind+", data: "+this.data+", index: "+this.index+", oldIndex: "+this.oldIndex}},t(Gt,xt),Gt.KIND_ADD="add",Gt.KIND_REMOVE="remove",Gt.KIND_CLEAR="clear",Gt.KIND_INDEX_CHANGE="index.change";function Ft(){this.id=++m,this._m34={}}Ft.prototype={_m34:null,id:null,get:function(t){return this._m34[t]},set:function(t,i){var e=this.get(t);if(e===i)return!1;var n=new Dt(this,t,i,e);return n.propertyType=Ii.PROPERTY_TYPE_CLIENT,this._m0o(t,i,n,this._m34)},_m0o:function(t,i,e,n){return!1!==this.beforeEvent(e)&&(n=n||this._m34,void 0===i?delete n[t]:n[t]=i,this.onEvent(e),!0)},remove:function(t){this.set(t,null)},valueOf:function(){return this.id},toString:function(){return this.id},_dr:function(t,i){if(void 0===i&&(i=-1),this==t||t==this._ja)return!1;if(t&&this==t._ja&&!t._dr(null))return!1;var e,n,r=new Ct(this,t,i);if(!this.beforeEvent(r))return!1;var s,o,h,a,l,_=this._ja;return!(t&&(e=new Rt(t,this),!t.beforeEvent(e))||null!=_&&(n=new Pt(_,this),!_.beforeEvent(n))||(null!=(this._ja=t)&&(a=this,l=i,(h=t).children.add(a,l),h.onChildAdd(a,l)),null!=_&&(o=this,(s=_)._fr&&(s._fr.remove(o),s.onChildRemove(o))),this.onEvent(r),null!=t&&t.onEvent(e),null!=_&&_.onEvent(n),this.onParentChanged(_,t),0))},addChild:function(t,i){var e=t._dr(this,i);return e&&this.onChildAdd(t,i),e},removeChild:function(t){if(!this._fr||!this._fr.contains(t))return!1;var i=t._dr(null);return this.onChildRemove(t),i},toChildren:function(){return this._fr?this._fr.toDatas():null},clearChildren:function(){if(this._fr&&this._fr.length){var t=this.toChildren();b(t,function(t){t._dr(null)},this),this.onChildrenClear(t)}},forEachChild:function(t,i){return!!this.hasChildren()&&this._fr.forEach(t,i)},onChildAdd:function(t,i){},onChildRemove:function(t){},onChildrenClear:function(t){},onParentChanged:function(t,i){},getChildIndex:function(t){return this._fr&&this._fr.length?this._fr.indexOf(t):-1},setChildIndex:function(t,i){if(!this._fr||!this._fr.length)return!1;var e=this._fr.indexOf(t);if(e<0||e==i)return!1;var n=new Nt(this,t,e,i);return!1!==this.beforeEvent(n)&&(this._fr.remove(t)&&this._fr.add(t,i),this.onEvent(n),!0)},hasChildren:function(){return this._fr&&0<this._fr.length},getChildAt:function(t){return null==this._fr?null:this._fr._j2[t]},isDescendantOf:function(t){if(!t.hasChildren())return!1;for(var i=this.parent;null!=i;){if(t==i)return!0;i=i.parent}return!1},firePropertyChangeEvent:function(t,i,e,n){this.onEvent(new Dt(this,t,i,e,n))}},t(Ft,kt),it(Ft.prototype,{childrenCount:{get:function(){return this._fr?this._fr.length:0}},children:{get:function(){return this._fr||(this._fr=new ht),this._fr}},parent:{get:function(){return this._ja},set:function(t){this._dr(t,-1)}},properties:{get:function(){return this._m34},set:function(t){this._m34!=t&&(this._m34=t)}}});function $t(){this._j2=[],this._kw={},this._1b=new Bt}$t.prototype={beforeEvent:function(t){return null==this._1b||!this._1b.beforeEvent||this._1b.beforeEvent(t)},onEvent:function(t){this._1b instanceof Function?this._1b(t):null!=this._1b&&this._1b.onEvent&&this._1b.onEvent(t)},_1b:null,setIndex:function(t,i){if(!this.contains(t))throw new Error("'"+t.getId()+"' not exist");var e=this.indexOf(t);if(e==i)return!1;var n=new Gt(this,Gt.KIND_INDEX_CHANGE,t,i,e);return!1!==this.beforeEvent(n)&&(0<=this._j2.remove(t)&&this._j2.add(i,t),this.onEvent(n),!0)},_fp:function(t,i){if(0==t.length)return!1;var e=!1,n=0<=i,r=new Gt(this,Gt.KIND_ADD,t,i);if(!1===this.beforeEvent(r))return!1;for(var s=[],o=0,h=(t=t._j2||t).length;o<h;o++){var a=t[o];null!=a&&this._ka(a,i,!0)&&(s.push(a),e=!0,n&&i++)}return r.data=s,this.onEvent(r),e},_ka:function(t,i,e){if(!1===this.accept(t))return!1;if(e)return v(this,$t,"_ka",arguments);var n=new Gt(this,Gt.KIND_ADD,t,i);return!1!==this.beforeEvent(n)&&!!v(this,$t,"_ka",arguments)&&(this._k9(t,n),t)},_k9:function(t,i){this.onEvent(i)},_m0q:function(t){if(0==t.length)return!1;var i=new Gt(this,Gt.KIND_REMOVE,t);if(!1===this.beforeEvent(i))return!1;for(var e=[],n=!1,r=0,s=(t=t._j2||t).length;r<s;r++){var o=t[r];if(null!=o){var h=o.id||o;void 0===o.id&&(o=null),this._fk(h,o,!0)&&(e.push(o),n=!0)}}return i.data=e,this.onEvent(i),n},_fk:function(t,i,e){if(e)return v(this,$t,"_fk",arguments);var n=new Gt(this,Gt.KIND_REMOVE,i);return!1!==this.beforeEvent(n)&&!!v(this,$t,"_fk",arguments)&&(this.onEvent(n),!0)},clear:function(){if(this.isEmpty())return!1;var t=new Gt(this,Gt.KIND_CLEAR,this.toDatas());return!1!==this.beforeEvent(t)&&!!v(this,$t,"clear")&&(this.onEvent(t),!0)},accept:function(t){return!this.filter||!1!==this.filter(t)}},t($t,ht),tt($t.prototype,"listChangeDispatcher",{get:function(){return this._1b}});var jt=function(){c(this,jt,arguments),this.selectionChangeDispatcher=new Bt,this._selectionModel=new zt(this),this._selectionModel._1b=this.selectionChangeDispatcher,this.dataChangeDispatcher=new Bt,this.dataChangeDispatcher.addListener({beforeEvent:this.beforeDataPropertyChange,onEvent:this.onDataPropertyChanged},this),this.parentChangeDispatcher=new Bt,this.childIndexChangeDispatcher=new Bt,this.$roots=new ht;var r=this;this.$roots.setIndex=function(t,i){if(!r.$roots.contains(t))throw new Error("'"+t.id+"' not exist");var e=r.$roots._j2.indexOf(t);if(e==i)return!1;r.$roots._j2.splice(e,1),r.$roots._j2.splice(i,0,t),r._m3aIndexFlag=!0;var n=new Nt(r,t,e,i);return r._1t(n),!0}};jt.prototype={selectionModel:null,selectionChangeDispatcher:null,dataChangeDispatcher:null,parentChangeDispatcher:null,roots:null,_k9:function(t,i){t.listener=this.dataChangeDispatcher,t.parent||this.$roots.add(t),this.onEvent(i)},_fk:function(t,i){if(v(this,jt,"_fk",arguments)){if(i instanceof Vn)i.disconnect();else if(i instanceof Jn){var e=i.getEdges();this.remove(e)}var n=i.parent;return null==n?this.$roots.remove(i):(n.removeChild(i),n.__6e=!0),i.hasChildren()&&this.remove(i.toChildren()),!(i.listener=null)}return!1},_5b:function(t){var i=t.source;this.contains(i)&&(null==i.parent?this.$roots.add(i):null==t.oldValue&&this.$roots.remove(i),this.parentChangeDispatcher.onEvent(t))},_1t:function(t){this.childIndexChangeDispatcher.onEvent(t)},beforeDataPropertyChange:function(t){return!(t instanceof Ct)||this.parentChangeDispatcher.beforeEvent(t)},onDataPropertyChanged:function(t){if(t instanceof Ct)return this._m3aIndexFlag=!0,t.source._m3aIndexFlag=!0,void this._5b(t);t instanceof Nt&&(this._m3aIndexFlag=!0,t.source._m3aIndexFlag=!0,this._1t(t))},toRoots:function(){return this.$roots.toDatas()},_fm:function(t){var i,e=t._ja,n=(i=e?e._fr:this.$roots).indexOf(t);if(n<0)throw new Error("data '"+t+"' not exist in the box");return 0==n?e:i.getByIndex(n-1)},_fo:function(t){var i,e=t._ja,n=(i=e?e._fr:this.$roots).indexOf(t);if(n<0)throw new Error("data '"+t+"' not exist in the box");return n==i.length-1?e?this._fo(e):null:i.getByIndex(n+1)},forEachByDepthFirst:function(t,i,e){return!!this.$roots.length&&n(this.$roots,t,i,e)},forEachByDepthFirstReverse:function(t,i,e){return!!this.$roots.length&&r(this.$roots,t,i,e)},forEachByBreadthFirst:function(t,i){return!!this.$roots.length&&e(this.$roots,t,i)},forEachByBreadthFirstReverse:function(t,i){return!!this.$roots.length&&function(t,i,e){for(var n,r=(t._j2||t).slice(0);r.length;){if(n=r[r.length-1],r=r.splice(0,r.length-1),!1===i.call(e,n))return!1;if(n.hasChildren()){var s=n.children;s=s._j2||s,r=r.concat(s)}}return!0}(this.$roots,t,i)},clear:function(){return!!v(this,jt,"clear")&&(this.$roots.clear(),this.selectionModel.clear(),!0)}},t(jt,$t),it(jt.prototype,{selectionModel:{get:function(){return this._selectionModel}},roots:{get:function(){return this.$roots}}});var zt=function(t){c(this,zt),this.box=t,this._m1oxChangeListener={onEvent:function(t){Gt.KIND_REMOVE==t.kind?null!=t.data?this.remove(t.data):null!=t.datas&&this.remove(t.datas):Gt.KIND_CLEAR==t.kind&&this.clear()}},this.box.listChangeDispatcher.addListener(this._m1oxChangeListener,this)};function Yt(t){return t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,i){return i.toUpperCase()})}zt.prototype={box:null,isSelected:function(t){return this.containsById(t.id||t)},select:function(t){return this.add(t)},unselect:function(t){return this.remove(t)},reverseSelect:function(t){return this.contains(t)?this.remove(t):this.add(t)},accept:function(t){return this.box.contains(t)}},t(zt,$t);var Ut=null,Ht=null,Wt=function(){if(!y.createElement)return function(t){return t};var e=y.createElement("div").style,n={};return function(t){if(n[t])return n[t];var i=Yt(t);return void 0!==e[i]||Ht&&void 0!==e[i=Yt(Ht+i)]?n[t]=i:t}}();function qt(t,i){var e,n,r=t.style;if(!r)return!1;for(e in i)i.hasOwnProperty(e)&&(n=Wt(e))&&(r[n]=i[e]);return t}function Vt(t){var i,e,n="";for(i in t)t.hasOwnProperty(i)&&(e=Wt(i))&&(n+=e.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")+":"+t[i]+";");return n?n.substring(0,n.length-1):n}function Xt(t,i,e){(i=Wt(i))&&(t.style[i]=e)}function Kt(t,i){if(!Ut)return!1;i&&!H(i)&&(i=Vt(i)),Ut.insertRule?Ut.insertRule(t+"{"+i+"}",0):Ut.addRule&&Ut.addRule(t,i,0)}var Zt={};function Jt(t,i){var e=t.clientWidth;return e?(i=i||t.getBoundingClientRect()).width/e:1}!function(){if(y.head){for(var t=y.head,i="Webkit Moz O ms Khtml".split(" "),e=0;e<i.length;e++)if(void 0!==t.style[i[e]+"Transform"]){Ht="-"+i[e].toLowerCase()+"-";break}var n,r,s=y.createElement("style");for(var o in u.createPopup||s.appendChild(y.createTextNode("")),s.type="text/css",s.id="qunee-styles",t.appendChild(s),Ut=s.sheet,Zt){var h=Zt[o];for(var a in n=o,r="",h)r+=Wt(a)+":"+h[a]+";\n";Kt(n,r)}}}();function Qt(t,i,e,n,r){if(r){var s=function(t){s.handle.call(s.scope,t)};return s.scope=r,s.handle=e,t.addEventListener(i,s,n),s}return t.addEventListener(i,e,n),e}var ti,ii,ei;if(ot.DOUBLE_CLICK_INTERVAL_TIME=200,ot.LONG_PRESS_INTERVAL=800,ot.DELAY_CLICK=!0,u.navigator&&navigator.userAgent){var ni,ri="ontouchstart"in u,si=ri&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent);if(si)ni="touchstart,touchmove,touchend,touchcancel";else{var oi="onmousewheel"in u?"mousewheel":"DOMMouseScroll";ni="contextmenu,mousedown,mouseup,click,dblclick,mousemove,keydown,keyup,"+oi,ri&&(ni+=",touchstart,touchmove,touchend,touchcancel")}ni=ni.split(/[\s,]+/);function hi(t){return ot.DOUBLE_CLICK_INTERVAL_TIME}function ai(t){return t.defaultPrevented||!1===t.returnValue}function li(t){Ei._m3urrentItem&&Ei._m3urrentItem._onWindowMouseMove(t)}function _i(t){Ei._m3urrentItem&&(Ei._m3urrentItem._onWindowMouseUp(t),ci(null))}var ui=function(t){return u.TouchEvent&&t instanceof u.TouchEvent},q=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},V=function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},X=function(t){q(t),V(t)},ci=function(t){Ei._m3urrentItem!=t&&(Ei._m3urrentItem&&(Ei._m3urrentItem.__dragging=!1),Ei._m3urrentItem=t)};function fi(t,i){var e,n;n=t.touches?(e=t.cx,t.cy):(e=t.clientX,t.clientY);var r=Jt(i);return r&&1!==r&&(e/=r,n/=r),{timeStamp:t.timeStamp,x:e,y:n}}function di(t,i,e){this._kz=t,this._scope=e,this._handler=i,this._dragPoints=new vi,this._install()}di.prototype={_install:function(){var i,e;this.__m0ction||(this.__m0ction=function(t){this._m0ction(t)}.bind(this),i=this._kz,e=this.__m0ction,ni.forEach(function(t){i.addEventListener(t,e,!1)}),G||Ei._m0t||(Ei._m0t=!0,u.addEventListener("mousemove",li,!0),u.addEventListener("mouseup",_i,!0)))},_uninstall:function(){var i,e;this.__m0ction&&(i=this._kz,e=this.__m0ction,ni.forEach(function(t){i.removeEventListener(t,e,!1)}))},_m0ction:function(t){var i=(t=this._toQEvent(t)).type;!1===this._handleEvent(t,i)&&this._onEvent(t,"on"+i)},_m3ancelLongPressTimer:function(){this.__longPressTimer&&(clearTimeout(this.__longPressTimer),this.__longPressTimer=null)},__kfLongPress:function(t){this.__onLongPressFunction||(this.__onLongPressFunction=function(){this._kfEvent&&(this.__m3ancelClick=!0,this._kfEvent.button?this._onEvent(this._kfEvent,"onlongpress2"):this._onEvent(this._kfEvent,"onlongpress"))}.bind(this)),this._m3ancelLongPressTimer(),this.__longPressTimer=setTimeout(this.__onLongPressFunction,ot.LONG_PRESS_INTERVAL)},__fixTouchEvent:function(t){for(var i,e,n=0,r=0,s=t.touches.length,o=0;o<s;){var h=t.touches[o++],a=h.clientX,l=h.clientY;if(2==o){var _=e[0]-a,u=e[1]-l;i=Math.sqrt(_*_+u*u)}e=[a,l],n+=a,r+=l}t.cx=n/s,t.cy=r/s,t.center={x:t.cx,y:t.cy,clientX:t.cx,clientY:t.cy},t.distance=i},__touchCountChange:function(t){this._dragPoints.clear(),this._9g=fi(t,this._kz)},_handleTouchEvent:function(t,i){switch(i){case"touchstart":V(t),this.__fixTouchEvent(t),this.__touchCountChange(t);var e=t.touches.length;this._kfEvent||(this._kfEvent=t,this._onstart(t),this.__m3ancelClick=!1,this.__kfLongPress(t)),1==e&&(this.__kfMulTouchEvent=null),2<=e&&!this.__kfMulTouchEvent&&(this.__kfMulTouchEvent={cx:t.cx,cy:t.cy,distance:t.distance});break;case"touchmove":if(X(t),this.__fixTouchEvent(t),2<=(e=t.touches.length)&&this.__kfMulTouchEvent){var n=this.__kfMulTouchEvent.distance;t._scale=t.distance/n,this.__kfMulTouchEvent.prevScale?t.dScale=t._scale/this.__kfMulTouchEvent.prevScale:t.dScale=t._scale,this.__kfMulTouchEvent.prevScale=t._scale,this.__pinching||(this.__pinching=!0,this._onEvent(t,"startpinch"))}this.__dragging||(this.__dragging=!0,this._kfdrag(t)),this._ondrag(t),this.__pinching&&this._onEvent(t,"onpinch");break;case"touchend":X(t),(e=t.touches.length)&&(this.__fixTouchEvent(t),this.__touchCountChange(t)),e<=1&&(this.__pinching&&(this.__pinching=!1,this._onEvent(t,"endpinch")),this.__kfMulTouchEvent=null),0==e&&(this.__dragging?(this._enddrag(t),this.__dragging=!1):t.timeStamp-this._kfEvent.timeStamp<.8*hi()&&this.__onclick(this._kfEvent),this._onrelease(t));break;case"touchcancel":this.__dragging=!1,this.__pinching=!1,this.__kfMulTouchEvent=null}return!1},_handleEvent:function(t,i){if(ui(t))return this._handleTouchEvent(t,i);if("mousedown"==i)V(t),ci(this),this._9g=fi(t,this._kz),this._kfEvent||(this._kfEvent=t,this._onstart(t)),this.__m3ancelClick=!1,this.__kfLongPress(t);else if("mouseup"==i)ci(),this._onrelease(t);else if("click"==i){if(this.__m3ancelClick)return!0;if(this._isDelayClick())return this.__onclick(t),!0}else if("dblclick"==i){if(this._isDelayClick())return!0}else{if("contextmenu"==i)return this._onEvent(t,"oncontextmenu"),this._kfEvent&&ai(t)&&ci(this),!0;if(i==oi){var e=t.wheelDelta;if(void 0!==e?e/=120:e=-t.detail,!e)return;return t.delta=e,this._onEvent(t,"onmousewheel")}}return!1},_onEvent:function(t,i){if(this._handler){var e=this._handler;if(i=i||t.type,e instanceof Function)return e(t,i);if(!(e.accept instanceof Function&&!1===e.accept(i,t)))return e.onevent instanceof Function&&e.onevent(i,t,this._scope||this._kz),e[i]instanceof Function?e[i].call(e,t,this._scope||this._kz):void 0}},_toQEvent:function(t){return t},_onWindowMouseUp:function(t){this.__dragging&&(X(t),this.__dragging=!1,t=this._toQEvent(t),this._enddrag(t),this._onrelease(t),this._onEvent(t,"onmouseup"))},_kfDragDistance:4,_onWindowMouseMove:function(t){if(this._kfEvent){if(X(t),!this.__dragging){var i=this._kfEvent.screenX-t.screenX,e=this._kfEvent.screenY-t.screenY;if(i*i+e*e<this._kfDragDistance)return;this.__dragging=!0,this._kfdrag(t)}this._ondrag(this._toQEvent(t))}},_isDelayClick:function(){return ot.DELAY_CLICK},__onclick:function(t){if(!this.__m3ancelClick){var i=hi();this.__m3lickTimer?this.__dblclicked||(clearTimeout(this.__m3lickTimer),this.__m3lickTimer=null,this._onEvent(t,"ondblclick"),this.__dblclicked=!0):(this.__dblclicked=!1,this.__m3lickTimer=setTimeout(function(t,i){this.__m3lickTimer=null,this.__dblclicked||this._onEvent(t,"onclick")}.bind(this,t,i),i))}},_onstart:function(t){t.button?this._onEvent(t,"onstart2"):this._onEvent(t,"onstart")},_onrelease:function(t){this._kfEvent&&(this._m3ancelLongPressTimer(),t.button?this._onEvent(t,"onrelease2"):this._onEvent(t,"onrelease"),this._kfEvent=null,this._9g=null)},_m0ppendDragInfo:function(t){var i=this._9g;this._9g=fi(t,this._kz),this._dragPoints.add(i,this._9g,t)},_kfdrag:function(t){this.__m3ancelClick=!0,this._m3ancelLongPressTimer(),this._kfEvent.button?this._onEvent(this._kfEvent,"startdrag2"):this._onEvent(this._kfEvent,"startdrag")},_ondrag:function(t){this._m0ppendDragInfo(t),this._kfEvent.button?this._onEvent(t,"ondrag2"):this._onEvent(t,"ondrag")},_enddrag:function(t){if(t.timeStamp-this._9g.timeStamp<100){var i=this._dragPoints.getCurrentSpeed();i&&(t.vx=i.x,t.vy=i.y)}this._kfEvent.button?this._onEvent(t,"enddrag2"):this._onEvent(t,"enddrag"),this._dragPoints.clear()},_i1:function(t){this._khStatus()},_khStatus:function(){Ei._m3urrentItem==this&&delete Ei._m3urrentItem,this._m3ancelLongPressTimer(),delete this._9g,this._kfEvent&&(delete this._kfEvent.getData,delete this._kfEvent.getUI,delete this._kfEvent)}};var Ei=E(function(t){this._ke=t,di.apply(this,[t.canvasPanel,null,t])},{super:di,_lnData:function(t){return this._ke.getElementByMouseEvent(t)},_kn:function(t){return this._ke.getUIByMouseEvent(t)},_toQEvent:function(t){return(t instanceof MouseEvent||u.TouchEvent&&t instanceof u.TouchEvent)&&(t.getData=this._lnData.bind(this,t),t.getUI=this._kn.bind(this,t)),t},_onElementRemoved:function(i){this._hcListeners(function(t){t.onElementRemoved instanceof Function&&t.onElementRemoved(i,this._ke)})},_onElementClear:function(){this._hcListeners(function(t){t.onClear instanceof Function&&t.onClear(this._ke)})},_i1:function(t){this._25s&&this._i1Interactions(this._25s,t),this._m3ustomInteractionListeners&&this._i1Interactions(this._m3ustomInteractionListeners,t),this._khStatus()},_ke:null,_25s:null,_m3ustomInteractionListeners:null,_loInteraction:function(t){if(this._25s==t)return!1;this._25s&&this._25s.length&&this._i1Interactions(this._25s),this._25s=t},_lkCustomInteractionListener:function(t){this._m3ustomInteractionListeners||(this._m3ustomInteractionListeners=[]),this._m3ustomInteractionListeners.push(t)},_iqCustomInteractionListener:function(t){this._m3ustomInteractionListeners&&0!=this._m3ustomInteractionListeners.length&&O(this._m3ustomInteractionListeners,t)},_onEvent:function(t,i,e){this._ke[i]instanceof Function&&this._ke[i].call(this._ke,t,e),this._25s&&this.__onEvent(t,i,this._25s,e),this._m3ustomInteractionListeners&&this.__onEvent(t,i,this._m3ustomInteractionListeners,e)},_hcListeners:function(t){this._25s&&b(this._25s,t,this),this._m3ustomInteractionListeners&&b(this._m3ustomInteractionListeners,t,this)},__onEvent:function(t,i,e,n){if(W(e))for(var r=0;r<e.length;r++){var s=e[r];this.__handleEvent(t,i,s,n)}else this.__handleEvent(t,i,e,n)},__handleEvent:function(t,i,e,n){if(!(e.accept instanceof Function&&!1===e.accept(i,t,this._ke,n))){e.onevent instanceof Function&&e.onevent(i,t,this._ke,n);var r=e[i];r instanceof Function&&r.call(e,t,this._ke,n)}},_i1Interaction:function(t){t.destroy instanceof Function&&t.destroy.call(t,this._ke)},_i1Interactions:function(t,i){if(W(t))for(var e=0;e<t.length;e++){var n=t[e];n&&this._i1Interaction(n,i)}else this._i1Interaction(t,i)}})}function gi(t){return N&&t.metaKey||!N&&t.ctrlKey}function vi(){this.points=[]}vi.prototype={limitCount:10,points:null,add:function(t,i,e){0==this.points.length&&(this._kfX=t.x,this._kfY=t.y);var n=i.timeStamp-t.timeStamp||1;e.interval=n;var r=i.x-t.x,s=i.y-t.y;e.dx=r,e.dy=s,e.startX=this._kfX,e.startY=this._kfY,e.totalDeltaX=i.x-this._kfX,e.totalDeltaY=i.y-this._kfY,this.points.splice(0,0,{interval:n,dx:r,dy:s}),this.points.length>this.limitCount&&this.points.pop()},getCurrentSpeed:function(){if(!this.points.length)return null;for(var t=0,i=0,e=0,n=0,r=this.points.length;n<r;n++){var s=this.points[n],o=s.interval;if(150<o){t=0;break}if(t+=o,i+=s.dx,e+=s.dy,300<t)break}return 0==t||0==i&&0==e?null:{x:i/t,y:e/t}},clear:function(){this.points=[]}},ei=x?(ti="-webkit-zoom-in",ii="-webkit-zoom-out","-webkit-grabbing"):D?(ti="-moz-zoom-in",ii="-moz-zoom-out","-moz-grabbing"):(ii=ti="crosshair","move");function pi(t){this._jk=t}var mi=Math.PI,yi=Math.pow,Ti=Math.sin,Oi=1.70158,Ai={swing:function(t){return-Math.cos(t*mi)/2+.5},easeNone:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return(2-t)*t},easeBoth:function(t){return(t*=2)<1?.5*t*t:.5*(1- --t*(t-2))},easeInStrong:function(t){return t*t*t*t},easeOutStrong:function(t){return 1- --t*t*t*t},easeBothStrong:function(t){return(t*=2)<1?.5*t*t*t*t:.5*(2-(t-=2)*t*t*t)},elasticIn:function(t){return 0===t||1===t?t:-yi(2,10*--t)*Ti(2*mi*(t-.075)/.3)},elasticOut:function(t){return 0===t||1===t?t:yi(2,-10*t)*Ti(2*mi*(t-.075)/.3)+1},elasticBoth:function(t){return 0===t||2==(t*=2)?t:t<1?yi(2,10*--t)*Ti(2*mi*(t-.1125)/.45)*-.5:yi(2,-10*--t)*Ti(2*mi*(t-.1125)/.45)*.5+1},backIn:function(t){return 1===t&&(t-=.001),t*t*((Oi+1)*t-Oi)},backOut:function(t){return--t*t*((Oi+1)*t+Oi)+1},backBoth:function(t){return(t*=2)<1?t*t*((1+(Oi*=1.525))*t-Oi)*.5:.5*((t-=2)*t*((1+(Oi*=1.525))*t+Oi)+2)},bounceIn:function(t){return 1-Ai.bounceOut(1-t)},bounceOut:function(t){var i=7.5625;return t<1/2.75?i*t*t:t<2/2.75?i*(t-=1.5/2.75)*t+.75:t<2.5/2.75?i*(t-=2.25/2.75)*t+.9375:i*(t-=2.625/2.75)*t+.984375},bounceBoth:function(t){return t<.5?.5*Ai.bounceIn(2*t):.5*Ai.bounceOut(2*t-1)+.5}};pi.prototype={_jk:null,_8b:function(){this._m3allback instanceof Function&&(this._m3allback(),this._m3allback=null)},_kf:function(t){var n=Date.now();this._l7(),this._m3allback=t,this._requestID=requestAnimationFrame(function t(){var i=Date.now(),e=i-n;!e||this._jk&&!1!==this._jk(e)?(n=i,this._requestID=requestAnimationFrame(t.bind(this))):this._l7()}.bind(this))},_6x:function(){},_l7:function(){if(!this._requestID)return!1;this._6x(),this._8b(),u.cancelAnimationFrame(this._requestID),delete this._requestID},_e0:function(){return null!=this._requestID}};function wi(t,i,e,n){this._onStep=t,this._scope=i||this,this._3c=n,e&&0<e&&(this._i8=e)}wi.prototype={_i8:1e3,_3c:null,_e2:0,_l7:function(){return this._e2=0,this._m3k=0,v(this,wi,"_l7")},_m3k:0,_jk:function(t){if(this._e2+=t,this._e2>=this._i8)return this._onStep.call(this._scope,1,(1-this._m3k)*this._i8,t,this._i8),!1;var i=this._e2/this._i8;if(this._3c&&(i=this._3c(i)),!1===this._onStep.call(this._scope,i,(i-this._m3k)*this._i8,t,this._i8))return!1;this._m3k=i}},t(wi,pi);var bi=function(t){st(t)};function Li(i,e,n,t,r){!1!==n&&!1!==t||(r=!1);try{var s,o=new XMLHttpRequest,h=encodeURI(i);!1!==r&&(s=0<h.indexOf("?")?"&":"?",h+=s+"__time="+Date.now()),o.open("GET",h),o.onreadystatechange=function(t){4==o.readyState&&(o.status&&200!=o.status?(n||bi)("'"+i+"' load error"):e&&e(o))},o.send(t)}catch(t){(n||bi)("'"+i+"' load error",t)}}var Si={version:"0.0",extend:t,doSuperConstructor:c,doSuper:v,createFunction:function(t,i){return i.bind(t)},setClass:j,appendClass:z,removeClass:Y,forEach:b,forEachReverse:g,isNumber:U,isString:H,isBoolean:function(t){return void 0!==t&&(t instanceof Boolean||"boolean"==typeof t)},isArray:W,eventPreventDefault:q,eventStopPropagation:V,stopEvent:X,callLater:function(t,i,e){return i instanceof Object?t=t.bind(i):i&&!e&&(e=parseInt(i)),i&&!e&&(e=parseInt(i)),e?setTimeout(t,e):setTimeout(t)},nextFrame:function(t,i){return i&&(t=t.bind(i)),u.requestAnimationFrame(t)},forEachChild:o,forEachByDepthFirst:n,forEachByDepthFirstReverse:r,forEachByBreadthFirst:e,randomInt:K,randomBool:function(){return.5<=Math.random()},randomColor:function(t){if(t&&0<t&&t<1){var i=Math.floor(16777215*Math.random());return"rgba("+(i>>16&255)+","+(i>>8&255)+","+(255&i)+","+t.toFixed(2)+")"}return Q(Math.floor(16777215*Math.random()))},addEventListener:Qt,getFirstElementChildByTagName:function(t,i){i=i.toUpperCase();for(var e=L?t.firstChild:t.firstElementChild;e&&(1!=e.nodeType||e.tagName&&e.tagName.toUpperCase()!=i);)e=L?e.nextSibling:e.nextElementSibling;return e&&1==e.nodeType&&e.tagName&&e.tagName.toUpperCase()==i?e:null}};Si.isTouchSupport=G,Si.isIOS=k,Si.intersectsPoint=gt,Si.containsRect=vt,Si.Rect=pt,Si.Size=dt,Si.Point=lt,Si.Insets=mt,Si.Event=xt,Si.PropertyChangeEvent=Dt,Si.ListEvent=Gt,Si.Handler=kt,Si.Dispatcher=Bt,Si.Position=yt,Si.Data=Ft,Si.SelectionModel=zt,Si.DataModel=jt,Si.IListener={onEvent:function(t){},beforeEvent:function(t){}},Si.loadURL=Li,Si.loadXML=function(e,n,r,t,i){Li(e,function(t){if(n){var i=t.responseXML;if(!i)return void(r||bi)("'"+e+"' XML format error.");n(i)}},r,t,i)},Si.loadJSON=function(n,r,s,t,i){Li(n,function(t){if(r){var i,e=t.responseText;if(!e)return(s||bi)("'"+n+"' JSON format error."),i=new Error("'"+n+"' JSON format error."),r(e,i);try{e=JSON.parse(e)}catch(t){(s||bi)(t),i=t}r(e,i)}},s,t,i)},Si.isMetaKey=gi,Si.calculateDistance=_t,Si.HashList=ht,Si.DragSupport=di,Si.alert=function(t){alert(t)},Si.prompt=function(t,i,e,n){var r=prompt(t,i);return r!=i&&e?e.call(n,r):r},Si.confirm=function(t,i,e){var n=confirm(t);return n&&i?i.call(e):n},Si.addCSSRule=Kt;var Ii={IMAGE_ADJUST_FLIP:"flip",IMAGE_ADJUST_MIRROR:"mirror",SELECTION_TYPE_BORDER_RECT:"border.rect",SELECTION_TYPE_BORDER:"border",SELECTION_TYPE_SHADOW:"shadow",NS_SVG:"http://www.w3.org/2000/svg",PROPERTY_TYPE_ACCESSOR:0,PROPERTY_TYPE_STYLE:1,PROPERTY_TYPE_CLIENT:2,EDGE_TYPE_DEFAULT:null,EDGE_TYPE_ELBOW:"elbow",EDGE_TYPE_ELBOW_HORIZONTAL:"elbow.H",EDGE_TYPE_ELBOW_VERTICAL:"elbow.V",EDGE_TYPE_ORTHOGONAL:"orthogonal",EDGE_TYPE_ORTHOGONAL_HORIZONTAL:"orthogonal.H",EDGE_TYPE_ORTHOGONAL_VERTICAL:"orthogonal.V",EDGE_TYPE_HORIZONTAL_VERTICAL:"orthogonal.H.V",EDGE_TYPE_VERTICAL_HORIZONTAL:"orthogonal.V.H",EDGE_TYPE_EXTEND_TOP:"extend.top",EDGE_TYPE_EXTEND_LEFT:"extend.left",EDGE_TYPE_EXTEND_BOTTOM:"extend.bottom",EDGE_TYPE_EXTEND_RIGHT:"extend.right",EDGE_TYPE_ZIGZAG:"zigzag",EDGE_CORNER_NONE:"none",EDGE_CORNER_ROUND:"round",EDGE_CORNER_BEVEL:"bevel",GROUP_TYPE_RECT:"rect",GROUP_TYPE_CIRCLE:"circle",GROUP_TYPE_ELLIPSE:"ELLIPSE",SHAPE_CIRCLE:"oval",SHAPE_RECT:"rect",SHAPE_ROUNDRECT:"roundrect",SHAPE_STAR:"star",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",SHAPE_PENTAGON:"pentagon",SHAPE_TRAPEZIUM:"trapezium",SHAPE_RHOMBUS:"rhombus",SHAPE_PARALLELOGRAM:"parallelogram",SHAPE_HEART:"heart",SHAPE_DIAMOND:"diamond",SHAPE_CROSS:"cross",SHAPE_ARROW_STANDARD:"arrow.standard",SHAPE_ARROW_1:"arrow.1",SHAPE_ARROW_2:"arrow.2",SHAPE_ARROW_3:"arrow.3",SHAPE_ARROW_4:"arrow.4",SHAPE_ARROW_5:"arrow.5",SHAPE_ARROW_6:"arrow.6",SHAPE_ARROW_7:"arrow.7",SHAPE_ARROW_8:"arrow.8",SHAPE_ARROW_OPEN:"arrow.open"};function Et(t,i,e,n,r,s,o,h){return!(o<=0||h<=0||e<=0||n<=0)&&(h+=s,e+=t,n+=i,((o+=r)<r||t<o)&&(h<s||i<h)&&(e<t||r<e)&&(n<i||s<n))}function vt(t,i,e,n,r,s,o,h){return t<=r&&i<=s&&r+o<=t+e&&s+h<=i+n}function xi(t,i,e){return t instanceof Object&&t.x?Ci(t,i,0,0):Di(t,i,e,0,0)}function Di(t,i,e,n,r){var s=Math.sin(e),o=Math.cos(e),h=t-n,a=i-r;return new lt(t=h*o-a*s+n,i=h*s+a*o+r,e)}function Ci(t,i,e,n){e=e||0,n=n||0;var r=Math.sin(i),s=Math.cos(i),o=t.x-e,h=t.y-n;return t.x=o*s-h*r+e,t.y=o*r+h*s+n,t}function Ri(t,i,e){return Pi(t,i,e,0,0)}function Pi(t,i,e,n,r){var s=Di(t.x,t.y,i,n,r),o=Di(t.x+t.width,t.y,i,n,r),h=Di(t.x+t.width,t.y+t.height,i,n,r),a=Di(t.x,t.y+t.height,i,n,r);return e?e.clear():e=new pt,e.addPoint(s),e.addPoint(o),e.addPoint(h),e.addPoint(a),e}Ii.LINE_CAP_TYPE_BUTT="butt",Ii.LINE_CAP_TYPE_ROUND="round",Ii.LINE_CAP_TYPE_SQUARE="square",Ii.LINE_JOIN_TYPE_BEVEL="bevel",Ii.LINE_JOIN_TYPE_ROUND="round",Ii.LINE_JOIN_TYPE_MITER="miter",Ii.EDGE_BUNDLE_TYPE_CURVE="curve",Ii.EDGE_BUNDLE_TYPE_PARALLEL="parallel",Ii.EDGE_BUNDLE_TYPE_ELBOW="elbow",ot.SELECTION_TYPE=Ii.SELECTION_TYPE_SHADOW,ot.SELECTION_TOLERANCE=si?8:3,ot.SELECTION_BORDER=2,ot.SELECTION_SHADOW_BLUR=7,ot.SELECTION_COLOR=Q(3422561023),ot.SELECTION_TYPE=Ii.SELECTION_TYPE_SHADOW,ot.BORDER_RADIUS=10,ot.POINTER_WIDTH=10,ot.ARROW_SIZE=10,ot.IMAGE_MAX_SIZE=200,ot.LINE_HEIGHT=1.2;var Ni,ki=u.devicePixelRatio||1;function Mi(t,i){var e=this.ratio||1;this.style.width=t+"px",this.style.height=i+"px",this.width=t*e,this.height=i*e}function Bi(t,i,e){var n=y.createElement("canvas");if(n.g=n.getContext("2d"),!0!==t&&!e)return t&&i&&(n.width=t,n.height=i),n;var r,s,o=n.g;return o.ratio=n.ratio=(s=(r=o).webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1,ki/s),n.setSize=Mi,o._kh=function(){this.canvas.width=this.canvas.width},t&&i&&n.setSize(t,i),n}function Gi(t,i){return Ni=Ni||Bi(),t&&i&&(Ni.width=t,Ni.height=i),Ni.g}ki<1&&(ki=1),Si.createCanvas=Bi;var Fi=R&&!G,$i=9;function ji(t,i,e){return(e||ot.FONT_STYLE)+" "+(i||ot.FONT_SIZE)+"px "+(t||ot.FONT_FAMILY)}function zi(t,i,e,n,r){var s;try{s=t.getImageData(i,e,n,r)}catch(t){}return s}function Yi(r,s){var o=1/(s=s||r(1)),h=.5*o,a=Math.min(1,s/100);return function(t){if(t<=0)return 0;if(s<=t)return 1;for(var i=t*o,e=0;e++<10;){var n=t-r(i);if(Math.abs(n)<=a)return i;i+=n*h}return i}}function Ui(t,i,e){var n=1-t,r=n*n*i[0]+2*n*t*i[2]+t*t*i[4],s=n*n*i[1]+2*n*t*i[3]+t*t*i[5];if(e){var o=(i[0]+i[4]-2*i[2])*t+i[2]-i[0],h=(i[1]+i[5]-2*i[3])*t+i[3]-i[1];return{x:r,y:s,rotate:Math.atan2(h,o)}}return{t:t,x:r,y:s}}function Hi(t,i,e){var n=t-2*i+e;return 0!=n?(t-i)/n:-1}function Wi(t,i){return Math.abs(t-i)<1e-7}function qi(t,i){return Wi(t[0],i[0])&&Wi(t[1],i[1])}function Vi(t){if(qi([t[0],t[1]],[t[2],t[3]])){var i=t[0],e=t[1],n=t[4],r=t[5],s=Math.sqrt(Ji(i,e,n,r));return function(t){return s*t}}if(qi([t[0],t[1]],[t[4],t[5]])||qi([t[2],t[3]],[t[4],t[5]]))return i=t[0],e=t[1],n=t[2],r=t[3],s=Math.sqrt(Ji(i,e,n,r)),function(t){return s*t};var o=t[0],h=t[2],a=t[4],l=o-2*h+a,_=2*h-2*o,u=(o=t[1])-2*(h=t[3])+(a=t[5]),c=2*h-2*o,f=4*(l*l+u*u),d=4*(l*_+u*c),E=_*_+c*c;if((s=4*f*E-d*d)<1e-5&&-1e-5<s){var g=_t(t[0],t[1],t[2],t[3]),v=_t(t[2],t[3],t[4],t[5]);return function(t){return(2*g+(v-g)*t)*t}}var p,m=1/s,y=.125*Math.pow(f,-1.5),T=2*Math.sqrt(f),O=(s*(p=d/Math.sqrt(s),Math.log(p+Math.sqrt(p*p+1)))+Math.sqrt(f)*(2*d)*Math.sqrt(E))*y;return function(t){var i=d+2*t*f,e=i/Math.sqrt(s),n=i*i*m;return(s*Math.log(e+Math.sqrt(1+n))+T*i*Math.sqrt(E+t*d+t*t*f))*y-O}}function Xi(t,i,e){var n=1-t,r=i[0],s=i[2],o=i[4],h=i[6],a=r*n*n*n+3*s*t*n*n+3*o*t*t*n+h*t*t*t;if(e)var l=3*t*t*h+(6*t-9*t*t)*o+(9*t*t-12*t+3)*s+(-3*t*t+6*t-3)*r;var _=(r=i[1])*n*n*n+3*(s=i[3])*t*n*n+3*(o=i[5])*t*t*n+(h=i[7])*t*t*t;if(e){var u=3*t*t*h+(6*t-9*t*t)*o+(9*t*t-12*t+3)*s+(-3*t*t+6*t-3)*r;return{x:a,y:_,rotate:Math.atan2(u,l)}}return{x:a,y:_}}function Ki(t,i){i.add(t[6],t[7]);var e=function(t,i,e,n,r,s,o,h){for(var a,l,_,u,c,f,d,E,g=[],v=0;v<2;++v)if(_=0===v?(l=6*t-12*e+6*r,a=-3*t+9*e-9*r+3*o,3*e-3*t):(l=6*i-12*n+6*s,a=-3*i+9*n-9*s+3*h,3*n-3*i),Math.abs(a)<1e-12){if(Math.abs(l)<1e-12)continue;0<(u=-_/l)&&u<1&&g.push(u)}else d=l*l-4*_*a,E=Math.sqrt(d),d<0||(0<(c=(-l+E)/(2*a))&&c<1&&g.push(c),0<(f=(-l-E)/(2*a))&&f<1&&g.push(f));return g}.apply(this,t);if(e)for(var n=0;n<e.length;n++){var r=e[n];if(!(r<0||1<r)){var s=Xi(r,t);i.add(s.x,s.y)}}}function Zi(t,i,e){return Ji(i,e,t.cx,t.cy)<=t._squareR+re}var Ji=function(t,i,e,n){var r=t-e,s=i-n;return r*r+s*s};function Qi(t,i,e,n){return e=e||(s=i,_t((r=t).x,r.y,s.x,s.y)),new te((t.x+i.x)/2,(t.y+i.y)/2,e/2,t,i,null,n);var r,s}function te(t,i,e,n,r,s,o){this.cx=t,this.cy=i,this.r=e,this._squareR=e*e,this.p1=n,this.p2=r,this.p3=s,this._otherPoint=o}function ie(t,i,e,n){this.cx=t,this.cy=i,this.width=e,this.height=n}function ee(t){var i=t[0],e=t[1],n=t[2];return function t(i,e,n,r,s){for(var o,h,a=i.length,l=s._squareR,_=0;_<a;_++)if((o=i[_])!=e&&o!=n&&o!=r){var u=Ji(s.cx,s.cy,o.x,o.y);l<u-re&&(l=u,h=o)}if(!h)return s;var c,f=te._m3reateCircle(h,e,n),d=te._m3reateCircle(h,e,r),E=te._m3reateCircle(h,r,n);return Zi(f,r.x,r.y)&&(c=f),Zi(d,n.x,n.y)&&(!c||c.r>d.r)&&(c=d),Zi(E,e.x,e.y)&&(!c||c.r>E.r)&&(c=E),t(i,e=c.p1,n=c.p2,r=c.p3||c._otherPoint,c)}(t,i,e,n,te._m3reateCircle(i,e,n))}function ne(t,i){for(var e,n=(i=i||function(t){for(var i,e=t.length,n=new pt,r=0;r<e;r++)i=t[r],n.add(i.x,i.y);return n}(t)).width/i.height,r=[],s=t.length,o=0;o<s;o++)e=t[o],r.push({x:e.x,y:e.y*n});var h=ee(r);if(h)return new ie(h.cx,h.cy/n,2*h.r,2*h.r/n)}te.prototype={equals:function(t){return this.cx==t.cx&&this.cy==t.cy&&this.r==t.r}},te._m3reateCircle=function(t,i,e){if(!e)return Qi(t,i);var n,r=Ji(t.x,t.y,i.x,i.y),s=Ji(t.x,t.y,e.x,e.y),o=Ji(e.x,e.y,i.x,i.y);if(s+o<=r+re)return Qi(t,i,0,e);if(r+o<=s+re)return Qi(t,e,0,i);if(r+s<=o+re)return Qi(i,e,0,t);Math.abs(e.y-i.y)<1e-4&&(n=t,t=i,i=n),n=e.x*(t.y-i.y)+t.x*(i.y-e.y)+i.x*(-t.y+e.y);var h=(e.x*e.x*(t.y-i.y)+(t.x*t.x+(t.y-i.y)*(t.y-e.y))*(i.y-e.y)+i.x*i.x*(-t.y+e.y))/(2*n),a=(i.y+e.y)/2-(e.x-i.x)/(e.y-i.y)*(h-(i.x+e.x)/2);return new te(h,a,_t(h,a,t.x,t.y),t,i,e)};var re=.01;function se(t,i,e){if(!this._jl||this._g6.length<2){if(this._g6.length){var n=!1!==e?this._g6[0].firstPoint:this._g6[this._g6.length-1].lastPoint;return i&&(n.y+=i),t&&(n.x+=t),n}return null}var r=this._g6;!1===e&&(t+=this._jl);var s,o=r[0];if(t<=0)return Fr(o.points[0],o.points[1],r[1].points[0],r[1].points[1],t,i);if(t>=this._jl){var h,a,l=(o=r[r.length-1]).points,_=l[(d=l.length)-2],u=l[d-1];return a=4<=d?(h=l[d-4],l[d-3]):(h=(g=(o=r[r.length-2]).lastPoint).x,g.y),Fr(_,u,_+_-h,u+u-a,t-this._jl,i)}for(var c=0,f=1,d=r.length;f<d;f++)if((s=r[f])._jl){if(!(c+s._jl<t)){var E,g=o.lastPoint;if(s.type==Fe){var v=s.points;E=oe(t-c,s,g.x,g.y,v[0],v[1],v[2],v[3],s._r)}else{if(!s._lf)return Fr(g.x,g.y,s.points[0],s.points[1],t-c,i);var p=Yi(s._lf,s._jl)(t-c);v=s.points,(E=s.type==Ge&&6==v.length?Xi(p,[g.x,g.y].concat(v),!0):Ui(p,[g.x,g.y].concat(v),!0)).t=p}return i&&(E.x-=i*Math.sin(E.rotate||0),E.y+=i*Math.cos(E.rotate||0)),E}c+=s._jl,o=s}else o=s}function oe(t,i,e,n,r,s,o,h){if(t<=i._l1)return Fr(e,n,r,s,t,t);if(t>=i._jl)return t-=i._jl,Fr(i._p2x,i._p2y,o,h,t,t);if(t-=i._l1,i._o){var a=t/i._r;i._CCW&&(a=-a);var l=Di(i._p1x,i._p1y,a,i._o.x,i._o.y);return l.rotate+=i._m01||0,l.rotate+=Math.PI,l}return Fr(i._p1x,i._p1y,i._p2x,i._p2y,t,t)}function ct(t,i,e){var n,r,s;0==t._m0?(n=-1,s=0,r=i):0==t._m3?(n=0,s=1,r=e):(n=-1/t._m0,r=(t._m0-n)*i+t._m1,s=1);var o=new ut;return o._m0=n,o._m1=r,o._m3=s,o._lu=i,o._lv=e,o}function he(t){return(t%=2*Math.PI)<0&&(t+=2*Math.PI),t}function ae(t,i,e,n){return Math.atan2(n-i,e-t)}var le={_m0f:function(t,i,e,n,r){if(H(t)&&(t=yt.fromString(t)),!t)return{x:0,y:0};var s=0,o=0,h=i._jl;if(e=e||0,void 0===t.x){var a=t.horizontalPosition,l=t.verticalPosition,_=!0;switch(a){case Ot:_=!1;break;case"c":s+=h/2}switch(l){case At:o-=e/2;break;case wt:o+=e/2}}else s=t.x,o=t.y,0<Math.abs(s)&&Math.abs(s)<1&&(s*=h);r&&null!=n&&(o+=n.y,Math.abs(n.x)<1?s+=n.x*h:s+=n.x);var u=se.call(i,s,o,_);return u?(r||null==n||u.offset(n),u):{x:0,y:0}},_l8:function(t,i,e){var n=i.type,r=i.points;switch(n){case Fe:t.arcTo(r[0],r[1],r[2],r[3],i._r);break;case ke:t.moveTo(r[0],r[1]);break;case Me:t.lineTo(r[0],r[1]);break;case Be:t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case Ge:t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case $e:t.closePath()}},_5r:function(t,i,e,n){var r=i.type;if(r!=ke&&r!=$e){var s=e.lastPoint,o=i.points;switch(e.type==ke&&t.add(s.x,s.y),r){case Fe:(function(t,i,e,n,r,s,o,h){var a=_t(i,e,n,r),l=_t(n,r,s,o);if(!a||!l)return t._d=0,t._r=0,t._l1=a,t._l2=l,t._jl=0;var _=ae(n,r,i,e),u=ae(n,r,s,o),c=(t._m01=_)-(t._m02=u);(c=he(c))>Math.PI&&(c=2*Math.PI-c,t._CCW=!0);var f=Math.PI-c,d=Math.tan(c/2),E=h/d,g=Math.min(a,l);g<E&&(h=d*(E=g));var v,p=n+Math.cos(_)*E,m=r+Math.sin(_)*E,y=n+Math.cos(u)*E,T=r+Math.sin(u)*E,O=new ut(i,e,n,r),A=new ut(n,r,s,o),w=ct(O,p,m),b=ct(A,y,T),L=w._3b(b),S=Math.atan2(m-L.y,p-L.x),I=Math.atan2(T-L.y,y-L.x);v=t._CCW?I:S;for(var x,D=0;D<4;){var C,R;if(he(D*at-v)<=f&&(x?x++:x=1,R=0==D?(C=L.x+h,L.y):1==D?(C=L.x,L.y+h):2==D?(C=L.x-h,L.y):(C=L.x,L.y-h),t["$boundaryPoint"+x]={x:C,y:R},2==x))break;D++}t._p1x=p,t._p1y=m,t._p2x=y,t._p2y=T,t._o=L,t._d=E,t._r=h,t._l1=a-E,t._l2=l-E,t._jl=t._l1+f*h})(i,s.x,s.y,o[0],o[1],o[2],o[3],o[4]),t.add(o[0],o[1]),t.add(i._p1x,i._p1y),t.add(i._p2x,i._p2y),i.$boundaryPoint1&&t.add(i.$boundaryPoint1.x,i.$boundaryPoint1.y),i.$boundaryPoint2&&t.add(i.$boundaryPoint2.x,i.$boundaryPoint2.y);break;case Me:t.add(o[0],o[1]);break;case Be:!function(t,i){i.add(t[4],t[5]);var e=Hi(t[0],t[2],t[4]);if(0<e&&e<1){var n=Ui(e,t);i.add(n.x,n.y)}var r=Hi(t[1],t[3],t[5]);0<r&&r<1&&(n=Ui(r,t),i.add(n.x,n.y))}([s.x,s.y].concat(o),t);break;case Ge:Ki([s.x,s.y].concat(o),t);break;case $e:n&&t.add(n.points[0],n.points[1])}}},_5t:function(t,i,e){var n=t.type;if(n==ke)return 0;var r,s,o,h,a,l,_,u,c,f,d,E,g,v,p,m,y,T,O,A,w,b,L,S,I,x,D=i.lastPoint,C=t.points;switch(n==Ge&&4==C.length&&(n=Be),n){case Me:return _t(C[0],C[1],D.x,D.y);case Fe:return t._jl;case Be:var R=Vi([D.x,D.y].concat(C));return(t._lf=R)(1);case Ge:return b=[D.x,D.y].concat(C),S=N(b[0],b[2],b[4],b[6]),I=N(b[1],b[3],b[5],b[7]),x=1/(L=L||100),R=function(t){if(!t)return 0;for(var i,e=0,n=0;;){if(t<=(i=e+x))return n+k(e,i-e);n+=k(e,x),e=i}},(t._lf=R)(1)||(r=[D.x,D.y].concat(C),s=r[0],o=r[1],h=r[2],a=r[3],l=r[4],_=r[5],u=r[6],c=r[7],m=3*(3*(E=h-0)-(f=s-0)-3*(v=l-0)+(u-0)),y=6*(f-2*E+v),T=3*(E-f),O=3*(3*(g=a-0)-(d=o-0)-3*(p=_-0)+(c-0)),A=6*(d-2*g+p),w=3*(g-d),(P(0)+4*P(.5)+P(1))/6);case $e:if(D&&e)return t.points=e.points,_t(e.points[0],e.points[1],D.x,D.y)}function P(t){var i=m*t*t+y*t+T,e=O*t*t+A*t+w;return Math.sqrt(i*i+e*e)}function N(t,i,e,n){var r=3*i-t-3*e+n,s=2*t-4*i+2*e,o=i-t;return function(t,i){return 3*(r*t*t+s*t+o)}}function k(t,i){var e=S(t),n=I(t);return Math.sqrt(e*e+n*n)*i}return 0}},_e=/^data:image\/(\w+);base64,/i,ue=/^gif/i,ce=/^svg/i,fe=10,de=11,Ee=12,ge=20,ve=30;function pe(t,i,e,n,r){if(i&&e){t.lineWidth=.5,t.strokeStyle="#CCC",t.strokeRect(0,0,i,e),n&&(t.fillStyle=n,t.fillRect(0,0,i,e));var s=Math.min(i/50,e/38);t.save(),t.globalAlpha=.6,t.translate(i/2,e/2),t.scale(s,s),t.translate(-20,-14),t.beginPath(),t.rect(0,0,40,28),t.clip(),t.fillStyle="#f0f1f2",t.fill(),t.globalAlpha=1,t.moveTo(0,21),t.lineTo(12,12),t.lineTo(26,28),t.moveTo(18,18),t.lineTo(28,8),t.lineTo(40,18),t.lineWidth=2,t.strokeStyle="#dbdcde",t.stroke(),r&&(t.beginPath(),t.moveTo(26,-4),t.lineTo(17,11),t.lineTo(23,17),t.lineTo(14,32),t.lineWidth=5,t.strokeStyle=n||"#FFF",t.stroke()),t.restore()}}function me(t){var i=_e.exec(t);if(i)return i[1];var e=t.lastIndexOf(".");return 0<=e&&e<t.length-1?t.substring(e+1):void 0}ot.IMAGE_WIDTH=50,ot.IMAGE_HEIGHT=30,ot.IMAGE_DEFAULT={draw:function(t,i){pe(t,i.width,i.height,i.renderColor)}},ot.IMAGE_INVALID={draw:function(t,i){pe(t,i.width,i.height,i.renderColor,!0)}},ot.MAX_CACHE_PIXELS=1e6;function ye(t,i,e){if(this._kv=function(t){if(!t)return null;if(t instanceof Ye)return ve;if(t.draw instanceof Function)return ge;if(H(t)){var i=me(t);if(i){if(!L&&ue.test(i))return Ee;if(ce.test(i))return de}return fe}}(t),!this._kv)throw new Error("the image format is not supported",t);this._kt=t,this._m0g=i,this._8v=e,this.width=i||ot.IMAGE_WIDTH,this.height=e||ot.IMAGE_HEIGHT,this._iy={}}ye.prototype={_it:0,_6e:!0,_k6:null,_iv:null,_kt:null,_kv:null,_m0g:void 0,_8v:void 0,_6f:function(){return 1==this._it},getBounds:function(t){return this._kv==ve?this._kt.getBounds(t):(this._6e&&this._fb(),this)},validate:function(){this._6e&&this._fb()},_fb:function(){if(this._6e=!1,this._kv==ve)return this._kt.validate(),void this.setByRect(this._kt.bounds);if(this._kv!=ge){if(1!=this._it)try{this._dc()}catch(t){this._it=3,Si.error(t)}}else this._8x()},_50:function(){this._dg(),this._dispatcher.clear(),delete this._dispatcher},_hn:function(t){this._k6.parentNode&&this._k6.parentNode.removeChild(this._k6),this._it=3,Si.error("Image load error - "+this._kt),this._pixels=null,this._iv=null,this._k6=null,!1!==t&&this._50()},_dc:function(){var t,e,i,n,r,s,o,h,a,l,_,u,c,f,d,E=this._kt;if(this._it=1,this._dispatcher=new Bt,this._kv!=Ee)this._k6||(this._k6=y.createElement("img"),L&&(this._k6.style.visibility="hidden",y.body.appendChild(this._k6))),L?(this._k6.onload=function(t){setTimeout(this._7w.bind(this),100)}.bind(this),this._k6.onerror=this._hn.bind(this)):(this._k6.onload=this._7w.bind(this),this._k6.onerror=this._7w.bind(this)),this._k6.src=E;else{for(var g in cn)this[g]=cn[g];t=this._kt,i=(e=this)._m3o,n=this._hn,r=this._e5,f={hdr:v(function(t){s=t,(u=u||Bi()).width=s.width,u.height=s.height,e.width=s.width,e.height=s.height}),gce:v(function(t){m(),a=l,_=l=h=o=null,o=t.transparencyGiven?t.transparencyIndex:null,h=10*t.delayTime,l=t.disposalMethod}),com:v(p),app:{NETSCAPE:v(p)},img:v(function(t){_=_||u.getContext("2d");var e=t.lctFlag?t.lct:s.gct,n=_.getImageData(t.leftPos,t.topPos,t.width,t.height);t.pixels.forEach(function(t,i){o!==t?(n.data[4*i+0]=e[t][0],n.data[4*i+1]=e[t][1],n.data[4*i+2]=e[t][2],n.data[4*i+3]=255):2!==a&&3!==a||(n.data[4*i+3]=0)}),_.putImageData(n,t.leftPos,t.topPos)}),eof:function(t){m(),i.call(e)}},d=new XMLHttpRequest,L||d.overrideMimeType("text/plain; charset=x-user-defined"),d.onload=function(t){c=new fn(d.responseText);try{dn(c,f)}catch(t){n.call(e,"parse")}},d.onerror=function(){n.call(e,"xhr")},d.open("GET",t,!0),d.send()}function v(i){return function(t){i(t)}}function p(){}function m(){if(_){var t=_.getImageData(0,0,s.width,s.height),i={data:t,_pixels:qe(t.data,s.width,s.height),delay:h};r.call(e,i)}}},_ho:!0,_7w:function(){var t,i=this._k6.width,e=this._k6.height;if(i&&e){if(this._k6.parentNode&&this._k6.parentNode.removeChild(this._k6),this._it=2,this.width=i,this.height=e,L&&this._kv==de)this._pixels=null,this._ho=!1;else if(this._kv==de||(t=me(t=this._k6.src),/^png/i.test(t)||/^gif/i.test(t))){var n=Bi();n.width=i,n.height=e,n.g.drawImage(this._k6,0,0,i,e),function(t,i){for(var e=t.getImageData(0,0,i.width,i.height).data,n=!1,r=3,s=e.length;r<s;r+=4)if(e[r]<255){n=!0;break}return n}(n.g,n)&&(this._iv=n,this._pixels=function(t){var i=t.width,e=t.height,n=zi(t.g,0,0,i,e);if(n)return qe(n.data,i,e)}(n))}this._50()}else this._hn()},_8x:function(){var t=this._kt;if(t.draw instanceof Function){if(!1===t.cacheable&&t.width&&t.height)return this.width=t.width,void(this.height=t.height);var i=t.width||ot.IMAGE_MAX_SIZE,e=t.height||ot.IMAGE_MAX_SIZE,n=this._de();n.width=i,n.height=e;var r=n.g;t.draw(r);var s=zi(r,0,0,i,e);if(s){var o=qe(s.data,i,e);this.x=o._x,this.y=o._y,this.width=o._width,this.height=o._height,n.width=this.width,n.height=this.height,r.putImageData(s,-this.x,-this.y),this._pixels=o}}else this._hn(!1)},_de:function(){return this._iv||(this._iv=Bi())},draw:function(t,i,e,n,r,s){if(this.width&&this.height){i=i||1,n=n||1,r=r||1;var o=this.width*n,h=this.height*r;if(s&&e.shadowColor&&(t.shadowColor=e.shadowColor,t.shadowBlur=(e.shadowBlur||0)*i,t.shadowOffsetX=(e.shadowOffsetX||0)*i,t.shadowOffsetY=(e.shadowOffsetY||0)*i),1!=this._it)if(3!=this._it){if(this._kv==ve)return t.scale(n,r),void this._kt.draw(t,i,e);var a=this._fc(i,n,r);if(a)return(this.x||this.y)&&t.translate(this.x*n,this.y*r),t.scale(n/a.scale,r/a.scale),void a._l8(t,e.renderColor,e.renderColorBlendMode);this._iw(t,i,n,r,this.width*n,this.height*r,e)}else ot.IMAGE_INVALID&&ot.IMAGE_INVALID.draw(t,{src:this._kt,width:o,height:h,renderColor:e.renderColor});else ot.IMAGE_DEFAULT&&ot.IMAGE_DEFAULT.draw(t,{src:this._kt,width:o,height:h,renderColor:e.renderColor})}},_iw:function(t,i,e,n,r,s,o){if(this._kv==ge)return 1!=e&&1!=n&&t.scale(e,n),void this._kt.draw(t,o);if(this._k6){if(!C)return void t.drawImage(this._k6,0,0,r,s);e=i*r/this.width,n=i*s/this.height,t.scale(1/e,1/n),t.drawImage(this._k6,0,0,r*e,s*n)}},_iy:null,_fc:function(t,i,e){if(this._kv==ge&&!1===this._kt.cacheable)return null;if(this._kv==fe||(t*=Math.max(i,e))<=1)return this._defaultCache||(this._defaultCache=this._fd(this._iv||this._k6,1,this._ho)),this._defaultCache;var n=this._iy.maxScale||0;if((t=Math.ceil(t))<=n){for(var r=t,s=this._iy[r];!s&&++r<=n;)s=this._iy[r];if(s)return s}t%2&&t++;var o=this.width*t,h=this.height*t;if(o*h>ot.MAX_CACHE_PIXELS)return null;var a=Bi(o,h);return(this.x||this.y)&&a.g.translate(-this.x*t,-this.y*t),this._iw(a.g,1,t,t,o,h),this._fd(a,t)},_fd:function(t,i){var e=new Xe(t,i);return this._iy[i]=e,this._iy.maxScale=i,e},hitTest:function(t,i,e){return this._kv==ve?this._kt.hitTest.apply(this._kt,arguments):!(this._pixels||this._k6&&this._k6._pixels)||(this._pixels||this._k6._pixels)._hp(t,i,e)},_dg:function(){this._dispatcher&&this._dispatcher.onEvent(new xt(this,"image","load",this._k6))},_m0i:function(t,i){this._dispatcher&&this._dispatcher.addListener(t,i)},_6h:function(t,i){this._dispatcher&&this._dispatcher.removeListener(t,i)},_m1y:function(t){this._iy={},(t||1e5<this.width*this.height)&&(this._k6=null,this._iv=null)}},t(ye,pt);var Te={};function Oe(t,i,e,n){if(i)return Te[t]=new ye(i,e,n),t;delete Te[t]}function Ae(t){if(t._k6)return t._k6;if(!H(t)&&!t.name)return t._k6=new ye(t);var i=t.name||t;return i in Te?Te[i]:Te[i]=new ye(t)}function we(t){return t in Te}function be(t,i,e){e=e||{};var n=t.getBounds(e.lineWidth);if(!n.width||!n.height)return!1;var r=i.getContext("2d"),s=i.ratio||1,o=e.scaleMode||"full.uniform",h=/full/i.test(o),a=/uniform/i.test(o),l=1,_=1;if(h){var u,c,f,d,E=i.width,g=i.height,v=e.padding,p=0,m=0;v&&(U(v)?u=c=f=d=v:(u=v.top||0,c=v.bottom||0,f=v.left||0,d=v.right||0),E-=f+d,g-=u+c,p+=f,m+=u),l=E/n.width,_=g/n.height,a&&(_<l?(p+=(E-_*n.width)/2,l=_):l<_&&(m+=(g-l*n.height)/2,_=l)),(p||m)&&r.translate(p,m)}r.translate(-n.x*l,-n.y*_),t.draw(r,s,e,l,_,!0)}Si.drawImage=function(t,i,e){var n=Ae(t);if(!n)return Si.error("draw image error - "+t),!1;n.validate(),n._kv!=Ee&&!n._6f()||n._m0i(function(t){t.source&&(this.width=this.width,be(t.source,this,e))},i),be(n,i,e)},Si.registerImage=Oe,Si.hasImage=we,Si.getAllImages=function(){var t=[];for(var i in Te)t.push(i);return t};function Le(t,i,e,n,r,s){this.type=t,this.colors=i,this.positions=e,this.angle=n||0,this.tx=r||0,this.ty=s||0}Ii.GRADIENT_TYPE_RADIAL="r",Ii.GRADIENT_TYPE_LINEAR="l",Le.prototype={type:null,colors:null,positions:null,angle:null,tx:0,ty:0,position:yt.CENTER_MIDDLE,isEmpty:function(){return null==this.colors||0==this.colors.length},_6z:function(){var t=this.colors.length;if(1==t)return[0];for(var i=[],e=1/(t-1),n=0;n<t;n++)i.push(e*n);return this.positions||(this.positions=i),i},generatorGradient:function(t){if(null==this.colors||0==this.colors.length)return null;var i,e=Gi();if(this.type==Ii.GRADIENT_TYPE_LINEAR){var n,r=this.angle;if(r>Math.PI&&(r-=Math.PI),r<=Math.PI/2){var s=Math.atan2(t.height,t.width),o=Math.sqrt(t.width*t.width+t.height*t.height),h=s-r;n=Math.cos(h)*o}else s=Math.atan2(t.width,t.height),o=Math.sqrt(t.width*t.width+t.height*t.height),h=s-(r-Math.PI/2),n=Math.cos(h)*o;var a=n/2,l=a*Math.cos(r),_=a*Math.sin(r),u=t.x+t.width/2-l,c=t.y+t.height/2-_,f=t.x+t.width/2+l,d=t.y+t.height/2+_;i=e.createLinearGradient(u,c,f,d)}else{if(!(this.type=Ii.GRADIENT_TYPE_RADIAL))return null;var E=St(this.position,t.width,t.height);E.x+=t.x,E.y+=t.y,this.tx&&(Math.abs(this.tx)<1?E.x+=t.width*this.tx:E.x+=this.tx),this.ty&&(Math.abs(this.ty)<1?E.y+=t.height*this.ty:E.y+=this.ty);var g=_t(E.x,E.y,t.x,t.y);g=Math.max(g,_t(E.x,E.y,t.x,t.y+t.height)),g=Math.max(g,_t(E.x,E.y,t.x+t.width,t.y+t.height)),g=Math.max(g,_t(E.x,E.y,t.x+t.width,t.y)),i=e.createRadialGradient(E.x,E.y,0,E.x,E.y,g)}var v=this.colors,p=this.positions;p&&p.length==v.length||(p=this._6z());for(var m=0,y=v.length;m<y;m++)i.addColorStop(p[m],v[m]);return i}};var Se=new Le(Ii.GRADIENT_TYPE_LINEAR,[Q(2332033023),Q(1154272460),Q(1154272460),Q(1442840575)],[.1,.3,.7,.9],Math.PI/2),Ie=new Le(Ii.GRADIENT_TYPE_LINEAR,[Q(2332033023),Q(1154272460),Q(1154272460),Q(1442840575)],[.1,.3,.7,.9],0),xe=(new Le(Ii.GRADIENT_TYPE_LINEAR,[Q(1154272460),Q(1442840575)],[.1,.9],0),new Le(Ii.GRADIENT_TYPE_RADIAL,[Q(2298478591),Q(1156509422),Q(1720223880),Q(1147561574)],[.1,.3,.7,.9],0,-.3,-.3)),De=[Q(0),Q(4294901760),Q(4294967040),Q(4278255360),Q(4278250239),Q(4278190992),Q(4294901958),Q(0)],Ce=[0,.12,.28,.45,.6,.75,.8,1],Re=new Le(Ii.GRADIENT_TYPE_LINEAR,De,Ce),Pe=new Le(Ii.GRADIENT_TYPE_LINEAR,De,Ce,Math.PI/2),Ne=new Le(Ii.GRADIENT_TYPE_RADIAL,De,Ce);Le.LINEAR_GRADIENT_VERTICAL=Se,Le.LINEAR_GRADIENT_HORIZONTAL=Ie,Le.RADIAL_GRADIENT=xe,Le.RAINBOW_LINEAR_GRADIENT=Re,Le.RAINBOW_LINEAR_GRADIENT_VERTICAL=Pe,Le.RAINBOW_RADIAL_GRADIENT=Ne;var ke="m",Me="l",Be="q",Ge="c",Fe="a",$e="z";Ii.SEGMENT_MOVE_TO=ke,Ii.SEGMENT_LINE_TO=Me,Ii.SEGMENT_QUAD_TO=Be,Ii.SEGMENT_CURVE_TO=Ge,Ii.SEGMENT_ARC_TO=Fe,Ii.SEGMENT_CLOSE=$e;var je=function(t,i){this.id=++m,W(t)?this.points=t:(this.type=t,this.points=i)};je.prototype={toJSON:function(){var t={type:this.type,points:this.points};return this.invalidTerminal&&(t.invalidTerminal=!0),t},parseJSON:function(t){this.type=t.type,this.points=t.points,this.invalidTerminal=t.invalidTerminal},points:null,type:Me,clone:function(){return new je(this.type,this.points?l(this.points):null)},move:function(t,i){if(this.points)for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];Si.isNumber(r)&&(this.points[e]+=e%2==0?t:i)}}},it(je.prototype,{lastPoint:{get:function(){return this.type==Fe?{x:this._p2x,y:this._p2y}:{x:this.points[this.points.length-2],y:this.points[this.points.length-1]}}},firstPoint:{get:function(){return{x:this.points[0],y:this.points[1]}}}}),Si.PathSegment=je;var ze=0;ot.ADD_SEGMENT_TYPE="curve";var Ye=function(t){this.bounds=new pt,this._g6=t||[]};function Ue(t,i,e){return{x:t.x+(i.x-t.x)*e,y:t.y+(i.y-t.y)*e}}function He(t,i,e,n,r){n=n||ot.ADD_SEGMENT_TYPE;var s=function(t,i,e,n){var r=t.length;if(r&&!(r<0)){n=n||1;for(var s,o,h=0;h++<r;)if((s=t.getLocation(h,0))&&!(n<(o=_t(i,e,s.x,s.y)))){for(var a=0;a++<n;)if(s=t.getLocation(h+a,0)){var l=_t(i,e,s.x,s.y);if(o<=l){h+=a;break}o=l}for(var _=h,u=t.length-1,c=0,f=(h=0,t._g6.length);h<f;h++)if(_<(c+=t._g6[h]._jl||0)){u=h;break}return s.length=_,s.index=u,s}}}(t,i,e,r);if(s){i=s.x,e=s.y;var o=t._g6,h=s.index,a=h==o.length-1,l=o[h],_=o.slice(0);if(l.type==Me||l.type==$e)if("line"==n)_.splice(h,0,new je(Me,[s.x,s.y]));else{var u=o[h-1].lastPoint,c=l.firstPoint,f=Ue(u,s,E=_t(u.x,u.y,i,e)/_t(u.x,u.y,c.x,c.y)),d=Ue(s,c,E);_.splice(h,1,new je(Be,[f.x,f.y,i,e]),new je(Be,l.invalidTerminal?[d.x,d.y]:[d.x,d.y,c.x,c.y]))}else if("t"in s&&"line"!=n){var E=s.t;if(l.type==Ge){u=o[h-1].lastPoint,c={x:l.points[0],y:l.points[1]};var g={x:l.points[2],y:l.points[3]},v={x:l.points[4],y:l.points[5]},p=(f=Ue(u,c,E),d=Ue(c,g,E),Ue(g,v,E)),m=Ue(f,d,E),y=Ue(d,p,E);_.splice(h,1,new je(Ge,[f.x,f.y,m.x,m.y,i,e]),new je(Ge,l.invalidTerminal?[y.x,y.y,p.x,p.y]:[y.x,y.y,p.x,p.y,v.x,v.y]))}else l.type==Be&&(u=o[h-1].lastPoint,c={x:l.points[0],y:l.points[1]},g={x:l.points[2],y:l.points[3]},f=Ue(u,c,E),d=Ue(c,g,E),_.splice(h,1,new je(Be,[f.x,f.y,i,e]),new je(Be,l.invalidTerminal?[d.x,d.y]:[d.x,d.y,g.x,g.y])))}else{c=l.lastPoint;_.splice(h,1,new je(Me,[i,e]),new je(Me,[c.x,c.y]))}return{atEnd:a,index:h,isCurve:"line"!==n,segments:_}}}function We(t,i,e){this._$w(t,i,e)}function qe(t,i,e){return new We(t,i,e)}function Ve(t,i,e){return(e=e||ot.BLEND_MODE)==Ii.BLEND_MODE_MULTIPLY?t*i:e==Ii.BLEND_MODE_DARKEN?Math.min(t,i):e==Ii.BLEND_MODE_COLOR_BURN?1-(1-i)/t:e==Ii.BLEND_MODE_LINEAR_BURN?t+i-1:e==Ii.BLEND_MODE_LIGHTEN?Math.max(t,i):e==Ii.BLEND_MODE_SCREEN?t+i-t*i:i}Ye.prototype={toJSON:function(){var i=[];return this._g6.forEach(function(t){i.push(t.toJSON())}),i},parseJSON:function(t){var i=this._g6;t.forEach(function(t){i.push(new je(t.type,t.points))})},clear:function(){this._g6.length=0,this.bounds.clear(),this._jl=0,this._6e=!0},_e4:!0,_70:function(t,i){this._e4&&0===this._g6.length&&t!=ke&&this._g6.push(new je(ke,[0,0])),this._g6.push(new je(t,i)),this._6e=!0},add:function(t,i){T(this._g6,t,i),this._6e=!0},removePathSegment:function(t){if(t>=this._g6.length)return!1;this._g6.splice(t,1),this._6e=!0},moveTo:function(t,i){this._70(ke,[t,i])},lineTo:function(t,i){this._70(Me,[t,i])},quadTo:function(t,i,e,n){this._70(Be,[t,i,e,n])},curveTo:function(t,i,e,n,r,s){this._70(Ge,[t,i,e,n,r,s])},arcTo:function(t,i,e,n,r){this._70(Fe,[t,i,e,n,r])},closePath:function(){this._70($e)},_85:function(t,i,e,n,r){if(n.selectionColor){if(e==Ii.SELECTION_TYPE_SHADOW){if(!n.selectionShadowBlur)return;return t.shadowColor=n.selectionColor,t.shadowBlur=n.selectionShadowBlur*i,t.shadowOffsetX=(n.selectionShadowOffsetX||0)*i,void(t.shadowOffsetY=(n.selectionShadowOffsetY||0)*i)}if(e==Ii.SELECTION_TYPE_BORDER){if(!n.selectionBorder)return;t.strokeStyle=n.selectionColor;var s=r.lineWidth||0;r.outline&&(s+=2*r.outline),t.lineWidth=n.selectionBorder+s,this._l8(t),t.stroke()}}},_6e:!0,_g6:null,_jl:0,lineCap:"butt",lineJoin:"round",draw:function(t,i,e,n,r){t.lineCap=e.lineCap||this.lineCap,t.lineJoin=e.lineJoin||this.lineJoin,n&&(r=r||e,this._85(t,i,r.selectionType,r,e));var s=n&&r.selectionType==Ii.SELECTION_TYPE_SHADOW;e.outlineStyle&&(this._l8(t),t.lineWidth=e.lineWidth+2*(e.outline||0),t.strokeStyle=e.outlineStyle,t.stroke(),s&&(s=!1,t.shadowColor="rgba(0,0,0,0)")),t.lineWidth=0,this._l8(t),e.fillColor&&(t.fillStyle=e.renderColor||e.fillColor,t.fill()),e.fillGradient&&(t.fillStyle=e._fillGradient||e.fillGradient,t.fill()),e.lineWidth&&(t.lineWidth=e.lineWidth,e.lineDash&&(e.lineFillColor&&(t.strokeStyle=e.lineFillColor,t.stroke(),s&&(t.shadowColor="rgba(0,0,0,0)")),t.lineCap=e.lineDashCap||t.lineCap,t.lineJoin=e.lineDashJoin||t.lineJoin,t.lineDash=e.lineDash,t.lineDashOffset=e.lineDashOffset),t.strokeStyle=e.renderColor||e.strokeStyle,t.stroke(),t.lineDash=[])},_l8:function(t){var i,e;t.beginPath();for(var n=0,r=this._g6.length;n<r;n++)i=this._g6[n],le._l8(t,i,e),e=i},invalidate:function(){this._6e=!0},validate:function(){if(this._6e=!1,this.bounds.clear(),(this._jl=0)!=this._g6.length)for(var t,i,e=this._g6,n=1,r=e[0],s=r,o=e.length;n<o;n++)(t=e[n]).type==ke?s=t:(le._5r(this.bounds,t,r,s),i=le._5t(t,r,s),t._jl=i,this._jl+=i),r=t},getBounds:function(t,i){if(this._6e&&this.validate(),i=i||new pt,t){var e=t/2;i.set(this.bounds.x-e,this.bounds.y-e,this.bounds.width+t,this.bounds.height+t)}else i.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);return i},hitTest:function(t,i,e,n,r,s){return function(t,i,e,n,r,s){if(e=e||0,!(r=r||0)&&!s)return!1;if(!n&&!this.getBounds(r).intersectsPoint(t,i,e))return!1;var o=Math.round(2*e)||1,h=Gi(o,o),a=(h.canvas,-t+e),l=-i+e;if(h.setTransform(1,0,0,1,a,l),h.isPointInStroke)return h.lineWidth=(r||0)+2*e,this._l8(h),!(!r||!h.isPointInStroke(e,e))||!!s&&h.isPointInPath(e,e);this._l8(h),r&&h.stroke(),s&&h.fill();var _=zi(h,0,0,o,o);if(!_)return!1;for(var u=(_=_.data).length/4;0<u;){if(_[4*u-1]>ze)return!0;--u}return!1}.call(this,t,i,e,n,r,s)},toSegments:function(){return[].concat(this._g6)},generator:function(t,i,e,n,r){return function(t,i,e,n,r){this._6e&&this.validate();var s=r?this.getBounds(r):this.bounds,a=e/s.width,l=t-a*s.x,_=n/s.height,u=i-_*s.y,o=this._g6,c=[];return b(o,function(t){var i=t.clone(),e=i.points;if(e&&e.length){for(var n=e.length,r=[],s=0;s<n;s++){var o=e[s],h=e[++s];o=a*o+l,h=_*h+u,r.push(o),r.push(h)}i.points=r}c.push(i)},this),new Ye(c)}.call(this,t,i,e,n,r)},getLocation:function(t,i){return se.call(this,t,i||0)}},it(Ye.prototype,{segments:{get:function(){return this._g6},set:function(t){this.clear(),this._g6=t}},length:{get:function(){return this._6e&&this.validate(),this._jl}},_empty:{get:function(){return 0==this._g6.length}}}),We.prototype={_$w:function(t,i,e){var n,r,s,o,h,a=t.length,l=0,_=0;for(h=0;h<a;h+=4)if(0<t[h+3]){n=(h+4)/i/4|0;break}for(h=a-4;0<=h;h-=4)if(0<t[h+3]){r=(h+4)/i/4|0;break}for(l=0;l<i;l++){for(_=n;_<r;_++)if(0<t[_*i*4+4*l+3]){s=l;break}if(0<=s)break}for(l=i-1;0<=l;l--){for(_=n;_<r;_++)if(0<t[_*i*4+4*l+3]){o=l;break}if(0<=o)break}this._x=s,this._y=n,this._width=o-s+1,this._height=r-n+1,this._j4=new pt(s,n,this._width,this._height),this._pixelSize=this._width*this._height,this._originalPixelsWidth=i,this._originalPixels=t},_dk:function(t,i){return this._originalPixels[4*(t+this._x+(this._y+i)*this._originalPixelsWidth)+3]},_hp:function(t,i,e){(!e||e<=1)&&(e=1),e|=0,t=Math.round(t-this._x)-e,i=Math.round(i-this._y)-e,e+=e;for(var n=t,r=i;r<i+e;){for(n=t;n<t+e;){if(this._dk(n,r))return!0;++n}++r}return!1}},Ii.BLEND_MODE_DARKEN="darken",Ii.BLEND_MODE_MULTIPLY="multiply",Ii.BLEND_MODE_COLOR_BURN="color.burn",Ii.BLEND_MODE_LINEAR_BURN="linear.burn",Ii.BLEND_MODE_LIGHTEN="lighten",Ii.BLEND_MODE_SCREEN="screen",Ii.BLEND_MODE_GRAY="gray",ot.BLEND_MODE=Ii.BLEND_MODE_LINEAR_BURN;var Xe=function(t,i,e){this._iv=t,this.scale=i||1,this._ho=e};function Ke(t,i,e,n){return e<1&&(e=1),function(t,i,e,n,r){var s=Gi(e=Math.round(e)||1,n=Math.round(n)||1);s.setTransform(1,0,0,1,-t,-i),r.draw(s);var o=zi(s,0,0,e,n);if(!o)return!1;for(var h=(o=o.data).length/4;0<h--;)if(o[4*h-1]>ze)return!0;return!1}(t-e,i-e,2*e,2*e,n)}Xe.prototype={scale:1,_iv:null,_iy:null,_ho:!0,_l8:function(t,i,e){if((i=i&&function(t){if("#"==t[0]){if(3==(t=t.substring(1)).length)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(6!=t.length)return;return[(t=parseInt(t,16))>>16&255,t>>8&255,255&t]}if(/^rgb/i.test(t)){var i=t.indexOf("("),e=t.indexOf(")");if(i<0||e<i)return;if((t=(t=t.substring(i+1,e)).split(",")).length<3)return;return[parseInt(t[0]),parseInt(t[1]),parseInt(t[2]),3==t.length?255:parseInt(t[3])]}Si.error("color format error, ["+t+"]")}(i))&&!1!==this._ho){this._iv instanceof Image&&((n=Bi()).width=this._iv.width,n.height=this._iv.height,n.g.drawImage(this._iv,0,0,this._iv.width,this._iv.height),this._iv=n),this._iy||(this._iy={});var n,r=i+e;if((n=this._iy[r])||((n=function(t,i,e){var n=zi(t.g,0,0,t.width,t.height);if(n){var r=n.data;if(e instanceof Function)r=e(t,r,i)||r;else{var s=i[0]/255,o=i[1]/255,h=i[2]/255;if(e==Ii.BLEND_MODE_GRAY)for(var a=0,l=r.length;a<l;a+=4){var _=77*r[a]+151*r[a+1]+28*r[a+2]>>8;r[a]=_*s|0,r[a+1]=_*o|0,r[a+2]=_*h|0}else for(a=0,l=r.length;a<l;a+=4)r[a]=255*Ve(s,r[a]/255,e)|0,r[a+1]=255*Ve(o,r[a+1]/255,e)|0,r[a+2]=255*Ve(h,r[a+2]/255,e)|0}return(t=Bi(t.width,t.height)).g.putImageData(n,0,0),t}}(this._iv,i,e))||(this._ho=!1),this._iy[r]=n||this._iv),n)if(L)try{t.drawImage(n,0,0)}catch(t){}else t.drawImage(n,0,0)}else t.drawImage(this._iv,0,0)}};var Ze=function(t,i,e,n,r,s,o,h,a){this._ky=function(t,i,e,n,r,s,o,h,a){if(gt(t,i,e,n,h,a))return null;var l,_,u=new je(Me,[t+e-r,i]),c=new je(Be,[t+e,i,t+e,i+s]),f=new je(Me,[t+e,i+n-s]),d=new je(Be,[t+e,i+n,t+e-r,i+n]),E=new je(Me,[t+r,i+n]),g=new je(Be,[t,i+n,t,i+n-s]),v=new je(Me,[t,i+s]),p=new je(Be,[t,i,t+r,i]),m=(new je($e),[u,c,f,d,E,g,v,p]),y=new pt(t+r,i+s,e-r-r,n-s-s);_=h<t?(l=Tt,5):t+e<h?(l=Ot,1):(l="c",0),a<i?l==Tt&&(_=7):i+n<a?l==Ot?_=3:"c"==l&&(_=4):l==Tt?_=6:l==Ot&&(_=2);var T=function(t,i,e,n,r,s,o,h,a,l,_){var u=h/2;switch(s=s||1e-4,o=o||1e-4,t){case 7:var c=[i,e+o,i,e,i+s,e],f=i+s,d=e+o;return Je(t,c,f,d,i,e,n,r,s,o,h,a,l,_);case 5:return Je(t,c=[i+s,e+r,i,e+r,i,e+r-o],f=i+s,d=e+r-o,i,e,n,r,s,o,h,a,l,_);case 3:return Je(t,c=[i+n,e+r-o,i+n,e+r,i+n-s,e+r],f=i+n-s,d=e+r-o,i,e,n,r,s,o,h,a,l,_);case 1:return Je(t,c=[i+n-s,e,i+n,e,i+n,e+o],f=i+n-s,d=e+o,i,e,n,r,s,o,h,a,l,_);case 0:return function(t,i,e,n,r,s,o,h){var a,l;if(t+n<=o-s)a={y:i,x:o-s,_kyNO:0};else{a={y:i+r,x:Math.max(t,o-s)};var _=[t,i+r,t,i,t+n,i];(a=new ut(o,h,a.x,a.y)._$b(_))?(W(a)&&(a=a[0].t>a[1].t?a[0]:a[1]),(u=(u=Qe(_,[a]))[0])&&(a._ky=new je(Be,u.slice(2))),a._kyNO=7):a={y:i,x:t+n,_kyNO:0}}if(o+s<=t+e-n)l={y:i,x:o+s,_kyNO:0};else{l={y:i+r,x:Math.min(t+e,o+s)};var u,c=[t+e-n,i,t+e,i,t+e,i+r];(l=new ut(o,h,l.x,l.y)._$b(c))?(W(l)&&(l=l[0].t<l[1].t?l[0]:l[1]),(u=Qe(c,[l]))&&u[u.length-1]&&(l._ky=new je(Be,u[u.length-1].slice(2))),l._kyNO=1):l={y:i,x:t+e-n,_kyNO:0}}return[a,l]}(i,e,n,s,o,u,a,l);case 2:return function(t,i,e,n,r,s,o,h,a){var l,_;if(i+s<=a-o)l={x:t+e,y:a-o,_kyNO:2};else{l={x:t+e-r,y:Math.max(i,a-o)};var u=[t+e-r,i,t+e,i,t+e,i+s];(l=new ut(h,a,l.x,l.y)._$b(u))?(W(l)&&(l=l[0].t>l[1].t?l[0]:l[1]),(c=(c=Qe(u,[l]))[0])&&(l._ky=new je(Be,c.slice(2))),l._kyNO=1):l={x:t+e,y:i+s,_kyNO:2}}if(a+o<=i+n-s)_={x:t+e,y:a+o,_kyNO:2};else{_={x:t+e-r,y:Math.min(i+n,a+o)};var c,f=[t+e,i+n-s,t+e,i+n,t+e-r,i+n];(_=new ut(h,a,_.x,_.y)._$b(f))?(W(_)&&(_=_[0].t<_[1].t?_[0]:_[1]),(c=Qe(f,[_]))[1]&&(_._ky=new je(Be,c[1].slice(2))),_._kyNO=3):_={x:t+e,y:i+n-s,_kyNO:2}}return[l,_]}(i,e,n,r,s,o,u,a,l);case 4:return function(t,i,e,n,r,s,o,h,a){var l,_;if(t+r<=h-o)_={y:i+n,x:h-o,_kyNO:4};else{_={y:i+n-s,x:Math.max(t,h-o)};var u=[t+r,i+n,t,i+n,t,i+n-s];(_=new ut(h,a,_.x,_.y)._$b(u))?(W(_)&&(_=_[0].t<_[1].t?_[0]:_[1]),(c=(c=Qe(u,[_]))[c.length-1])&&(_._ky=new je(Be,c.slice(2))),_._kyNO=5):_={y:i+n,x:t+r,_kyNO:4}}if(h+o<=t+e-r)l={y:i+n,x:h+o,_kyNO:4};else{l={y:i+n-s,x:Math.min(t+e,h+o)};var c,f=[t+e,i+n-s,t+e,i+n,t+e-r,i+n];(l=new ut(h,a,l.x,l.y)._$b(f))?(W(l)&&(l=l[0].t>l[1].t?l[0]:l[1]),(c=Qe(f,[l]))[0]&&(l._ky=new je(Be,c[0].slice(2))),l._kyNO=3):l={y:i+n,x:t+e-r,_kyNO:4}}return[l,_]}(i,e,n,r,s,o,u,a,l);case 6:return function(t,i,e,n,r,s,o,h){var a,l;if(i+r<=h-s)l={x:t,y:h-s,_kyNO:6};else{l={x:t+n,y:Math.max(i,h-s)};var _=[t,i+r,t,i,t+n,i];(l=new ut(o,h,l.x,l.y)._$b(_))?(W(l)&&(l=l[0].t<l[1].t?l[0]:l[1]),(u=(u=Qe(_,[l]))[u.length-1])&&(l._ky=new je(Be,u.slice(2)))):l={x:t,y:i+r},l._kyNO=7}if(h+s<=i+e-r)a={x:t,y:h+s,_kyNO:6};else{a={x:t+n,y:Math.min(i+e,h+s)};var u,c=[t+n,i+e,t,i+e,t,i+e-r];(a=new ut(o,h,a.x,a.y)._$b(c))?(W(a)&&(a=a[0].t>a[1].t?a[0]:a[1]),(u=Qe(c,[a]))[0]&&(a._ky=new je(Be,u[0].slice(2))),a._kyNO=5):a={x:t,y:i+e-r,_kyNO:6}}return[a,l]}(i,e,r,s,o,u,a,l)}}(_,t,i,e,n,r,s,o,h,a,y),O=T[0],A=T[1],w=new Ye,b=w._g6;b.push(new je(ke,[O.x,O.y])),b.push(new je(Me,[h,a])),b.push(new je(Me,[A.x,A.y])),A._ky&&(b.push(A._ky),A._kyNO++);for(var L=A._kyNO%8,S=O._kyNO;b.push(m[L]),++L,(L%=8)!=S;);return O._ky&&b.push(O._ky),w.closePath(),w}(t,i,e,n,r,s,o,h,a)};function Je(t,i,e,n,r,s,o,h,a,l,_,u,c,f){var d=new ut(u,c,e,n),E=new ut(i[0],i[1],i[4],i[5])._3b(d,_),g=E[0],v=E[1];if(void 0!==g._rest){g._kyNO=(t-1)%8,v._kyNO=(t+1)%8;var p=g._rest;7==t?(g.y=s+l+Math.min(f.height,p),v.x=r+a+Math.min(f.width,p)):5==t?(g.x=r+a+Math.min(f.width,p),v.y=s+h-l-Math.min(f.height,p)):3==t?(g.y=s+h-l-Math.min(f.height,p),v.x=r+o-a-Math.min(f.width,p)):1==t&&(g.x=r+o-a-Math.min(f.width,p),v.y=s+l+Math.min(f.height,p))}else{d._lo(d._lu,d._lv,g.x,g.y),g=d._$b(i),d._lo(d._lu,d._lv,v.x,v.y);var m=Qe(i,[g,v=d._$b(i)]),y=m[0],T=m[2];g._kyNO=t,v._kyNO=t,g._ky=new je(Be,y.slice(2)),v._ky=new je(Be,T.slice(2))}return[g,v]}function Qe(t,i){for(var e,n,r,s,o,h,a=t[0],l=t[1],_=t[2],u=t[3],c=t[4],f=t[5],d=[],E=0;E<i.length;E++)0!=(h=(o=i[E]).t)&&1!=h?(e=a+(_-a)*h,n=l+(u-l)*h,r=_+(c-_)*h,s=u+(f-u)*h,d.push([a,l,e,n,o.x,o.y]),a=o.x,l=o.y,_=r,u=s):d.push(null);return void 0!==r&&d.push([o.x,o.y,r,s,c,f]),d}var tn={server:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var i=t.createLinearGradient(6.75,3.9033,30.5914,27.7447);i.addColorStop(.0493,"#1C6B9D"),i.addColorStop(.0689,"#186493"),i.addColorStop(.0939,"#145E8B"),i.addColorStop(.129,"#115B87"),i.addColorStop(.2266,"#115A85"),i.addColorStop(.2556,"#125C89"),i.addColorStop(.2869,"#176291"),i.addColorStop(.3194,"#1D6C9F"),i.addColorStop(.3525,"#2479B0"),i.addColorStop(.3695,"#2881BB"),i.addColorStop(.5025,"#1F6FA2"),i.addColorStop(.9212,"#115A86"),i.addColorStop(1,"#004063"),t.fillStyle=i,t.beginPath(),t.moveTo(25.677,4.113),t.bezierCurveTo(25.361,2.4410000000000007,23.364,2.7940000000000005,22.14,2.7990000000000004),t.bezierCurveTo(19.261,2.813,16.381,2.8260000000000005,13.502,2.8400000000000003),t.bezierCurveTo(12.185,2.846,10.699000000000002,2.652,9.393,2.8790000000000004),t.bezierCurveTo(9.19,2.897,8.977,2.989,8.805,3.094),t.bezierCurveTo(8.084999999999999,3.5109999999999997,7.436999999999999,4.1259999999999994,6.776,4.63),t.bezierCurveTo(5.718999999999999,5.436,4.641,6.22,3.6029999999999998,7.05),t.bezierCurveTo(4.207,6.5889999999999995,21.601999999999997,36.579,21.028,37.307),t.bezierCurveTo(22.019,36.063,23.009999999999998,34.819,24.000999999999998,33.575),t.bezierCurveTo(24.587999999999997,32.84,25.589999999999996,31.995000000000005,25.593999999999998,30.983000000000004),t.bezierCurveTo(25.595999999999997,30.489000000000004,25.598,29.994000000000003,25.601,29.500000000000004),t.bezierCurveTo(25.612,26.950000000000003,25.622,24.400000000000006,25.633,21.85),t.bezierCurveTo(25.657,16.318,25.680999999999997,10.786000000000001,25.704,5.253),t.bezierCurveTo(25.706,4.885,25.749,4.478,25.677,4.113),t.bezierCurveTo(25.67,4.077,25.697,4.217,25.677,4.113),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(19.763,6.645),t.bezierCurveTo(20.002000000000002,6.643999999999999,20.23,6.691999999999999,20.437,6.778),t.bezierCurveTo(20.644000000000002,6.864999999999999,20.830000000000002,6.991,20.985,7.146999999999999),t.bezierCurveTo(21.14,7.302999999999999,21.266,7.488999999999999,21.352999999999998,7.696999999999999),t.bezierCurveTo(21.438999999999997,7.903999999999999,21.487,8.133,21.487,8.372),t.lineTo(21.398,36.253),t.bezierCurveTo(21.397,36.489,21.349,36.713,21.262,36.917),t.bezierCurveTo(21.174,37.121,21.048000000000002,37.305,20.893,37.458),t.bezierCurveTo(20.738,37.611,20.553,37.734,20.348,37.818999999999996),t.bezierCurveTo(20.141,37.903999999999996,19.916,37.95099999999999,19.679,37.949),t.lineTo(4.675,37.877),t.bezierCurveTo(4.4399999999999995,37.876000000000005,4.216,37.827000000000005,4.012,37.741),t.bezierCurveTo(3.8089999999999997,37.653999999999996,3.6249999999999996,37.528999999999996,3.4719999999999995,37.376),t.bezierCurveTo(3.3179999999999996,37.221,3.1939999999999995,37.037,3.1079999999999997,36.833999999999996),t.bezierCurveTo(3.022,36.629999999999995,2.9739999999999998,36.406,2.9739999999999998,36.172),t.lineTo(2.924,8.431),t.bezierCurveTo(2.923,8.192,2.971,7.964,3.057,7.758),t.bezierCurveTo(3.143,7.552,3.267,7.365,3.4219999999999997,7.209),t.bezierCurveTo(3.5769999999999995,7.052999999999999,3.76,6.925,3.965,6.837),t.bezierCurveTo(4.17,6.749,4.396,6.701,4.633,6.7),t.lineTo(19.763,6.645),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.fillStyle="#efefef",t.beginPath(),t.arc(12.208,26.543,2.208,0,6.283185307179586,!0),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.arc(12.208,26.543,1.876,0,6.283185307179586,!0),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#efefef",t.beginPath(),t.moveTo(19.377,17.247),t.bezierCurveTo(19.377,17.724,18.991999999999997,18.108999999999998,18.516,18.108999999999998),t.lineTo(5.882,18.108999999999998),t.bezierCurveTo(5.404999999999999,18.108999999999998,5.02,17.723,5.02,17.247),t.lineTo(5.02,11.144),t.bezierCurveTo(5.02,10.666,5.406,10.281,5.882,10.281),t.lineTo(18.516,10.281),t.bezierCurveTo(18.993,10.281,19.377,10.666,19.377,11.144),t.lineTo(19.377,17.247),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(18.536,13.176),t.bezierCurveTo(18.536,13.518,18.261000000000003,13.794,17.919,13.794),t.lineTo(6.479,13.794),t.bezierCurveTo(6.1370000000000005,13.794,5.861,13.518,5.861,13.176),t.lineTo(5.861,11.84),t.bezierCurveTo(5.861,11.498,6.137,11.221,6.479,11.221),t.lineTo(17.918,11.221),t.bezierCurveTo(18.259999999999998,11.221,18.535,11.497,18.535,11.84),t.lineTo(18.535,13.176),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(18.536,16.551),t.bezierCurveTo(18.536,16.892999999999997,18.261000000000003,17.168999999999997,17.919,17.168999999999997),t.lineTo(6.479,17.168999999999997),t.bezierCurveTo(6.1370000000000005,17.168999999999997,5.861,16.892999999999997,5.861,16.551),t.lineTo(5.861,15.215999999999998),t.bezierCurveTo(5.861,14.872999999999998,6.137,14.596999999999998,6.479,14.596999999999998),t.lineTo(17.918,14.596999999999998),t.bezierCurveTo(18.259999999999998,14.596999999999998,18.535,14.872999999999998,18.535,15.215999999999998),t.lineTo(18.535,16.551),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore()}},exchanger2:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var i=t.createLinearGradient(.4102,24.3613,39.5898,24.3613);i.addColorStop(0,"#1C6B9D"),i.addColorStop(.0788,"#115A85"),i.addColorStop(.2046,"#135D89"),i.addColorStop(.3649,"#186494"),i.addColorStop(.5432,"#1F70A4"),i.addColorStop(.6798,"#257AB2"),i.addColorStop(.7462,"#2377AD"),i.addColorStop(.8508,"#1E6DA0"),i.addColorStop(.98,"#125C89"),i.addColorStop(1,"#105984"),t.fillStyle=i,t.beginPath(),t.moveTo(.41,16.649),t.bezierCurveTo(.633,19.767,.871,20.689,1.094,23.807000000000002),t.bezierCurveTo(1.29,26.548000000000002,3.324,28.415000000000003,5.807,29.711000000000002),t.bezierCurveTo(10.582,32.202000000000005,16.477,32.806000000000004,21.875999999999998,32.523),t.bezierCurveTo(26.929,32.258,32.806,31.197000000000003,36.709999999999994,27.992000000000004),t.bezierCurveTo(38.30499999999999,26.728000000000005,38.83599999999999,25.103000000000005,38.998999999999995,23.161000000000005),t.bezierCurveTo(39.589,16.135000000000005,39.589,16.135000000000005,39.589,16.135000000000005),t.bezierCurveTo(39.589,16.135000000000005,3.26,16.647,.41,16.649),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(16.4,25.185),t.bezierCurveTo(12.807999999999998,24.924999999999997,9.139,24.238,5.857999999999999,22.705),t.bezierCurveTo(3.175999999999999,21.450999999999997,-.32200000000000095,18.971999999999998,.544999999999999,15.533999999999999),t.bezierCurveTo(1.3499999999999992,12.335999999999999,4.987999999999999,10.495999999999999,7.807999999999999,9.428999999999998),t.bezierCurveTo(11.230999999999998,8.133999999999999,14.911999999999999,7.519999999999999,18.558,7.345999999999998),t.bezierCurveTo(22.233,7.169999999999998,25.966,7.437999999999998,29.548000000000002,8.300999999999998),t.bezierCurveTo(32.673,9.052999999999999,36.192,10.296,38.343,12.814999999999998),t.bezierCurveTo(40.86600000000001,15.768999999999998,39.208000000000006,19.066999999999997,36.406000000000006,21.043999999999997),t.bezierCurveTo(33.566,23.046999999999997,30.055000000000007,24.071999999999996,26.670000000000005,24.676999999999996),t.bezierCurveTo(23.289,25.28,19.824,25.436,16.4,25.185),t.bezierCurveTo(13.529,24.977,19.286,25.396,16.4,25.185),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(5.21,21.754),t.lineTo(8.188,17.922),t.lineTo(9.53,18.75),t.lineTo(15.956,16.004),t.lineTo(18.547,17.523),t.lineTo(12.074,20.334),t.lineTo(13.464,21.204),t.lineTo(5.21,21.754),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(17.88,14.61),t.lineTo(9.85,13.522),t.lineTo(11.703,12.757),t.lineTo(7.436,10.285),t.lineTo(10.783,8.942),t.lineTo(15.091,11.357),t.lineTo(16.88,10.614),t.lineTo(17.88,14.61),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(17.88,14.61),t.lineTo(9.85,13.522),t.lineTo(11.703,12.757),t.lineTo(7.436,10.285),t.lineTo(10.783,8.942),t.lineTo(15.091,11.357),t.lineTo(16.88,10.614),t.lineTo(17.88,14.61),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(23.556,15.339),t.lineTo(20.93,13.879),t.lineTo(26.953,11.304),t.lineTo(25.559,10.567),t.lineTo(33.251,9.909),t.lineTo(31.087,13.467),t.lineTo(29.619,12.703),t.lineTo(23.556,15.339),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(30.028,23.383),t.lineTo(24.821,20.366),t.lineTo(22.915,21.227),t.lineTo(21.669,16.762),t.lineTo(30.189,17.942),t.lineTo(28.33,18.782),t.lineTo(33.579,21.725),t.lineTo(30.028,23.383),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(30.028,23.383),t.lineTo(24.821,20.366),t.lineTo(22.915,21.227),t.lineTo(21.669,16.762),t.lineTo(30.189,17.942),t.lineTo(28.33,18.782),t.lineTo(33.579,21.725),t.lineTo(30.028,23.383),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.restore(),t.restore(),t.restore()}},exchanger:{draw:function(t){var i;t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(i=t.createLinearGradient(.2095,20.7588,39.4941,20.7588)).addColorStop(0,"#6A6969"),i.addColorStop(.0788,"#4F4C4B"),i.addColorStop(.352,"#545252"),i.addColorStop(.6967,"#646262"),i.addColorStop(.8916,"#6F6E6F"),i.addColorStop(.9557,"#4C4948"),i.addColorStop(1,"#494645"),t.fillStyle=i,t.beginPath(),t.moveTo(39.449,12.417),t.lineTo(39.384,9.424),t.bezierCurveTo(39.384,9.424,.7980000000000018,22.264,.3710000000000022,23.024),t.bezierCurveTo(-.026999999999997804,23.733,.4240000000000022,24.903000000000002,.5190000000000022,25.647000000000002),t.bezierCurveTo(.7240000000000022,27.244000000000003,.9240000000000023,28.841,1.1350000000000022,30.437),t.bezierCurveTo(1.3220000000000023,31.843,2.7530000000000023,32.094,3.9620000000000024,32.094),t.bezierCurveTo(8.799000000000003,32.092,13.636000000000003,32.091,18.473000000000003,32.089),t.bezierCurveTo(23.515,32.086999999999996,28.556000000000004,32.086,33.598,32.083999999999996),t.bezierCurveTo(34.859,32.083999999999996,36.286,31.979999999999997,37.266,31.081999999999997),t.bezierCurveTo(37.537,30.820999999999998,37.655,30.535999999999998,37.699999999999996,30.229999999999997),t.lineTo(37.711,30.316999999999997),t.lineTo(39.281,16.498999999999995),t.bezierCurveTo(39.281,16.498999999999995,39.467999999999996,15.126999999999995,39.489,14.666999999999994),t.bezierCurveTo(39.515,14.105,39.449,12.417,39.449,12.417),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(i=t.createLinearGradient(19.8052,7.7949,19.8052,24.7632)).addColorStop(0,"#7D7D7D"),i.addColorStop(.1455,"#808080"),i.addColorStop(.2975,"#888888"),i.addColorStop(.4527,"#939293"),i.addColorStop(.6099,"#9E9D9D"),i.addColorStop(.7687,"#A7A5A4"),i.addColorStop(.9268,"#A9A6A5"),i.addColorStop(.9754,"#A7A4A3"),i.addColorStop(1,"#FFFFFF"),t.fillStyle=i,t.beginPath(),t.moveTo(33.591,24.763),t.bezierCurveTo(23.868000000000002,24.754,14.145,24.746000000000002,4.423000000000002,24.738000000000003),t.bezierCurveTo(3.140000000000002,24.737000000000002,-.48799999999999777,24.838000000000005,.3520000000000021,22.837000000000003),t.bezierCurveTo(1.292000000000002,20.594000000000005,2.2330000000000023,18.351000000000003,3.1730000000000023,16.108000000000004),t.bezierCurveTo(4.113000000000002,13.865000000000006,5.054000000000002,11.623000000000005,5.994000000000002,9.380000000000004),t.bezierCurveTo(6.728000000000002,7.629000000000005,9.521000000000003,7.885000000000004,11.156000000000002,7.880000000000004),t.bezierCurveTo(16.974000000000004,7.861000000000004,22.793000000000003,7.843000000000004,28.612000000000002,7.825000000000005),t.bezierCurveTo(30.976000000000003,7.818000000000005,33.341,7.810000000000005,35.707,7.803000000000004),t.bezierCurveTo(36.157000000000004,7.802000000000004,36.609,7.787000000000004,37.06,7.804000000000005),t.bezierCurveTo(37.793,7.833000000000005,39.389,7.875000000000004,39.385000000000005,9.424000000000005),t.bezierCurveTo(39.38400000000001,9.647000000000006,39.31,10.138000000000005,39.27700000000001,10.359000000000005),t.bezierCurveTo(38.81900000000001,13.361000000000004,38.452000000000005,15.764000000000006,37.99400000000001,18.766000000000005),t.bezierCurveTo(37.806000000000004,19.998000000000005,37.61800000000001,21.230000000000004,37.43000000000001,22.462000000000007),t.bezierCurveTo(37.151,24.271,35.264,24.77,33.591,24.763),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(10.427,19.292),t.lineTo(5.735,16.452),t.lineTo(12.58,13.8),t.lineTo(12.045,15.07),t.lineTo(20.482,15.072),t.lineTo(19.667,17.887),t.lineTo(11.029,17.851),t.lineTo(10.427,19.292),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(13.041,13.042),t.lineTo(8.641,10.73),t.lineTo(14.82,8.474),t.lineTo(14.373,9.537),t.lineTo(22.102,9.479),t.lineTo(21.425,11.816),t.lineTo(13.54,11.85),t.lineTo(13.041,13.042),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(29.787,16.049),t.lineTo(29.979,14.704),t.lineTo(21.51,14.706),t.lineTo(22.214,12.147),t.lineTo(30.486,12.116),t.lineTo(30.653,10.926),t.lineTo(36.141,13.4),t.lineTo(29.787,16.049),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(28.775,23.14),t.lineTo(29.011,21.49),t.lineTo(19.668,21.405),t.lineTo(20.523,18.295),t.lineTo(29.613,18.338),t.lineTo(29.815,16.898),t.lineTo(35.832,19.964),t.lineTo(28.775,23.14),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.restore()}},cloud:{draw:function(t){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(90.75,0),t.lineTo(90.75,62.125),t.lineTo(0,62.125),t.closePath(),t.clip(),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save();var i=t.createLinearGradient(44.0054,6.4116,44.0054,51.3674);i.addColorStop(0,"rgba(159, 160, 160, 0.7)"),i.addColorStop(.9726,"#E9EAEA"),t.fillStyle=i,t.beginPath(),t.moveTo(57.07,20.354),t.bezierCurveTo(57.037,20.354,57.006,20.358,56.974000000000004,20.358),t.bezierCurveTo(54.461000000000006,14.308,48.499,10.049000000000001,41.538000000000004,10.049000000000001),t.bezierCurveTo(33.801,10.049000000000001,27.309000000000005,15.316000000000003,25.408000000000005,22.456000000000003),t.bezierCurveTo(18.988000000000007,23.289,14.025000000000006,28.765000000000004,14.025000000000006,35.413000000000004),t.bezierCurveTo(14.025000000000006,42.635000000000005,19.880000000000006,48.49,27.102000000000004,48.49),t.bezierCurveTo(29.321000000000005,48.49,31.407000000000004,47.933,33.237,46.961),t.bezierCurveTo(34.980000000000004,49.327,37.78,50.867999999999995,40.945,50.867999999999995),t.bezierCurveTo(43.197,50.867999999999995,45.261,50.086,46.896,48.785999999999994),t.bezierCurveTo(49.729,50.78699999999999,53.244,51.98799999999999,57.07,51.98799999999999),t.bezierCurveTo(66.412,51.98799999999999,73.986,44.90699999999999,73.986,36.17099999999999),t.bezierCurveTo(73.986,27.436,66.413,20.354,57.07,20.354),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},node:{width:60,height:100,draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(13.948,31.075),t.lineTo(25.914,31.075),t.quadraticCurveTo(25.914,31.075,25.914,31.075),t.lineTo(25.914,34.862),t.quadraticCurveTo(25.914,34.862,25.914,34.862),t.lineTo(13.948,34.862),t.quadraticCurveTo(13.948,34.862,13.948,34.862),t.lineTo(13.948,31.075),t.quadraticCurveTo(13.948,31.075,13.948,31.075),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(29.679,35.972),t.bezierCurveTo(29.679,36.675000000000004,29.110999999999997,37.244,28.407999999999998,37.244),t.lineTo(11.456,37.244),t.bezierCurveTo(10.751999999999999,37.244,10.183,36.675,10.183,35.972),t.lineTo(10.183,36.136),t.bezierCurveTo(10.183,35.431000000000004,10.751999999999999,34.863,11.456,34.863),t.lineTo(28.407,34.863),t.bezierCurveTo(29.11,34.863,29.678,35.431,29.678,36.136),t.lineTo(29.678,35.972),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(.196,29.346),t.bezierCurveTo(.196,30.301,.9690000000000001,31.075,1.925,31.075),t.lineTo(37.936,31.075),t.bezierCurveTo(38.891,31.075,39.665,30.301,39.665,29.346),t.lineTo(39.665,27.174),t.lineTo(.196,27.174),t.lineTo(.196,29.346),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(37.937,3.884),t.lineTo(1.926,3.884),t.bezierCurveTo(.97,3.884,.19699999999999984,4.657,.19699999999999984,5.614),t.lineTo(.19699999999999984,27.12),t.lineTo(39.666000000000004,27.12),t.lineTo(39.666000000000004,5.615),t.bezierCurveTo(39.665,4.657,38.892,3.884,37.937,3.884),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var i=t.createLinearGradient(6.9609,2.9341,32.9008,28.874);i.addColorStop(0,"#B2CBEA"),i.addColorStop(1,"#2E8ECE"),t.fillStyle=i,t.beginPath(),t.moveTo(35.788,6.39),t.lineTo(4.074,6.39),t.bezierCurveTo(3.315,6.39,2.702,7.003,2.702,7.763),t.lineTo(2.702,24.616),t.lineTo(37.159,24.616),t.lineTo(37.159,7.763),t.bezierCurveTo(37.159,7.003,36.546,6.39,35.788,6.39),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},group:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(47.75,0),t.lineTo(47.75,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(10.447,26.005),t.lineTo(18.847,26.005),t.quadraticCurveTo(18.847,26.005,18.847,26.005),t.lineTo(18.847,28.663),t.quadraticCurveTo(18.847,28.663,18.847,28.663),t.lineTo(10.447,28.663),t.quadraticCurveTo(10.447,28.663,10.447,28.663),t.lineTo(10.447,26.005),t.quadraticCurveTo(10.447,26.005,10.447,26.005),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(21.491,29.443),t.bezierCurveTo(21.491,29.935000000000002,21.094,30.338,20.597,30.338),t.lineTo(8.698,30.338),t.bezierCurveTo(8.201,30.338,7.8020000000000005,29.936,7.8020000000000005,29.443),t.lineTo(7.8020000000000005,29.557000000000002),t.bezierCurveTo(7.8020000000000005,29.063000000000002,8.201,28.662000000000003,8.698,28.662000000000003),t.lineTo(20.597,28.662000000000003),t.bezierCurveTo(21.093,28.662000000000003,21.491,29.062,21.491,29.557000000000002),t.lineTo(21.491,29.443),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(.789,24.79),t.bezierCurveTo(.789,25.461,1.334,26.005,2.0060000000000002,26.005),t.lineTo(27.289,26.005),t.bezierCurveTo(27.961000000000002,26.005,28.504,25.461,28.504,24.79),t.lineTo(28.504,23.267),t.lineTo(.789,23.267),t.lineTo(.789,24.79),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(27.289,6.912),t.lineTo(2.006,6.912),t.bezierCurveTo(1.3339999999999996,6.912,.7889999999999997,7.455,.7889999999999997,8.126),t.lineTo(.7889999999999997,23.227),t.lineTo(28.503999999999998,23.227),t.lineTo(28.503999999999998,8.126),t.bezierCurveTo(28.504,7.455,27.961,6.912,27.289,6.912),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var i=t.createLinearGradient(5.54,6.2451,23.7529,24.458);i.addColorStop(0,"#B2CBEA"),i.addColorStop(1,"#2E8ECE"),t.fillStyle=i,t.beginPath(),t.moveTo(25.78,8.671),t.lineTo(3.514,8.671),t.bezierCurveTo(2.9819999999999998,8.671,2.549,9.101999999999999,2.549,9.635),t.lineTo(2.549,21.466),t.lineTo(26.743,21.466),t.lineTo(26.743,9.636),t.bezierCurveTo(26.743,9.102,26.312,8.671,25.78,8.671),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(27.053,33.602),t.lineTo(36.22,33.602),t.quadraticCurveTo(36.22,33.602,36.22,33.602),t.lineTo(36.22,36.501),t.quadraticCurveTo(36.22,36.501,36.22,36.501),t.lineTo(27.053,36.501),t.quadraticCurveTo(27.053,36.501,27.053,36.501),t.lineTo(27.053,33.602),t.quadraticCurveTo(27.053,33.602,27.053,33.602),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(39.104,37.352),t.bezierCurveTo(39.104,37.891,38.67,38.327,38.13,38.327),t.lineTo(25.143,38.327),t.bezierCurveTo(24.602,38.327,24.166,37.891,24.166,37.352),t.lineTo(24.166,37.477999999999994),t.bezierCurveTo(24.166,36.937,24.602,36.501,25.143,36.501),t.lineTo(38.131,36.501),t.bezierCurveTo(38.671,36.501,39.105,36.937,39.105,37.477999999999994),t.lineTo(39.105,37.352),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(16.514,32.275),t.bezierCurveTo(16.514,33.004999999999995,17.107,33.601,17.839,33.601),t.lineTo(45.433,33.601),t.bezierCurveTo(46.166,33.601,46.758,33.005,46.758,32.275),t.lineTo(46.758,30.607999999999997),t.lineTo(16.514,30.607999999999997),t.lineTo(16.514,32.275),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(45.433,12.763),t.lineTo(17.839,12.763),t.bezierCurveTo(17.107,12.763,16.514,13.356,16.514,14.089),t.lineTo(16.514,30.57),t.lineTo(46.757999999999996,30.57),t.lineTo(46.757999999999996,14.088),t.bezierCurveTo(46.758,13.356,46.166,12.763,45.433,12.763),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(i=t.createLinearGradient(21.6973,12.0352,41.5743,31.9122)).addColorStop(0,"#B2CBEA"),i.addColorStop(1,"#2E8ECE"),t.fillStyle=i,t.beginPath(),t.moveTo(43.785,14.683),t.lineTo(19.486,14.683),t.bezierCurveTo(18.903000000000002,14.683,18.433,15.153,18.433,15.735),t.lineTo(18.433,28.649),t.lineTo(44.837,28.649),t.lineTo(44.837,15.734),t.bezierCurveTo(44.838,15.153,44.367,14.683,43.785,14.683),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.globalAlpha=.5,t.beginPath(),t.moveTo(23.709,36.33),t.lineTo(4.232,36.33),t.lineTo(4.232,27.199),t.lineTo(5.304,27.199),t.lineTo(5.304,35.259),t.lineTo(23.709,35.259),t.lineTo(23.709,36.33),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},subnetwork:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(60.75,0),t.lineTo(60.75,42.125),t.lineTo(0,42.125),t.closePath(),t.clip(),t.translate(0,.26859504132231393),t.scale(.6694214876033058,.6694214876033058),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var i=t.createLinearGradient(43.6724,-2.7627,43.6724,59.3806);i.addColorStop(0,"rgba(159, 160, 160, 0.7)"),i.addColorStop(.9726,"#E9EAEA"),t.fillStyle=i,t.beginPath(),t.moveTo(61.732,16.509),t.bezierCurveTo(61.686,16.509,61.644,16.515,61.599,16.515),t.bezierCurveTo(58.126,8.152000000000001,49.884,2.2650000000000006,40.262,2.2650000000000006),t.bezierCurveTo(29.567,2.2650000000000006,20.594,9.545000000000002,17.966,19.415),t.bezierCurveTo(9.09,20.566,2.229,28.136,2.229,37.326),t.bezierCurveTo(2.229,47.309,10.322,55.403000000000006,20.306,55.403000000000006),t.bezierCurveTo(23.374000000000002,55.403000000000006,26.257,54.633,28.787,53.28900000000001),t.bezierCurveTo(31.197,56.56000000000001,35.067,58.69000000000001,39.442,58.69000000000001),t.bezierCurveTo(42.555,58.69000000000001,45.408,57.60900000000001,47.669,55.81200000000001),t.bezierCurveTo(51.586,58.57800000000001,56.443999999999996,60.238000000000014,61.732,60.238000000000014),t.bezierCurveTo(74.64699999999999,60.238000000000014,85.116,50.45000000000002,85.116,38.37400000000001),t.bezierCurveTo(85.116,26.298,74.646,16.509,61.732,16.509),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(34.966,44.287),t.lineTo(45.112,44.287),t.quadraticCurveTo(45.112,44.287,45.112,44.287),t.lineTo(45.112,47.497),t.quadraticCurveTo(45.112,47.497,45.112,47.497),t.lineTo(34.966,47.497),t.quadraticCurveTo(34.966,47.497,34.966,47.497),t.lineTo(34.966,44.287),t.quadraticCurveTo(34.966,44.287,34.966,44.287),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#727171",t.beginPath(),t.moveTo(48.306,48.439),t.bezierCurveTo(48.306,49.034,47.824999999999996,49.52,47.226,49.52),t.lineTo(32.854,49.52),t.bezierCurveTo(32.253,49.52,31.771,49.034000000000006,31.771,48.439),t.lineTo(31.771,48.578),t.bezierCurveTo(31.771,47.981,32.253,47.497,32.854,47.497),t.lineTo(47.226,47.497),t.bezierCurveTo(47.824999999999996,47.497,48.306,47.98,48.306,48.578),t.lineTo(48.306,48.439),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#b5b5b6",t.beginPath(),t.moveTo(23.302,42.82),t.bezierCurveTo(23.302,43.63,23.96,44.287,24.772,44.287),t.lineTo(55.308,44.287),t.bezierCurveTo(56.12,44.287,56.775,43.629999999999995,56.775,42.82),t.lineTo(56.775,40.98),t.lineTo(23.302,40.98),t.lineTo(23.302,42.82),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(55.307,21.229),t.lineTo(24.771,21.229),t.bezierCurveTo(23.959,21.229,23.301000000000002,21.884,23.301000000000002,22.695),t.lineTo(23.301000000000002,40.933),t.lineTo(56.774,40.933),t.lineTo(56.774,22.695),t.bezierCurveTo(56.774,21.884,56.119,21.229,55.307,21.229),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(i=t.createLinearGradient(29.04,20.4219,51.0363,42.4181)).addColorStop(0,"#B2CBEA"),i.addColorStop(1,"#2E8ECE"),t.fillStyle=i,t.beginPath(),t.moveTo(53.485,23.353),t.lineTo(26.592,23.353),t.bezierCurveTo(25.948999999999998,23.353,25.427,23.873,25.427,24.517000000000003),t.lineTo(25.427,38.807),t.lineTo(54.647,38.807),t.lineTo(54.647,24.517000000000003),t.bezierCurveTo(54.648,23.873,54.127,23.353,53.485,23.353),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore()}}};for(var en in tn)Oe("Q-"+en,tn[en]);function nn(t){return this.$layoutByAnchorPoint&&this._m0v&&(t.x-=this._m0v.x,t.y-=this._m0v.y),this.$rotate&&Ci(t,this.$rotate),t.x+=this.$offsetX||0,t.y+=this.$offsetY||0,this.$rotatable&&this.$_hostRotate?Ci(t,this.$_hostRotate):t}function rn(t){return this.$rotatable&&this.$_hostRotate&&Ci(t,-this.$_hostRotate),t.x-=this.$offsetX||0,t.y-=this.$offsetY||0,this.$rotate&&Ci(t,-this.$rotate),this.$layoutByAnchorPoint&&this._m0v&&(t.x+=this._m0v.x,t.y+=this._m0v.y),t}function sn(){var t=this.$invalidateSize;this.$invalidateSize&&(this.$invalidateSize=!1,this.$invalidateAnchorPoint=!0,this._83.setByRect(this._j4),this.$padding&&this._83.grow(this.$padding),this.$border&&this._83.grow(this.$border));var i=this._$o();if(i)var e=this.showPointer&&this.$pointerWidth;return this.$invalidateAnchorPoint&&this.$layoutByAnchorPoint&&(this.$invalidateAnchorPoint=!1,e&&(t=!0),this._m0v=St(this.$anchorPosition,this._83.width,this._83.height),this._m0v.x+=this._83.x,this._m0v.y+=this._83.y),i?(t&&(this._m1ackgroundGradientInvalidateFlag=!0,function(t){var i=this._83.x+this.$border/2,e=this._83.y+this.$border/2,n=this._83.width-this.$border,r=this._83.height-this.$border,s=0,o=0;if(this.$borderRadius&&(U(this.$borderRadius)?s=o=this.$borderRadius:(s=this.$borderRadius.x||0,o=this.$borderRadius.y||0),s=Math.min(s,n/2),o=Math.min(o,r/2)),t&&(this._pointerX=this._m0v.x-this.$offsetX+this.$pointerX,this._pointerY=this._m0v.y-this.$offsetY+this.$pointerY,!this._83.intersectsPoint(this._pointerX,this._pointerY))){var h=new Ze(i,e,n,r,s,o,this.$pointerWidth,this._pointerX,this._pointerY);return this._l9Shape=h._ky,this._l9Shape.bounds.set(i,e,n,r),void(this.__l0Pointer=!0)}this._l9Shape&&this._l9Shape.clear(),this._l9Shape=tr.getRect(i,e,n,r,s,o,this._l9Shape),this._l9Shape.bounds.set(i,e,n,r)}.call(this,e)),this._m1ackgroundGradientInvalidateFlag&&(this._m1ackgroundGradientInvalidateFlag=!1,this.backgroundGradient&&this._l9Shape&&this._l9Shape.bounds?this._m1ackgroundGradient=Le.prototype.generatorGradient.call(this.backgroundGradient,this._l9Shape.bounds):this._m1ackgroundGradient=null)):this.__l0Pointer=!1,t}function on(t,i,e,n){if(n&&(t.width<0||t.height<0))return t.x=i,t.y=e,void(t.width=t.height=0);i<t.x?(t.width+=t.x-i,t.x=i):i>t.x+t.width&&(t.width=i-t.x),e<t.y?(t.height+=t.y-e,t.y=e):e>t.y+t.height&&(t.height=e-t.y)}var hn=function(){this.$invalidateRotate=!1;var t=this._fu;t.clear();var i=this.$border||0,e=this._83.x+i/2,n=this._83.y+i/2,r=this._83.width-i,s=this._83.height-i,o=nn.call(this,{x:e,y:n});on(t,o.x,o.y,!0),on(t,(o=nn.call(this,{x:e+r,y:n})).x,o.y),on(t,(o=nn.call(this,{x:e+r,y:n+s})).x,o.y),on(t,(o=nn.call(this,{x:e,y:n+s})).x,o.y),this.__l0Pointer&&on(t,(o=nn.call(this,{x:this._pointerX,y:this._pointerY})).x,o.y),i&&t.grow(i/2)};function an(t,i){if(i)if(i._83.isEmpty())t.$x=i.$x,t.$y=i.$y;else{var e=function(t,i,e){var n,r=t.position,s=void 0===t.layoutByPath?this.layoutByPath:t.layoutByPath;return this.$data instanceof Ye&&s?((n=le._m0f(r,this.$data,this.lineWidth,i,e)).x*=this._j6,n.y*=this._j8):((n=St(r,this._83.width,this._83.height)).x+=this._83.x,n.y+=this._83.y),nn.call(this,n)}.call(i,t);t.$x=e.x,t.$y=e.y,t._hostRotate=e.rotate}else t.$x=0,t.$y=0;t.$invalidateRotate&&hn.call(t)}function ln(t){if(void 0===t.lineDash){var i,e;if(t.setLineDash)i=t.getLineDash,e=t.setLineDash;else{var n;if(void 0!==t.mozDash)n="mozDash";else{if(void 0===t.webkitLineDash)return!1;n="webkitLineDash"}e=function(t){this[n]=t},i=function(){return this[n]}}tt(t,"lineDash",{get:function(){return i.call(this)},set:function(t){e.call(this,t)}})}if(void 0===t.lineDashOffset){var r;if(void 0!==t.mozDashOffset)r="mozDashOffset";else{if(void 0===t.webkitLineDashOffset)return;r="webkitLineDashOffset"}tt(t,"lineDashOffset",{get:function(){return this[r]},set:function(t){this[r]=t}})}}function _n(t){return t.reduce(function(t,i){return 2*t+i},0)}function un(t){for(var i=[],e=7;0<=e;e--)i.push(!!(t&1<<e));return i}var cn={_g7:!1,_jn:null,_m3m:0,_kg:-1,_kc:null,_e5:function(t){this._jn||(this._jn=[],this._it=2),this._jn.push(t),this._d5(),this._kf()},_kf:function(){if(!this._kc){var i=this;this._kc=setTimeout(function t(){!1===i._d5()?delete i._kc:i._kc=setTimeout(t,i._g9())},this._g9())}},_g9:function(){return Math.max(20,this._jn[this._kg].delay)},_d5:function(){return this._ey(this._kg+1)},_ey:function(t){if(this._g7)t%=this._m3m;else if(t>=this._jn.length)return!1;if(this._kg==t)return!1;this._kg=t;var i=this._jn[this._kg],e=i._m3ache;return e||(i._m3ache=e=Bi(this.width,this.height),e.g.putImageData(i.data,0,0),e._pixels=i._pixels),this._k6=e,this.$invalidateSize=!0,this._dg()},_m3o:function(){if(this._jn){if(this._g7=!0,this._m3m=this._jn.length,1==this._m3m)return this._dg();this._kf()}else this._hn()},_l7:function(){this._kc&&(clearTimeout(this._kc),delete this._kc)},_dg:function(){var t=this._dispatcher.listeners;if(!t||!t.length)return!1;for(var i=new xt(this,"image","load",this._k6),e=0,n=t.length;e<n;e++){var r=t[e];r.scope._ja&&r.scope._ja._i1ed?(t.splice(e,1),e--,n--):r.onEvent.call(r.scope,i)}return 0<t.length},_m0i:function(t,i){this._dispatcher.addListener(t,i),this._g7&&!this._kc&&this._kf()},_6h:function(t,i){this._dispatcher.removeListener(t,i),this._dispatcher._m17()||this._l7()},_i1:function(){this._l7(),this._dispatcher.clear()},_fc:function(t,i,e){var n=this._k6._m1ufferedImage;return n||(this._k6._m1ufferedImage=n=new Xe(this._k6,1)),n}},fn=function(t){this.data=t,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return 255&t.charCodeAt(this.pos++)},this.readBytes=function(t){for(var i=[],e=0;e<t;e++)i.push(this.readByte());return i},this.read=function(t){for(var i="",e=0;e<t;e++)i+=String.fromCharCode(this.readByte());return i},this.readUnsigned=function(){var t=this.readBytes(2);return(t[1]<<8)+t[0]}},dn=function(r,s){function o(t){for(var i=[],e=0;e<t;e++)i.push(r.readBytes(3));return i}function h(){var t,i;for(i="";t=r.readByte(),i+=r.read(t),0!==t;);return i}function i(t){var i,e,n;switch(t.label=r.readByte(),t.label){case 249:t.extType="gce",function(t){r.readByte();var i=un(r.readByte());t.reserved=i.splice(0,3),t.disposalMethod=_n(i.splice(0,3)),t.userInput=i.shift(),t.transparencyGiven=i.shift(),t.delayTime=r.readUnsigned(),t.transparencyIndex=r.readByte(),t.terminator=r.readByte(),s.gce&&s.gce(t)}(t);break;case 254:t.extType="com",(e=t).comment=h(),s.com&&s.com(e);break;case 1:t.extType="pte",n=t,r.readByte(),n.ptHeader=r.readBytes(12),n.ptData=h(),s.pte&&s.pte(n);break;case 255:t.extType="app",function(t){var i,e;switch(r.readByte(),t.identifier=r.read(8),t.authCode=r.read(3),t.identifier){case"NETSCAPE":e=t,r.readByte(),e.unknown=r.readByte(),e.iterations=r.readUnsigned(),e.terminator=r.readByte(),s.app&&s.app.NETSCAPE&&s.app.NETSCAPE(e);break;default:(i=t).appData=h(),s.app&&s.app[i.identifier]&&s.app[i.identifier](i)}}(t);break;default:t.extType="unknown",(i=t).data=h(),s.unknown&&s.unknown(i)}}function e(t){t.leftPos=r.readUnsigned(),t.topPos=r.readUnsigned(),t.width=r.readUnsigned(),t.height=r.readUnsigned();var i=t.width*t.height,e=un(r.readByte());t.lctFlag=e.shift(),t.interlaced=e.shift(),t.sorted=e.shift(),t.reserved=e.splice(0,2),t.lctSize=_n(e.splice(0,3)),t.lctFlag&&(t.lct=o(1<<t.lctSize+1)),t.lzwMinCodeSize=r.readByte();var n=h();t.pixels=function(i,n,t){function e(t){for(var i=0,e=0;e<t;e++)n.charCodeAt(h>>3)&1<<(7&h)&&(i|=1<<e),h++;return i}function r(){c=[],u=i+1;for(var t=0;t<l;t++)c[t]=[t];c[l]=[],c[_]=null}for(var s,o,h=0,a=[],l=1<<i,_=1+l,u=i+1,c=[],f=0;o=s,s=e(u),!(f++>t);)if(s!==l){if(s===_)break;if(s<c.length)o!==l&&c.push(c[o].concat(c[s][0]));else{if(s!==c.length)throw new Error("Invalid LZW code.");c.push(c[o].concat(c[o][0]))}a.push.apply(a,c[s]),c.length===1<<u&&u<12&&u++}else r();return a}(t.lzwMinCodeSize,n,i),t.interlaced&&(t.pixels=function(t,i){for(var e,n,r=new Array(t.length),s=t.length/i,o=[0,4,2,1],h=[8,8,4,2],a=0,l=0;l<4;l++)for(var _=o[l];_<s;_+=h[l])e=_,n=t.slice(a*i,(a+1)*i),r.splice.apply(r,[e*i,i].concat(n)),a++;return r}(t.pixels,t.width)),s.img&&s.img(t)}s=s||{};var n=function(){var t={};switch(t.sentinel=r.readByte(),String.fromCharCode(t.sentinel)){case"!":t.type="ext",i(t);break;case",":t.type="img",e(t);break;case";":t.type="eof",s.eof&&s.eof(t);break;default:throw new Error("Unknown block: 0x"+t.sentinel.toString(16))}"eof"!==t.type&&setTimeout(n,0)};!function(){var t={};if(t.sig=r.read(3),t.ver=r.read(3),"GIF"!==t.sig)throw new Error("Not a GIF file.");t.width=r.readUnsigned(),t.height=r.readUnsigned();var i=un(r.readByte());t.gctFlag=i.shift(),t.colorRes=_n(i.splice(0,3)),t.sorted=i.shift(),t.gctSize=_n(i.splice(0,3)),t.bgColor=r.readByte(),t.pixelAspectRatio=r.readByte(),t.gctFlag&&(t.gct=o(1<<t.gctSize+1)),s.hdr&&s.hdr(t)}(),setTimeout(n,0)},En="";y.addEventListener&&y.addEventListener("keydown",function(t){if(t.ctrlKey&&t.shiftKey&&t.altKey&&73==t.keyCode){var i=Si.name+"\nVersion - "+Si.version+"\nPublish Date - "+Si.publishDate+"\n"+Si.about+"\n"+Si.copyright+En;Si.alert(i)}},!1),En="\nLicensed to: "+decodeURIComponent("%E5%8C%97%E4%BA%AC%E4%B8%AD%E6%99%BA%E6%B6%A6%E9%82%A6%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%20-%20%E9%93%81%E8%B7%AF%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1%E5%B9%B3%E5%8F%B0");var gn="Q-Canvas";Kt("."+gn,{position:"absolute",userSelect:"none",outline:"none",transformOrigin:"0 0","-webkit-tap-highlight-color":"rgba(0,0,0,0)"});var vn="Q-CanvasPanel";Kt("."+vn,{width:"100%",height:"100%",position:"relative",overflow:"hidden",textAlign:"left",outline:"none",tapHighlightColor:"rgba(0,0,0,0)",userSelect:"none"});var pn="Q-Graph";function a(t,l){return function t(i){var e=i.length,n=Math.ceil(e/2);return e<=1?i:function(t,i){for(var e=t.length,n=i.length,r=e+n,s=new Array(r),o=0,h=0,a=0;a<r;)o===e?s[a++]=i[h++]:h===n||l(t[o],i[h])<=0?s[a++]=t[o++]:s[a++]=i[h++];return s}(t(i.slice(0,n)),t(i.slice(n)))}(t)}Kt("."+pn,{overflow:"hidden","text-align":"left","-webkit-tap-highlight-color":"rgba(0,0,0,0)",outline:"none"});var mn,yn=E(function(t){this._m1f=new On,this._lq=new ht,this._8f=[],this._m3p=[],this._l8ingList=[],this._8e={},this.bounds=new pt,this._jo=new Dn,this._viewport=new Pn,this._jo.listener=function(t){this._76(t)}.bind(this),this._m3s(),this.setParent(t)},{_m18:null,_iv:null,_lq:null,_m3p:null,_jo:null,_m3a:function(t){return t?(this._6es||(this._6es={}),!this._6es[t]&&(this._6es[t]=!0,void this.invalidate())):this.invalidate()},_9s:function(t){return this._6es&&this._6es[t]},isInvalidate:function(){return this._6e},clear:function(){this._lq.clear(),this._m3p.length=0,this._8e={},this._m0t=!1,this.invalidate()},_72:function(){this._m3a("size"),this._2l()},_2l:function(){this._m3a("viewport")},invalidate:function(t){!t&&this._6e||(this._6e=!0,this._l7||(this._jcingID=requestAnimationFrame(this._fb.bind(this))))},_73:function(t){(this._l7=t)?this._jcingID&&(cancelAnimationFrame(this._jcingID),this._jcingID=null):this._6e&&this.invalidate(!0)},_fb:function(){this._jcingID=null,this._6e=!1;var t=this._m0t;this._m0t||(this._m3r(),this._m0t=!0),this._m3q(!t),this._3d(),this._jc(),this._28()},_m3q:function(t){this._m1d=t||this.fullRefresh,(t||this._6es.size)&&this._9u(),(t||this._6es.matrix)&&this._78(),this._m1b(t),this._4a(t),this._6es={}},_3d:function(){this._m3p.length=0;var e=this._viewport;if(this._lq.forEach(function(t){if(!1!==t.__hy){var i=this._m19(t);e.intersects(i.x,i.y,i.width,i.height)&&this._m3p.push(t)}},this),this._m3p=this._ia(this._m3p),!this._m1d){var n=this._m1f;this._l8ingList.length=0,n._m1e(this._viewport),n._id()||this._m3p.forEach(function(t){var i=this._m19(t);n._ee(i.x,i.y,i.width,i.height)&&this._l8ingList.push(t)},this)}},_ia:function(t){return R?t=a(t,this._9t):t.sort(this._9t),t},_9t:function(t,i){return(t=t.zIndex||0)-(i.zIndex||0)},_m19:function(t){return t.boundingBox},_jc:function(){if(this._m1d)return this._eb(),this._75(!0),void this.render(this._m3tx,this._m3p);this._75(this._m1uffer);var t=this._m1f,i=this._m3tx;i.save(),this._m1uffer&&(Tn(i),i.drawImage(this._m1uffer.canvas,this._m1uffer.x,this._m1uffer.y)),t._js(i,this._ec.bind(this)),this._eb(),this.render(i,this._l8ingList),i.restore()},_75:function(t){var i;this._m3aCanvasSizeFlag?(this._m3aCanvasSizeFlag=!1,this._iv.setSize(this._width,this._height)):t&&((i=this._iv).width=i.width)},_9u:function(){var t=this.width,i=this.height;if(this._width==t&&this._height==i)return!1;this._width=t,this._height=i,this._m3aCanvasSizeFlag=!0},_4a:function(t){if(!t&&!this._6es.viewport)return!1;var i=this._jo.reverseTransform([0,0]),e=this.scale,n=this._width/e,r=this._height/e,s=this.rotate,o=this._viewport;if(o.x==i[0]&&o.y==i[1]&&o.width==n&&o.height==r&&o.rotate==s)return!1;var h=o.toJSON();return this._viewport.set(i[0],i[1],n,r,s,e),this._37(this._viewport,h,t),!0},_37:function(t,i,e){this._m1d||e||(this._m1uffer=this._gf(i,t))},_76:function(t){var i;this._m0t&&(this._l7&&(this._m3urrentMatrix?this._m3urrentMatrix.transMatrix=i=bn.mul([],this._jo.m,bn.invert([],this._m3urrentMatrix.m)):i=this._jo.m,this._5l(i)),this._m3a("matrix"),this._2l())},_5l:function(t){this.__m3ssMatrix=t,Nn.setStyle(this._iv,"transform",t?"matrix("+t.join(",")+")":"")},_78:function(){var t=this._m3urrentMatrix;if(this._m3urrentMatrix={tx:this._jo.m[4],ty:this._jo.m[5],m:this._jo.m.slice(),scale:this._jo._gz(),rotate:this._jo._ei()},this.__m3ssMatrix&&this._5l(null),!this._m1d){if(this._2m(this._m3urrentMatrix,t),!t||t.scale!=this._m3urrentMatrix.scale)return this._7c(this._m3urrentMatrix.scale,t?t.scale:null),void(this._m1d=!0);if(!t||t.rotate!=this._m3urrentMatrix.rotate)return this._5v(this._m3urrentMatrix.rotate,t?t.rotate:null),void(this._m1d=!0);var i=t.m[4]-this._m3urrentMatrix.m[4],e=t.m[5]-this._m3urrentMatrix.m[5],n=this.ratio;i*=n,e*=n,(1e-4<Math.abs(i-Math.round(i))||1e-4<Math.abs(e-Math.round(e)))&&(this._m1d=!0)}},_7a:function(){var i=this.bounds,t=i.clone();i.clear(),this._lq.forEach(function(t){!1!==t.__hy&&i.add(this._m19(t))},this),i.equals(t)||this._3f(i,t)},_3f:function(t,i){},_m0t:!1,_m3r:function(){},_9v:function(t){var i=t.ratio;t.scale(i,i),t.transform.apply(t,this._jo.m)},render:function(i,t){t&&t.length&&(i.save(),this._9v(i),t.forEach(function(t){if(i.save(),!1!==t.visible)try{t.render(i)}catch(t){console.error(t)}i.restore()},this),i.restore())},setParent:function(t){H(t)&&(t=y.getElementById(t)),this._ls!=t&&(this._ls&&this._m18&&(Y(this._ls,pn),this._ls.removeChild(this._m18)),this._ls=t,this._ls&&(z(this._ls,pn),this._ls.appendChild(this._7b()),this._72()))},_7b:function(){return this._m18||this._m3s(),this._m18},_m3s:function(){var t=Bi(!0);ln(t.g),t.className=gn;var i=y.createElement("div");return i.addEventListener("mousedown",function(t){if(y.activeElement==this)return t.preventDefault&&t.preventDefault(),!1}.bind(i),!1),i.className=vn,i.appendChild(t),i.tabIndex=0,this._iv=t,this._m18=i,this._m3tx=this._iv.getContext("2d"),t},toLogical:function(t,i){return t instanceof Object&&(nt(t)&&(t=this._7v(t)),t=Array.isArray(t)?(i=t[1]||0,t[0]||0):(i=t.y||0,t.x||0)),this._jo.reverseTransform([t,i])},toCanvas:function(t,i){return this._jo.transform([t,i])},_7v:function(t){return function(t,i){t.touches&&(t=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t.touches[0]);var e=t.clientX||0,n=t.clientY||0;G&&P&&(u.pageXOffset&&e==t.pageX&&(e-=u.pageXOffset),u.pageYOffset&&n==t.pageY&&(n-=u.pageYOffset));var r=i.getBoundingClientRect();e-=r.left,n-=r.top;var s=Jt(i,r);return s&&1!==s&&(e/=s,n/=s),{x:e,y:n}}(t,this._m18)},_e6:function(t,i,e){if(t.hitTest instanceof Function)return t.hitTest(i,e);var n=this._m19(t);return n?e?pt.intersects(n.x,n.y,n.width,n.height,i[0]-e,i[1]-e,e+e,e+e):pt.intersects(n.x,n.y,n.width,n.height,i[0],i[1]):t},hitTest:function(t,i){return this._8c(t,i)},_8c:function(t,i){i=this._9w(i),t=this.toLogical(t);for(var e,n=this._m3p.length;0<=--n;)if(e=this._m3p[n],this._e6(e,t,i))return e},_9w:function(t){return null==t&&(t=ot.SELECTION_TOLERANCE),t?t/this.scale:0},getUIByMouseEvent:function(t,i){if(t.uiId)return this._lq.getById(t.uiId);var e=this._8c(t,i);return t.uiId=e?e.id:-1,e},_8e:null,invalidateUI:function(t){this._8e[t.id]=t,this.invalidate()},_9y:function(t){t.validate instanceof Function&&t.validate(this)},_m3t:function(t,i){t.__j4&&this._gh(t.__j4);var e=t.__hy;if(t.__hy=this._e7(t,i),!t.__hy)return e;var n=t.__j4;this._9y(t);var r=this._m19(t);t.__j4={x:r.x,y:r.y,width:r.width,height:r.height};var s=t.__hy!==e||!pt.equals(n,r);return s&&t.__j4&&this._gh(t.__j4),s},_e7:function(t,i){return!1!==t.visible},_$q:function(i){this._lq.forEach(function(t){this._m3t(t,i)},this),this._8e={},this._7a()},_m1b:function(t){var i=this.scale;if(t)return this._$q(i);var e=this._m3aBoundsFlag;for(var n in this._m3aBoundsFlag=!1,this._8e){var r=this._8e[n];e?this._m3t(r,i):e=this._m3t(r,i)}this._8e={},e&&this._7a()},_8f:null,_28:function(){if(!this._8f.length)return!1;var t=this._8f;this._8f=[],t.forEach(function(t){try{var i=t.call,e=t.scope,n=t.delay;e instanceof Object?i=i.bind(e):e&&!n&&(n=parseInt(e)),n?setTimeout(i,n):i()}catch(t){}},this),this._6e&&this._fb()},_d3:function(t,i,e){this._8f.push({call:t,scope:i,delay:e}),this._6e||this._28()},_4c:function(t,i){for(var e=this._m3p,n=0,r=e.length;n<r;n++)if(!1===t.call(i,e[n]))return!1},_e8:function(t,i){this._lq.forEach(t,i)},_$u:function(t,i){for(var e=this._m3p,n=e.length-1;0<=n;n--)if(!1===t.call(i,e[n]))return!1},_4d:function(t,i){this._lq.forEachReverse(t,i)},_4e:function(){return this.bounds},_ga:function(t,i,e){t/=this.scale||1,this._jp(t,i,e)},_jp:function(t,i,e){if(this._m0t&&null==i){var n=this.toLogical(this.width/2,this.height/2);i=n[0]||0,e=n[1]||0}return this._jo.scale(t,[i||0,e||0])},_e9:function(t,i){this._jo.translate([t,i],!0)},_m1c:function(t,i,e,n){if(e==this.scale&&!1!==n){var r=this.ratio;r!=(0|r)&&(t=Math.round(t*r)/r,i=Math.round(i*r)/r)}this._jo.translateTo([t,i],e)},_jq:function(t,i){return this._jp(this._ea,t,i)},_ic:function(t,i){return this._jp(1/this._ea,t,i)},_1j:function(){var t=this._4e();if(!t.isEmpty()){var i=this.width/t.width,e=this.height/t.height,n=Math.min(i,e);return{scale:n=Math.max(this._gd,Math.min(this._gc,n)),cx:t.cx,cy:t.cy}}},_ea:1.2,_gc:10,_gd:.1,_m1d:!1,_7c:function(t,i){},_5v:function(t,i){},_2m:function(){},_eb:function(){this._m1uffer=null,this._m1f._kh()},_ec:function(t){var i=this._jo,e=this._iv.ratio,n=this.scale;if(!i._ei()){var r=i.transform([t[0],t[1]]);return r[0]*=e,r[1]*=e,e*=n,r[2]=t[2]*e,r[3]=t[3]*e,r}var s=new pt,o=i.transform([t[0],t[1]]);return s.add(o[0],o[1]),o=i.transform([t[0]+t[2],t[1]]),s.add(o[0],o[1]),o=i.transform([t[0],t[1]+t[3]]),s.add(o[0],o[1]),o=i.transform([t[0]+t[2],t[1]+t[3]]),s.add(o[0],o[1]),[s.x*e,s.y*e,s.width*e,s.height*e]},_gf:function(t,i){var e=this._iv;if(e.width&&e.height){var n=i._3q(t.x,t.y,t.width,t.height);if(n&&n.width&&n.width){var r=this.scale*this.ratio,s=this._m1f,o={};1e-6<n.x&&(o.left=i._4o(0,0,n.x,i.height,r)),1e-6<i.width-n.right&&(o.right=i._4o(n.right,0,i.width-n.right,i.height,r)),1e-6<n.y&&(o.top=i._4o(n.x,0,n.width,n.y,r)),1e-6<i.height-n.bottom&&(o.bottom=i._4o(n.x,n.bottom,n.width,i.height-n.bottom,r)),function(t){var i=!0;for(var e in t){i=!1;break}return i}(o)||s._4g(o);var h=i._i0(t.x,t.y),a=(h[0]-n.x)*r,l=(h[1]-n.y)*r,_=n.width*r,u=n.height*r;a=Math.round(a),l=Math.round(l),_=Math.round(_),u=Math.round(u);var c=this._m1ackCanvas;return c||((c=this._m1ackCanvas=y.createElement("canvas")).g=c.getContext("2d")),c.width=_,c.height=u,Tn(c.g),c.g.drawImage(e,a,l),{x:a=h[0]*r-a,y:l=h[1]*r-l,canvas:c}}}},_l9:function(t,i,e,n){this._m1f._lk(t,i,e,n)},_gh:function(t){this._m1f._ie(t)}});function Tn(t){t[mn=mn||("imageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"imageSmoothingEnabled":"mozImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"mozImageSmoothingEnabled":"msImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"msImageSmoothingEnabled":"webkitImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"webkitImageSmoothingEnabled":"imageSmoothingEnabled")]=!1}Object.defineProperties(yn.prototype,{width:{get:function(){return this._m18.clientWidth}},height:{get:function(){return this._m18.clientHeight}},rotate:{get:function(){return this._jo._ei()}},tx:{get:function(){return this._jo._8i()[0]}},ty:{get:function(){return this._jo._8i()[1]}},ratio:{get:function(){if(this._iv)return this._iv.ratio}},scale:{get:function(){return this._jo._gz()},set:function(t){this._ga(t)}},renderScale:{get:function(){return this.scale*this.ratio}},uis:{get:function(){return this._lq}},length:{get:function(){return this._lq.length}},viewportBounds:{get:function(){return this._viewport.getGlobalBounds()}}});var On=E({constructor:function(){this._gl=[],this._j4=new pt,this._gj=L?20:50},_gj:20,_gl:null,_lb:!1,_j4:null,_kh:function(){this._lb=!1,this._gl.length=0,this._viewportClips=null,this._j4.clear()},_id:function(){return 0==this._gl.length&&!this._viewportClips},_lk:function(t,i,e,n){e<=0||n<=0||this._gl.push([t,i,e,n])},_ie:function(t){this._lk(t.x,t.y,t.width,t.height)},_4g:function(t){var i=this._j4;for(var e in t){var n=t[e].getGlobalBounds();i.add(n)}this._viewportClips=t},_m1e:function(t,i){for(var e=[],n=this._gl,r=0,s=n.length;r<s;r++){var o=n[r];t.intersects(o[0],o[1],o[2],o[3])&&(e.push(o),this._j4.addRect(o[0],o[1],o[2],o[3]))}this._gl=e,this._lb=i||e.length>=this._gj},_ee:function(t,i,e,n){if(!this._j4.intersectsRect(t,i,e,n))return!1;if(this._lb)return!0;if(this._viewportClips){var r=this._viewportClips;for(var s in r)if(r[s].intersects(t,i,e,n))return!0}for(var o,h=0,a=this._gl.length;h<a;h++)if(o=this._gl[h],pt.intersects(t,i,e,n,o[0],o[1],o[2],o[3]))return!0;return!1},_js:function(t,i){if(this._id())return!1;if(t.beginPath(),this._lb)return An(t,(o=i([this._j4.x,this._j4.y,this._j4.width,this._j4.height]))[0],o[1],o[2],o[3]),void t.clip();if(this._viewportClips)for(var e in this._viewportClips)An(t,(o=this._viewportClips[e].canvasBounds)[0],o[1],o[2],o[3]);for(var n=this._gl,r=0,s=n.length;r<s;r++){var o;An(t,(o=i(n[r]))[0],o[1],o[2],o[3])}t.clip()}});function An(t,i,e,n,r){n=J(i+n)-(i=Z(i)),r=J(e+r)-(e=Z(e)),t.clearRect(i,e,n,r),t.rect(i,e,n,r)}function Z(t){return Math.floor(t)}function J(t){return Math.ceil(t)}On._toIntRect=function(t,i,e,n){return t instanceof Object&&(i=t.y,e=t.width,n=t.height,t=t.x),e=J(t+e)-(t=Z(t)),n=J(i+n)-(i=Z(i)),[t,i,e,n]},On._m1w=Z,On._f6=J,Ii.NAVIGATION_BUTTON="navigation.button",Ii.NAVIGATION_SCROLLBAR="navigation.scrollbar",ot.NAVIGATION_TYPE=Ii.NAVIGATION_SCROLLBAR;var wn=E({_jc:function(){f(this,wn,"_jc",arguments),this._topCanvas._jc()},_9t:function(t,i){return(t=t.$data.zIndex||0)-(i.$data.zIndex||0)},super:yn,constructor:function(t,i){this._ke=t,H(i)&&(i=y.getElementById(i)),i&&i.tagName||(i=y.createElement("div")),d(this,wn,[i]),this._topCanvas=new is(this,this._m18),this._gr=[],this._ke._8.addListener(this._1g,this),this._ke._1b.addListener(this._9n,this),this._ke._11.addListener(this._7d,this),this._ke._$i.addListener(this._2p,this),this._ke._$l.addListener(this._3l,this),this._m1h={},this._3p(ot.NAVIGATION_TYPE,!0)},_5l:function(t){f(this,wn,"_5l",arguments),this._topCanvas._5l(t)},_gn:function(t){if(t.id||(t=this._lq.getById(t)),!t)return!1;this._lq.remove(t),t.destroy(),t.__j4&&this._gh(t.__j4),this._m3aBoundsFlag=!0},_gp:function(){this._lq.forEach(function(t){t.destroy()}),this._lq.clear()},_e7:function(t,i){var e=t.data||t;return e._$m&&(e._$m=!1,e._hy=this._5f(e,i)),!1!==e._hy},_5f:function(t,i){return!(!this._3h(t,i)||this._ke._hyFilter&&!1===this._ke._hyFilter(t,i))},_9z:function(t){return this._ke._34==Wr(t)},_3h:function(t,i){if(!1===t.visible)return!1;if(!(t instanceof Vn))return this._ke._34==Wr(t)&&!t._dn;var e=t.fromAgent,n=t.toAgent;if(!e||!n)return!1;if(e==n&&!t.isLooped())return!1;if(t.isBundleEnabled()){var r=t.getEdgeBundle(!0);if(r&&!r._e7(t,i))return!1}return!(!this._e7(e,i)||!this._e7(n,i))},_m19:function(t){if(t._m0t)return{x:t.$x+t.uiBounds.x,y:t.$y+t.uiBounds.y,width:t.uiBounds.width,height:t.uiBounds.height}},_2n:function(t){var i=this._kn(t);if(i){var e=this._m19(i);if(e)return new pt(e)}},_e6:function(t,i,e){return t.hitTest(i[0],i[1],e)},hitTest:function(t,i){var e=f(this,wn,"hitTest",arguments);if(e){t=this.toLogical(t),i=this._9w(i);var n=e.hitTest(t[0],t[1],i,!0);if(n instanceof lr)return n}return e},_3j:function(t){return this.getUIByMouseEvent(t)},_75:function(t){f(this,wn,"_75",arguments),this._topCanvas._i3(this.width,this.height)},_kj:1,_m3p:null,_8g:null,_8h:null,_lq:null,_ls:null,_iv:null,_m1f:null,_6e:!1,_m0t:!1,_jo:null,_4c:function(t,i){for(var e=this._m3p,n=0,r=e.length;n<r;n++)if(!1===t.call(i,e[n]))return!1},_e8:function(t,i){this._lq.forEach(t,i)},_$u:function(t,i){for(var e=this._m3p,n=e.length-1;0<=n;n--)if(!1===t.call(i,e[n]))return!1},_4d:function(t,i){this._lq.forEachReverse(t,i)},_37:function(t,i,e){f(this,wn,"_37",arguments),this._viewportChanged={value:t}},_m3r:function(){this._4a(!0),this._originAdjusted||(this._originAdjusted=!0,this._ke&&this._ke.originAtCenter&&this._jo.translateTo([this.width/2,this.height/2]))},_fb:function(){if(!this._i1ed&&this._6e){if(this._jcingID=null,this._6e=!1,this._m0t&&this._ke&&this._ke._$m&&(this._ke._$m=!1,this._ke.forEach(function(t){t.invalidateVisibility(!0)})),f(this,wn,"_fb",arguments),this._8hChanged){this._7g&&this._7g._je();var t=this._8hChanged.value,i=this._8hChanged.old;this._8hChanged=null,this._ke._4q(new Dt(this._ke,"element.bounds",t,i))}this._viewportChanged&&(this._viewportChanged=!1,this._7g&&this._7g._37&&this._7g._37(this._viewport.width*this._viewport.scale,this._viewport.height*this._viewport.scale),this._ke._4q(new Dt(this._ke,"viewport",this._viewport)))}},_gr:null,_m3t:function(t){var i=t.$data;if(!t._1e&&!i._6e&&!i._$m)return!1;var e=t.$invalidateSize;return f(this,wn,"_m3t",arguments)||e},_9y:function(t){var i=t.$data;i.__3y&&(i.__3y=!1,t._3y()),i.__6e&&i._hx()&&(t._5j(),i.__6e=!1),(t._1e||i._6e)&&(i._6e=!1,t.validate())},_gs:function(t,i){var e=t.ratio;t.scale(e,e),t.transform.apply(t,this._jo.m);for(var n=this.renderScale,r=[],s=0,o=i.length;s<o;s++){var h=i[s];h._jc(t,n),h._j3&&h._j3.length&&r.push(h)}if(r.length)for(s=0,o=r.length;s<o;s++)r[s]._99(t,n)},render:function(t,i){if(i.length){if(t.save(),L)try{this._gs(t,i)}catch(t){}else this._gs(t,i);t.restore()}},_gt:function(t,i,e){var n,r;t.save(),t.translate(-e.x*i,-e.y*i),t.scale(i,i);for(var s=this._lq._j2.slice(),o=[],h=0,a=(s=this._ia(s)).length;h<a;h++)(n=s[h]).__hy&&(r=this._m19(n),e.intersectsRect(r.x,r.y,r.width,r.height)&&(n._jc(t,i),n._j3&&n._j3.length&&o.push(n)));if(o.length)for(h=0,a=o.length;h<a;h++)o[h]._99(t,i);t.restore()},_10:function(t,i){},_1l:function(){for(var t,i,e=this._lq._j2,n=new pt,r=e.length-1;0<=r;r--)(t=e[r])._hy&&(i=t.uiBounds,n.addRect(t.$x+i.x,t.$y+i.y,i.width,i.height));var s=this._8h;(this._8h=n).equals(s)||this._10(s,n)},_5w:function(){this._m3p.length=0,this._8g={}},_kl:function(){this._kh()},_i1:function(){this._kh(),this._i1ed=!0,this._6e=!1,this._topCanvas.clear(),this._8f.length=0,this._7g&&(this._7g._i1(),delete this._7g)},_kn:function(t){return this._lq.getById(t.id||t)},_$c:function(t){return this._ef(t)},_gv:function(t,i){var e=this.toCanvas(t,i);return{x:e[0],y:e[1]}},_ef:function(t,i){var e=this.toLogical(t,i);return{x:e[0],y:e[1]}},_$d:null,_3l:function(t){var i=t.source,e=t.data;if(e)if(this._m0t){if(W(e))for(s=0,o=e.length;s<o;s++)r=e[s].id,(n=this._lq.getById(r))&&(n.selected=i.containsById(r),n.invalidateRender());else{if(r=e.id,!(n=this._lq.getById(r)))return;n.selected=i.containsById(r),n.invalidateRender()}this._m3a()}else{var n,r;if(this._$d||(this._$d={}),W(e))for(var s=0,o=e.length;s<o;s++)r=e[s].id,this._$d[r]=!0;else r=e.id,this._$d[r]=!0}},_ke:null,_m3u:function(t){var i=t.uiClass;if(i)return new i(t,this._ke)},_1g:function(t){if(!this._m0t)return!1;var i=t.source,e=t.kind;"enableSubNetwork"==e&&this._ke.invalidateVisibility(),"uiClass"==e?(this._gn(i.id),this._k9(i)):"expanded"==e&&i._hx()&&t.value&&this._5y(i);var n=this._lq.getById(i.id);n&&n._m0t&&n.onPropertyChange(t)&&this._m3a()},_3n:function(t){var i=this._kn(t);i&&(i.invalidateData(),this._m3a())},_9n:function(t){if(!this._m0t)return!1;switch(t.kind){case Gt.KIND_ADD:this._k9(t.data);break;case Gt.KIND_REMOVE:this._gx(t.data);break;case Gt.KIND_CLEAR:this._if(t.data)}},_kh:function(){this._m1h={},this._gp(),this.clear()},_m1h:null,_k9:function(t){var i=this._m3u(t);i&&(this._lq.add(i),this._m0t&&(this._m1h[t.id]=t),this._m3a())},_gx:function(t){if(Array.isArray(t)){for(var i,e=[],n=0,r=t.length;n<r;n++)i=t[n].id,e.push(i),delete this._m1h[i];t=e}else t=t.id,delete this._m1h[t],t=[t];t.forEach(function(t){this._gn(t)},this),this._m3a()},_if:function(t){this._kh()},_7d:function(t){if(!this._m0t)return!1;t.source instanceof Jn&&!this._m1h[t.source.id]&&(t.oldValue&&(this._3n(t.oldValue),t.oldValue.__6e=!0),t.value&&(this._3n(t.value),t.value.__6e=!0),this._5y(t.source))},_2p:function(t){if(!this._m0t)return!1;t.source instanceof Jn&&!this._m1h[t.source.id]&&this._5y(t.source)},_2q:function(t){if(t._edgeBundleInvalidateFlag){var i=t.getEdgeBundle(!0);if(!i)return t._edgeBundleInvalidateFlag=!1,void t.validateEdgeBundle();i.validate(this._ke),i._m1o(function(t){t.validateEdgeBundle()})}},_$q:function(t){this._ke;var i,e=this._ke.graphModel,n=this._lq,r=[],s=1;if(e.forEachByDepthFirst(function(t){if(t instanceof Vn)return this._2q(t),void r.push(t);(f=this._m3u(t))&&(n.add(f),t.__kg=s++)},this),n.length){var o=n._j2;for(s=o.length-1;0<=s;s--)f=o[s],this._3o(f,f.$data,t)}s=0;for(var h=r.length;s<h;s++)if(i=r[s],f=this._m3u(i)){this._3o(f,i,t),n.add(f);var a=i.fromAgent,l=i.toAgent,_=a.__kg||0;a!=l&&(_=Math.max(_,l.__kg||0)),i.__kg=_}if(r.length&&n._j2.sort(function(t,i){return t.$data.__kg-i.$data.__kg}),this._$d){var u=e.selectionModel;for(var c in this._$d){var f;u.containsById(c)&&(f=n.getById(c))&&(f.selected=!0)}this._$d=null}this._7a()},_m1b:function(t,i){if(t)return this._$q();var e,n,r=this._m3aBoundsFlag;for(var s in this._m3aBoundsFlag=!1,this._m1h){var o=this._m1h[s];o instanceof Jn?this._5y(o):this._60(o)}this._m1h={};for(var h=this._lq._j2,a=[],l=h.length-1;0<=l;l--)(n=(e=h[l]).$data)instanceof Vn?(this._2q(n),a.push(e)):this._3o(e,n,i)&&!r&&(r=!0);if(a.length){l=0;for(var _=a.length;l<_;l++)e=a[l],this._3o(e,e.$data,i)&&!r&&(r=!0)}r&&this._7a()},_3o:function(t,i,e){if(i instanceof Vn)return i.__3y&&(i.__3y=!1,t._3y()),this._m3t(t,e);if(i.__6e&&i._hx()&&(t._5j(),i.__6e=!1),this._m3t(t,e)){var n=this._4k(i);return n&&(n.__6e=!0),i.hasEdge()&&i.forEachEdge(function(t){t.__3y=!0},this),!0}},_2s:function(t,i){var e=t.fromAgent,n=t.toAgent,r=i.getIndexById(e.id);if(e==n)return r;var s=i.getIndexById(n.id);return Math.max(r,s)},_2u:function(t,i){var e=this.graphModel._fi(t);return e?i.getIndexById(e.id):0},_5y:function(t){var i=this._lq,e=i.getById(t.id);if(!e)throw new Error("UI '"+t.name+"' not found");var n=this._2u(t,i),r=[e];t.hasChildren()&&o(t,function(t){t instanceof Jn&&(e=i.getById(t.id))&&r.push(e)},this),this._4i(i,n,r)},_60:function(t){var i=this._lq.getById(t.id);if(i){var e=this._2s(t,this._lq);this._lq.setIndexBefore(i,e)}},_4i:function(i,e,t){var n=new ht;function r(t){n.add(t)}b(t,function(t){e=i.setIndexAfter(t,e),t.$data.forEachEdge(r)},this),0!=n.length&&n.forEach(this._60,this)},_4k:function(t){var i=Yn(t);return i&&i.expanded?i:null},_7e:null,_7g:null,_3p:function(t,i){if(!i&&t==this._7e)return!1;this._7e=t,this._7g&&(this._7g._i1(),delete this._7g),t!=Ii.NAVIGATION_SCROLLBAR?t!=Ii.NAVIGATION_BUTTON||(this._7g=new Jr(this,this._m18)):this._7g=new Qr(this,this._m18)},_2m:function(t,i){this._7g&&this._7g._je(),this._ke._4q(new Dt(this._ke,"transform",t,i))},_7c:function(t,i){this._ke._4q(new Dt(this._ke,"scale",t,i))},_3f:function(t,i){this._8hChanged={value:t,old:i}},_7h:function(){this._72()}});Object.defineProperties(wn.prototype,{_viewportBounds:{get:function(){return this.viewportBounds}},_scale:{get:function(){return this.scale},set:function(t){this._ga(t)}},_tx:{get:function(){return this.tx}},_ty:{get:function(){return this.ty}},graphModel:{get:function(){return this._ke._keModel}}});var bn={};function Ln(t){var e=[];return t.forEach(function(t,i){e.push(-t)}),e}bn.create=function(){return[1,0,0,1,0,0]},bn.invert=function(t,i){var e=i[0],n=i[1],r=i[2],s=i[3],o=i[4],h=i[5],a=e*s-n*r;return a?(a=1/a,t[0]=s*a,t[1]=-n*a,t[2]=-r*a,t[3]=e*a,t[4]=(r*h-s*o)*a,t[5]=(n*o-e*h)*a,t):null},bn.multiply=function(t,i,e){var n=i[0],r=i[1],s=i[2],o=i[3],h=i[4],a=i[5],l=e[0],_=e[1],u=e[2],c=e[3],f=e[4],d=e[5];return t[0]=n*l+s*_,t[1]=r*l+o*_,t[2]=n*u+s*c,t[3]=r*u+o*c,t[4]=n*f+s*d+h,t[5]=r*f+o*d+a,t},bn.mul=bn.multiply,bn.rotate=function(t,i,e){var n=i[0],r=i[1],s=i[2],o=i[3],h=i[4],a=i[5],l=Math.sin(e),_=Math.cos(e);return t[0]=n*_+s*l,t[1]=r*_+o*l,t[2]=n*-l+s*_,t[3]=r*-l+o*_,t[4]=h,t[5]=a,t},bn.scale=function(t,i,e){var n=i[0],r=i[1],s=i[2],o=i[3],h=i[4],a=i[5],l=e[0],_=e[1];return t[0]=n*l,t[1]=r*l,t[2]=s*_,t[3]=o*_,t[4]=h,t[5]=a,t},bn.translate=function(t,i,e){var n=i[0],r=i[1],s=i[2],o=i[3],h=i[4],a=i[5],l=e[0],_=e[1];return t[0]=n,t[1]=r,t[2]=s,t[3]=o,t[4]=n*l+s*_+h,t[5]=r*l+o*_+a,t},bn.transform=function(t,i){var e=i[0],n=i[1];return[e*t[0]+n*t[2]+t[4],e*t[1]+n*t[3]+t[5]]},bn.reverseTransform=function(t,i){return bn.transform(bn.invert([],t),i)};var Sn=Math.PI+Math.PI;function In(t){return(t%=Sn)<0&&(t+=Sn),t}var xn=U,Dn=E({equals:function(t){if(!t||!Array.isArray(t))return!1;for(var i=this.m,e=0;e<i.length;){if(i[e]!=t[e])return!1;++e}return!0},constructor:function(t){this.m=t||bn.create(),this.im=[]},listener:null,_6e:!0,invalidate:function(){return this._6e=!0,(!this._m1ackM||!this.equals(this._m1ackM))&&(this.listener&&this.listener({target:this,kind:"invalidate"}),this._m1ackM=this.m.slice(),this)},validate:function(){return this._6e=!1,bn.invert(this.im,this.m),this},translate:function(t,i){return xn(t)&&(t=[t,i],i=arguments[2]),!1!==i?(this.m[4]+=t[0],this.m[5]+=t[1]):bn.translate(this.m,this.m,t),this.invalidate()},translateTo:function(t,i){return xn(t)&&(t=[t,i],i=arguments[2]),i&&(i/=this._gz(),bn.scale(this.m,this.m,[i,i])),this.m[4]=t[0],this.m[5]=t[1],this.invalidate()},scale:function(t,i){return"number"==typeof t&&(t=[t,t]),i?(bn.translate(this.m,this.m,i),bn.scale(this.m,this.m,t),bn.translate(this.m,this.m,Ln(i))):bn.scale(this.m,this.m,t),this.invalidate()},rotate:function(t,i){return i?(bn.translate(this.m,this.m,i),bn.rotate(this.m,this.m,t),bn.translate(this.m,this.m,Ln(i))):bn.rotate(this.m,this.m,t),this.invalidate()},transform:function(t){return bn.transform(this.m,t)},reverseTransform:function(t){return bn.transform(this._4m(),t)},toString:function(){return"matrix("+this.m.join(",")+")"},_4m:function(){return this._6e&&this.validate(),this.im},_eg:function(){var t=this.m[0],i=this.m[1],e=this.m[2],n=this.m[3];return[Math.sqrt(t*t+e*e),Math.sqrt(i*i+n*n)]},_gz:function(){var t=this.m[0],i=this.m[2];return Math.sqrt(t*t+i*i)},_8i:function(){return[this.m[4],this.m[5]]},_m3w:function(){var t=this.m[0],i=this.m[1],e=this.m[2],n=this.m[3];return[In(Math.atan2(i,n)),In(Math.atan2(-e,t))]},_ei:function(){return In(Math.atan2(this.m[1],this.m[3]))}});function Cn(t,i,e,n,r,s,o,h){var a=((t*n-i*e)*(r-o)-(t-e)*(r*h-s*o))/((t-e)*(s-h)-(i-n)*(r-o)),l=((t*n-i*e)*(s-h)-(i-n)*(r*h-s*o))/((t-e)*(s-h)-(i-n)*(r-o));if(isNaN(a)||isNaN(l))return!1;if(e<=t){if(!(e<=a&&a<=t))return!1}else if(!(t<=a&&a<=e))return!1;if(n<=i){if(!(n<=l&&l<=i))return!1}else if(!(i<=l&&l<=n))return!1;if(o<=r){if(!(o<=a&&a<=r))return!1}else if(!(r<=a&&a<=o))return!1;if(h<=s){if(!(h<=l&&l<=s))return!1}else if(!(s<=l&&l<=h))return!1;return!0}function Rn(t,i,e,n){return[t*n-i*e,t*e+i*n]}var Pn=E({constructor:function(){},x:0,y:0,width:0,height:0,rotate:0,set:function(t,i,e,n,r,s){return this.x=t,this.y=i,this.width=e,this.height=n,this.rotate=r,this._m3os=Math.cos(r),this._sin=Math.sin(r),this.scale=s,this._globalBounds=null,this},_i0:function(t,i){return t-=this.x,i-=this.y,this.rotate?Rn(t,i,this._sin,this._m3os):[t,i]},_8j:function(t){var i=new pt;return i.add(this._i0(t.x,t.y)),i.add(this._i0(t.x+t.width,t.y)),i.add(this._i0(t.x,t.y+t.height)),i.add(this._i0(t.x+t.width,t.y+t.height)),i},_h0:function(t,i){if(this.rotate){var e=Rn(t,i,Math.sin(-this.rotate),Math.cos(-this.rotate));t=e[0],i=e[1]}return[this.x+t,this.y+i]},_62:function(t,i){var e=this._i0(t,i);return t=e[0],i=e[1],0<=t&&0<=i&&t<=this.width&&i<=this.height},intersects:function(t,i,e,n){if(!this.rotate)return pt.intersects(this.x,this.y,this.width,this.height,t,i,e,n);if(!e||!n)return this._62(t,i);var r=this.getGlobalBounds();if(!r.intersects(t,i,e,n))return!1;for(var s=r.points,o=0;o<s.length;){var h=s[o];if(pt.intersectsPoint(t,i,e,n,h[0],h[1]))return!0;o++}var a=[[t,i],[t+e,i],[t,i+n],[t+e,i+n]];for(o=0;o<a.length;){if(h=a[o],this._62(h[0],h[1]))return!0;o++}return function(t,i){for(var e=0,n=t.length;e<n;){for(var r=t[e],s=t[(e+1)%n],o=0;o<4;){var h=i[o],a=i[(o+1)%n];if(Cn(r[0],r[1],s[0],s[1],h[0],h[1],a[0],a[1]))return!0;o++}e++}return!1}(s,a)},getGlobalBounds:function(){return this._globalBounds||(this._globalBounds=this._7j(0,0,this.width,this.height)),this._globalBounds},_7j:function(t,i,e,n){if(!this.rotate)return new pt(this.x+t,this.y+i,e,n);var r=[],s=new pt,o=this._h0(t,i);return r.push(o),s.add(o[0],o[1]),o=this._h0(t+e,i),r.push(o),s.add(o[0],o[1]),o=this._h0(t,i+n),r.push(o),s.add(o[0],o[1]),o=this._h0(t+e,i+n),r.push(o),s.add(o[0],o[1]),s.points=r,s},_4o:function(t,i,e,n,r){var s;if(this.rotate){var o=this._h0(t,i);s=(new Pn).set(o[0],o[1],e,n,this.rotate,this.scale)}else s=(new Pn).set(this.x+t,this.y+i,e,n,0,this.scale);return s.canvasBounds=[Math.round(r*t),Math.round(r*i),Math.round(r*e),Math.round(r*n)],s},_3q:function(t,i,e,n){if(!this.rotate){var r=pt.intersection(this.x,this.y,this.width,this.height,t,i,e,n);return r&&r.offset(-this.x,-this.y),r}var s=this._i0(t,i);return t=s[0],i=s[1],pt.intersection(0,0,this.width,this.height,s[0],s[1],e,n)},equals:function(t){return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height&&this.rotate==t.rotate},toString:function(){return this.x+","+this.y+","+this.width+","+this.height+","+this.rotate},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,rotate:this.rotate,scale:this.scale}}}),Nn={setStyle:Xt,setStyles:qt,addRule:Kt,pre:Wt};function kn(t,i,e){if((e=e||i.toAgent)==t)return!1;var n=t.getEdgeBundle(e);return n||(n=new Vs(t,e),t._linkedNodes[e.id]=n),n._io(i,t)}function Mn(t,i,e){if((e=e||i.toAgent)==t)return!1;var n=t.getEdgeBundle(e);return n?n._d2(i,t):void 0}function Bn(t,i,e){if(void 0===e&&(e=i.toAgent),e!=t){if(t._81||(t._81=new ht),!1===t._81.add(i))return!1;t._91++}}function Gn(t,i,e){if(!t._81||!1===t._81.remove(i))return!1;t._91--,Mn(t,i,e)}function Fn(t,i){if(i.fromAgent!=t){if(t._94||(t._94=new ht),!1===t._94.add(i))return!1;t._m0m++}}function $n(t,i){if(!t._94||!1===t._94.remove(i))return!1;t._m0m--,Mn(i.fromAgent,i,t)}function jn(t,i,e,n){this.source=t,this.kind=i,this.oldValue=n,this.value=e,this.propertyType=Ii.PROPERTY_TYPE_STYLE}t(jn,Dt);function zn(t){this.id=++m,this._m34={},this._j1={},t&&(this.$name=t)}function Yn(t,i){if(void 0===i&&(i=t instanceof Vn),i){if(t.isInvalid())return null;var e=Yn(t.from,!1);if(t.isLooped())return e;for(var n=Yn(t.to,!1);null!=e&&null!=n;){if(e==n)return e;if(e.isDescendantOf(n))return n;if(n.isDescendantOf(e))return e;e=Yn(e,!1),n=Yn(n,!1)}return null}for(var r=t.parent;null!=r;){if(r._hx())return r;r=r.parent}return null}function Un(t,i){i.parent?i.parent.setChildIndex(i,i.parent.childrenCount-1):t.roots.setIndex(i,t.roots.length-1)}function Hn(t,i){i.parent?i.parent.setChildIndex(i,0):t.roots.setIndex(i,0)}function Wn(t,i){if(i instanceof Vn)i.isInvalid()||function(t,i){var e=i.fromAgent;if(i.isLooped())Un(t,e);else{var n=i.toAgent;Un(t,e),Un(t,n)}}(t,i);else for(Un(t,i);i=i.parent;)Un(t,i)}function qn(t,i){if(i instanceof Vn)i.isInvalid()||function(t,i){var e=i.fromAgent;if(i.isLooped())Hn(t,e);else{var n=i.toAgent;Hn(t,e),Hn(t,n)}}(t,i);else for(Hn(t,i);i=i.parent;)Hn(t,i)}zn.prototype={_j1:null,getStyle:function(t){return this._j1[t]},setStyle:function(t,i){var e=this._j1[t];return!(e===i||e&&i&&e.equals&&e.equals(i))&&this._m0o(t,i,new jn(this,t,i,e),this._j1)},putStyles:function(t,i){for(var e in t){var n=t[e];i?this._j1[e]=n:this.setStyle(e,n)}},_$m:!0,invalidateVisibility:function(t){this._$m=!0,t||(this instanceof Jn&&this.hasEdge()&&this.forEachEdge(function(t){t._$m=!0}),this._hx()&&this.hasChildren()&&this.forEachChild(function(t){t.invalidateVisibility()}))},onParentChanged:function(t,i){this.invalidateVisibility()},_hx:function(){return!this._3v&&this instanceof hr},invalidate:function(){this.onEvent(new xt(this,"ui","invalidate"))},_m33:null,addUI:function(t,i){if(this._m33||(this._m33=new ht),t.id||(t.id=++m),this._m33.containsById(t.id))return!1;var e={id:t.id,ui:t,bindingProperties:i};this._m33.add(e);var n=new xt(this,"ui","add",e);return this.onEvent(n)},removeUI:function(t){if(!this._m33)return!1;var i=this._m33.getById(t.id||t);if(!i)return!1;this._m33.remove(i),this.onEvent(new xt(this,"ui","remove",i))},clearUIs:function(){this.bindingUIs&&this.bindingUIs.toDatas().forEach(function(t){this.removeUI(t.ui)}.bind(this))},toString:function(){return this.$name||this.id},type:"Q.Element",_3v:!1,_hy:!0,inGroup:function(t){var i=Yn(this);return i==t||i&&t instanceof hr&&i.isDescendantOf(t)}},t(zn,Ft),i(zn.prototype,["uiClass","name","zIndex","tooltip"]),it(zn.prototype,{enableSubNetwork:{get:function(){return this._3v},set:function(t){if(this._3v!=t){var i=this._3v;this._3v=t,this instanceof Jn&&this._$y(),this.onEvent(new Dt(this,"enableSubNetwork",t,i))}}},bindingUIs:{get:function(){return this._m33}},styles:{get:function(){return this._j1},set:function(t){if(this._j1!=t){for(var i in this._j1)i in t||(t[i]=void 0);this.putStyles(t),this._j1=t}}}}),Si.findGroup=Yn;var Vn=function(t,i,e){this.id=++m,this._m34={},this._j1={},e&&(this.$name=e),this.$from=t,this.$to=i,this.connect()};function Xn(t,i){return i=i||new ht,t.forEachEdge(function(t){i.add({id:t.id,edge:t,fromAgent:t.$from._dn,toAgent:t.$to._dn})}),t.forEachChild(function(t){t instanceof Jn&&Xn(t,i)}),i}function Kn(t,i,e){if(t._fh)for(var n=t._fh;n;){if(!1===i.call(e,n))return!1;n=n._ij}}function Zn(t,i,e){if(t._ht)for(var n=t._ht;n;){if(!1===i.call(e,n))return!1;n=n._jv}}Vn.prototype={$uiClass:xr,_jt:null,_ih:null,_jv:null,_ij:null,_ek:!1,type:"Q.Edge",otherNode:function(t){return t==this.from?this.to:t==this.to?this.from:void 0},connect:function(){if(this._ek)return!1;if(!this.$from||!this.$to)return!1;if(this._ek=!0,this.$from!=this.$to){(function(t,i){if(t._m0m++,!t._ht)return t._ht=i,t._j0=i;i._jt=t._j0,t._j0._jv=i,t._j0=i})(this.$to,this),function(t,i){if(t._91++,!t._fh)return t._fh=i,t._hv=i;i._ih=t._hv,t._hv._ij=i,t._hv=i}(this.$from,this),kn(this.$from,this,this.$to);var t,i=this.fromAgent,e=this.toAgent;i!=e&&(this.$from._dn&&(Bn(i,this,e),t=!0),this.$to._dn&&(Fn(e,this),t=!0),t&&kn(i,this,e))}else this.$from._hw(this)},disconnect:function(){if(!this._ek)return!1;if(this._ek=!1,this.$from!=this.$to){s=this.$from,o=this,s._91--,s._hv==o&&(s._hv=o._ih),o._ih?o._ih._ij=o._ij:s._fh=o._ij,o._ij&&(o._ij._ih=o._ih),o._ih=null,o._ij=null,Mn(s,o,o.$to),n=this.$to,r=this,n._m0m--,n._j0==r&&(n._j0=r._jt),r._jt?r._jt._jv=r._jv:n._ht=r._jv,r._jv&&(r._jv._jt=r._jt),r._jt=null,r._jv=null,Mn(this.$from,this,this.$to);var t,i=this.fromAgent,e=this.toAgent;i!=e&&(this.$from._dn&&(Gn(i,this,e),t=!0),this.$to._dn&&($n(e,this),t=!0),t&&Mn(i,this,e))}else this.$from._m31(this);var n,r,s,o},isConnected:function(){return this._ek},isInvalid:function(){return!this.$from||!this.$to},isLooped:function(){return this.$from==this.$to},getEdgeBundle:function(t){return t?this._2v():this.isLooped()?this.$from._3u:this.$from.getEdgeBundle(this.$to)},hasEdgeBundle:function(){var t=this.getEdgeBundle(!0);return t&&1<t.edges.length},_2v:function(){return this.fromAgent==this.toAgent?this.$from._dn||this.$to._dn?null:this.$from._3u:this.fromAgent.getEdgeBundle(this.toAgent)},_9f:null,hasPathSegments:function(){return this._9f&&!this._9f.isEmpty()},isBundleEnabled:function(){return this.bundleEnabled&&!this.hasPathSegments()&&!this.edgeType},firePathChange:function(t){this.onEvent(new Dt(this,"path.segment",t))},addPathSegment:function(t,i,e){var n=new je(i||Me,t);this._9f||(this._9f=new ht),this._9f.add(n,e),this.firePathChange(n)},addPathSegement:function(){return Si.log('change "edge.addPathSegement(...)" to "edge.addPathSegment(...)"'),this.addPathSegment.apply(this,arguments)},removePathSegmentByIndex:function(t){return this.removePathSegment(t)},removePathSegment:function(t){if(!this._9f)return!1;U(t)&&(t=this._9f.getByIndex(t)),t&&(this._9f.remove(t),this.firePathChange(t))},movePathSegment:function(i,e,t){if(!this._9f)return!1;if(i=i||0,e=e||0,Si.isNumber(t)){var n=this._9f.getByIndex(t);return!!n&&(n.move(i,e),void this.firePathChange())}b(function(t){t.move(i,e)}),this.firePathChange()},move:function(i,e){if(!this._9f)return!1;this._9f.forEach(function(t){t.move(i,e)},this),this.firePathChange()},validateEdgeBundle:function(){}},t(Vn,zn),it(Vn.prototype,{pathSegments:{get:function(){return this._9f},set:function(t){Si.isArray(t)&&(t=new ht(t)),this._9f=t,this.firePathChange()}},from:{get:function(){return this.$from},set:function(t){if(this.$from!=t){var i=new Dt(this,"from",t,this.$from);!1!==this.beforeEvent(i)&&(this.disconnect(),this.$from=t,this.connect(),this.onEvent(i))}}},to:{get:function(){return this.$to},set:function(t){if(this.$to!=t){var i=new Dt(this,"to",t,this.$to);!1!==this.beforeEvent(i)&&(this.disconnect(),this.$to=t,this.connect(),this.onEvent(i))}}},fromAgent:{get:function(){return this.$from?this.$from._dn||this.$from:null}},toAgent:{get:function(){return this.$to?this.$to._dn||this.$to:null}}}),i(Vn.prototype,["edgeType",{name:"bundleEnabled",value:!0},"angle"]);var Jn=function(t,i,e){2==arguments.length&&U(t)&&(e=i,i=t,t=null),this.id=++m,this._m34={},this._j1={},t&&(this.$name=t),this.$image="Q-node",this.$anchorPosition=yt.CENTER_MIDDLE,this.$location={x:i||0,y:e||0},this._linkedNodes={}};Jn.prototype={$uiClass:Dr,_dn:null,forEachEdge:function(t,i,e){return!(!e&&this._k8&&!1===this._k8.forEach(t,i))&&(!1!==Zn(n=this,r=t,s=i)&&Kn(n,r,s));var n,r,s},forEachOutEdge:function(t,i){return Kn(this,t,i)},forEachInEdge:function(t,i,e){return Zn(this,t,i)},getEdges:function(){var i=[];return this.forEachEdge(function(t){i.push(t)}),i},_ht:null,_fh:null,_j0:null,_hv:null,_m0m:0,_91:0,hasInEdge:function(){return null!=this._ht},hasOutEdge:function(){return null!=this._fh},hasEdge:function(){return null!=this._ht||null!=this._fh||this.hasLoops()},linkedWith:function(t){return t.from==this||t.to==this||t.fromAgent==this||t.toAgent==this},hasEdgeWith:function(t){var i=this.getEdgeBundle(t);return i&&0<i.edges.length},_k8:null,_3u:null,hasLoops:function(){return this._k8&&0<this._k8.length},_hw:function(t){return this._k8||(this._k8=new ht,this._3u=new Vs(this,this,this._k8)),this._3u._io(t)},_m31:function(t){if(this._3u)return this._3u._d2(t)},getEdgeBundle:function(t){return t==this?this._3u:this._linkedNodes[t.id]||t._linkedNodes[this.id]},_6j:function(){return this._94&&this._94.length},_59:function(){return this._81&&this._81.length},_93:function(){return this._6j()||this._59()},_81:null,_94:null,_m32:function(){var t,i=this._dn,e=(t=this).parent?(t=t.parent)._dn?t._dn:t instanceof hr&&!1===t._h9?t:null:null;if(i!=e){var n=Xn(this);this._96(e),n.forEach(function(t){var i=t.fromAgent,e=t.toAgent,n=(t=t.edge).$from._dn,r=t.$to._dn;i!=e&&(i&&Gn(i,t,e||t.$to),e&&$n(e,t,i||t.$from)),n!=r&&(n&&Bn(n,t,r||t.$to),r&&Fn(r,t,n||t.$from),kn(n||t.$from,t,r||t.$to))},this)}},onParentChanged:function(t,i){Si.doSuper(this,Jn,"onParentChanged",arguments),this._m32()},_82:null,_$y:function(){var t;if(this._3v?t=null:(t=this._dn)||!1!==this._h9||(t=this),this._82==t)return!1;if(this._82=t,this._fr&&this._fr._j2.length)for(var i,e=this._fr._j2,n=0,r=e.length;n<r;n++)(i=e[n])instanceof Jn&&i._96(t)},setLocation:function(t,i){if(this.$location&&this.$location.x==t&&this.$location.y==i)return!1;var e;e=this.$location?{x:this.$location.x,y:this.$location.y}:this.$location;var n=new Dt(this,"location",e,{x:t,y:i});return!1!==this.beforeEvent(n)&&(this.$location?(this.$location.x=t,this.$location.y=i):this.$location=new lt(t,i),this.onEvent(n),!0)},_dp:null,addFollower:function(t){return null!=t&&(t.host=this)},removeFollower:function(t){return!(!this._dp||!this._dp.contains(t))&&(t.host=null)},hasFollowers:function(){return this._dp&&!this._dp.isEmpty()},toFollowers:function(){return this.hasFollowers()?this._dp.toDatas():null},clearFollowers:function(){this.hasFollowers()&&(this.toFollowers(),b(this.toFollowers(),function(t){t.host=null}))},getFollowerIndex:function(t){return this._dp&&this._dp.contains(t)?this._dp.indexOf(t):-1},setFollowerIndex:function(t,i){if(!this._dp||!this._dp.contains(t))return-1;this._dp.setIndex(t,i)},getFollowerCount:function(){return this._dp?this._dp.length:0},_95:function(){return this._dp||(this._dp=new ht),this._dp},isFollow:function(t){if(!t||!this._host)return!1;for(var i=this._host;i;){if(i==t)return!0;i=i._host}return!1},_96:function(t){if(t==this._dn)return!1;this._dn=t,this.invalidateVisibility(),this._$y()},type:"Q.Node"},t(Jn,zn),it(Jn.prototype,{loops:{get:function(){return this._k8}},edgeCount:{get:function(){return this._m0m+this._91}},agentNode:{get:function(){return this._dn||this}},host:{set:function(t){if(this==t||t==this._host)return!1;var i=new Dt(this,"host",this._host,t);if(!1===this.beforeEvent(i))return!1;var e=null,n=null,r=this._host;return(null==t||(e=new Dt(t,"follower.add",null,this),!1!==t.beforeEvent(e)))&&((null==r||(n=new Dt(r,"follower.remove",null,this),!1!==r.beforeEvent(n)))&&(null!=(this._host=t)&&t._95().add(this),null!=r&&r._95().remove(this),this.onEvent(i),null!=t&&t.onEvent(e),null!=r&&r.onEvent(n),!0))},get:function(){return this._host}}}),i(Jn.prototype,["location","size","image","rotate","anchorPosition"]),it(Jn.prototype,{x:{get:function(){return this.location.x},set:function(t){t!=this.location.x&&(this.location=new lt(t,this.location.y))}},y:{get:function(){return this.location.y},set:function(t){t!=this.location.y&&(this.location=new lt(this.location.x,t))}}});var Qn=function(t,i){t instanceof Ye&&(i=t,t=void 0),c(this,Qn,[t]),this.path=i||new Ye,this.anchorPosition=null,this.uiClass=ts,ot.SHAPENODE_STYLES||(ot.SHAPENODE_STYLES={},ot.SHAPENODE_STYLES[dr.ARROW_TO]=!1),this.putStyles(ot.SHAPENODE_STYLES)};Qn.prototype={$uiClass:ts,type:"Q.ShapeNode",moveTo:function(t,i){this.path.moveTo(t,i),this.firePathChange()},lineTo:function(t,i){this.path.lineTo(t,i),this.firePathChange()},quadTo:function(t,i,e,n){this.path.quadTo(t,i,e,n),this.firePathChange()},curveTo:function(t,i,e,n,r,s){this.path.curveTo(t,i,e,n,r,s),this.firePathChange()},arcTo:function(t,i,e,n,r){this.path.arcTo(t,i,e,n,r),this.firePathChange()},closePath:function(){this.path.closePath(),this.firePathChange()},clear:function(){this.path.clear(),this.firePathChange()},removePathSegmentByIndex:function(t){!1!==this.path.removePathSegment(t)&&this.firePathChange()},firePathChange:function(){this.path._6e=!0,this.onEvent(new Dt(this,"path.segment"))},addPathSegment:function(t,i,e){this.path.add(new je(i||Me,t),e),this.firePathChange()}},t(Qn,Jn),it(Qn.prototype,{path:{get:function(){return this.image},set:function(t){this.image=t}},pathSegments:{get:function(){return this.path.segments},set:function(t){this.path.segments=t||[],this.firePathChange()}},length:{get:function(){return this.path.length}}}),Si.ShapeNode=Qn;var tr={_jx:{},register:function(t,i){tr._jx[t]=i},getShape:function(t,i,e,n,r,s){void 0===n&&(n=i,r=e,e=i=0),n=n||50,r=r||50;var o=tr._jx[t];if(o)return o.generator instanceof Function?o.generator(i,e,n,r,s):o},getRect:function(t,i,e,n,r,s,o){return t instanceof Object&&"width"in t&&(i=t.y,e=t.width,n=t.height,r=t.rx,s=t.ry,o=t.path,t=t.x),ir(o||new Ye,t,i,e,n,r,s)},getAllShapes:function(t,i,e,n,r){var s={};for(var o in tr._jx){var h=tr.getShape(o,t,i,e,n,r);h&&(s[o]=h)}return s},createRegularShape:function(t,i,e,n,r){return rr(t,i,e,n,r)}};function ir(t,i,e,n,r,s,o){return s||o?(s=s||0,o=void 0===o?s:o||0,s=Math.min(s,n/2),o=Math.min(o,r/2),t.moveTo(i+s,e),t.lineTo(i+n-s,e),t.quadTo(i+n,e,i+n,e+o),t.lineTo(i+n,e+r-o),t.quadTo(i+n,e+r,i+n-s,e+r),t.lineTo(i+s,e+r),t.quadTo(i,e+r,i,e+r-o),t.lineTo(i,e+o),t.quadTo(i,e,i+s,e)):(t.moveTo(i,e),t.lineTo(i+n,e),t.lineTo(i+n,e+r),t.lineTo(i,e+r)),t.closePath(),t}function er(t,i,e,n,r){i instanceof ie&&(n=i.width,r=i.height,e=i.cy-r/2,i=i.cx-n/2);var s=n/2*.5522848,o=r/2*.5522848,h=i+n,a=e+r,l=i+n/2,_=e+r/2;return t.moveTo(i,_),t.curveTo(i,_-o,l-s,e,l,e),t.curveTo(l+s,e,h,_-o,h,_),t.curveTo(h,_+o,l+s,a,l,a),t.curveTo(l-s,a,i,_+o,i,_),t}function nr(t,i,e,n,r,s){return t.moveTo(i,e),t.lineTo(i+n,e+r/2),t.lineTo(i,e+r),s||(t.lineTo(i+.25*n,e+r/2),t.closePath()),t}function rr(t,i,e,n,r){if(!t||t<3)throw new Error("edge number must greater than 2");t|=0,n=n||50,r=r||0,i=i||0,e=e||0;for(var s,o,h=0,a=2*Math.PI/t,l=new Ye;h<t;)s=i+n*Math.cos(r),o=e+n*Math.sin(r),h?l.lineTo(s,o):l.moveTo(s,o),++h,r+=a;return l.closePath(),l}function sr(t,i){c(this,sr,arguments),this.busLayout=!0}function or(){c(this,or),this._$s=new Bt}(function(){var t,i,e,n,r,s,o,h,a,l,_,u,c,f,d,E,g,v,p,m,y,T,O;tr.register(Ii.SHAPE_CIRCLE,er(new Ye,0,0,100,100)),tr.register(Ii.SHAPE_RECT,ir(new Ye,0,0,100,100)),tr.register(Ii.SHAPE_ROUNDRECT,ir(new Ye,0,0,100,100,20,20)),tr.register(Ii.SHAPE_STAR,(d=new Ye,m=2*(v=100),y=2*(p=100),T=(E=0)+v/2,O=(g=0)+p/2,d.moveTo(T-m/4,O-y/12),d.lineTo(E+.306*v,g+.579*p),d.lineTo(T-m/6,O+y/4),d.lineTo(E+v/2,g+.733*p),d.lineTo(T+m/6,O+y/4),d.lineTo(E+.693*v,g+.579*p),d.lineTo(T+m/4,O-y/12),d.lineTo(E+.611*v,g+.332*p),d.lineTo(T+0,O-y/4),d.lineTo(E+.388*v,g+.332*p),d.closePath(),d)),tr.register(Ii.SHAPE_TRIANGLE,(l=new Ye,u=_=0,f=c=100,l.moveTo(_,u),l.lineTo(_+c,u+f/2),l.lineTo(_,u+f),l.closePath(),l)),tr.register(Ii.SHAPE_PENTAGON,rr(5)),tr.register(Ii.SHAPE_HEXAGON,rr(6)),tr.register(Ii.SHAPE_DIAMOND,(r=new Ye,o=s=0,a=h=100,r.moveTo(s,o+a/2),r.lineTo(s+h/2,o),r.lineTo(s+h,o+a/2),r.lineTo(s+h/2,o+a),r.closePath(),r)),tr.register(Ii.SHAPE_HEART,((n=new Ye).moveTo(75,40),n.curveTo(75,37,70,25,50,25),n.curveTo(20,25,20,62.5,20,62.5),n.curveTo(20,80,40,102,75,120),n.curveTo(110,102,130,80,130,62.5),n.curveTo(130,62.5,130,25,100,25),n.curveTo(85,25,75,37,75,40),n)),tr.register(Ii.SHAPE_TRAPEZIUM,((e=new Ye).moveTo(20,0),e.lineTo(80,0),e.lineTo(100,100),e.lineTo(0,100),e.closePath(),e)),tr.register(Ii.SHAPE_RHOMBUS,((i=new Ye).moveTo(100,0),i.lineTo(100,80),i.lineTo(0,100),i.lineTo(0,20),i.closePath(),i)),tr.register(Ii.SHAPE_PARALLELOGRAM,((t=new Ye).moveTo(20,0),t.lineTo(100,0),t.lineTo(80,100),t.lineTo(0,100),t.closePath(),t));var A,w,b,L,S,I,x,D,C=new Ye;C.moveTo(20,0),C.lineTo(40,0),C.lineTo(40,20),C.lineTo(60,20),C.lineTo(60,40),C.lineTo(40,40),C.lineTo(40,60),C.lineTo(20,60),C.lineTo(20,40),C.lineTo(0,40),C.lineTo(0,20),C.lineTo(20,20),C.closePath(),tr.register(Ii.SHAPE_CROSS,C),tr.register(Ii.SHAPE_ARROW_STANDARD,nr(new Ye,0,0,100,100)),tr.register(Ii.SHAPE_ARROW_1,((D=new Ye).moveTo(43,23),D.lineTo(28,10),D.lineTo(37,2),D.lineTo(63,31),D.lineTo(37,59),D.lineTo(28,52),D.lineTo(44,38),D.lineTo(3,38),D.lineTo(3,23),D.closePath(),D)),tr.register(Ii.SHAPE_ARROW_2,((x=new Ye).moveTo(1,8),x.lineTo(7,2),x.lineTo(32,26),x.lineTo(7,50),x.lineTo(1,44),x.lineTo(18,26),x.closePath(),x.moveTo(27,8),x.lineTo(33,2),x.lineTo(57,26),x.lineTo(33,50),x.lineTo(27,44),x.lineTo(44,26),x.closePath(),x)),tr.register(Ii.SHAPE_ARROW_3,((I=new Ye).moveTo(0,15),I.lineTo(23,15),I.lineTo(23,1),I.lineTo(47,23),I.lineTo(23,43),I.lineTo(23,29),I.lineTo(0,29),I.closePath(),I)),tr.register(Ii.SHAPE_ARROW_4,((S=new Ye).moveTo(0,21),S.lineTo(30,21),S.lineTo(19,0),S.lineTo(25,0),S.lineTo(47,25),S.lineTo(25,48),S.lineTo(19,48),S.lineTo(30,28),S.lineTo(0,28),S.closePath(),S)),tr.register(Ii.SHAPE_ARROW_5,((L=new Ye).moveTo(0,0),L.lineTo(34,24),L.lineTo(0,48),L.lineTo(14,24),L.closePath(),L)),tr.register(Ii.SHAPE_ARROW_6,((b=new Ye).moveTo(20,0),b.lineTo(34,14),b.lineTo(20,28),b.lineTo(22,18),b.lineTo(1,25),b.lineTo(10,14),b.lineTo(1,3),b.lineTo(22,10),b.closePath(),b)),tr.register(Ii.SHAPE_ARROW_7,((w=new Ye).moveTo(4,18),w.lineTo(45,18),w.lineTo(37,4),w.lineTo(83,25),w.lineTo(37,46),w.lineTo(45,32),w.lineTo(4,32),w.closePath(),w)),tr.register(Ii.SHAPE_ARROW_8,((A=new Ye).moveTo(17,11),A.lineTo(27,11),A.lineTo(42,27),A.lineTo(27,42),A.lineTo(17,42),A.lineTo(28,30),A.lineTo(4,30),A.lineTo(4,23),A.lineTo(28,23),A.closePath(),A)),tr.register(Ii.SHAPE_ARROW_OPEN,nr(new Ye,0,0,100,100,!0))})(),sr.prototype={type:"Q.Bus"},t(sr,Qn),Si.Bus=sr,or.prototype={_fi:function(t){var i,e=t._ja,n=(i=e?e._fr:this.$roots).indexOf(t);if(n<0)throw new Error("data '"+t+"' not exist in the box");for(;0<=n;){if(0==n)return e instanceof Jn?e:null;--n;var r=i.getByIndex(n);if(r=s(r))return r}return null},forEachNode:function(i,e){this.forEach(function(t){if(t instanceof Jn&&!1===i.call(e,t))return!1})},_34:null},t(or,jt),it(or.prototype,{propertyChangeDispatcher:{get:function(){return this._$s}},currentSubNetwork:{get:function(){return this._34},set:function(t){if(t&&!t.enableSubNetwork&&(t=null),this._34!=t){var i=this._34;this._34=t,this._$s.onEvent(new Dt(this,"currentSubNetwork",t,i))}}}}),ot.GROUP_TYPE=Ii.GROUP_TYPE_RECT,ot.GROUP_PADDING=5,ot.GROUP_EXPANDED=!0,ot.GROUP_MIN_SIZE={width:60,height:60};var hr=function(t,i,e){c(this,hr,arguments),void 0!==i&&void 0!==e||(this.$location.invalidateFlag=!0),this.$groupType=ot.GROUP_TYPE,this.$padding=ot.GROUP_PADDING,this.$image=tn.group,this.$minSize=ot.GROUP_MIN_SIZE,this.expanded=ot.GROUP_EXPANDED};function ar(t,i,e){c(this,ar,arguments),this.$image=null}hr.prototype={type:"Q.Group",$uiClass:qr,_m01:function(){return!this._h9&&!this._dn},forEachOutEdge:function(t,i,e){return!1!==Kn(this,t,i)&&(!e&&this._m01()&&this._81?this._81.forEach(t,i):void 0)},forEachInEdge:function(t,i,e){return!1!==Zn(this,t,i)&&(!e&&this._m01()&&this._94?this._94.forEach(t,i):void 0)},forEachEdge:function(t,i,e){return!1!==v(this,hr,"forEachEdge",arguments)&&(e||e||!this._m01()?void 0:(!this._94||!1!==this._94.forEach(t,i))&&(this._81?this._81.forEach(t,i):void 0))},hasInEdge:function(t){return t?null!=this._ht:null!=this._ht||this._6j()},hasOutEdge:function(t){return t?null!=this._fh:null!=this._fh||this._59()},hasEdge:function(t){return t?null!=this._ht||null!=this._fh:null!=this._ht||null!=this._fh||this._93()}},t(hr,Jn),it(hr.prototype,{expanded:{get:function(){return this._h9},set:function(t){if(this._h9!=t){var i=new Dt(this,"expanded",t,this._h9);!1!==this.beforeEvent(i)&&(this._h9=t,this._$y(),this.onEvent(i),this._dn||function i(){if(!0!==this._h9)Xn(this).forEach(function(t){var i=(t=t.edge).$from,e=t.$to,n=i.isDescendantOf(this),r=e.isDescendantOf(this);n&&!r?(Bn(this,t),kn(this,t)):r&&!n&&(Fn(this,t),kn(t.fromAgent,t,this))},this);else{var t=this._81,e=this._94;if(t)for(t=t._j2;t.length;)Gn(this,n=t[0],n.toAgent);if(e)for(e=e._j2;e.length;){var n;$n(this,n=e[0],n.fromAgent)}this.forEachChild(function(t){t._hx()&&i.call(t)})}}.call(this))}}}}),i(hr.prototype,["minSize","groupType","padding","groupImage"]),Si.Group=hr,ar.prototype.type="Q.Text",t(ar,Jn),Si.Text=ar;var lr=function(t){this._j4=new pt,this._83=new pt,this._fu=new pt,this.id=++m,t&&(this.data=t)};function _r(t,e,i,n){return t[e]=i,n?{get:function(){return this[e]},set:function(t){if(t!==this[e]){this[e]=t,this._m0t,this._1e=!0;for(var i=n.length;0<=--i;)this[n[i]]=!0}}}:{get:function(){return this[e]},set:function(t){t!==this[e]&&(this[e]=t)}}}function ur(t,i){var e={},n={};for(var r in i){var s=i[r];s.validateFlags&&s.validateFlags.forEach(function(t,i,e){e[i]="$invalidate"+t,n[t]=!0}),e[r]=_r(t,"$"+r,s.value,s.validateFlags)}for(var o in n)t["$invalidate"+o]=!0;Object.defineProperties(t,e)}lr.prototype={invalidate:function(){this.invalidateData()},_1e:!0,_j4:null,_83:null,_fu:null,_m0t:!1,_j6:1,_j8:1,_hy:!0,_84:0,_6l:0,_ja:null,_m0v:null,borderColor:"#444",borderLineDash:null,borderLineDashOffset:null,syncSelection:!0,syncSelectionStyles:!0,_17:function(){this.$anchorPoint=St(this.anchorPosition,this._84,this._6l)},setMeasuredBounds:function(t,i,e,n){if(t instanceof Object&&(e=t.x,n=t.y,i=t.height,t=t.width),this._j4.width==t&&this._j4.height==i&&this._j4.x==e&&this._j4.y==n)return!1;this._j4.set(e||0,n||0,t||0,i||0)},initialize:function(){},measure:function(){},draw:function(t,i,e,n){},_85:function(t,i,e){e.selectionType==Ii.SELECTION_TYPE_SHADOW?(t.shadowColor=e.selectionColor,t.shadowBlur=e.selectionShadowBlur*i,t.shadowOffsetX=(e.selectionShadowOffsetX||0)*i,t.shadowOffsetY=(e.selectionShadowOffsetY||0)*i):this._1z(t,i,e)},_1z:function(t,i,e){var n=e.selectionBorder||0;e.selectionBackgroundColor&&(t.fillStyle=e.selectionBackgroundColor,t.fillRect(this._83.x-n/2,this._83.y-n/2,this._83.width+n,this._83.height+n)),t.strokeStyle=e.selectionColor,t.lineWidth=n,t.strokeRect(this._83.x-n/2,this._83.y-n/2,this._83.width+n,this._83.height+n)},_jc:function(t,i,e,n){if(!this._hy)return!1;if(this.syncSelection||(e=this.selected),(!e||this.syncSelectionStyles)&&n||(n=this),t.save(),1!=this.$alpha&&(t.globalAlpha=this.$alpha),t.translate(this.$x,this.$y),this.$rotatable&&this.$_hostRotate&&t.rotate(this.$_hostRotate),(this.offsetX||this.offsetY)&&t.translate(this.offsetX,this.offsetY),this.$rotate&&t.rotate(this.$rotate),this.$layoutByAnchorPoint&&this._m0v&&t.translate(-this._m0v.x,-this._m0v.y),this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur*i,t.shadowOffsetX=this.shadowOffsetX*i,t.shadowOffsetY=this.shadowOffsetY*i),e&&n.selectionType==Ii.SELECTION_TYPE_BORDER_RECT&&(this._1z(t,i,n),e=!1),this._$o()&&this._l9Shape&&!this._l9Shape._empty){this._l9Shape.validate();var r={lineWidth:this.$border,strokeStyle:this.borderColor,lineDash:this.borderLineDash,lineDashOffset:this.borderLineDashOffset,fillColor:this.$backgroundColor,fillGradient:this._m1ackgroundGradient,lineCap:"butt",lineJoin:"round"};this._l9Shape.draw(t,i,r,e,n),e=!1,t.shadowColor="rgba(0,0,0,0)"}t.beginPath(),this.draw(t,i,e,n),t.restore()},invalidateData:function(){this.$invalidateData=!0,this.$invalidateSize=!0,this._1e=!0},invalidateSize:function(){this.$invalidateSize=!0,this._1e=!0},invalidateRender:function(){this._1e=!0},_5f:function(){},_$o:function(){return this.$backgroundColor||this.$backgroundGradient||this.$border},_3x:function(){return this.$backgroundColor||this.$backgroundGradient},doValidate:function(){return this.$invalidateData&&(this.$invalidateData=!1)!==this.measure()&&(this.$invalidateSize=!0),this.$invalidateSize&&this.validateSize&&this.validateSize(),sn.call(this)?(this.$invalidateRotate=!0,this.onBoundsChanged&&this.onBoundsChanged(),!0):this.$invalidateLocation?(this.$invalidateRotate=!0,!(this.$invalidateLocation=!1)):void 0},validate:function(){var t=this._hy;return this.$invalidateVisibility&&(this.$invalidateVisibility=!1,this._hy=this.$visible,!this._hy||(this.$data||this.$showEmpty)&&!1!==this._5f()||(this._hy=!1)),this._hy?(this._1e=!1,this._m0t||(this.initialize(),this._m0t=!0),this.doValidate()):t!=this._hy},_i0:function(t,i){return t-=this.$x,i-=this.$y,rn.call(this,{x:t,y:i})},hitTest:function(t,i,e,n){if(t-=this.$x,i-=this.$y,!this._fu.intersectsPoint(t,i,e))return!1;var r=rn.call(this,{x:t,y:i});return t=r.x,i=r.y,!(n||!this._$o()||!this._l9Shape||!this._l9Shape.hitTest(t,i,e,!1,this.$border,this.$backgroundColor||this.$backgroundGradient))||this.doHitTest(t,i,e)},doHitTest:function(t,i,e){return this._j4.intersectsPoint(t,i,e)},hitTestByBounds:function(t,i,e,n){var r=this._i0(t,i);return!(n||!this._$o()||!this._l9Shape||!this._l9Shape.hitTest(t,i,e,!1,this.$border,this.$backgroundColor||this.$backgroundGradient))||this._j4.intersectsPoint(r.x,r.y,e)},onDataChanged:function(t,i){this.$invalidateData=!0,this._1e=!0,this.$invalidateVisibility=!0},getBounds:function(){var t=this._fu.clone();return t.offset(this.x,this.y),this.parent&&(this.parent.rotate&&Ri(t,this.parent.rotate,t),t.offset(this.parent.x||0,this.parent.y||0)),t},destroy:function(){this._i1ed=!0},_ds:!1},it(lr.prototype,{originalBounds:{get:function(){return this._j4}},data:{get:function(){return this.$data},set:function(t){if(this.$data!=t){var i=this.$data;this.$data=t,this.onDataChanged(t,i)}}},parent:{get:function(){return this._ja}},showOnTop:{get:function(){return this._ds},set:function(t){t!=this._ds&&(this._ds=t,this._1e=!0,this._ja&&this._ja._m0s&&this._ja._m0s(this))}}}),ur(lr.prototype,{visible:{value:!0,validateFlags:["Visibility","Location"]},showEmpty:{validateFlags:["Visibility"]},anchorPosition:{value:yt.CENTER_MIDDLE,validateFlags:["AnchorPoint","Location"]},position:{value:yt.CENTER_MIDDLE,validateFlags:["Location"]},offsetX:{value:0,validateFlags:["Location"]},offsetY:{value:0,validateFlags:["Location"]},layoutByAnchorPoint:{value:!0,validateFlags:["Size","AnchorPoint","Location"]},padding:{value:0,validateFlags:["Size"]},border:{value:0,validateFlags:["Size"]},borderRadius:{value:ot.BORDER_RADIUS},showPointer:{value:!1,validateFlags:["Size"]},pointerX:{value:0,validateFlags:["Size"]},pointerY:{value:0,validateFlags:["Size"]},pointerWidth:{value:ot.POINTER_WIDTH},backgroundColor:{validateFlags:["Size"]},backgroundGradient:{validateFlags:["Size","BackgroundGradient"]},selected:{value:!1,validateFlags:["Size"]},selectionBorder:{value:ot.SELECTION_BORDER,validateFlags:["Size"]},selectionShadowBlur:{value:ot.SELECTION_SHADOW_BLUR,validateFlags:["Size"]},selectionColor:{value:ot.SELECTION_COLOR,validateFlags:["Size"]},selectionType:{value:ot.SELECTION_TYPE,validateFlags:["Size"]},selectionShadowOffsetX:{value:0,validateFlags:["Size"]},selectionShadowOffsetY:{value:0,validateFlags:["Size"]},shadowBlur:{value:0,validateFlags:["Size"]},shadowColor:{validateFlags:["Size"]},shadowOffsetX:{value:0,validateFlags:["Size"]},shadowOffsetY:{value:0,validateFlags:["Size"]},renderColorBlendMode:{},renderColor:{},x:{value:0,validateFlags:["Location"]},y:{value:0,validateFlags:["Location"]},rotatable:{value:!0,validateFlags:["Rotate","Size"]},rotate:{value:0,validateFlags:["Rotate","Size"]},_hostRotate:{validateFlags:["Rotate"]},lineWidth:{value:0,validateFlags:["Data"]},alpha:{value:1}});var cr=[Ii.PROPERTY_TYPE_ACCESSOR,Ii.PROPERTY_TYPE_STYLE,Ii.PROPERTY_TYPE_CLIENT];function fr(){cr.forEach(function(t){this[t]={}},this)}fr.prototype={removeBinding:function(i){for(var t=cr.length;0<=--t;){var e=this[cr[t]];for(var n in e){var r=e[n];Array.isArray(r)?(h(r,function(t){return t.target==i},this),r.length||delete e[n]):r.target==i&&delete e[n]}}},_1v:function(t,i,e){if(!e&&!(e=this[i.propertyType||Ii.PROPERTY_TYPE_ACCESSOR]))return!1;var n=e[t];n?(Array.isArray(n)||(e[t]=n=[n]),n.push(i)):e[t]=i},_2h:function(t,i,e,n,r,s){var o=this[t=t||Ii.PROPERTY_TYPE_ACCESSOR];if(!o)return!1;var h={property:i,propertyType:t,bindingProperty:n,target:e,callback:r,invalidateSize:s};this._1v(i,h,o)},onBindingPropertyChange:function(t,i,e,n){var r=this[e||Ii.PROPERTY_TYPE_ACCESSOR];if(!r)return!1;var s=r[i];return!!s&&(t._1e=!0,function t(i,e,n,r){if(Array.isArray(e))for(var s=e.length;0<=--s;)t(i,e[s],n,r);else{var o=e.target;if(o){if(o instanceof lr||(o=i[o]),!o)return}else o=i;if(r=r||i.getProperty(e.property,n),e.bindingProperty&&(o[e.bindingProperty]=r),e.callback){var h=e.callback;h instanceof Function||(h=i[h]),h instanceof Function&&h.call(i,r,o)}}}(t,s,e,n),!0)},initBindingProperties:function(t,i){for(var e=cr.length;0<=--e;){var n=cr[e],r=this[n];for(var s in r){var o=r[s];if(o.bindingProperty){var h,a=o.target;if(a){if(!(a instanceof lr||(a=t[a])))continue}else a=t;void 0!==(h=!1===i?t.getProperty(o.property,n):n==Ii.PROPERTY_TYPE_STYLE?t.graph.getStyle(t.$data,o.property):t.$data[o.property])&&(a[o.bindingProperty]=h)}}}}};var dr={SELECTION_COLOR:"selection.color",SELECTION_BORDER:"selection.border",SELECTION_SHADOW_BLUR:"selection.shadow.blur",SELECTION_SHADOW_OFFSET_X:"selection.shadow.offset.x",SELECTION_SHADOW_OFFSET_Y:"selection.shadow.offset.y",SELECTION_TYPE:"selection.type",RENDER_COLOR:"render.color",RENDER_COLOR_BLEND_MODE:"render.color.blend.mode",ALPHA:"alpha",SHADOW_BLUR:"shadow.blur",SHADOW_COLOR:"shadow.color",SHADOW_OFFSET_X:"shadow.offset.x",SHADOW_OFFSET_Y:"shadow.offset.y",SHAPE_STROKE:"shape.stroke",SHAPE_STROKE_STYLE:"shape.stroke.style",SHAPE_LINE_FILL_COLOR:"shape.stroke.fill.color",SHAPE_LINE_DASH:"shape.line.dash",SHAPE_LINE_DASH_OFFSET:"shape.line.dash.offset",SHAPE_FILL_COLOR:"shape.fill.color",SHAPE_FILL_GRADIENT:"shape.fill.gradient",SHAPE_OUTLINE:"shape.outline",SHAPE_OUTLINE_STYLE:"shape.outline.style",LAYOUT_BY_PATH:"layout.by.path",BACKGROUND_COLOR:"background.color",BACKGROUND_GRADIENT:"background.gradient",BORDER:"border.width",BORDER_COLOR:"border.color",BORDER_LINE_DASH:"border.line.dash",BORDER_LINE_DASH_OFFSET:"border.line.dash.offset",BORDER_RADIUS:"border.radius",PADDING:"padding",LINE_CAP:"line.cap",LINE_JOIN:"line.join",LINE_DASH_CAP:"line.dash.cap",LINE_DASH_JOIN:"line.dash.join",IMAGE_BACKGROUND_COLOR:"image.background.color",IMAGE_BACKGROUND_GRADIENT:"image.background.gradient",IMAGE_BORDER:"image.border.width"};dr.IMAGE_BORDER_STYLE=dr.IMAGE_BORDER_COLOR="image.border.style",dr.IMAGE_BORDER_LINE_DASH="image.border.line.dash",dr.IMAGE_BORDER_LINE_DASH_OFFSET="image.border.line.dash.offset",dr.IMAGE_RADIUS=dr.IMAGE_BORDER_RADIUS="image.radius",dr.IMAGE_PADDING="image.padding",dr.IMAGE_Z_INDEX="image.z.index",dr.IMAGE_ADJUST="image.adjust",dr.IMAGE_ALPHA="image.alpha",dr.LABEL_ROTATE="label.rotate",dr.LABEL_POSITION="label.position",dr.LABEL_VISIBLE="label.visible",dr.LABEL_ANCHOR_POSITION="label.anchor.position",dr.LABEL_COLOR="label.color",dr.LABEL_FONT_SIZE="label.font.size",dr.LABEL_FONT_FAMILY="label.font.family",dr.LABEL_FONT_STYLE="label.font.style",dr.LABEL_PADDING="label.padding",dr.LABEL_POINTER_WIDTH="label.pointer.width",dr.LABEL_POINTER="label.pointer",dr.LABEL_RADIUS="label.radius",dr.LABEL_OFFSET_X="label.offset.x",dr.LABEL_OFFSET_Y="label.offset.y",dr.LABEL_SIZE="label.size",dr.LABEL_ALIGN_POSITION="label.align.position",dr.LABEL_BORDER="label.border",dr.LABEL_BORDER_LINE_DASH="label.border.line.dash",dr.LABEL_BORDER_LINE_DASH_OFFSET="label.border.line.dash.offset",dr.LABEL_BORDER_STYLE="label.border.style",dr.LABEL_BACKGROUND_COLOR="label.background.color",dr.LABEL_BACKGROUND_GRADIENT="label.background.gradient",dr.LABEL_ROTATABLE="label.rotatable",dr.LABEL_SHADOW_BLUR="label.shadow.blur",dr.LABEL_SHADOW_COLOR="label.shadow.color",dr.LABEL_SHADOW_OFFSET_X="label.shadow.offset.x",dr.LABEL_SHADOW_OFFSET_Y="label.shadow.offset.y",dr.LABEL_Z_INDEX="label.z.index",dr.LABEL_ON_TOP="label.on.top",dr.GROUP_BACKGROUND_COLOR="group.background.color",dr.GROUP_BACKGROUND_GRADIENT="group.background.gradient",dr.GROUP_RADIUS="group.radius",dr.GROUP_STROKE="group.stroke",dr.GROUP_STROKE_STYLE="group.stroke.color",dr.GROUP_STROKE_LINE_DASH="group.stroke.line.dash",dr.GROUP_STROKE_LINE_DASH_OFFSET="group.stroke.line.dash.offset",dr.EDGE_BUNDLE_LABEL_ROTATE="edge.bundle.label.rotate",dr.EDGE_BUNDLE_LABEL_POSITION="edge.bundle.label.position",dr.EDGE_BUNDLE_LABEL_ANCHOR_POSITION="edge.bundle.label.anchor.position",dr.EDGE_BUNDLE_LABEL_COLOR="edge.bundle.label.color",dr.EDGE_BUNDLE_LABEL_FONT_SIZE="edge.bundle.label.font.size",dr.EDGE_BUNDLE_LABEL_FONT_FAMILY="edge.bundle.label.font.family",dr.EDGE_BUNDLE_LABEL_FONT_STYLE="edge.bundle.label.font.style",dr.EDGE_BUNDLE_LABEL_PADDING="edge.bundle.label.padding",dr.EDGE_BUNDLE_LABEL_POINTER_WIDTH="edge.bundle.label.pointer.width",dr.EDGE_BUNDLE_LABEL_POINTER="edge.bundle.label.pointer",dr.EDGE_BUNDLE_LABEL_RADIUS="edge.bundle.label.radius",dr.EDGE_BUNDLE_LABEL_OFFSET_X="edge.bundle.label.offset.x",dr.EDGE_BUNDLE_LABEL_OFFSET_Y="edge.bundle.label.offset.y",dr.EDGE_BUNDLE_LABEL_BORDER="edge.bundle.label.border",dr.EDGE_BUNDLE_LABEL_BORDER_STYLE="edge.bundle.label.border.color",dr.EDGE_BUNDLE_LABEL_BACKGROUND_COLOR="edge.bundle.label.background.color",dr.EDGE_BUNDLE_LABEL_BACKGROUND_GRADIENT="edge.bundle.label.background.gradient",dr.EDGE_BUNDLE_LABEL_ROTATABLE="edge.bundle.label.rotatable",dr.EDGE_WIDTH="edge.width",dr.EDGE_COLOR="edge.color",dr.EDGE_OUTLINE="edge.outline",dr.EDGE_OUTLINE_STYLE="edge.outline.style",dr.EDGE_LINE_DASH="edge.line.dash",dr.EDGE_LINE_DASH_OFFSET="edge.line.dash.offset",dr.EDGE_FROM_OFFSET="edge.from.offset",dr.EDGE_TO_OFFSET="edge.to.offset",dr.EDGE_FILL_COLOR="edge.fill.color",dr.EDGE_BUNDLE_TYPE="edge.bundle.type",dr.EDGE_BUNDLE_GAP="edge.bundle.gap",dr.EDGE_LOOPED_EXTAND="edge.looped.extand",dr.EDGE_EXTEND="edge.extend",dr.EDGE_CONTROL_POINT="edge.control.point",dr.EDGE_SPLIT_BY_PERCENT="edge.split.by.percent",dr.EDGE_SPLIT_PERCENT="edge.split.percent",dr.EDGE_SPLIT_VALUE="edge.split.value",dr.EDGE_CORNER="edge.corner",dr.EDGE_CORNER_RADIUS="edge.corner.radius",dr.EDGE_FROM_AT_EDGE="edge.from.at.edge",dr.EDGE_TO_AT_EDGE="edge.to.at.edge",dr.EDGE_FROM_PORT="edge.from.port",dr.EDGE_TO_PORT="edge.to.port",dr.ARROW_FROM="arrow.from",dr.ARROW_FROM_SIZE="arrow.from.size",dr.ARROW_FROM_OFFSET="arrow.from.offset",dr.ARROW_FROM_STROKE="arrow.from.stroke",dr.ARROW_FROM_STROKE_STYLE="arrow.from.stroke.style",dr.ARROW_FROM_OUTLINE="arrow.from.outline",dr.ARROW_FROM_OUTLINE_STYLE="arrow.from.outline.style",dr.ARROW_FROM_LINE_DASH="arrow.from.line.dash",dr.ARROW_FROM_LINE_DASH_OFFSET="arrow.from.line.dash.offset",dr.ARROW_FROM_FILL_COLOR="arrow.from.fill.color",dr.ARROW_FROM_FILL_GRADIENT="arrow.from.fill.gradient",dr.ARROW_FROM_LINE_CAP="arrow.from.line.cap",dr.ARROW_FROM_LINE_JOIN="arrow.from.line.join",dr.ARROW_TO="arrow.to",dr.ARROW_TO_SIZE="arrow.to.size",dr.ARROW_TO_OFFSET="arrow.to.offset",dr.ARROW_TO_STROKE="arrow.to.stroke",dr.ARROW_TO_STROKE_STYLE="arrow.to.stroke.style",dr.ARROW_TO_OUTLINE="arrow.to.outline",dr.ARROW_TO_OUTLINE_STYLE="arrow.to.outline.style",dr.ARROW_TO_LINE_DASH="arrow.to.line.dash",dr.ARROW_TO_LINE_DASH_OFFSET="arrow.to.line.dash.offset",dr.ARROW_TO_FILL_COLOR="arrow.to.fill.color",dr.ARROW_TO_FILL_GRADIENT="arrow.to.fill.gradient",dr.ARROW_TO_LINE_CAP="arrow.to.line.cap",dr.ARROW_TO_LINE_JOIN="arrow.to.line.join";var Er=new fr,gr=Ii.PROPERTY_TYPE_ACCESSOR,vr=Ii.PROPERTY_TYPE_STYLE;Er._2h(vr,dr.SELECTION_TYPE,null,"selectionType"),Er._2h(vr,dr.SELECTION_BORDER,null,"selectionBorder"),Er._2h(vr,dr.SELECTION_SHADOW_BLUR,null,"selectionShadowBlur"),Er._2h(vr,dr.SELECTION_COLOR,null,"selectionColor"),Er._2h(vr,dr.SELECTION_SHADOW_OFFSET_X,null,"selectionShadowOffsetX"),Er._2h(vr,dr.SELECTION_SHADOW_OFFSET_Y,null,"selectionShadowOffsetY"),Er._2h(gr,"name","label","data"),Er._2h(vr,dr.LABEL_VISIBLE,"label","visible"),Er._2h(vr,dr.LABEL_POSITION,"label","position"),Er._2h(vr,dr.LABEL_ANCHOR_POSITION,"label","anchorPosition"),Er._2h(vr,dr.LABEL_COLOR,"label","color"),Er._2h(vr,dr.LABEL_FONT_SIZE,"label","fontSize"),Er._2h(vr,dr.LABEL_BORDER,"label","border"),Er._2h(vr,dr.LABEL_BORDER_LINE_DASH,"label","borderLineDash"),Er._2h(vr,dr.LABEL_BORDER_LINE_DASH_OFFSET,"label","borderLineDashOffset"),Er._2h(vr,dr.LABEL_BORDER_STYLE,"label","borderColor"),Er._2h(vr,dr.LABEL_BACKGROUND_COLOR,"label","backgroundColor"),Er._2h(vr,dr.LABEL_ON_TOP,"label","showOnTop"),Er._2h(vr,dr.SHADOW_BLUR,null,"shadowBlur"),Er._2h(vr,dr.SHADOW_COLOR,null,"shadowColor"),Er._2h(vr,dr.SHADOW_OFFSET_X,null,"shadowOffsetX"),Er._2h(vr,dr.SHADOW_OFFSET_Y,null,"shadowOffsetY"),Er._2h(vr,dr.LABEL_FONT_FAMILY,"label","fontFamily"),Er._2h(vr,dr.LABEL_FONT_STYLE,"label","fontStyle"),Er._2h(vr,dr.LABEL_ALIGN_POSITION,"label","alignPosition"),Er._2h(vr,dr.LABEL_ROTATE,"label","rotate"),Er._2h(vr,dr.LABEL_PADDING,"label","padding"),Er._2h(vr,dr.LABEL_POINTER_WIDTH,"label","pointerWidth"),Er._2h(vr,dr.LABEL_POINTER,"label","showPointer"),Er._2h(vr,dr.LABEL_RADIUS,"label","borderRadius"),Er._2h(vr,dr.LABEL_OFFSET_X,"label","offsetX"),Er._2h(vr,dr.LABEL_OFFSET_Y,"label","offsetY"),Er._2h(vr,dr.LABEL_ROTATABLE,"label","rotatable"),Er._2h(vr,dr.LABEL_BACKGROUND_GRADIENT,"label","backgroundGradient"),Er._2h(vr,dr.LABEL_SIZE,"label","size"),Er._2h(vr,dr.LABEL_SHADOW_BLUR,"label","shadowBlur"),Er._2h(vr,dr.LABEL_SHADOW_COLOR,"label","shadowColor"),Er._2h(vr,dr.LABEL_SHADOW_OFFSET_X,"label","shadowOffsetX"),Er._2h(vr,dr.LABEL_SHADOW_OFFSET_Y,"label","shadowOffsetY"),Er._2h(vr,dr.LABEL_Z_INDEX,"label","zIndex"),Er._2h(vr,dr.RENDER_COLOR,null,"renderColor"),Er._2h(vr,dr.RENDER_COLOR_BLEND_MODE,null,"renderColorBlendMode"),Er._2h(vr,dr.ALPHA,null,"alpha");var pr=new fr;pr._2h(gr,"location"),pr._2h(gr,"anchorPosition",null,"_2j"),pr._2h(gr,"rotate",null,"rotate"),pr._2h(vr,dr.BACKGROUND_COLOR,null,"backgroundColor"),pr._2h(vr,dr.BACKGROUND_GRADIENT,null,"backgroundGradient"),pr._2h(vr,dr.PADDING,null,"padding"),pr._2h(vr,dr.BORDER,null,"border"),pr._2h(vr,dr.BORDER_RADIUS,null,"borderRadius"),pr._2h(vr,dr.BORDER_COLOR,null,"borderColor"),pr._2h(vr,dr.BORDER_LINE_DASH,null,"borderLineDash"),pr._2h(vr,dr.BORDER_LINE_DASH_OFFSET,null,"borderLineDashOffset"),pr._2h(gr,"image","image","data","_m38"),pr._2h(gr,"size","image","size"),pr._2h(vr,dr.SHAPE_STROKE,"image","lineWidth"),pr._2h(vr,dr.SHAPE_STROKE_STYLE,"image","strokeStyle"),pr._2h(vr,dr.SHAPE_FILL_COLOR,"image","fillColor"),pr._2h(vr,dr.LAYOUT_BY_PATH,"image","layoutByPath"),pr._2h(vr,dr.IMAGE_ADJUST,"image","adjustType"),pr._2h(vr,dr.SHAPE_OUTLINE,"image","outline"),pr._2h(vr,dr.SHAPE_OUTLINE_STYLE,"image","outlineStyle"),pr._2h(vr,dr.SHAPE_FILL_GRADIENT,"image","fillGradient"),pr._2h(vr,dr.SHAPE_LINE_DASH,"image","lineDash"),pr._2h(vr,dr.SHAPE_LINE_DASH_OFFSET,"image","lineDashOffset"),pr._2h(vr,dr.LINE_CAP,"image","lineCap"),pr._2h(vr,dr.LINE_JOIN,"image","lineJoin"),pr._2h(vr,dr.IMAGE_BACKGROUND_COLOR,"image","backgroundColor"),pr._2h(vr,dr.IMAGE_BACKGROUND_GRADIENT,"image","backgroundGradient"),pr._2h(vr,dr.IMAGE_PADDING,"image","padding"),pr._2h(vr,dr.IMAGE_BORDER,"image","border"),pr._2h(vr,dr.IMAGE_BORDER_RADIUS,"image","borderRadius"),pr._2h(vr,dr.IMAGE_BORDER_COLOR,"image","borderColor"),pr._2h(vr,dr.IMAGE_BORDER_LINE_DASH,"image","borderLineDash"),pr._2h(vr,dr.IMAGE_BORDER_LINE_DASH_OFFSET,"image","borderLineDashOffset"),pr._2h(vr,dr.IMAGE_Z_INDEX,"image","zIndex"),pr._2h(vr,dr.IMAGE_ALPHA,"image","alpha"),pr._2h(gr,"expanded",null,null,"checkBody"),pr._2h(gr,"enableSubNetwork",null,null,"checkBody");var mr=new fr;mr._2h(gr,"groupType",null,null,"_5j"),mr._2h(gr,"groupImage",null,null,"_5j"),mr._2h(gr,"minSize",null,null,"_5j"),mr._2h(gr,"padding",null,null,"_5j"),mr._2h(vr,dr.GROUP_BACKGROUND_COLOR,"shape","fillColor"),mr._2h(vr,dr.GROUP_BACKGROUND_GRADIENT,"shape","fillGradient"),mr._2h(vr,dr.GROUP_STROKE,"shape","lineWidth"),mr._2h(vr,dr.GROUP_STROKE_STYLE,"shape","strokeStyle"),mr._2h(vr,dr.GROUP_STROKE_LINE_DASH,"shape","lineDash"),mr._2h(vr,dr.GROUP_STROKE_LINE_DASH_OFFSET,"shape","lineDashOffset"),mr._2h(vr,dr.GROUP_RADIUS,null,null,"_5j");var yr=new fr;yr._2h(gr,"from","shape",null,"_3y"),yr._2h(gr,"to","shape",null,"_3y"),yr._2h(gr,"edgeType","shape",null,"_3y"),yr._2h(vr,dr.EDGE_EXTEND,"shape",null,"_3y"),yr._2h(vr,dr.EDGE_BUNDLE_TYPE,"shape",null,"_3y"),yr._2h(vr,dr.EDGE_WIDTH,"shape","lineWidth"),yr._2h(vr,dr.EDGE_COLOR,"shape","strokeStyle"),yr._2h(vr,dr.ARROW_FROM,"shape","fromArrow"),yr._2h(vr,dr.ARROW_TO,"shape","toArrow"),yr._2h(vr,dr.LINE_DASH_CAP,"shape","lineDashCap"),yr._2h(vr,dr.LINE_DASH_JOIN,"shape","lineDashJoin"),yr._2h(vr,dr.EDGE_FILL_COLOR,"shape","lineFillColor"),yr._2h(vr,dr.EDGE_FROM_AT_EDGE,null,"fromAtEdge","_3y"),yr._2h(vr,dr.EDGE_TO_AT_EDGE,null,"toAtEdge","_3y"),yr._2h(vr,dr.EDGE_OUTLINE,"shape","outline"),yr._2h(vr,dr.EDGE_OUTLINE_STYLE,"shape","outlineStyle"),yr._2h(vr,dr.EDGE_LINE_DASH,"shape","lineDash"),yr._2h(vr,dr.EDGE_LINE_DASH_OFFSET,"shape","lineDashOffset"),yr._2h(vr,dr.EDGE_CONTROL_POINT,"shape",null,"_3y"),yr._2h(vr,dr.EDGE_FROM_OFFSET,"shape",null,"_3y"),yr._2h(vr,dr.EDGE_TO_OFFSET,"shape",null,"_3y"),yr._2h(vr,dr.EDGE_FROM_PORT,"shape",null,"_3y"),yr._2h(vr,dr.EDGE_TO_PORT,"shape",null,"_3y"),yr._2h(vr,dr.LINE_CAP,"shape","lineCap"),yr._2h(vr,dr.LINE_JOIN,"shape","lineJoin"),yr._2h(gr,"path.segment",null,null,"_3y",!0),yr._2h(gr,"angle",null,null,"_3y",!0),yr._2h(vr,dr.ARROW_FROM_SIZE,"shape","fromArrowSize"),yr._2h(vr,dr.ARROW_FROM_OFFSET,"shape","fromArrowOffset"),yr._2h(vr,dr.ARROW_FROM_STROKE,"shape","fromArrowStroke"),yr._2h(vr,dr.ARROW_FROM_STROKE_STYLE,"shape","fromArrowStrokeStyle"),yr._2h(vr,dr.ARROW_FROM_OUTLINE,"shape","fromArrowOutline"),yr._2h(vr,dr.ARROW_FROM_OUTLINE_STYLE,"shape","fromArrowOutlineStyle"),yr._2h(vr,dr.ARROW_FROM_FILL_COLOR,"shape","fromArrowFillColor"),yr._2h(vr,dr.ARROW_FROM_FILL_GRADIENT,"shape","fromArrowFillGradient"),yr._2h(vr,dr.ARROW_FROM_LINE_DASH,"shape","fromArrowLineDash"),yr._2h(vr,dr.ARROW_FROM_LINE_DASH_OFFSET,"shape","fromArrowLineDashOffset"),yr._2h(vr,dr.ARROW_FROM_LINE_JOIN,"shape","fromArrowLineJoin"),yr._2h(vr,dr.ARROW_FROM_LINE_CAP,"shape","fromArrowLineCap"),yr._2h(vr,dr.ARROW_TO_SIZE,"shape","toArrowSize"),yr._2h(vr,dr.ARROW_TO_OFFSET,"shape","toArrowOffset"),yr._2h(vr,dr.ARROW_TO_STROKE,"shape","toArrowStroke"),yr._2h(vr,dr.ARROW_TO_STROKE_STYLE,"shape","toArrowStrokeStyle"),yr._2h(vr,dr.ARROW_TO_OUTLINE,"shape","toArrowOutline"),yr._2h(vr,dr.ARROW_TO_OUTLINE_STYLE,"shape","toArrowOutlineStyle"),yr._2h(vr,dr.ARROW_TO_FILL_COLOR,"shape","toArrowFillColor"),yr._2h(vr,dr.ARROW_TO_FILL_GRADIENT,"shape","toArrowFillGradient"),yr._2h(vr,dr.ARROW_TO_LINE_DASH,"shape","toArrowLineDash"),yr._2h(vr,dr.ARROW_TO_LINE_DASH_OFFSET,"shape","toArrowLineDashOffset"),yr._2h(vr,dr.ARROW_TO_LINE_JOIN,"shape","toArrowLineJoin"),yr._2h(vr,dr.ARROW_TO_LINE_CAP,"shape","toArrowLineCap");var Tr=new fr;Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_COLOR,"bundleLabel","color"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_POSITION,"bundleLabel","position"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_ANCHOR_POSITION,"bundleLabel","anchorPosition"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_FONT_SIZE,"bundleLabel","fontSize"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_ROTATABLE,"bundleLabel","rotatable"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_ROTATE,"bundleLabel","rotate"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_FONT_FAMILY,"bundleLabel","fontFamily"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_FONT_STYLE,"bundleLabel","fontStyle"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_PADDING,"bundleLabel","padding"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_POINTER_WIDTH,"bundleLabel","pointerWidth"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_POINTER,"bundleLabel","showPointer"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_RADIUS,"bundleLabel","borderRadius"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_OFFSET_X,"bundleLabel","offsetX"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_OFFSET_Y,"bundleLabel","offsetY"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_BORDER,"bundleLabel","border"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_BORDER_STYLE,"bundleLabel","borderColor"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_BACKGROUND_COLOR,"bundleLabel","backgroundColor"),Tr._2h(vr,dr.EDGE_BUNDLE_LABEL_BACKGROUND_GRADIENT,"bundleLabel","backgroundGradient");var Or=new fr;Or._2h(gr,"location"),Or._2h(vr,dr.BACKGROUND_COLOR,null,"backgroundColor"),Or._2h(vr,dr.BACKGROUND_GRADIENT,null,"backgroundGradient"),Or._2h(vr,dr.PADDING,null,"padding"),Or._2h(vr,dr.BORDER,null,"border"),Or._2h(vr,dr.BORDER_RADIUS,null,"borderRadius"),Or._2h(vr,dr.BORDER_COLOR,null,"borderColor"),Or._2h(vr,dr.BORDER_LINE_DASH,null,"borderLineDash"),Or._2h(vr,dr.BORDER_LINE_DASH_OFFSET,null,"borderLineDashOffset"),Or._2h(gr,"rotate",null,"rotate"),Or._2h(gr,"path.segment",null,null,"invalidateShape"),Or._2h(gr,"path","image","data"),Or._2h(gr,"size","image","size"),Or._2h(vr,dr.SHAPE_STROKE,"image","lineWidth"),Or._2h(vr,dr.SHAPE_STROKE_STYLE,"image","strokeStyle"),Or._2h(vr,dr.SHAPE_FILL_COLOR,"image","fillColor"),Or._2h(vr,dr.SHAPE_FILL_GRADIENT,"image","fillGradient"),Or._2h(vr,dr.LINE_DASH_CAP,"image","lineDashCap"),Or._2h(vr,dr.LINE_DASH_JOIN,"image","lineDashJoin"),Or._2h(vr,dr.SHAPE_LINE_FILL_COLOR,"image","lineFillColor"),Or._2h(vr,dr.SHAPE_OUTLINE,"image","outline"),Or._2h(vr,dr.SHAPE_OUTLINE_STYLE,"image","outlineStyle"),Or._2h(vr,dr.SHAPE_LINE_DASH,"image","lineDash"),Or._2h(vr,dr.SHAPE_LINE_DASH_OFFSET,"image","lineDashOffset"),Or._2h(vr,dr.LINE_CAP,"image","lineCap"),Or._2h(vr,dr.LINE_JOIN,"image","lineJoin"),Or._2h(vr,dr.LAYOUT_BY_PATH,"image","layoutByPath"),Or._2h(vr,dr.IMAGE_BACKGROUND_COLOR,"image","backgroundColor"),Or._2h(vr,dr.IMAGE_BACKGROUND_GRADIENT,"image","backgroundGradient"),Or._2h(vr,dr.IMAGE_PADDING,"image","padding"),Or._2h(vr,dr.IMAGE_BORDER,"image","border"),Or._2h(vr,dr.IMAGE_BORDER_RADIUS,"image","borderRadius"),Or._2h(vr,dr.IMAGE_BORDER_COLOR,"image","borderColor"),Or._2h(vr,dr.IMAGE_BORDER_LINE_DASH,"image","borderLineDash"),Or._2h(vr,dr.IMAGE_BORDER_LINE_DASH_OFFSET,"image","borderLineDashOffset"),Or._2h(vr,dr.ARROW_FROM,"image","fromArrow"),Or._2h(vr,dr.ARROW_FROM_SIZE,"image","fromArrowSize"),Or._2h(vr,dr.ARROW_FROM_OFFSET,"image","fromArrowOffset"),Or._2h(vr,dr.ARROW_FROM_STROKE,"image","fromArrowStroke"),Or._2h(vr,dr.ARROW_FROM_STROKE_STYLE,"image","fromArrowStrokeStyle"),Or._2h(vr,dr.ARROW_FROM_FILL_COLOR,"image","fromArrowFillColor"),Or._2h(vr,dr.ARROW_FROM_FILL_GRADIENT,"image","fromArrowFillGradient"),Or._2h(vr,dr.ARROW_FROM_LINE_DASH,"image","fromArrowLineDash"),Or._2h(vr,dr.ARROW_FROM_LINE_DASH_OFFSET,"image","fromArrowLineDashOffset"),Or._2h(vr,dr.ARROW_FROM_LINE_JOIN,"image","fromArrowLineJoin"),Or._2h(vr,dr.ARROW_FROM_LINE_CAP,"image","fromArrowLineCap"),Or._2h(vr,dr.ARROW_TO_SIZE,"image","toArrowSize"),Or._2h(vr,dr.ARROW_TO_OFFSET,"image","toArrowOffset"),Or._2h(vr,dr.ARROW_TO,"image","toArrow"),Or._2h(vr,dr.ARROW_TO_STROKE,"image","toArrowStroke"),Or._2h(vr,dr.ARROW_TO_STROKE_STYLE,"image","toArrowStrokeStyle"),Or._2h(vr,dr.ARROW_TO_FILL_COLOR,"image","toArrowFillColor"),Or._2h(vr,dr.ARROW_TO_FILL_GRADIENT,"image","toArrowFillGradient"),Or._2h(vr,dr.ARROW_TO_LINE_DASH,"image","toArrowLineDash"),Or._2h(vr,dr.ARROW_TO_LINE_DASH_OFFSET,"image","toArrowLineDashOffset"),Or._2h(vr,dr.ARROW_TO_LINE_JOIN,"image","toArrowLineJoin"),Or._2h(vr,dr.ARROW_TO_LINE_CAP,"image","toArrowLineCap");function Ar(t,i){return(t=t.zIndex)==(i=i.zIndex)?0:(i=i||0)<(t=t||0)?1:t<i?-1:void 0}var wr=function(t,i){this.uiBounds=new pt,c(this,wr,arguments),this.id=this.$data.id,this.graph=i,this._fr=[],this._m36=new fr};function br(t,i,e,n){if(n!=Ii.PROPERTY_TYPE_ACCESSOR)if(n!=Ii.PROPERTY_TYPE_CLIENT){if(n!=Ii.PROPERTY_TYPE_STYLE)return!1;t.setStyle(e,i)}else t.set(e,i);else t[e]=i}wr.prototype={syncSelection:!1,graph:null,layoutByAnchorPoint:!1,_m36:null,_fr:null,addChild:function(t,i){t._ja=this,void 0!==i?T(this._fr,t,i):this._fr.push(t),t._ds&&this._m0s(t),this.invalidateChildrenIndex(),this.invalidateSize(),this.$invalidateChild=!0},removeChild:function(t){this._m36.removeBinding(t),t._ja=null,O(this._fr,t),this._j3&&this._j3.remove(t),this.invalidateSize(),this.$invalidateChild=!0},getProperty:function(t,i){return i==Ii.PROPERTY_TYPE_STYLE?this.graph.getStyle(this.$data,t):i==Ii.PROPERTY_TYPE_CLIENT?this.$data.get(t):this.$data[t]},getStyle:function(t){return this.graph.getStyle(this.$data,t)},_$t:function(t,i,e){var n=this._m36.onBindingPropertyChange(this,t,i,e);return Er.onBindingPropertyChange(this,t,i,e)||n},onPropertyChange:function(t){if("zIndex"==t.kind)return this.invalidateRender(),!0;if("ui"!=t.type)return this._$t(t.kind,t.propertyType||gr,t.value);if("invalidate"==t.kind)return this.invalidate(),!0;var i=t.value;return!(!i||!i.ui||("add"==t.kind?this._98(i):"remove"==t.kind&&this.removeChild(i.ui),0))},label:null,initLabel:function(){var t=new Sr;t.name="label",this.addChild(t),this.label=t},initialize:function(){this.initLabel(),this.$data._m33&&this.$data._m33.forEach(this._98,this),Er.initBindingProperties(this),this._m36.initBindingProperties(this,!1)},addBinding:function(t,i){if(!i.property)return!1;i.target=t,this._m36._1v(i.property,i)},_fs:function(t,i){var e=this.$data;if(!e._m33)return!1;var n=e._m33.getById(t.id);if(!n||!n.bindingProperties)return!1;var r=n.bindingProperties;if(W(r)){var s=!1;return b(r,function(t){if("data"==t.bindingProperty)return s=br(e,i,t.property,t.propertyType),!1},this),s}return"data"==r.bindingProperty&&br(e,i,r.property,r.propertyType)},_98:function(t){var i=t.ui;if(i){var e=t.bindingProperties;e&&(Array.isArray(e)?e.forEach(function(t){this.addBinding(i,t)},this):this.addBinding(i,e)),this.addChild(i)}},validate:function(){return this._m0t||(this.initialize(),this._m0t=!0),this.doValidate()},_$a:!0,invalidateChildrenIndex:function(){this._$a=!0},doValidate:function(){if(this._1e&&(this._1e=!1,this.validateChildren()&&(this.measure(),this.$invalidateSize=!0),this._$a&&(this._$a=!1,R?this._fr=a(this._fr,Ar):this._fr.sort(Ar))),sn.call(this)&&(this.$invalidateRotate=!0),this.$invalidateRotate){hn.call(this),this.uiBounds.setByRect(this._fu);var t=this.$selectionBorder||0,i=Math.max(this.$selectionBorder||0,this.$shadowOffsetX||0,this.$selectionShadowOffsetX||0),e=Math.max(this.$shadowOffsetY||0,this.$selectionShadowOffsetY||0),n=Math.max(t,this.$shadowBlur,this.$selectionShadowBlur),r=(n+=ot.UI_BOUNDS_GROW||0)-i,s=n+i,o=n-e,h=n+e;return r<0&&(r=0),s<0&&(s=0),o<0&&(o=0),h<0&&(h=0),this.uiBounds.grow(o,r,h,s),this.onBoundsChanged&&this.onBoundsChanged(),this.$invalidateBounds=!0}},validateChildren:function(){var t=this.$invalidateChild;this.$invalidateChild=!1;var i=this._m1ody,e=this.bodyChanged;i&&(i.$renderColor=this.$renderColor,i.$renderColorBlendMode=this.$renderColorBlendMode,i.$shadowColor=this.$shadowColor,i.$shadowBlur=this.$shadowBlur,i.$shadowOffsetX=this.$shadowOffsetX,i.$shadowOffsetY=this.$shadowOffsetY),this.bodyChanged=!1,i&&i._1e&&(e=i.validate()||e,i.$x=0,i.$y=0,i.$invalidateRotate&&hn.call(i),t=!0);for(var n=0,r=this._fr.length;n<r;n++){var s=this._fr[n];if(s!=i){var o=s._1e&&s.validate();(o||e)&&s._hy&&an(s,i),!t&&o&&(t=!0)}}return t},measure:function(){var t,i;this._j4.clear();for(var e=0,n=this._fr.length;e<n;e++)(t=this._fr[e])._hy&&((i=t._fu).width<=0||i.height<=0||this._j4.addRect(t.$x+i.x,t.$y+i.y,i.width,i.height))},_j3:null,_m0s:function(t){return this._j3?t.showOnTop?this._j3.add(t):this._j3.remove(t):t.showOnTop?(this._j3=new ht,this._j3.add(t)):void 0},draw:function(t,i,e,n){for(var r,s=0,o=this._fr.length;s<o;s++)(r=this._fr[s])._hy&&!r.showOnTop&&r._jc(t,i,e,this)},_99:function(t,i){if(!this._hy||!this._j3||!this._j3.length)return!1;var e;t.save(),t.translate(this.$x,this.$y),this.$rotatable&&this.$_hostRotate&&t.rotate(this.$_hostRotate),(this.offsetX||this.offsetY)&&t.translate(this.offsetX,this.offsetY),this.$rotate&&t.rotate(this.$rotate),this.$layoutByAnchorPoint&&this._m0v&&t.translate(-this._m0v.x,-this._m0v.y),this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur*i,t.shadowOffsetX=this.shadowOffsetX*i,t.shadowOffsetY=this.shadowOffsetY*i),t.beginPath();for(var n=0,r=this._fr.length;n<r;n++)(e=this._fr[n])._hy&&e.showOnTop&&e._jc(t,i,this.selected,this);t.restore()},doHitTest:function(t,i,e){if(e){if(!this._j4.intersectsRect(t-e,i-e,2*e,2*e))return!1}else if(!this._j4.intersectsPoint(t,i))return!1;return this.hitTestChildren(t,i,e)},hitTestChildren:function(t,i,e){for(var n,r=this._fr.length-1;0<=r;r--)if((n=this._fr[r])._hy&&n.hitTest(t,i,e))return n;return!1},destroy:function(){this._i1ed=!0;for(var t=this._fr.length-1;0<=t;t--)this._fr[t].destroy()}},t(wr,lr),it(wr.prototype,{renderColorBlendMode:{get:function(){return this.$renderColorBlendMode},set:function(t){this.$renderColorBlendMode=t,this._1e=!0,this.body&&(this.body.renderColorBlendMode=this.$renderColorBlendMode)}},renderColor:{get:function(){return this.$renderColor},set:function(t){this.$renderColor=t,this._1e=!0,this.body&&(this.body.renderColor=this.$renderColor)}},bodyBounds:{get:function(){if(this.$invalidateBounds){this.$invalidateBounds=!1;var t,i=this.body;t=i&&i._hy&&!this._$o()?i._fu.clone():this._83.clone(),this.rotate&&(t.original=t.clone(),t.rotate=this.rotate,t.tx=this.x,t.ty=this.y,Ri(t,this.rotate,t)),t.x+=this.$x,t.y+=this.$y,this._m3d=t}return this._m3d}},bounds:{get:function(){return new pt((this.$x||0)+this.uiBounds.x,(this.$y||0)+this.uiBounds.y,this.uiBounds.width,this.uiBounds.height)}},body:{get:function(){return this._m1ody},set:function(t){t&&this._m1ody!=t&&(this._m1ody=t,this.bodyChanged=!0,this.invalidateSize())}}}),ot.UI_BOUNDS_GROW=1;var Lr=function(t){c(this,Lr,arguments)};Lr.prototype={strokeStyle:"#000",lineWidth:0,fillColor:null,fillGradient:null,_j6:1,_j8:1,outline:0,onDataChanged:function(t,i){v(this,Lr,"onDataChanged",arguments),this._k6&&this._7w&&this._k6._6h(this._7w,this),t&&this._m38(t)},_m38:function(t){this._k6=Ae(t),this._k6.validate(),this._k6._kv!=Ee&&!this._k6._6f()||(this._7w||(this._7w=function(t){this.invalidateData(),this._ja&&this._ja.graph&&(this._ja.invalidateSize(),this._ja.graph.invalidate())}),this._k6._m0i(this._7w,this))},_k6:null,initialize:function(){this._m38(this.$data)},_5f:function(){return this._k6&&this._k6.draw},_9u:function(t){if(!t||t.width<=0||t.height<=0||!this.$size||!(this.size instanceof Object))return this._j6=1,void(this._j8=1);var i=this.size.width,e=this.size.height;if(null==i&&(i=-1),null==e&&(e=-1),i<0&&e<0)return this._j6=1,void(this._j8=1);var n,r,s=t.width,o=t.height;0<=i&&(n=i/s),0<=e&&(r=e/o),i<0?n=r:e<0&&(r=n),this._j6=n,this._j8=r},validateSize:function(){if(this.$invalidateScale){this.$invalidateScale=!1;var t=this._originalBounds;this._j6,this._j8,this._9u(t),this.setMeasuredBounds(t.width*this._j6,t.height*this._j8,t.x*this._j6,t.y*this._j8)}},measure:function(){var t=this._k6.getBounds(this.lineWidth+this.outline);if(t)return this.$invalidateScale=!0,void(this._originalBounds=t.clone());this._j4.set(0,0,0,0)},onBoundsChanged:function(){this.$invalidateFillGradient=!0},_1n:function(){this.$invalidateFillGradient=!1,this.fillGradient?this._fillGradient=Le.prototype.generatorGradient.call(this.$fillGradient,this._83):this._fillGradient=null},_jz:function(t){var i,e;if("flip"==this.$adjustType)e=-(i=1);else{if("mirror"!=this.$adjustType)return;i=-1,e=1}var n=this._j4.cx,r=this._j4.cy;t.translate(n,r),t.scale(i,e),t.translate(-n,-r)},draw:function(t,i,e,n){if(this._j6&&this._j8){if(this.$invalidateFillGradient&&this._1n(),t.save(),this.$adjustType&&this._jz(t),this._k6._kv==ve)return t.scale(this._j6,this._j8),this._k6._kt.draw(t,i,this,e,n||this),void t.restore();e&&this._85(t,i,n),this._k6.draw(t,i,this,this._j6,this._j8),t.restore()}},doHitTest:function(t,i,e){if(this._k6.hitTest){"flip"==this.$adjustType?i=2*this._j4.cy-i:"mirror"==this.$adjustType&&(t=2*this._j4.cx-t),t/=this._j6,i/=this._j8;var n=(this._j6+this._j8)/2;return 1<n&&(e/=n,e|=0),this._k6._kt instanceof Ye?this._k6._kt.hitTest(t,i,e,!0,this.$lineWidth,this.$fillColor||this.$fillGradient):this._k6.hitTest(t,i,e)}return!0},$invalidateScale:!0,$invalidateFillGradient:!0},t(Lr,lr),ur(Lr.prototype,{adjustType:{},fillColor:{},size:{validateFlags:["Size","Scale"]},fillGradient:{validateFlags:["FillGradient"]}}),it(Lr.prototype,{originalBounds:{get:function(){return this._originalBounds}}}),ot.ALIGN_POSITION=yt.CENTER_MIDDLE;var Sr=function(t){c(this,Sr,arguments),this.color=ot.LABEL_COLOR};Sr.prototype={color:ot.LABEL_COLOR,showPointer:!0,fontSize:null,fontFamily:null,fontStyle:null,_h2:null,alignPosition:null,measure:function(){this.$data=""+this.$data,this.font;var t=function t(i,e,n,r,s,o){if(!i)return{width:0,height:0};if(e=e||ot.FONT_SIZE,Fi&&e<$i){var h=e/$i,a=t(i,$i,n,r,s);return a.width*=h,a.height*=h,a}var l=Gi();l.font=o||ji(n,e,r);for(var _=e*(s=s||ot.LINE_HEIGHT),u=0,c=0,f=i.split("\n"),d=0,E=f.length;d<E;d++){var g=f[d];u=Math.max(l.measureText(g).width,u),c+=_}return{width:u,height:c}}(this.$data,this.$fontSize,this.$fontFamily,this.$fontStyle,ot.LINE_HEIGHT,this.$font);if(this._h2=t,this.$size){var i=this.$size.width||0,e=this.$size.height||0;return this.setMeasuredBounds(i>t.width?i:t.width,e>t.height?e:t.height)}return this.setMeasuredBounds(t.width,t.height)},doHitTest:function(t,i,e){return!!this.$data&&Ke(t,i,e,this)},draw:function(t,i,e,n){if(e&&this._85(t,i,n),this.$fontSize||ot.FONT_SIZE,this.$rotatable&&this.$_hostRotate){var r=he(this.$_hostRotate);at<r&&r<3*at&&(t.translate(this._j4.width/2,this._j4.height/2),t.rotate(Math.PI),t.translate(-this._j4.width/2,-this._j4.height/2))}var s=this.alignPosition||ot.ALIGN_POSITION,o=s.horizontalPosition,h=s.verticalPosition,a=0;"c"==o?(o="center",a+=this._j4.width/2):o==Ot?(o="right",a+=this._j4.width):o="left";var l=0;"m"==h?l=(this._j4.height-this._h2.height)/2:h==wt&&(l=this._j4.height-this._h2.height),t.fillStyle=this.color,function(t,i,e,n,r,s,o,h,a,l){if(t.save(),t.translate(e,n),Fi&&o<$i){var _=o/$i;t.scale(_,_),o=$i,l=null}a=a||ot.LINE_HEIGHT,a*=o=o||ot.FONT_SIZE,t.font=l||ji(s,o,h),t.textAlign=r,t.textBaseline="middle";for(var u=a/2,c=i.split("\n"),f=0,d=c.length;f<d;f++){var E=c[f];t.fillText(E,0,u),u+=a}t.restore()}(t,this.$data,a,l,o,this.$fontFamily,this.$fontSize,this.$fontStyle,ot.LINE_HEIGHT,this.$font)},_5f:function(){return null!=this.$data||this.$size},$invalidateFont:!0},t(Sr,lr),ur(Sr.prototype,{size:{validateFlags:["Data"]},fontStyle:{validateFlags:["Data","Font"]},fontSize:{validateFlags:["Data","Font"]},fontFamily:{validateFlags:["Data","Font"]}}),it(Sr.prototype,{font:{get:function(){return this.$invalidateFont&&(this.$invalidateFont=!1,this.$font=(this.$fontStyle||ot.FONT_STYLE)+" "+(this.$fontSize||ot.FONT_SIZE)+"px "+(this.$fontFamily||ot.FONT_FAMILY)),this.$font}}});var Ir=function(t){t=t||new Ye,this.pathBounds=new pt,c(this,Ir,[t])};function xr(t,i){c(this,xr,arguments)}function Dr(t,i){c(this,Dr,arguments)}Ir.prototype={layoutByPath:!0,layoutByAnchorPoint:!1,measure:function(){this.$invalidateFromArrow=!0,this.$invalidateToArrow=!0,this.$data.getBounds(this.$lineWidth+this.$outline,this.pathBounds),this.setMeasuredBounds(this.pathBounds)},validateSize:function(){if(this.$invalidateFromArrow||this.$invalidateToArrow){var t,i=this.pathBounds.clone();this.$invalidateFromArrow&&(this.$invalidateFromArrow=!1,(t=this.validateFromArrow())&&i.add(t)),this.$invalidateToArrow&&(this.$invalidateToArrow=!1,(t=this.validateToArrow())&&i.add(t)),this.setMeasuredBounds(i)}},validateFromArrow:function(){if(this.$data._jl&&this.$fromArrow){var t=this.$data,i=0,e=0,n=this.$fromArrowOffset;n&&(isNaN(n)&&(n.x||n.y)?(i+=n.x||0,e+=n.y||0):i+=n||0,0<i&&i<1&&(i*=t._jl)),this.fromArrowLocation=t.getLocation(i,e),this.fromArrowLocation.rotate=Math.PI+this.fromArrowLocation.rotate||0,this.$fromArrowShape=Br(this.$fromArrow,this.$fromArrowSize);var r=this.$fromArrowShape.getBounds(this.fromArrowStyles.lineWidth+this.fromArrowStyles.outline);return this.fromArrowFillGradient instanceof Si.Gradient?this.fromArrowStyles._fillGradient=Le.prototype.generatorGradient.call(this.fromArrowFillGradient,r):this.fromArrowStyles&&(this.fromArrowStyles._fillGradient=null),r.offset(this.fromArrowLocation.x,this.fromArrowLocation.y),Pi(r,this.fromArrowLocation.rotate,r,this.fromArrowLocation.x,this.fromArrowLocation.y),r}this.$fromArrowShape=null},validateToArrow:function(){if(this.$data._jl&&this.$toArrow){var t=this.$data,i=0,e=0,n=this.$toArrowOffset;n&&(isNaN(n)&&(n.x||n.y)?(i+=n.x||0,e+=n.y||0):i+=n||0),i<0&&-1<i&&(i*=t._jl),i+=t._jl,this.toArrowLocation=t.getLocation(i,e),this.$toArrowShape=Br(this.$toArrow,this.$toArrowSize);var r=this.$toArrowShape.getBounds(this.toArrowStyles.lineWidth+this.toArrowStyles.outline);return this.toArrowFillGradient instanceof Si.Gradient?this.toArrowStyles._fillGradient=Le.prototype.generatorGradient.call(this.toArrowFillGradient,r):this.toArrowStyles&&(this.toArrowStyles._fillGradient=null),r.offset(this.toArrowLocation.x,this.toArrowLocation.y),Pi(r,this.toArrowLocation.rotate,r,this.toArrowLocation.x,this.toArrowLocation.y),r}this.$toArrowShape=null},_29:function(t){var i=t?"from":"to",e=this[i+"ArrowStroke"];void 0===e&&(e=this.$lineWidth);var n=this[i+"ArrowStrokeStyle"];void 0===n&&(n=this.strokeStyle);var r=this[i+"ArrowStyles"];r||(this[i+"ArrowStyles"]=r={}),r.lineWidth=e,r.strokeStyle=n,r.lineDash=this[i+"ArrowLineDash"],r.lineDashOffset=this[i+"ArrowLineDashOffset"],r.fillColor=this[i+"ArrowFillColor"],r.fillGradient=this[i+"ArrowFillGradient"],r.lineCap=this[i+"ArrowLineCap"],r.lineJoin=this[i+"ArrowLineJoin"],r.outline=this[i+"ArrowOutline"]||0,r.outlineStyle=this[i+"ArrowOutlineStyle"]},doValidate:function(){return this.$fromArrow&&this._29(!0),this.$toArrow&&this._29(!1),v(this,Ir,"doValidate")},drawArrow:function(t,i,e,n){if(this.$fromArrow&&this.$fromArrowShape){t.save();var r=(h=this.fromArrowLocation).x,s=h.y,o=h.rotate;t.translate(r,s),o&&t.rotate(o),this.$fromArrowShape.draw(t,i,this.fromArrowStyles,e,n),t.restore()}var h;this.$toArrow&&this.$toArrowShape&&(t.save(),r=(h=this.toArrowLocation).x,s=h.y,o=h.rotate,t.translate(r,s),o&&t.rotate(o),this.$toArrowShape.draw(t,i,this.toArrowStyles,e,n),t.restore())},outlineStyle:null,outline:0,onBoundsChanged:function(){this.$invalidateFillGradient=!0},_1n:function(){this.$invalidateFillGradient=!1,this.$fillGradient?this._fillGradient=Le.prototype.generatorGradient.call(this.$fillGradient,this._83):this._fillGradient=null},draw:function(t,i,e,n){this.$invalidateFillGradient&&this._1n(),this.$data.draw(t,i,this,e,n),this.drawArrow(t,i,e,n)},doHitTest:function(t,i,e){if(this.$data.hitTest(t,i,e,!0,this.$lineWidth+this.$outline,this.$fillColor||this.$fillGradient))return!0;if(this.$toArrow&&this.$toArrowShape){var n=t-this.toArrowLocation.x,r=i-this.toArrowLocation.y;this.toArrowLocation.rotate&&(n=(o=xi(n,r,-this.toArrowLocation.rotate)).x,r=o.y);var s=this.toArrowStyles.fillColor||this.toArrowStyles.fillGradient;if(this.$toArrowShape.hitTest(n,r,e,!0,this.toArrowStyles.lineWidth,s))return!0}var o;if(this.$fromArrow&&this.$fromArrowShape&&(n=t-this.fromArrowLocation.x,r=i-this.fromArrowLocation.y,this.fromArrowLocation.rotate&&(n=(o=xi(n,r,-this.fromArrowLocation.rotate)).x,r=o.y),s=this.fromArrowStyles.fillColor||this.fromArrowStyles.fillGradient,this.$fromArrowShape.hitTest(n,r,e,!0,this.fromArrowStyles.lineWidth,s)))return!0;return!1},$fromArrowOutline:0,$toArrowOutline:0,$invalidateFillGradient:!0,$invalidateFromArrow:!0,$invalidateToArrow:!0},t(Ir,lr),ur(Ir.prototype,{strokeStyle:{validateFlags:["FromArrow","ToArrow"]},fillColor:{},fillGradient:{validateFlags:["FillGradient"]},fromArrowOffset:{validateFlags:["FromArrow","Size"]},fromArrowSize:{validateFlags:["FromArrow","Size"]},fromArrow:{validateFlags:["FromArrow","Size"]},fromArrowOutline:{validateFlags:["FromArrow","Size"]},fromArrowStroke:{validateFlags:["FromArrow","Size"]},fromArrowStrokeStyle:{validateFlags:["FromArrow"]},toArrowOffset:{validateFlags:["ToArrow","Size"]},toArrowSize:{validateFlags:["ToArrow","Size"]},toArrow:{validateFlags:["ToArrow","Size"]},toArrowOutline:{validateFlags:["ToArrow","Size"]},toArrowStroke:{validateFlags:["ToArrow","Size"]},toArrowStrokeStyle:{validateFlags:["ToArrow"]},outline:{value:0,validateFlags:["Data"]}}),it(Ir.prototype,{length:{get:function(){return this.data.length}}}),xr.prototype={shape:null,path:null,initialize:function(){v(this,xr,"initialize"),this.path=new Ye,this.path._e4=!1,this.shape=new Ir(this.path),this.addChild(this.shape,0),this._m1ody=this.shape,yr.initBindingProperties(this)},_1c:!0,_5d:null,_$o:function(){return!1},_3x:function(){return!1},validatePoints:function(){this.shape.invalidateData();var t=this.$data,i=this.path;i.clear();var e=t.fromAgent,n=t.toAgent;e&&n&&function(t,i,e,n,r){var s=n==r,o=t.graph.getUI(n),h=s?o:t.graph.getUI(r);if(o&&h){var a=i.edgeType,l=t.getEndPointBounds(o),_=s?l:t.getEndPointBounds(h),u=i.hasPathSegments();if(s&&!u)return t.drawLoopedEdge(t.path,o,a,l);var c=function(t,i,e){var n=i.getPortPoint(t.getStyle(dr.EDGE_FROM_PORT),e),r=t.getStyle(dr.EDGE_FROM_OFFSET);return r&&(n.x+=r.x||0,n.y+=r.y||0),n}(t,o,l),f=function(t,i,e){var n=i.getPortPoint(t.getStyle(dr.EDGE_TO_PORT),e),r=t.getStyle(dr.EDGE_TO_OFFSET);return r&&(n.x+=r.x||0,n.y+=r.y||0),n}(t,h,_);if(!s&&!a&&!u){var d=n.busLayout;if(d!=r.busLayout){var E,g,v,p;p=d?(E=o,g=l,v=h,_):(E=h,g=_,v=o,l);var m=function(t,i,e,n,r,s){var o=r.cx,h=r.cy,a=Math.cos(s),l=Math.sin(s),_=zr(i,t,{x:o,y:h},-a,-l);if(!_){var u=o<t.x,c=o>t.right,f=h<t.y,d=h>t.bottom,E=t.cx,g=t.cy,v=u||c,p=f||d;s=Math.atan2(h-g,o-E),v||p||(s+=Math.PI),_=zr(i,t,{x:o,y:h},-(a=Math.cos(s)),-(l=Math.sin(s)))||{x:E,y:g}}var m=zr(n,r,{x:_.x,y:_.y},-_.perX||a,-_.perY||l,!1)||{x:o,y:h};return e?[_,m]:[m,_]}(g,E,d,v,p,i.angle);if(m&&2==m.length){var y=m[0],T=m[1];return e.moveTo(y.x,y.y),T.x==y.x&&T.y==y.y&&(T.y+=.01),e.lineTo(T.x,T.y),e._6e=!0}}}t._36(i,e,o,h,a,l,_,c,f),(!s&&!1!==e._g6._linkTerminalPoint||u)&&function(t,i,e,n,r,s,o,h){var a=t.fromAtEdge,l=t.toAtEdge;if(a||l){var _=i._g6;if(_.length){if(a&&jr(e,r,_[0].firstPoint,o,void 0,void 0),l){var u,c=_[_.length-1],f=c.lastPoint,d=c.points.length,E=c.invalidTerminal||void 0===f.x||void 0===f.y;4<=d&&(E||s.contains(f.x,f.y))&&(E||(h=f),u=!0,f={x:c.points[d-4],y:c.points[d-3]},s.contains(f.x,f.y)&&(h=f,6<=d?(f={x:c.points[d-6],y:c.points[d-5]},c.points=c.points.slice(0,4),c.type=Be):1==_.length?(f={x:o.x,y:o.y},c.points=c.points.slice(0,2),c.type=Me):f=(c=_[_.length-2]).lastPoint)),jr(n,s,f,h,void 0,void 0),u&&(d=c.points.length,c.points[d-2]=h.x,c.points[d-1]=h.y,h=null)}}else{var g=Math.atan2(h.y-o.y,h.x-o.x),v=Math.cos(g),p=Math.sin(g);a&&jr(e,r,h,o,v,p),l&&jr(n,s,o,h,-v,-p)}$r(i._g6,o,h)}else $r(i._g6,o,h)}(t,e,o,h,l,_,c,f),delete e._g6._linkTerminalPoint,e._6e=!0}}(this,t,i,e,n)},getEndPointBounds:function(t){return t.getLinkableBounds()},_36:function(t,i,e,n,r,s,o,h,a){t.hasPathSegments()?i.segments=t.pathSegments.toDatas():e!=n?this.drawEdge(i,e,n,r,s,o,h,a):this.drawLoopedEdge(i,e,r,s,h,a)},drawLoopedEdge:function(t,i,e,n,r,s){!function(t,i,e){var n=t.getStyle(dr.EDGE_LOOPED_EXTAND),r=t._1x(),s=n+.2*r,o=i.x+i.width-s,h=i.y,a=i.x+i.width,l=i.y+s;n+=r;var _={x:o,y:h},u={x:i.x+i.width+.707*n,y:i.y+-.707*n},c={x:a,y:l},f=_.x,d=u.x,E=c.x,g=_.y,v=u.y,p=c.y,m=((p-g)*(v*v-g*g+d*d-f*f)+(v-g)*(g*g-p*p+f*f-E*E))/(2*(d-f)*(p-g)-2*(E-f)*(v-g)),y=((E-f)*(d*d-f*f+v*v-g*g)+(d-f)*(f*f-E*E+g*g-p*p))/(2*(v-g)*(E-f)-2*(p-g)*(d-f)),T=(s=Math.sqrt((f-m)*(f-m)+(g-y)*(g-y)),Math.atan2(_.y-y,_.x-m)),O=Math.atan2(c.y-y,c.x-m)-T;O<0&&(O+=2*Math.PI),function(t,i,e,n,r,s,o){var h,a,l,_,u,c,f,d,E,g;if(Math.abs(n)>2*Math.PI&&(n=2*Math.PI),h=n/(_=Math.ceil(Math.abs(n)/(Math.PI/4))),a=e,0<_){u=t+Math.cos(a)*r,c=i+Math.sin(a)*s,moveTo?o.moveTo(u,c):o.lineTo(u,c);for(var v=0;v<_;v++)l=(a+=h)-h/2,f=t+Math.cos(a)*r,d=i+Math.sin(a)*s,E=t+Math.cos(l)*(r/Math.cos(h/2)),g=i+Math.sin(l)*(s/Math.cos(h/2)),o.quadTo(E,g,f,d)}}(m,y,T,O,s,s,e)}(this,n,t)},drawEdge:function(t,i,e,n,r,s,o,h){if(n==Ii.EDGE_TYPE_ZIGZAG){var a=(o.x+h.x)/2,l=(o.y+h.y)/2,_=o.x-h.x,u=o.y-h.y,c=Math.sqrt(_*_+u*u),f=Math.atan2(u,_);f+=Math.PI/6,30<(c*=.04)&&(c=30);var d=Math.cos(f)*c,E=Math.sin(f)*c;return t.lineTo(a-E,l+d),void t.lineTo(a+E,l-d)}var g=function(t,i,e,n,r,s){if(i.hasPathSegments())return i._9f;var o=i.edgeType;if(Mr(o)){var h=function(t,i,e,n,r,s){var o=function(t,i,e){if(null!=t){if(t==Ii.EDGE_TYPE_ELBOW_HORIZONTAL||t==Ii.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||t==Ii.EDGE_TYPE_HORIZONTAL_VERTICAL||t==Ii.EDGE_TYPE_EXTEND_LEFT||t==Ii.EDGE_TYPE_EXTEND_RIGHT)return!0;if(t==Ii.EDGE_TYPE_ELBOW_VERTICAL||t==Ii.EDGE_TYPE_ORTHOGONAL_VERTICAL||t==Ii.EDGE_TYPE_VERTICAL_HORIZONTAL||t==Ii.EDGE_TYPE_EXTEND_TOP||t==Ii.EDGE_TYPE_EXTEND_BOTTOM)return!1}var n=function(t,i){return Math.max(t.x+(t.width||0),i.x+(i.width||0))-Math.min(t.x,i.x)-(t.width||0)-(i.width||0)}(i,e);return function(t,i){return Math.max(t.y+(t.height||0),i.y+(i.height||0))-Math.min(t.y,i.y)-(t.height||0)-(i.height||0)}(i,e)<=n}(t,i,e),h=[];return function(t){return t&&(t==Ii.EDGE_TYPE_ELBOW||t==Ii.EDGE_TYPE_ELBOW_HORIZONTAL||t==Ii.EDGE_TYPE_ELBOW_VERTICAL)}(t)?function(t,i,e,n,r,s,o){t?function(t,i,e,n,r,s){var o=i.x+i.width<t.x,h=t.x+t.width<i.x,a=o?t.x:t.x+t.width,l=r.y,_=h?i.x:i.x+i.width,u=s.y,c=n,f=o?-c:c,d=new lt(a+f,l),E=new lt(_+(f=h?-c:c),u);if(o==h){var g=o?Math.min(a,_)-n:Math.max(a,_)+n;e.push(new lt(g,l)),e.push(new lt(g,u))}else if(d.x<E.x==o){var v=l+(u-l)/2;e.push(d),e.push(new lt(d.x,v)),e.push(new lt(E.x,v)),e.push(E)}else e.push(d),e.push(E)}(i,e,n,r,s,o):function(t,i,e,n,r,s){var o=i.y+i.height<t.y,h=t.y+t.height<i.y,a=r.x,l=o?t.y:t.y+t.height,_=s.x,u=h?i.y:i.y+i.height,c=n,f=o?-c:c,d=new lt(a,l+f),E=new lt(_,u+(f=h?-c:c));if(o==h){var g=o?Math.min(l,u)-n:Math.max(l,u)+n;e.push(new lt(a,g)),e.push(new lt(_,g))}else if(d.y<E.y==o){var v=a+(_-a)/2;e.push(d),e.push(new lt(v,d.y)),e.push(new lt(v,E.y)),e.push(E)}else e.push(d),e.push(E)}(i,e,n,r,s,o)}(o,i,e,h,n.getStyle(dr.EDGE_EXTEND),r,s):function(t,i,e,n,r,s,o,h){var a=s.getStyle(dr.EDGE_CONTROL_POINT),l=null==a;if(null!=a){var _=(new pt).union(i).union(e);_.intersects(a)||(r=function(t,i,e,n,r,s){return!(i<e&&n-t<e-i&&t-s<e-i||r<i&&n-t<i-r&&t-s<i-r)}(a.x,a.y,_.y,_.x,_.bottom,_.right))}else a=function(t,i,e,n,r,s,o){if(t==Ii.EDGE_TYPE_HORIZONTAL_VERTICAL)return{x:o.x,y:s.y};if(t==Ii.EDGE_TYPE_VERTICAL_HORIZONTAL)return{x:s.x,y:o.y};var h;if(function(t){return null!=t&&(t==Ii.EDGE_TYPE_EXTEND_TOP||t==Ii.EDGE_TYPE_EXTEND_LEFT||t==Ii.EDGE_TYPE_EXTEND_BOTTOM||t==Ii.EDGE_TYPE_EXTEND_RIGHT)}(t)){var a=Math.min(e.y,n.y),l=Math.min(e.x,n.x),_=Math.max(e.bottom,n.bottom),u=Math.max(e.right,n.right);if(h=r.getStyle(dr.EDGE_EXTEND),t==Ii.EDGE_TYPE_EXTEND_TOP)return new lt((l+u)/2,a-h);if(t==Ii.EDGE_TYPE_EXTEND_LEFT)return new lt(l-h,(a+_)/2);if(t==Ii.EDGE_TYPE_EXTEND_BOTTOM)return new lt((l+u)/2,_+h);if(t==Ii.EDGE_TYPE_EXTEND_RIGHT)return new lt(u+h,(a+_)/2)}if((h=function(t){return t.getStyle(dr.EDGE_SPLIT_BY_PERCENT)}(r)?function(t,i,e,n){return function(t,i,e,n){return i?Pr(t,e.x,e.right,n.x,n.right):Pr(t,e.y,e.bottom,n.y,n.bottom)}(n,t,i,e)*n}(i,e,n,r.getStyle(dr.EDGE_SPLIT_PERCENT)):r.getStyle(dr.EDGE_SPLIT_VALUE))==Number.NEGATIVE_INFINITY||h==Number.POSITIVE_INFINITY)return new lt(n.x+n.width/2,n.y+n.height/2);if(0==h)return new lt(e.x+e.width/2,e.y+e.height/2);if(i){var c=e.x+e.right<n.x+n.right;return new lt(Nr(c,h,e.x,e.width),e.y+e.height/2)}var f=e.y+e.bottom<n.y+n.bottom;return new lt(e.x+e.width/2,Nr(f,h,e.y,e.height))}(t,r,i,e,s,o,h);r?function(t,i,e,n,r,s,o){var h=Math.max(t.x,i.x),a=Math.min(t.x+t.width,i.x+i.width),l=null!=e?e.x:a+(h-a)/2,_=s?s.y:t.y+t.height/2,u=o?o.y:i.y+i.height/2;if(0==r&&null!=e&&(e.y>=t.y&&e.y<=t.y+t.height&&(_=e.y),e.y>=i.y&&e.y<=i.y+i.height&&(u=e.y)),kr(i,l,_)||kr(t,l,_)||n.push(new lt(l,_)),kr(i,l,u)||kr(t,l,u)||n.push(new lt(l,u)),0==n.length)if(null!=e)kr(i,l,e.y)||kr(t,l,e.y)||n.push(new lt(l,e.y));else{var c=Math.max(t.y,i.y),f=Math.min(t.y+t.height,i.y+i.height);n.push(new lt(l,c+(f-c)/2))}}(i,e,a,n,l,o,h):function(t,i,e,n,r,s,o){var h=Math.max(t.y,i.y),a=Math.min(t.y+t.height,i.y+i.height),l=null!=e?e.y:a+(h-a)/2,_=s?s.x:t.x+t.width/2,u=o?o.x:i.x+i.width/2;if(0==r&&null!=e&&(e.x>=t.x&&e.x<=t.x+t.width&&(_=e.x),e.x>=i.x&&e.x<=i.x+i.width&&(u=e.x)),kr(i,_,l)||kr(t,_,l)||n.push(new lt(_,l)),kr(i,u,l)||kr(t,u,l)||n.push(new lt(u,l)),0==n.length)if(null!=e)kr(i,e.x,l)||kr(t,e.x,l)||n.push(new lt(e.x,l));else{var c=Math.max(t.x,i.x),f=Math.min(t.x+t.width,i.x+i.width);n.push(new lt(c+(f-c)/2,l))}}(i,e,a,n,l,o,h)}(t,i,e,h,o,n,r,s),h}(o,e,n,t,r,s);if(!h||!h.length)return null;T(h,r,0),h.push(s),o!=Ii.EDGE_TYPE_ELBOW&&function(t,i){var e=t.length;if(!(e<3)){var n=i.getStyle(dr.EDGE_CORNER);if(n!=Ii.EDGE_CORNER_NONE){var r,s,o=i.getStyle(dr.EDGE_CORNER_RADIUS),h=0,a=0;o&&(U(o)?h=a=o:(h=o.x||0,a=o.y||0));for(var l,_,u=t[0],c=t[1],f=2;f<e;f++){var d=t[f],E=c.x-u.x,g=c.y-u.y,v=d.x-c.x,p=d.y-c.y,m=!g||-re<g&&g<re;((!E||-re<E&&E<re)&&(!p||-re<p&&p<re)||m&&(!v||-re<v&&v<re))&&(_=m?(r=Math.min(2==f?Math.abs(E):Math.abs(E)/2,h),s=Math.min(f==e-1?Math.abs(p):Math.abs(p)/2,a),l=new lt(c.x-(0<E?r:-r),c.y),new lt(c.x,c.y+(0<p?s:-s))):(r=Math.min(f==e-1?Math.abs(v):Math.abs(v)/2,h),s=Math.min(2==f?Math.abs(g):Math.abs(g)/2,a),l=new lt(c.x,c.y-(0<g?s:-s)),new lt(c.x+(0<v?r:-r),c.y)),O(t,c),f--,e--,l.x==u.x&&l.y==u.y||(T(t,l,f),f++,e++),n==Ii.EDGE_CORNER_BEVEL?(T(t,_,f),f++,e++):n==Ii.EDGE_CORNER_ROUND&&(T(t,[c,_],f),f++,e++)),u=c,c=d}}}}(h,t);for(var a=[],l=h.length,_=1;_<l-1;_++){var u=h[_];W(u)?a.push(new je(Be,[u[0].x,u[0].y,u[1].x,u[1].y])):a.push(new je(Me,[u.x,u.y]))}return a}if(i.$bundleEnabled){var c=t._1x();if(!c)return;return function(t,i,e,n,r,s){i=ft(n,i.x,i.y,e.x,e.y),e=ft(r,e.x,e.y,i.x,i.y);var o=Math.PI/2+Math.atan2(e.y-i.y,e.x-i.x),h=t*Math.cos(o),a=t*Math.sin(o);i.x+=h,i.y+=a,e.x+=h,e.y+=a;var l=e.x-i.x,_=e.y-i.y;if(s!=Ii.EDGE_BUNDLE_TYPE_PARALLEL)return s!=Ii.EDGE_BUNDLE_TYPE_ELBOW?[new je(Ge,[i.x+.25*l,i.y+.25*_,i.x+.75*l,i.y+.75*_,void 0,void 0])]:(10<Math.sqrt(l*l+_*_)&&(o=Math.atan2(e.y-i.y,e.x-i.x),l=5*Math.cos(o),_=5*Math.sin(o),i.x+=l,i.y+=_,e.x-=l,e.y-=_),[new je(Me,[i.x,i.y]),new je(Me,[e.x,e.y])]);var u=[new je(ke,[i.x,i.y]),new je(Me,[e.x,e.y])];return u._linkTerminalPoint=!1,u}(c,r,s,e,n,t.getStyle(dr.EDGE_BUNDLE_TYPE))}}(this,this.data,r,s,o,h);g&&(t._g6=g)},_1x:function(){if(!this.data.isBundleEnabled())return null;var t=this.data.getEdgeBundle(!0);if(!t||!t.canBind(this.graph)||!t._h9)return null;var i=t.getYOffset(this);return t.isPositiveOrder(this.$data)||(i=-i),i},checkBundleLabel:function(){var t=this.getBundleLabel();t?(this.bundleLabel||this.createBundleLabel(),this.bundleLabel._hy=!0,this.bundleLabel.data=t):this.bundleLabel&&(this.bundleLabel._hy=!1,this.bundleLabel.data=null)},createBundleLabel:function(){var t=new Sr;t.editable=!1,this.bundleLabel=t,this.addChild(this.bundleLabel),Tr.initBindingProperties(this)},getBundleLabel:function(){return this.graph.getBundleLabel(this.data)},doValidate:function(){return this._1c&&(this._1c=!1,this.validatePoints()),this.checkBundleLabel(),v(this,xr,"doValidate")},_3y:function(){this._1c=!0,this.invalidateSize()},_$t:function(t,i,e){var n=this._m36.onBindingPropertyChange(this,t,i,e);return n=Er.onBindingPropertyChange(this,t,i,e)||n,this.bundleLabel&&this.bundleLabel.$data&&(n=Tr.onBindingPropertyChange(this,t,i,e)||n),yr.onBindingPropertyChange(this,t,i,e)||n}},t(xr,wr),xr.drawReferenceLine=function(t,i,e,n){if(t.moveTo(i.x,i.y),n&&n!=Ii.EDGE_TYPE_DEFAULT){if(n==Ii.EDGE_TYPE_VERTICAL_HORIZONTAL)t.lineTo(i.x,e.y);else if(n==Ii.EDGE_TYPE_HORIZONTAL_VERTICAL)t.lineTo(e.x,i.y);else if(0==n.indexOf(Ii.EDGE_TYPE_ORTHOGONAL)){o=n==Ii.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||n!=Ii.EDGE_TYPE_ORTHOGONAL_VERTICAL&&Math.abs(i.x-e.x)>Math.abs(i.y-e.y);var r=(i.x+e.x)/2,s=(i.y+e.y)/2;o?(t.lineTo(r,i.y),t.lineTo(r,e.y)):(t.lineTo(i.x,s),t.lineTo(e.x,s))}else if(0==n.indexOf(Ii.EDGE_TYPE_ELBOW)){var o,h=Cr[dr.EDGE_EXTEND]||0;(o=n==Ii.EDGE_TYPE_ELBOW_HORIZONTAL||n!=Ii.EDGE_TYPE_ELBOW_VERTICAL&&Math.abs(i.x-e.x)>Math.abs(i.y-e.y))?(t.lineTo(i.x+h,i.y),t.lineTo(e.x-h,e.y)):(t.lineTo(i.x,i.y+h),t.lineTo(e.x,e.y-h))}else if(0==n.indexOf("extend."))if(h=Cr[dr.EDGE_EXTEND]||0,n==Ii.EDGE_TYPE_EXTEND_TOP){var a=Math.min(i.y,e.y)-h;t.lineTo(i.x,a),t.lineTo(e.x,a)}else if(n==Ii.EDGE_TYPE_EXTEND_BOTTOM)a=Math.max(i.y,e.y)+h,t.lineTo(i.x,a),t.lineTo(e.x,a);else if(n==Ii.EDGE_TYPE_EXTEND_LEFT){var l=Math.min(i.x,e.x)-h;t.lineTo(l,i.y),t.lineTo(l,e.y)}else n==Ii.EDGE_TYPE_EXTEND_RIGHT&&(l=Math.max(i.x,e.x)+h,t.lineTo(l,i.y),t.lineTo(l,e.y));else if(n==Ii.EDGE_TYPE_ZIGZAG){r=(i.x+e.x)/2,s=(i.y+e.y)/2;var _=i.x-e.x,u=i.y-e.y,c=Math.sqrt(_*_+u*u),f=Math.atan2(u,_);f+=Math.PI/6,30<(c*=.04)&&(c=30);var d=Math.cos(f)*c,E=Math.sin(f)*c;t.lineTo(r-E,s+d),t.lineTo(r+E,s-d)}t.lineTo(e.x,e.y)}else t.lineTo(e.x,e.y)},it(xr.prototype,{length:{get:function(){return this.path?this.path.length:0}}}),xr.prototype.addPoint=function(t,i,e){var n=He(this.path,t,i,this.data.addSegmentType,e);if(!n)return!1;var r=n.segments;if(2<r.length){var s=this.data,o=r[r.length-1];o.type==Me?s.pathSegments=r.splice(1,r.length-2):(n.atEnd&&(o.invalidTerminal=!0),s.pathSegments=r.splice(1,r.length-1))}},Dr.prototype={_2j:null,image:null,initialize:function(){v(this,Dr,"initialize"),this._m0x(),pr.initBindingProperties(this)},_m38:function(){this.data.image?this.image&&(this.body=this.image):this.label&&(this.body=this.label)},_m0x:function(){this.image=new Lr,this.addChild(this.image,0),this._m38()},doValidate:function(){this.body&&(this instanceof qr&&!this.$data.groupImage&&this._5h()?this.body.$layoutByAnchorPoint=!1:(this.body.$layoutByAnchorPoint=null!=this._2j,this.body.anchorPosition=this._2j));var t=this.$data.$location,i=0,e=0;t&&(i=t.x,e=t.y);var n=this.$x!=i||this.$y!=e;return n&&(this.$invalidateBounds=!0),this.$x=i,this.$y=e,wr.prototype.doValidate.call(this)||n},_$t:function(t,i,e){var n=this._m36.onBindingPropertyChange(this,t,i,e);return n=Er.onBindingPropertyChange(this,t,i,e)||n,pr.onBindingPropertyChange(this,t,i,e)||n},getLinkablePorts:function(){return this.data.linkablePorts},getLinkableBounds:function(){return this.bodyBounds},getDefaultPortPoint:function(t){return Lt(yt.CENTER_MIDDLE,t||this.getLinkableBounds())},getPortPoint:function(t,i){return t?((i=i||this.getLinkableBounds()).original?(e=Lt(t,i.original),i.rotate&&(e=Di(e.x,e.y,i.rotate,i.rotateX||0,i.rotateY||0)),e.x+=i.tx||0,e.y+=i.ty||0):e=Lt(t,i),e.port=t,e):this.getDefaultPortPoint(i);var e},getPortPoints:function(){var t=this.getLinkablePorts();if(t&&Array.isArray(t)){var i=[],e=this.getLinkableBounds();return t.forEach(function(t){i.push(this.getPortPoint(t,e))}.bind(this)),i}}},t(Dr,wr);var Cr={};function Rr(t,i,e,n){return Math.max(i,n)-Math.min(t,e)-(i-t+n-e)}function Pr(t,i,e,n,r){var s=Rr(i,e,n,r),o=i+e<n+r;if(0<s){if(1==t)return s+(r-n)/2;if(0<=t&&t<1)return s;if(t<0)return o?n-i:e-r}return o&&0<t||!o&&t<0?Math.abs(e-r):Math.abs(i-n)}function Nr(t,i,e,n){return t==0<i?e+n+Math.abs(i):e-Math.abs(i)}function kr(t,i,e){return i>=t.x&&i<=t.right&&e>=t.y&&e<=t.bottom}function Mr(t){return t==Ii.EDGE_TYPE_ORTHOGONAL||t==Ii.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||t==Ii.EDGE_TYPE_HORIZONTAL_VERTICAL||t==Ii.EDGE_TYPE_ORTHOGONAL_VERTICAL||t==Ii.EDGE_TYPE_VERTICAL_HORIZONTAL||t==Ii.EDGE_TYPE_EXTEND_TOP||t==Ii.EDGE_TYPE_EXTEND_LEFT||t==Ii.EDGE_TYPE_EXTEND_BOTTOM||t==Ii.EDGE_TYPE_EXTEND_RIGHT||t==Ii.EDGE_TYPE_ELBOW||t==Ii.EDGE_TYPE_ELBOW_HORIZONTAL||t==Ii.EDGE_TYPE_ELBOW_VERTICAL}function Br(t,i){var e,n;i&&i.width&&i.height?(e=i.width,n=i.height):e=n=isNaN(i)?ot.ARROW_SIZE:i;var r=tr.getShape(t,-e,-n/2,e,n);return r||((r=new Ye).moveTo(-e,-n/2),r.lineTo(0,0),r.lineTo(-e,n/2)),r}function Gr(t,i){var e=Math.sin(i),n=Math.cos(i),r=t.x,s=t.y;return t.x=r*n-s*e,t.y=r*e+s*n,t}function Fr(t,i,e,n,r,s){var o=Math.atan2(n-i,e-t),h=new lt(r,s);return h.rotate=o,Gr(h,o),h.x+=t,h.y+=i,h}function $r(t,i,e){if(T(t,new je(ke,[i.x,i.y]),0),e){if(1<t.length){var n=t[t.length-1];if(Be==n.type&&(n.invalidTerminal||void 0===n.points[2]||null===n.points[2]))return n.points[2]=e.x,n.points[3]=e.y,void(n.invalidTerminal=!0);if(Ge==n.type&&(n.invalidTerminal||void 0===n.points[4]||null===n.points[4]))return n.points[4]=e.x,n.points[5]=e.y,void(n.invalidTerminal=!0)}t.push(new je(Me,[e.x,e.y]))}}function jr(t,i,e,n,r,s){if(void 0===r){var o=Math.atan2(e.y-n.y,e.x-n.x);r=Math.cos(o),s=Math.sin(o)}for(e={x:e.x,y:e.y},i.contains(e.x,e.y)||(e=ft(i,n.x,n.y,e.x,e.y));;){if(!i.contains(e.x,e.y))return n;if(t.hitTest(e.x-r,e.y-s,ot.LOOKING_EDGE_ENDPOINT_TOLERANCE)){n.x=e.x-r/2,n.y=e.y-s/2;break}e.x-=r,e.y-=s}return n}function zr(t,i,e,n,r,s){return i.contains(e.x,e.y)?!1===s?Yr(t,i,e,n,r):Yr(t,i,{x:e.x,y:e.y,perX:n,perY:r},n,r)||Yr(t,i,e,-n,-r):(e=function t(i,e,n,r,s,o){var h,a,l=e<i.x,_=e>i.right,u=n<i.y,c=n>i.bottom;return l&&0<r&&(h=n+(i.x-e)*s/r)>=i.y&&h<=i.bottom?{x:i.x,y:h,perX:r,perY:s}:_&&r<0&&(h=n+(i.right-e)*s/r)>=i.y&&h<=i.bottom?{x:i.right,y:h,perX:r,perY:s}:u&&0<s&&(a=e+(i.y-n)*r/s)>=i.x&&a<=i.right?{x:a,y:i.y,perX:r,perY:s}:c&&s<0&&(a=e+(i.bottom-n)*r/s)>=i.x&&a<=i.right?{x:a,y:i.bottom,perX:r,perY:s}:!1!==o?t(i,e,n,-r,-s,!1):void 0}(i,e.x,e.y,n,r,s))?Yr(t,i,e,e.perX,e.perY):void 0}function Yr(t,i,e,n,r){for(;;){if(!i.contains(e.x,e.y))return;if(t.hitTest(e.x+n,e.y+r))break;e.x+=n,e.y+=r}return e}function Ur(t){return we(t)?t:t.match(/.(gif|jpg|jpeg|png)$/gi)||/^data:image\/(\w+\+?\w+);base64,/i.test(t)?t:(t=et(t))instanceof Object&&t.draw?t:void 0}Cr[dr.SELECTION_COLOR]=ot.SELECTION_COLOR,Cr[dr.SELECTION_BORDER]=ot.SELECTION_BORDER,Cr[dr.SELECTION_SHADOW_BLUR]=ot.SELECTION_SHADOW_BLUR,Cr[dr.SELECTION_TYPE]=Ii.SELECTION_TYPE_SHADOW,Cr[dr.SELECTION_SHADOW_OFFSET_X]=2,Cr[dr.SELECTION_SHADOW_OFFSET_Y]=2,Cr[dr.LABEL_COLOR]=ot.LABEL_COLOR,Cr[dr.LABEL_POSITION]=yt.CENTER_BOTTOM,Cr[dr.LABEL_ANCHOR_POSITION]=yt.CENTER_TOP,Cr[dr.LABEL_PADDING]=new mt(0,2),Cr[dr.LABEL_POINTER_WIDTH]=8,Cr[dr.LABEL_RADIUS]=8,Cr[dr.LABEL_POINTER]=!0,Cr[dr.LABEL_BORDER]=0,Cr[dr.LABEL_BORDER_STYLE]="#000",Cr[dr.LABEL_ROTATABLE]=!0,Cr[dr.LABEL_BACKGROUND_COLOR]=null,Cr[dr.LABEL_BACKGROUND_GRADIENT]=null,Cr[dr.EDGE_COLOR]="#555555",Cr[dr.EDGE_WIDTH]=1.5,Cr[dr.EDGE_FROM_AT_EDGE]=!0,Cr[dr.EDGE_TO_AT_EDGE]=!0,Cr[dr.GROUP_BACKGROUND_COLOR]=Q(3438210798),Cr[dr.GROUP_STROKE]=1,Cr[dr.GROUP_STROKE_STYLE]="#000",Cr[dr.ARROW_TO]=!0,Cr[dr.ARROW_FROM_SIZE]=ot.ARROW_SIZE,Cr[dr.ARROW_TO_SIZE]=ot.ARROW_SIZE,Cr[dr.EDGE_LOOPED_EXTAND]=10,Cr[dr.EDGE_CORNER_RADIUS]=8,Cr[dr.EDGE_CORNER]=Ii.EDGE_CORNER_ROUND,Cr[dr.EDGE_SPLIT_BY_PERCENT]=!0,Cr[dr.EDGE_EXTEND]=20,Cr[dr.EDGE_SPLIT_PERCENT]=.5,Cr[dr.EDGE_SPLIT_VALUE]=20,Cr[dr.EDGE_BUNDLE_GAP]=20,Cr[dr.EDGE_BUNDLE_LABEL_ANCHOR_POSITION]=yt.CENTER_BOTTOM,Cr[dr.EDGE_BUNDLE_LABEL_POSITION]=yt.CENTER_TOP,Cr[dr.EDGE_BUNDLE_LABEL_COLOR]="#075bc5",Cr[dr.SHAPE_STROKE]=1,Cr[dr.SHAPE_STROKE_STYLE]="#2898E0",Cr[dr.RENDER_COLOR_BLEND_MODE]=ot.BLEND_MODE,Cr[dr.ALPHA]=1,ot.LOOKING_EDGE_ENDPOINT_TOLERANCE=2;function Hr(t,i){this._$s=new Bt,this._$s.on(function(t){"currentSubNetwork"==t.kind&&this.invalidateVisibility()},this),this._1b=new Bt,this._1b.addListener(function(t){!this.currentSubNetwork||t.kind!=Gt.KIND_CLEAR&&t.kind!=Gt.KIND_REMOVE||this.graphModel.contains(this.currentSubNetwork)||(this.currentSubNetwork=null)},this),this._8=new Bt,this._11=new Bt,this._$i=new Bt,this._$l=new Bt,this.graphModel=i||new or,this._8k=new wn(this,t),this._2z=new Ps(this),this._18=new Bt,this._onresize=Qt(u,"resize",function(t){this.updateViewport()},!1,this),this._8k._m18.ondrop=function(t){this.ondrop(t)}.bind(this),this._8k._m18.ondragover=function(t){this.ondragover(t)}.bind(this)}function Wr(t){for(var i=t.parent;i;){if(i.enableSubNetwork)return i;i=i.parent}return null}function qr(t,i){c(this,qr,arguments)}it(Hr.prototype={originAtCenter:!0,editable:!1,ondragover:function(t){Si.stopEvent(t)},getDropInfo:function(t,i){var e=null;if(i)try{e=JSON.parse(i)}catch(t){}return e},ondrop:function(t){var i=t.dataTransfer;if(i){var e=i.getData("text"),n=this.getDropInfo(t,e);n||((n={}).image=i.getData("image"),n.type=i.getData("type"),n.label=i.getData("label"),n.groupImage=i.getData("groupImage"));var r=this.globalToLocal(t);if(r=this.toLogical(r.x,r.y),!(this.dropAction instanceof Function&&!1===this.dropAction.call(this,t,r,n))&&(n.image||n.label||n.type)){var s,o=n.image,h=n.type,a=n.label,l=n.groupImage;if(Si.stopEvent(t),h&&"Node"!=h?"Text"==h?s=this.createText(a,r.x,r.y):"ShapeNode"==h?s=this.createShapeNode(a,r.x,r.y):"Group"==h?(s=this.createGroup(a,r.x,r.y),(l=l&&Ur(l))&&(s.groupImage=l)):(h=et(h))instanceof Function&&h.prototype instanceof Jn&&((s=new h).name=a,s.location=new lt(r.x,r.y),this._keModel.add(s)):s=this.createNode(a,r.x,r.y),s){if((o=o&&Ur(o))&&(s.image=o),t.shiftKey){var _=this.getElementByMouseEvent(t);_&&this._m1i(_)&&(s.parent=_)}if(n.properties)for(var u in n.properties)s[u]=n.properties[u];if(n.clientProperties)for(var u in n.clientProperties)s.set(u,n.clientProperties[u]);if(n.styles&&s.putStyles(n.styles),!1===this.onElementCreated(s,t,n))return!1;var c=new Rs(this,Rs.ELEMENT_CREATED,t,s);return this.onInteractionEvent(c),s}}}},_m1i:function(t){return t.enableSubNetwork||t instanceof hr||t.droppable},enableDoubleClickToOverview:!0,_8k:null,_$s:null,_1b:null,_8:null,_$l:null,_11:null,_$i:null,_1o:function(t){return this._$s.beforeEvent(t)},_4q:function(t){this._$s.onEvent(t),"viewport"==t.kind&&this.checkLimitedBounds()},isVisible:function(t){return this._8k._e7(t)},isMovable:function(t){return(t instanceof Jn||t instanceof Vn&&t.hasPathSegments())&&!1!==t.movable},isSelectable:function(t){return!1!==t.selectable},isEditable:function(t){return!1!==t.editable},isRotatable:function(t){return!1!==t.rotatable},isResizable:function(t){return!1!==t.resizable},canLinkFrom:function(t){return!1!==t.linkable&&!1!==t.canLinkFrom},canLinkTo:function(t,i){return!(!1===t.linkable||!1===t.canLinkTo||i instanceof Si.Group&&t.isDescendantOf(i)||t instanceof Si.Group&&i.isDescendantOf(t))},isEndPointEditable:function(t,i){return!1!==t.endPointEditable},createNode:function(t,i,e){var n=new Jn(t,i,e);return this._keModel.add(n),n},createText:function(t,i,e){var n=new ar(t,i,e);return this._keModel.add(n),n},createShapeNode:function(t,i,e,n){U(i)&&(n=e,e=i,i=null);var r=new Qn(t,i);return r.$location=new lt(e,n),this._keModel.add(r),r},createGroup:function(t,i,e){var n=new hr(t,i,e);return this._keModel.add(n),n},createEdge:function(t,i,e){if(t instanceof Jn){var n=e;e=i,i=t,t=n}var r=new Vn(i,e);return t&&(r.$name=t),this._keModel.add(r),r},addElement:function(t,i){this._keModel.add(t),i&&t.hasChildren()&&t.forEachChild(function(t){this.addElement(t,i)},this)},removeElement:function(t){this._keModel.remove(t)},clear:function(){this._keModel.clear()},getStyle:function(t,i){var e=t._j1[i];return void 0!==e?e:this.getDefaultStyle(i)},getDefaultStyle:function(t){if(this._j1){var i=this._j1[t];if(void 0!==i)return i}return Cr[t]},_2x:function(t,i){if(!this.limitedBounds||this.limitedBounds.contains(this.viewportBounds))return i&&i(),!1;t=this._2a(),this.stopAnimation();var e,n,r,s=this.viewportBounds,o=this.limitedBounds,h=s.width/this.limitedBounds.width,a=s.height/this.limitedBounds.height;if(h<=1&&a<=1)return e=o.left>s.left?o.left:o.right<s.right?s.left-(s.right-o.right):s.left,n=o.top>s.top?o.top:o.bottom<s.bottom?s.top-(s.bottom-o.bottom):s.top,void this.translateTo(-e*this.scale,-n*this.scale,this.scale,!1,i);var l=a<h;r=Math.max(h,a),l?(e=o.x,(n=o.y+(s.top-o.top)*(1-r)/r)>=o.y?n=o.y:n<o.bottom-s.height/r&&(n=o.bottom-s.height/r)):(n=o.y,(e=o.x+(s.left-o.left)*(1-r)/r)>=o.x?e=o.x:e<o.right-s.width/r&&(e=o.right-s.width/r)),e*=r*=this.scale,n*=r,this.translateTo(-e,-n,r,t,i)},checkLimitedBounds:function(t){if(this._m3heckingBounds||!this.limitedBounds||this.limitedBounds.contains(this.viewportBounds))return!1;this._m3heckingBounds=!0,this.callLater(function(){this._2x(t,function(){this._m3heckingBounds=!1}.bind(this))},this)},zoomByMouseEvent:function(t,i,e,n){var r=this.globalToLocal(t);return"number"==typeof i?this.zoomAt(Math.pow(1.1,i),r.x,r.y,e,n):i?this.zoomIn(r.x,r.y,e,n):this.zoomOut(r.x,r.y,e,n)},resetScale:1,translate:function(t,i,e){return this.translateTo(this.tx+t,this.ty+i,this.scale,e)},translateTo:function(t,i,e,n,r){if(e=e&&Math.min(this.maxScale,Math.max(this.minScale,e)),!n){var s=this._8k._m1c(t,i,e);return r&&r(),s}this._64()._ko(t,i,e,n,r)},centerTo:function(t,i,e,n,r){return(!e||e<=0)&&(e=this.scale),void 0===n&&(n=this._2a()),this.translateTo(this.width/2-t*e,this.height/2-i*e,e,n,r)},moveToCenter:function(t,i){if(!1!==arguments[2]&&this._8k.isInvalidate())return this._8k._m0t||(i=!1),this.callLater(this.moveToCenter.bind(this,t,i,!1));var e=this.bounds;this.centerTo(e.cx,e.cy,t,i)},zoomToOverview:function(t,i){if(!1!==arguments[2]&&this._8k.isInvalidate())return this._8k._m0t||(t=!1),this.callLater(this.zoomToOverview.bind(this,t,i,!1));var e=this._8k._1j();e&&(i&&(e.scale=Math.min(e.scale,i)),this.centerTo(e.cx,e.cy,e.scale,t))},_2a:function(){return!!this._8k._m0t&&(void 0===this.zoomAnimation||null===this.zoomAnimation?ot.ZOOM_ANIMATE:this.zoomAnimation)},zoomAt:function(t,i,e,n,r){void 0===n&&(n=this._2a()),void 0===i&&(i=this.width/2),i=i||0,void 0===e&&(e=this.height/2),e=e||0;var s=this.scale;return i=(t=Math.min(this.maxScale,Math.max(this.minScale,s*t)))*(this.tx-i)/s+i,e=t*(this.ty-e)/s+e,this.translateTo(i,e,t,n,r)},zoomOut:function(t,i,e,n){return this.zoomAt(1/this.scaleStep,t,i,e,n)},zoomIn:function(t,i,e,n){return this.zoomAt(this.scaleStep,t,i,e,n)},_64:function(){return this._panAnimation||(this._panAnimation=new es(this)),this._panAnimation},onAnimationStart:function(){},onAnimationEnd:function(){},isAnimating:function(){return this._panAnimation&&this._panAnimation._e0()},enableInertia:!0,_m03:function(t,i){return this._64()._h3(t||0,i||0)},stopAnimation:function(){this._panAnimation&&this._panAnimation._l7()},getUI:function(t){return nt(t)?this._8k._3j(t):this._8k._kn(t)},getUIByMouseEvent:function(t){return this._8k._3j(t)},hitTest:function(t){return this._8k.hitTest(t)},globalToLocal:function(t){return this._8k._7v(t)},toCanvas:function(t,i){return this._8k._gv(t,i)},toLogical:function(t,i){return nt(t)?this._8k._$c(t):this._8k._ef(t,i)},getElementByMouseEvent:function(t){var i=this._8k._3j(t);if(i)return i.$data},getElement:function(t){return nt(t)?this.getElementByMouseEvent(t):this._keModel.getById(t)},invalidate:function(){this._8k._m3a()},invalidateUI:function(t){t.invalidate(),this.invalidate()},invalidateElement:function(t){this._8k._3n(t)},getUIBounds:function(t){return this._8k._2n(t)},forEachVisibleUI:function(t,i){return this._8k._4c(t,i)},forEachReverseVisibleUI:function(t,i){return this._8k._$u(t,i)},forEachUI:function(t,i){return this._8k._e8(t,i)},forEachReverseUI:function(t,i){return this._8k._4d(t,i)},forEach:function(t,i){return this._keModel.forEach(t,i)},getElementByName:function(i){var e;return this.forEach(function(t){if(t.name==i)return e=t,!1}),e},focus:function(t){if(t){var i=u.scrollX||u.pageXOffset,e=u.scrollY||u.pageYOffset;return this.canvasPanel.focus(),void u.scrollTo(i,e)}this.canvasPanel.focus()},callLater:function(t,i,e){this._8k._d3(t,i,e)},exportImage:function(t,i,e){return function(t,i,e,n){var r=t.bounds;e=e||r,i=i||1;var s=Bi();ln(s.g),s.width=e.width*i,s.height=e.height*i,t._8k._gt(s.g,i,e);var o=null;try{o=s.toDataURL(n||"image/png")}catch(t){Si.error(t)}return{canvas:s,data:o,width:s.width,height:s.height}}(this,t,i,e)},setSelection:function(t){return this._keModel._selectionModel.set(t)},select:function(t){return this._keModel._selectionModel.select(t)},unselect:function(t){return this._keModel._selectionModel.unselect(t)},reverseSelect:function(t){return this._keModel._selectionModel.reverseSelect(t)},selectAll:function(){var i,t,e;t=(i=this).selectionModel,e=[],i.graphModel.forEach(function(t){i.isVisible(t)&&i.isSelectable(t)&&e.push(t)}),t.set(e)},unSelectAll:function(){this.selectionModel.clear()},unselectAll:function(){this.unSelectAll()},isSelected:function(t){return this._keModel._selectionModel.contains(t)},sendToTop:function(t){Wn(this._keModel,t)},sendToBottom:function(t){qn(this._keModel,t)},moveElements:function(t,i,e){var n=[],r=new ht;return b(t,function(t){t instanceof Jn?n.push(t):t instanceof Vn&&r.add(t)}),this._em(n,i,e,r)},_em:function(t,e,n,i){if(0==e&&0==n||0==t.length&&0==i.length)return!1;if(0!=t.length){var r=this._4t(t);i=this._4s(r,i),b(r,function(t){var i=t.$location;i?t.setLocation(i.x+e,i.y+n):t.setLocation(e,n)})}return i&&i.length&&this._eo(i,e,n),!0},_eo:function(t,i,e){t.forEach(function(t){t.move(i,e)})},_4s:function(i,e){return this.graphModel.forEach(function(t){t instanceof Vn&&this.isMovable(t)&&i.contains(t.fromAgent)&&i.contains(t.toAgent)&&e.add(t)},this),e},_4t:function(t){var i=new ht;return b(t,function(t){this.isMovable(t),i.add(t),function i(t,e,n){t._hx()&&t.hasChildren()&&t.children.forEach(function(t){t instanceof Jn&&e.add(t)&&i(t,e,n)},this),t.hasFollowers()&&t._dp.forEach(function(t){(null==n||n.accept(t))&&e.add(t)&&i(t,e,n)})}(t,i,this._movableFilter)},this),i},reverseExpanded:function(t){if(!t.isBundleEnabled())return!1;var i=t.getEdgeBundle(!0);return!!i&&(!1!==i.reverseExpanded()?(this.invalidate(),!0):void 0)},_2z:null,_18:null,beforeInteractionEvent:function(t){return this._18.beforeEvent(t)},onInteractionEvent:function(t){this._18.onEvent(t)},addCustomInteraction:function(t){this._2z.addCustomInteraction(t)},removeCustomInteraction:function(t){this._2z.removeCustomInteraction(t)},enableWheelZoom:!0,enableTooltip:!0,getTooltip:function(t){return t.tooltip||t.name},updateViewport:function(){this._8k._7h()},destroy:function(){var t,i,e;this._4q(new Dt(this,"destroy",!0,this._i1ed)),this._i1ed=!0,this._onresize&&(t=u,i="resize",e=this._onresize,t.removeEventListener(i,e)),this._2z.destroy(),this.graphModel=new or;var n=this.html;this._8k._i1(),n&&(n.innerHTML="")},onPropertyChange:function(i,e,n){this._$s.addListener(function(t){t.kind==i&&e.call(n,t)})},removeSelection:function(){var t=this.selectionModel._j2;return!(!t||0==t.length)&&(t=t.slice(),this._keModel.remove(t),t)},removeSelectionByInteraction:function(e){var t=this.selectionModel.datas;if(!t||0==t.length)return!1;Si.confirm("Delete Elements - "+t.length,function(){var t=this.removeSelection();if(t){var i=new Rs(this,Rs.ELEMENT_REMOVED,e,t);this.onInteractionEvent(i)}},this)},createShapeByInteraction:function(t,i,e,n){var r=new Ye(i);2<i.length&&r.closePath();var s=this.createShapeNode("Shape",r,e,n);this.onElementCreated(s,t);var o=new Rs(this,Rs.ELEMENT_CREATED,t,s);return this.onInteractionEvent(o),s},createLineByInteraction:function(t,i,e,n){var r=new Ye(i),s=this.createShapeNode("Line",r,e,n);s.setStyle(Si.Styles.SHAPE_FILL_COLOR,null),s.setStyle(Si.Styles.SHAPE_FILL_GRADIENT,null),s.setStyle(Si.Styles.LAYOUT_BY_PATH,!0),this.onElementCreated(s,t);var o=new Rs(this,Rs.ELEMENT_CREATED,t,s);return this.onInteractionEvent(o),s},createEdgeByInteraction:function(t,i,e,n,r,s){var o=this.createEdge("Edge",t,i);if(r&&o.setStyle(Si.Styles.EDGE_FROM_PORT,r),s&&o.setStyle(Si.Styles.EDGE_TO_PORT,s),n)o._9f=n;else{var h=this.edgeUIClass,a=this.edgeType;this.interactionProperties&&(h=this.interactionProperties.uiClass||h,a=this.interactionProperties.edgeType||a),h&&(o.uiClass=h),a&&(o.edgeType=a)}this.onElementCreated(o,e);var l=new Rs(this,Rs.ELEMENT_CREATED,e,o);return this.onInteractionEvent(l),o},onElementCreated:function(t,i,e){!t.parent&&this.currentSubNetwork&&(t.parent=this.currentSubNetwork)},allowEmptyLabel:!1,startLabelEdit:function(i,e,t,n){var r=this;t.startEdit(n.x,n.y,e.data,this.getStyle(i,dr.LABEL_FONT_SIZE),function(t){return r.onLabelEdit(i,e,t,e.parent)})},onLabelEdit:function(t,i,e,n){if(!e&&!this.allowEmptyLabel)return Si.alert("Label Can't Empty"),!1;if("label"==i.name){if(t.name==e)return!1;t.name=e}else!1===n._fs(i,e)&&(i.data=e,this.invalidateElement(t))},setInteractionMode:function(t,i){this.interactionMode=t,this.interactionProperties=i},upSubNetwork:function(){return!!this._34&&(this.currentSubNetwork=Wr(this._34))},_$m:!1,invalidateVisibility:function(){this._$m=!0,this.invalidate()},getBundleLabel:function(t){var i=t.getEdgeBundle(!0);return i&&i.agentEdge==t?"+"+i.bindableEdges.length:null},zoomAnimation:null,pauseRendering:function(t,i){(this.delayedRendering||i)&&this._8k._73(t)},_4u:void 0,enableRectangleSelectionByRightButton:!0,getLinkablePoints:function(t,i,e){return t.linkablePoints}},{center:{get:function(){return this.toLogical(this.html.clientWidth/2,this.html.clientHeight/2)}},visibleFilter:{get:function(){return this._hyFilter},set:function(t){this._hyFilter=t,this.invalidateVisibility()}},topCanvas:{get:function(){return this._8k._topCanvas}},propertyChangeDispatcher:{get:function(){return this._$s}},listChangeDispatcher:{get:function(){return this._1b}},dataPropertyChangeDispatcher:{get:function(){return this._8}},selectionChangeDispatcher:{get:function(){return this._$l}},parentChangeDispatcher:{get:function(){return this._11}},childIndexChangeDispatcher:{get:function(){return this._$i}},interactionDispatcher:{get:function(){return this._18}},cursor:{set:function(t){this.canvasPanel.style.cursor=t||this._2z.defaultCursor},get:function(){return this.canvasPanel.style.cursor}},interactionMode:{get:function(){return this._2z._m3urrentMode},set:function(t){var i=this.interactionMode;i!=t&&(this._2z.currentMode=t,this._4q(new Dt(this,"interactionMode",t,i)))}},scaleStep:{get:function(){return this._8k._ea},set:function(t){this._8k._ea=t}},maxScale:{get:function(){return this._8k._gc},set:function(t){this._8k._gc=t}},minScale:{get:function(){return this._8k._gd},set:function(t){this._8k._gd=t}},scale:{get:function(){return this._8k._scale},set:function(t){return this._8k._scale=t}},tx:{get:function(){return this._8k._tx}},ty:{get:function(){return this._8k._ty}},styles:{get:function(){return this._j1},set:function(t){this._j1=t}},selectionModel:{get:function(){return this._keModel._selectionModel}},graphModel:{get:function(){return this._keModel},set:function(t){if(this._keModel==t)return!1;var i=this._keModel,e=new Dt(this,"graphModel",i,t);if(!1===this._1o(e))return!1;null!=i&&(i.propertyChangeDispatcher.removeListener(this._$s,this),i.listChangeDispatcher.removeListener(this._1b,this),i.dataChangeDispatcher.removeListener(this._8,this),i.parentChangeDispatcher.removeListener(this._11,this),i.childIndexChangeDispatcher.removeListener(this._$i,this),i.selectionChangeDispatcher.removeListener(this._$l,this)),this._keModel=t,this._keModel&&(this._keModel.propertyChangeDispatcher.addListener(this._$s,this),this._keModel.listChangeDispatcher.addListener(this._1b,this),this._keModel.dataChangeDispatcher.addListener(this._8,this),this._keModel.parentChangeDispatcher.addListener(this._11,this),this._keModel.childIndexChangeDispatcher.addListener(this._$i,this),this._keModel.selectionChangeDispatcher.addListener(this._$l,this)),this._8k&&this._8k._kl(),this._4q(e)}},count:{get:function(){return this._keModel.length}},width:{get:function(){return this.html.clientWidth}},height:{get:function(){return this.html.clientHeight}},viewportBounds:{get:function(){return this._8k._viewportBounds}},bounds:{get:function(){return this._8k._4e()}},canvasPanel:{get:function(){return this._8k._m18}},html:{get:function(){return this._8k._m18.parentNode}},navigationType:{get:function(){return this._8k._7e},set:function(t){this._8k._3p(t)}},_34:{get:function(){return this._keModel._34}},currentSubNetwork:{get:function(){return this._keModel.currentSubNetwork},set:function(t){this._keModel.currentSubNetwork=t}},limitedBounds:{get:function(){return this._limitedBounds},set:function(t){if(pt.equals(t,this._limitedBounds))return!1;this._limitedBounds=t?new pt(t):null}},ratio:{get:function(){return this._8k.ratio}},delayedRendering:{get:function(){return void 0===this._4u?ot.DELAYED_RENDERING:this._4u},set:function(t){t!=this.delayedRendering&&(this._4u=t,this.pauseRendering(!1,!0))}},fullRefresh:{get:function(){return this._8k.fullRefresh},set:function(t){this._8k.fullRefresh=t}}}),ot.DELAYED_RENDERING=!0,ot.GROUP_MIN_WIDTH=60,ot.GROUP_MIN_HEIGHT=60,qr.prototype={_m38:function(){if(!this._5h())return v(this,qr,"_m38",arguments)},initialize:function(){v(this,qr,"initialize"),this.checkBody()},_m0y:function(){this._ky=new Ye,this.shape=new Lr(this._ky),this.shape.layoutByPath=!1,this.addChild(this.shape,0),this.body=this.shape},checkBody:function(){if(this._5h())return this._21=!0,this.shape?(this.shape.visible=!0,this.body=this.shape):(this._m0y(),mr.initBindingProperties(this)),void(this.image&&(this.image.visible=!1));this.image?(this.image.visible=!0,this.body=this.image):this._m0x(),this.shape&&(this.shape.visible=!1)},_5h:function(){return this.$data._hx()&&this.$data.expanded},_ky:null,_21:!0,_5j:function(){this._1e=!0,this._21=!0},doValidate:function(){if(this._21&&this._5h()){if(this._21=!1,this.shape.invalidateData(),this.$data.groupImage){this.shape.data=this.$data.groupImage;var t=this._23();return this.shape.offsetX=t.x+t.width/2,this.shape.offsetY=t.y+t.height/2,this.shape.size={width:t.width,height:t.height},Dr.prototype.doValidate.call(this)}this.shape.offsetX=0,this.shape.offsetY=0;var i=this._86(this.$data.groupType);if(this._ky.clear(),i instanceof pt){var e=this.getStyle(dr.GROUP_RADIUS)||0;ir(this._ky,i.x,i.y,i.width,i.height,i.rx||e,i.ry||e)}else i instanceof te?(n=this._ky,s=(r=i).r||1,o=r.cx||0,h=r.cy||0,a=s*Math.tan(Math.PI/8),l=s*Math.sin(Math.PI/4),n.moveTo(o+s,h),n.quadTo(o+s,h+a,o+l,h+l),n.quadTo(o+a,h+s,o,h+s),n.quadTo(o-a,h+s,o-l,h+l),n.quadTo(o-s,h+a,o-s,h),n.quadTo(o-s,h-a,o-l,h-l),n.quadTo(o-a,h-s,o,h-s),n.quadTo(o+a,h-s,o+l,h-l),n.quadTo(o+s,h-a,o+s,h)):i instanceof ie&&er(this._ky,i);this._ky._6e=!0,this.shape.invalidateData()}var n,r,s,o,h,a,l;return Dr.prototype.doValidate.call(this)},_6n:function(t,i,e,n,r){switch("number"!=typeof n&&(n=-i/2),"number"!=typeof r&&(r=-e/2),t){case Ii.GROUP_TYPE_CIRCLE:return new te(n+i/2,r+e/2,Math.max(i,e)/2);case Ii.GROUP_TYPE_ELLIPSE:return new ie(n+i/2,r+e/2,i,e);default:return new pt(n,r,i,e)}},_23:function(){return this._86(null)},_86:function(t){var i=this.data,e=i.padding,n=i.minSize,r=ot.GROUP_MIN_WIDTH,s=ot.GROUP_MIN_HEIGHT;if(n&&("number"==typeof n.width&&(r=n.width),"number"==typeof n.height&&(s=n.height),m=n.x,y=n.y),!i.hasChildren())return this._6n(t,r,s,m,y);var o,h=this.$data._fr._j2;t!=Ii.GROUP_TYPE_CIRCLE&&t!=Ii.GROUP_TYPE_ELLIPSE||(o=[]);for(var a,l,_,u,c=new pt,f=0,d=h.length;f<d;f++){var E=h[f];if(this.graph.isVisible(E)&&!(E instanceof Vn)){var g=this.graph.getUI(E);g&&(a=g.$x+g._fu.x,l=g.$y+g._fu.y,_=g._fu.width,u=g._fu.height,c.addRect(a,l,_,u),o&&(o.push({x:a,y:l}),o.push({x:a+_,y:l}),o.push({x:a+_,y:l+u}),o.push({x:a,y:l+u})))}}if(c.isEmpty())return this._6n(t,r,s,m,y);var v=this.$data.$location;v?v.invalidateFlag&&(v.invalidateFlag=!1,void 0===m&&(v.x=c.cx),void 0===y&&(v.y=c.cy)):v=this.$data.$location={x:c.cx,y:c.cy},e&&c.grow(e),"number"==typeof m&&m+v.x<c.x&&(c.width+=c.x-(m+v.x),c.x=m+v.x,o&&o.push({x:c.x,y:c.cy})),"number"==typeof y&&y+v.y<c.y&&(c.height+=c.y-(c.y,y+v.y),c.y=y+v.y,o&&o.push({x:c.cx,y:c.y}));var p,m=v.x,y=v.y;if(t!=Ii.GROUP_TYPE_CIRCLE)return t==Ii.GROUP_TYPE_ELLIPSE?((p=ne(o,c)).cx-=m,p.cy-=y,p.width<r&&(p.cx+=(r-p.width)/2,p.width=r),p.height<s&&(p.cy+=(s-p.height)/2,p.height=s)):((p=c).width<r&&(c.width=r),c.height<s&&(c.height=s),c.offset(-m,-y)),p;(p=ee(o)).cx-=m,p.cy-=y;var T=Math.max(r,s)/2;return p.r<T&&(p.cx+=T-p.r,p.cy+=T-p.r,p.r=T),p},_$t:function(t,i,e){if(!this._5h())return v(this,qr,"_$t",arguments);var n=this._m36.onBindingPropertyChange(this,t,i,e);return n=Er.onBindingPropertyChange(this,t,i,e)||n,n=pr.onBindingPropertyChange(this,t,i,e)||n,mr.onBindingPropertyChange(this,t,i,e)||n}},t(qr,Dr),Si.GroupUI=qr;ot.NAVIGATION_IMAGE_LEFT=null,ot.NAVIGATION_IMAGE_TOP=null;var Vr={position:"absolute","text-align":"center"},Xr={padding:"10px",transition:"opacity 0.2s ease-in"},Kr={position:"relative",display:"block"};function Zr(t,i,e,n,r,s,o){var h=y.createElement("div");h.className="Q-Graph-Nav-Button",qt(h,Vr),i&&qt(h,i);var a=y.createElement("img");return s&&(G&&(a.ontouchstart=s),si||(a.onclick=s)),a.name=o,a.src=e,qt(a,Xr),r&&qt(a,r),n&&Xt(a,"transform","rotate(180deg)"),h._img=a,h.appendChild(a),t.appendChild(h),h}function Jr(s,t){if(!ot.NAVIGATION_IMAGE_LEFT){var i=Bi(20,40),e=i.g;e.scale(e.ratio,e.ratio),e.moveTo(16,4),e.lineTo(4,20),e.lineTo(16,36),e.lineWidth=3,e.lineCap="round",e.lineJoin="round",e.strokeStyle="#FFF",e.shadowColor="#888",e.shadowBlur=5,e.stroke(),ot.NAVIGATION_IMAGE_LEFT=i.toDataURL();var n=Bi(i.height,i.width,!1);n.g.translate(n.width,0),n.g.rotate(Math.PI/2),n.g.drawImage(i,0,0),ot.NAVIGATION_IMAGE_TOP=n.toDataURL()}this._m1aseCanvas=s,function(t,i){this._navPane=y.createElement("div"),this._navPane.className="Q-Graph-Nav",qt(this._navPane,{"background-color":"rgba(0, 0, 0, 0)",overflow:"hidden","user-select":"none",position:"relative"}),this._top=Zr(this._navPane,{width:"100%"},ot.NAVIGATION_IMAGE_TOP,!1,null,i,"top"),this._left=Zr(this._navPane,{height:"100%"},ot.NAVIGATION_IMAGE_LEFT,!1,Kr,i,"left"),this._right=Zr(this._navPane,{height:"100%",right:"0px"},ot.NAVIGATION_IMAGE_LEFT,!0,Kr,i,"right"),this._m1ottom=Zr(this._navPane,{width:"100%",bottom:"0px"},ot.NAVIGATION_IMAGE_TOP,!0,null,i,"bottom"),t.appendChild(this._navPane)}.call(this,t,function(t){var i,e;X(t);var n=t.target,r=n.name;if("left"==r)i=1;else if("right"==r)i=-1;else if("top"==r)e=1;else{if("bottom"!=r)return;e=-1}G&&(n.className="hover",setTimeout(function(){n.className=""},100)),X(t),s._ke._m03(i,e)}),this._37(t.clientWidth,t.clientHeight)}function Qr(t,i){this._m1aseCanvas=t,this.init(i,t)}Kt(".Q-Graph-Nav img","opacity:0.7;vertical-align:middle;"),Kt(".Q-Graph-Nav img:hover,img.hover","opacity:1;background-color: rgba(0, 0, 0, 0.5)"),G||(Kt(".Q-Graph-Nav","opacity:0;"+Wt("transition")+":opacity 3s cubic-bezier(0.8, 0, 0.8, 1)"),Kt(".Q-Graph-Nav:hover","opacity:1;"+Wt("transition")+":opacity 0.3s linear")),Jr.prototype={_m39:function(t,i){if(t._hy==i)return!1;t._hy=i,t.style.visibility=i?"visible":"hidden"},_37:function(t,i){var e=i/2-this._left._img.clientHeight/2+"px";this._left._img.style.top=e,this._right._img.style.top=e,this._navPane.style.width=t+"px",this._navPane.style.height=i+"px"},_9b:function(t,i,e,n){this._m39(this._top,t),this._m39(this._left,i),this._m39(this._m1ottom,e),this._m39(this._right,n)},_i1:function(){var t=this._navPane.parentNode;t&&t.removeChild(this._navPane)},_je:function(){var t=this._m1aseCanvas._ke;if(t){var i=t.bounds;if(i.isEmpty())this._9b(!1,!1,!1,!1);else{var e=t.viewportBounds,n=e.y>i.y+1,r=e.x>i.x+1,s=e.bottom<i.bottom-1,o=e.right<i.right-1;this._9b(n,r,s,o)}}}};function ts(t,i){c(this,ts,arguments)}function is(t,i){var e,n;this._m1aseCanvas=t,this._iv=(e=i,ln((n=Bi(!0)).g),n.onselectstart=function(){return!1},e.appendChild(n),n.className=gn,n),this.g=this._iv.g,this._9c=new ht}Kt(".Q-Graph-ScrollBar","margin: 2px; position: absolute;box-sizing: border-box;box-shadow: #FFF 0px 0px 1px; background-color: rgba(120,120,120,0.3);border-radius: 4px;margin: 1px;"),Kt(".Q-Graph-ScrollBar.hover, .Q-Graph-ScrollBar:hover","background-color: #7E7E7E;"+Wt("transition")+": background-color 0.2s linear;"),Kt(".Q-Graph-ScrollBar--V","width: 8px;right: 0px;"),Kt(".Q-Graph-ScrollBar--H","height: 8px;bottom: 0px;"),Kt(".Q-Graph-ScrollBar--V.Both","margin-bottom: 8px;"),Kt(".Q-Graph-ScrollBar--H.Both","margin-right: 8px;"),G||(Kt(".Q-Graph-ScrollPane","opacity:0;"+Wt("transition")+":opacity 3s cubic-bezier(0.8, 0, 0.8, 1);"),Kt(".Q-Graph:hover .Q-Graph-ScrollPane","opacity:1;"+Wt("transition")+":opacity 0.3s linear;")),Qr.prototype={_i1:function(){this._verticalDragSupport._i1(),this._horizontalDragSupport._i1(),delete this._verticalDragSupport,delete this._horizontalDragSupport,this._kz.parentNode&&this._kz.parentNode.removeChild(this._kz)},_kz:null,_m10:null,_87:null,init:function(t,i){var e=y.createElement("div");e.className="Q-Graph-ScrollPane",qt(e,{width:"100%",height:"100%",position:"relative"});var n=y.createElement("div");n.className="Q-Graph-ScrollBar Q-Graph-ScrollBar--V";var r=y.createElement("div");r.className="Q-Graph-ScrollBar Q-Graph-ScrollBar--H",e.appendChild(n),e.appendChild(r),t.appendChild(e),this._kz=e,this._87=r,this._m10=n,r.isH=!0;var o=this,s={onstart:function(t,i){i.classList.add("hover")},onrelease:function(t,i){i.classList.remove("hover")},ondrag:function(t,i){var e=o._m1aseCanvas._ke;if(e){var n=i.isH,r=n?t.dx:t.dy;if(r&&i.scale){var s=e.scale/i.scale;n?e.translate(-s*r,0):e.translate(0,-s*r),Si.stopEvent(t)}}},enddrag:function(t,i){var e=o._m1aseCanvas._ke;if(e&&e.enableInertia){var n=i.isH,r=n?t.vx:t.vy;.1<Math.abs(r)&&(r*=e.scale/i.scale,n?e._m03(-r,0):e._m03(0,-r))}}};this._verticalDragSupport=new di(n,s),this._horizontalDragSupport=new di(r,s)},_37:function(){var t=this._m1aseCanvas._ke;t&&t.callLater(this._je.bind(this))},_je:function(){var t=this._m1aseCanvas._ke;if(t){var i=t.bounds;if(i.isEmpty())return this._40(!1),void this._42(!1);var e=t.viewportBounds,n=t.width,r=t.height,s=1/t.scale,o=e.x>i.x+s||e.right<i.right-s,h=e.y>i.y+s||e.bottom<i.bottom-s,a=o&&h;a?(z(this._m10,"Both"),z(this._87,"Both")):(Y(this._m10,"Both"),Y(this._87,"Both")),this._40(o,e,i,a?n-10:n),this._42(h,e,i,a?r-10:r)}},_40:function(t,i,e,n,r){if(!t)return this._87.style.display="none",void(this._87.scale=0);var s=Math.min(i.x,e.x),o=Math.max(i.right,e.right),h=n/(o-s);this._87.scale=h,this._87.style.left=parseInt((i.x-s)*h)+"px",this._87.style.right=parseInt((o-i.right)*h)+"px",this._87.style.display=""},_42:function(t,i,e,n){if(!t)return this._m10.style.display="none",void(this._m10.scale=0);var r=Math.min(i.y,e.y),s=Math.max(i.bottom,e.bottom),o=n/(s-r);this._m10.scale=o,this._m10.style.top=parseInt((i.y-r)*o)+"px",this._m10.style.bottom=parseInt((s-i.bottom)*o)+"px",this._m10.style.display=""}},ts.prototype={shape:null,initialize:function(){v(this,ts,"initialize"),this._m0x(),Or.initBindingProperties(this)},_m0x:function(){this.image=new Ir(this.$data.path),this.addChild(this.image,0),this.body=this.image},invalidateShape:function(){this.image.invalidateData(),this.invalidateRender()},_$t:function(t,i,e){var n=this._m36.onBindingPropertyChange(this,t,i,e);return n=Er.onBindingPropertyChange(this,t,i,e)||n,Or.onBindingPropertyChange(this,t,i,e)||n},doValidate:function(){this.body&&(this.image.data=this.data.path,this.body.$layoutByAnchorPoint=null!=this._2j,this.body.anchorPosition=this._2j);var t=this.$data.$location,i=0,e=0;t&&(i=t.x,e=t.y);var n=this.$x!=i||this.$y!=e;return n&&(this.$invalidateBounds=!0),this.$x=i,this.$y=e,wr.prototype.doValidate.call(this)||n},getLinkablePorts:function(){return this.data.linkablePorts},getLinkableBounds:function(){return this.bodyBounds},getDefaultPortPoint:function(t){return Lt(yt.CENTER_MIDDLE,t||this.getLinkableBounds())},getPortPoint:function(t,i){return t?((i=i||this.getLinkableBounds()).original?(e=Lt(t,i.original),i.rotate&&(e=Di(e.x,e.y,i.rotate,i.rotateX||0,i.rotateY||0)),e.x+=i.tx||0,e.y+=i.ty||0):e=Lt(t,i),e.port=t,e):this.getDefaultPortPoint(i);var e},getPortPoints:function(){var t=this.getLinkablePorts();if(t&&Array.isArray(t)){var i=[],e=this.getLinkableBounds();return t.forEach(function(t){i.push(this.getPortPoint(t,e))}.bind(this)),i}}},t(ts,wr),it(ts.prototype,{path:{get:function(){return this.data.path}},length:{get:function(){return this.data.length}}}),ts.prototype.addPoint=function(t,i,e){var n=this._i0(t,i),r=this.data,s=He(this.path,n.x,n.y,this.data.addSegmentType,e);if(!s)return!1;r.pathSegments=s.segments},is.prototype={_l0:function(){this._iv.style.visibility="visible"},_jg:function(){this._iv.style.visibility="hidden"},clear:function(){this._9c.clear(),this._m3a()},contains:function(t){return t instanceof Object&&t.id&&(t=t.id),this._9c.containsById(t)},_5l:function(t){Nn.setStyle(this._iv,"transform",t?"matrix("+t.join(",")+")":"")},addDrawable:function(t,i){if(i){var e={id:++m,drawable:t,scope:i};return this._9c.add(e),e}return t.id||(t.id=++m),this._9c.add(t),t},removeDrawable:function(t){if(!t.id)return this._9c.removeById(t);this._9c.remove(t)},_9c:null,invalidate:function(){this._m3a()},_m3a:function(){this._m1aseCanvas._6e||this._jc()},_i3:function(t,i){this._iv.setSize(t,i)},_jc:function(){var t=this._m1aseCanvas._scale,i=this.g;i._kh(),i.save(),this._m1aseCanvas._9v(i);for(var e=this._9c._j2,n=0,r=e.length;n<r;n++)i.save(),i.beginPath(),this._fw(i,e[n],t),i.restore();i.restore()},_fw:function(t,i,e){i instanceof Function?i(t,e):i.drawable instanceof Function&&i.scope&&i.drawable.call(i.scope,t,e)}},ot.ZOOM_ANIMATE=!0;var es=function(t){this._ke=t};function ns(t){this.graph=t,this.topCanvas=t.topCanvas}ot.ANIMATION_MAXTIME=600,ot.ANIMATION_TYPE=Ai.easeOut,es.prototype={_ke:null,_eq:null,_h3:function(t,i,e){this._l7();var n=Math.abs(t/2),r=Math.abs(i/2),s=Math.min(ot.ANIMATION_MAXTIME,.6*Math.max(n,r)*1e3);if(s<10)return!1;var o=t*s/3,h=i*s/3;this._ko(this._ke.tx+o,this._ke.ty+h,0,{duration:s,animationType:function(t){return-(2*Math.pow(t,1.5)-3*t)}},e)},_7l:function(t,i,e,n,r){this._eq&&this._eq._l7(),r&&(this.__delayRender=!0,this._ke.pauseRendering(!0)),this._4v(),this._eq=new wi(t,this,i,e),this._eq._6x=this._6x.bind(this),this._eq._kf(n)},_4v:function(){this._ke.onAnimationStart()},_6x:function(){this.__delayRender&&(this._ke.pauseRendering(!1),delete this.__delayRender),this._ke.onAnimationEnd()},_e0:function(){return this._eq&&this._eq._e0()},_l7:function(){this._eq&&this._eq._l7()},_il:function(t,i,e,n){var r=this._fromTX+(this._toTX-this._fromTX)*t,s=this._fromTY+(this._toTY-this._fromTY)*t,o=this._fromScale+(this._toScale-this._fromScale)*t;this._ke.translateTo(r,s,o,this.toInt)},_ko:function(t,i,e,n,r){this._l7();var s=this._ke,o=s.scale;if(e<=0&&(e=o),t!=s.tx||i!=s.ty||e!=o){var h,a,l;n instanceof Object&&(h=n.duration,a=n.maxTime,l=n.animationType);var _=s.tx,u=s.ty;if(!h)if(e!=o){var c=o<e?e/o:o/e;h=60*(c=Math.log(c)/Math.log(1.3))}else h=_t(t,i,_,u)/2;a=a||ot.ANIMATION_MAXTIME,l=l||ot.ANIMATION_TYPE,h=Math.min(a,h),this._fromTX=_,this._fromTY=u,this._fromScale=o,this._toTX=t,this._toTY=i,this._toScale=e,this._7l(this._il,h,l,r,e!=o)}}},ot.INTERACTION_HANDLER_SIZE_TOUCH=8,ot.INTERACTION_HANDLER_SIZE_DESKTOP=4,ot.INTERACTION_ROTATE_HANDLER_SIZE_TOUCH=30,ot.INTERACTION_ROTATE_HANDLER_SIZE_DESKTOP=20;var rs=Math.PI;function ss(t,i){this.interactions=t,this.defaultCursor=i||"default"}function os(t){c(this,os,arguments)}function hs(t){c(this,hs,arguments)}function as(t){this.rect=t.getBounds(),this.points=t.getPortPoints(),this.defaultPoint=t.getDefaultPortPoint()}function ls(t){c(this,ls,arguments)}function _s(t){c(this,_s,arguments)}function us(t){c(this,us,arguments)}function cs(t,i,e){var n=t.offsetWidth,r=t.offsetHeight;t.style.left=i-n/2+"px",t.style.top=e-r/2+"px"}function fs(){}ns.prototype={element:null,_$j:!1,setCurrentElement:function(t,i){this.element=t,i&&this.addDataPropertyChangeListener()},onDataPropertyChange:function(t){},addDataPropertyChangeListener:function(){this._$j||(this._$j=!0,this.graph.dataPropertyChangeDispatcher.addListener(this._1g,this))},removeDataPropertyChangeListener:function(){this._$j&&(this._$j=!1,this.graph.dataPropertyChangeDispatcher.removeListener(this._1g,this))},_1g:function(t){this.element&&t.source==this.element&&this.onDataPropertyChange(t)},onElementRemoved:function(t,i){var e,n,r;this.element&&(t==this.element||W(t)&&(e=t,n=this.element,r=!1,b(e,function(t){if(n==t)return!(r=!0)}),r))&&this.destroy(i)},onClear:function(t){this.element&&this.destroy(t)},destroy:function(t){delete this.element,this.removeDataPropertyChangeListener(),this.removeDrawable(),this.drawableList=null},invalidate:function(){this.topCanvas.invalidate()},removeDrawable:function(){this._l8ableId&&(this.topCanvas.removeDrawable(this._l8ableId),delete this._l8ableId,this.invalidate())},drawableList:null,addDrawable:function(){this._l8ableId||(this._l8ableId=this.topCanvas.addDrawable(this.draw,this).id,this.invalidate())},isShowing:function(){return this._l8ableId},draw:function(i,e){this.drawableList&&this.drawableList.forEach(function(t){t.draw(i,e)}),this.doDraw(i,e)},doDraw:function(t,i){},escapable:!0,onkeydown:function(t,i){this.escapable&&27==t.keyCode&&(X(t),this.destroy(i))}},Si.DrawableInteraction=ns,ss.prototype={defaultCursor:"default",getInteractionInstances:function(t){if(!this.interactions)return null;for(var i=[],e=0,n=this.interactions.length;e<n;e++){var r=this.interactions[e];r instanceof Function&&(r=new r(t)),r.install instanceof Function&&r.install(t),i.push(r)}return i}},os.prototype={_dt:null,_jh:null,destroy:function(t){v(this,os,"destroy",arguments),delete this._jh,delete this._9g,delete this._dt},doDraw:function(i,t){var e=this.points;e&&(i.beginPath(),e.forEach(function(t){this.drawPoint(i,t)},this),this.isClosePath&&i.closePath(),this.styleDraw(i))},styleDraw:function(t){var i=function(t,i){if(!t)return i;var e={};for(var n in t)e[n]=t[n];for(var n in i)void 0===e[n]&&(e[n]=i[n]);return e}(this.graph.interactionProperties,this.getDefaultDrawStyles(this.graph));i.lineWidth&&(t.lineWidth=i.lineWidth,i.lineCap&&(t.lineCap=i.lineCap),i.lineJoin&&(t.lineJoin=i.lineJoin),i.lineDash&&(t.lineDash=i.lineDash,t.lineDashOffset=i.lineDashOffset||0),t.strokeStyle=i.strokeStyle,t.stroke()),i.fillStyle&&(t.fillStyle=i.fillStyle,t.fill())},drawPoint:function(t,i,e){if(e)t.moveTo(i.x,i.y);else if(Si.isArray(i)){var n=i[0],r=i[1];t.quadraticCurveTo(n.x,n.y,r.x,r.y)}else t.lineTo(i.x,i.y)},setCurrentPoint:function(t){this.currentPoint=t},addPoint:function(t){this._jh||(this._jh=[],this.addDrawable()),this._jh.push(t),this.invalidate()}},t(os,ns),it(os.prototype,{currentPoint:{get:function(){return this._9g},set:function(t){this._9g=t,this.invalidate()}},prevPoint:{get:function(){return this._jh&&this._jh.length?this._jh[this._jh.length-1]:null}},points:{get:function(){if(this._9g&&this._jh&&this._jh.length)return this._jh.concat(this._9g)}}}),Si.DrawPathInteraction=os,hs.prototype={_i4:function(t,i){return this.start&&t!=this.start?this._du(t,i):this._m11(t,i)},_m11:function(t,i){return t instanceof Jn&&i.canLinkFrom(t)},_du:function(t,i){return t instanceof Jn&&i.canLinkTo(t,this.start)},_9d:function(t,i,e,n){if(this._m3urrentPort)return this._m3urrentPort.nearestPoint(e,n);var r=i.getUI(t);return r&&r.bodyBounds?r.bodyBounds.center:t.location},_m3b:function(t,i){this._kc&&(clearTimeout(this._kc),delete this._kc),this._kc=setTimeout(function(t){if(delete this._kc,this.start&&this.currentPoint){var i=t.x-this.currentPoint.x,e=t.y-this.currentPoint.y;Math.sqrt(i*i+e*e)*this.graph.scale<=2&&this.addPoint(this.currentPoint)}}.bind(this,this.toLogicalPoint(t)),ot.LONG_PRESS_INTERVAL)},destroy:function(t){v(this,hs,"destroy",arguments),this.start=null,this.startPort=null,this._kc&&(clearTimeout(this._kc),delete this._kc),this._m12=null,this._m3urrentPort=null},ondblclick:function(t,i){this.destroy(i)},finish:function(t,i,e,n){var r;this._jh&&2<=this._jh.length&&(this._jh.shift(),r=new ht,b(this._jh,function(t){if(Si.isArray(t)){var i=t[0],e=t[1];r.add(new je(Ii.SEGMENT_QUAD_TO,[i.x,i.y,e.x,e.y]))}else r.add(new je(Ii.SEGMENT_LINE_TO,[t.x,t.y]))},this)),i.createEdgeByInteraction(this.start,e,t,r,this.startPort,n),this.destroy(i)},onstart:function(t,i){if(this.start){var e=t.getData(),n=i.toLogical(t);this._du(e,i)?this.finish(t,i,e,new as(i.getUI(e)).nearestPoint(n.x,n.y).port):this.addPoint(n)}},startdrag:function(t,i){if(!this.start&&!t.responded){var e=t.getData();if(e&&this._m11(e,i)){t.responded=!0,this.start=e;var n=i.toLogical(t),r=this._9d(e,i,n.x,n.y);this.startPort=r.port,this.addPoint(r)}}},ondrag:function(t,i){this.onmousemove(t,i)},enddrag:function(t,i){if(this.start){var e=this._m12||t.getData();if(this._du(e,i)){var n=i.toLogical(t);this.finish(t,i,e,new as(i.getUI(e)).nearestPoint(n.x,n.y).port)}}},onrelease:function(t,i){ui(t)&&this.destroy(i)},_m12:null,onmousemove:function(t,i){var e,n,r,s,o,h,a=i.toLogical(t),l=(n=i,r=a.x,s=a.y,o=function(t){return this._i4(t,i)}.bind(this),n.forEachReverseVisibleUI(function(t){var i=t.data;if(i instanceof Si.Node&&(!o||!1!==o(i))&&t.uiBounds.intersectsPoint(r-t.x,s-t.y)&&t.hitTest(r,s,ot.SELECTION_TOLERANCE/n.scale))return h=i,!1}),h);l!=this._m12&&(this._m12=l,this._m3urrentPort=l?new as(i.getUI(l)):null,l?(this.addDrawable(),this.drawableList=[this._m3urrentPort]):this.drawableList=null,this.invalidate()),this._m3urrentPort&&(e=this._m3urrentPort.nearestPoint(a.x,a.y),this.invalidate()),this.start&&(this.currentPoint=e||a,ui(t)&&this._m3b(t,i))},toLogicalPoint:function(t){return this.graph.toLogical(t)},getDefaultDrawStyles:function(t){return{lineWidth:this.graph.getDefaultStyle(dr.EDGE_WIDTH),strokeStyle:this.graph.getDefaultStyle(dr.EDGE_COLOR),lineDash:this.graph.getDefaultStyle(dr.EDGE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(dr.EDGE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(dr.LINE_CAP),lineJoin:this.graph.getDefaultStyle(dr.LINE_JOIN)}}},t(hs,os),Si.CreateEdgeInteraction=hs,as.prototype.drawRect=function(t,i,e){t.beginPath(),t.rect(e.x-0,e.y-0,e.width+0,e.height+0),t.lineWidth=2/i,t.strokeStyle="#2898E0",t.stroke()},as.prototype.drawPoint=function(t,i,e){t.beginPath();var n=4/i;t.moveTo(e.x+n,e.y),t.arc(e.x,e.y,n,0,2*Math.PI,!1),t.lineWidth=1/i,e.marked?(t.strokeStyle="#1D4876",t.fillStyle="#E21667"):(t.strokeStyle="#2898E0",t.fillStyle="rgba(255, 255, 255, 0.8)"),t.fill(),t.stroke()},as.prototype.draw=function(i,e){var t=this.rect;this.drawRect(i,e,t),this.points&&this.points.forEach(function(t){this.drawPoint(i,e,t)}.bind(this))},as.prototype.nearestPoint=function(r,s,o){if(this.points){o=o||20;var h,a=o*=o;return this.points.forEach(function(t){t.marked&&(t.marked=!1);var i=t.x-r,e=t.y-s,n=i*i+e*e;n<o&&n<a&&(a=n,h=t)}),h&&(h.marked=!0),h||this.defaultPoint}return this.defaultPoint},ls.prototype={getDefaultDrawStyles:function(t){return{lineWidth:this.graph.getDefaultStyle(dr.SHAPE_STROKE),strokeStyle:this.graph.getDefaultStyle(dr.SHAPE_STROKE_STYLE),fillStyle:this.graph.getDefaultStyle(dr.SHAPE_FILL_COLOR)}},finish:function(t,i){if(this._jh&&this._jh.length){var e=this._jh,r=0,s=0,n=0;e.forEach(function(i){Si.isArray(i)?i.forEach(function(t){r+=i.x,s+=i.y,n++}):(r+=i.x,s+=i.y,n++)}),r/=n,s/=n;var o=[];e.forEach(function(t,i){if(0!=i)if(Si.isArray(t)){var e=t[0],n=t[1];o.push(new je(Ii.SEGMENT_QUAD_TO,[e.x-r,e.y-s,n.x-r,n.y-s]))}else o.push(new je(Ii.SEGMENT_LINE_TO,[t.x-r,t.y-s]));else o.push(new je(Ii.SEGMENT_MOVE_TO,[t.x-r,t.y-s]))}),this.createElement(t,o,r,s),this.destroy(i)}},startdrag:function(t,i){t.responded=!0},createElement:function(t,i,e,n){return this.graph.createShapeByInteraction(t,i,e,n)},onstart:function(t,i){var e=i.toLogical(t);this._dt=e,this.addPoint(e)},onmousemove:function(t,i){this._dt&&(this.currentPoint=i.toLogical(t))},ondblclick:function(t,i){if(this._dt){if(this._jh.length<3)return void this.destroy(i);delete this._jh[this._jh.length-1],this.finish(t,i)}},isClosePath:!0},t(ls,os),Si.CreateShapeInteraction=ls,_s.prototype={isClosePath:!1,createElement:function(t,i,e,n){return this.graph.createLineByInteraction(t,i,e,n)},getDefaultDrawStyles:function(){return{lineWidth:Cr[dr.SHAPE_STROKE],strokeStyle:Cr[dr.SHAPE_STROKE_STYLE],lineDash:this.graph.getDefaultStyle(dr.SHAPE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(dr.SHAPE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(dr.LINE_CAP),lineJoin:this.graph.getDefaultStyle(dr.LINE_JOIN)}}},t(_s,ls),Si.CreateLineInteraction=_s,us.prototype={destroy:function(t){v(this,us,"destroy",arguments),t.cursor="",this.start=null},doDraw:function(t,i){if(this.start&&this.currentPoint){var e,n;this.graph.interactionProperties&&(e=this.graph.interactionProperties.uiClass,n=this.graph.interactionProperties.edgeType),e=e||this.graph.edgeUIClass||Si.EdgeUI,n=n||this.graph.edgeType;var r=e.drawReferenceLine||Si.EdgeUI.drawReferenceLine,s=this.graph.getUI(this.start);s&&s.bodyBounds&&(s=s.bodyBounds.center,t.beginPath(),r(t,s,this.currentPoint,n),this.styleDraw(t))}},canLinkFrom:function(t,i){return t instanceof Jn&&i.canLinkFrom(t)},canLinkTo:function(t,i){return t instanceof Jn&&i.canLinkTo(t,this.start)},startdrag:function(t,i){var e=t.getData();this.canLinkFrom(e,i)&&(t.responded=!0,this.start=e,i.cursor="crosshair",this.addDrawable())},ondrag:function(t,i){this.start&&(Si.stopEvent(t),this.currentPoint=i.toLogical(t),this.invalidate())},enddrag:function(t,i){if(this.start){this.invalidate();var e=t.getData();this.canLinkTo(e,i)&&i.createEdgeByInteraction(this.start,e,t),this.destroy(i)}},getDefaultDrawStyles:function(){return{lineWidth:this.graph.getDefaultStyle(dr.EDGE_WIDTH),strokeStyle:this.graph.getDefaultStyle(dr.EDGE_COLOR),lineDash:this.graph.getDefaultStyle(dr.EDGE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(dr.EDGE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(dr.LINE_CAP),lineJoin:this.graph.getDefaultStyle(dr.LINE_JOIN)}}},t(us,os),Si.CreateSimpleEdgeInteraction=us,ot.LABEL_EDITOR_SUBMIT_WHEN_LOST_FOCUS=!1,fs.prototype={html:null,createHTML:function(){var i=y.createElement("textarea");i.className="Q-LabelEditor",i.style.position="absolute",i.style.textAlign="center",i.style.border="solid #08E 1px",i.style.padding="5px",i.style.boxShadow="0px 0px 10px rgba(40, 85, 184, 0.75)",i.style.display="none",i.style.overflow="hidden";var e=this;return i.oninput=function(t){e.onValueChange(t)},i.onkeydown=function(t){27!=t.keyCode||e.cancelEdit()},i.onkeypress=function(t){if(13==t.keyCode||10==t.keyCode){if(t.preventDefault(),t.altKey||t.ctrlKey||t.shiftKey)return function(t,i){if("number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd){var e=t.value,n=t.selectionStart;t.value=e.slice(0,n)+i+e.slice(t.selectionEnd),t.selectionEnd=t.selectionStart=n+i.length}else if(void 0!==y.selection){var r=y.selection.createRange();r.text=i,r.collapse(!1),r.select()}}(i,"\n"),void e.onValueChange(t);e.stopEdit()}},y.body.appendChild(i),i},setText:function(t,i){this.html.value=t||"",i&&(this.html.style.fontSize=i),function(t){if(L){var i=u.scrollX||u.pageXOffset,e=u.scrollY||u.pageYOffset;return t.select(),u.scrollTo(i,e)}t.select()}(this.html),this.onSizeChange(this.html)},onSizeChange:function(t){t.offsetWidth,t.offsetHeight;var i=function(t){var e=y.createElement("canvas").getContext("2d"),i=getComputedStyle(t,null),n=i.font;n=n||i.fontStyle+" "+i.fontSize+" "+i.fontFamily,e.font=n;var r=t.value.split("\n"),s=parseInt(i.fontSize),o=0,h=0;return Si.forEach(r,function(t){var i=e.measureText(t).width;o<i&&(o=i),h+=1.2*s}),{width:o,height:h}}(t);return t.style.width=i.width+30+"px",t.style.height=i.height+10+"px",i},onValueChange:function(t){var i=t.target;this.onSizeChange(i),i.style.left=i.x-i.offsetWidth/2+"px"},onClickOnWindow:function(t){t.target!=this.html&&(ot.LABEL_EDITOR_SUBMIT_WHEN_LOST_FOCUS?this.stopEdit():this.cancelEdit())},startEdit:function(t,i,e,n,r){this.html||(this.html=this.createHTML()),this.stopEditWhenClickOnWindow||(this.stopEditWhenClickOnWindow=function(t){this.onClickOnWindow(t)}.bind(this)),u.addEventListener("mousedown",this.stopEditWhenClickOnWindow,!0),this.callback=r,this.html.x=t,this.html.y=i,this.html.style.display="block",cs(this.html,t,i),this.setText(e,n||10),cs(this.html,t,i)},isEditing:function(){return"none"!=this.html.style.display},cancelEdit:function(){this.stopEdit(!0)},stopEdit:function(t){if(this.isEditing()){u.removeEventListener("mousedown",this.stopEditWhenClickOnWindow);var i=this.html.value;!t&&this.callback&&this.callback(i),this.html.style.display="none",this.html.value=null,this.callback=null}},destroy:function(){this.html&&y.body.removeChild(this.html)}},Si.LabelEditor=fs;function ds(t){this.graph=t}ds.prototype={destroy:function(t){t.labelEditor&&(t.labelEditor.destroy(),delete t.labelEditor)},ondblclick:function(t,i){var e=t.getData();if(e){if(!1!==e.dblclickable){if(i.editable&&i.isEditable(e)){var n=i.hitTest(t);if(n instanceof Sr&&!1!==n.editable){var r=i.labelEditor;r||(i.labelEditor=r=new fs);var s=n.getBounds();return s=function(t,i,e){t+=u.pageXOffset,i+=u.pageYOffset;var n=e.getBoundingClientRect();return{x:t+n.left,y:i+n.top}}((s=i.toCanvas(s.x+s.width/2,s.y+s.height/2)).x,s.y,i.html),void i.startLabelEdit(e,n,r,s)}}var o=e instanceof hr,h=e instanceof Vn&&e.hasEdgeBundle();if(!e._3v||!gi(t)&&(o||h))return o?(e.expanded=!e.expanded,void this.graph.onInteractionEvent(new Rs(this.graph,Rs.GROUP_EXPANDED,t,e))):void(h&&this.graph.reverseExpanded(e)&&this.graph.onInteractionEvent(new Rs(this.graph,Rs.EDGE_BUNDLE,t,e)));i.currentSubNetwork=e}}else{if(i.currentSubNetwork)return void i.upSubNetwork();if(i.enableDoubleClickToOverview){var a=i.resetScale||1;Math.abs(i.scale-a)<1e-4?i.zoomToOverview():i.moveToCenter(a)}}}};function Es(t){this.graph=t}Es.prototype={onkeydown:function(t,i){if(i.editable){var e=t.keyCode;if(8==e||46==e||127==e)return i.removeSelectionByInteraction(t),void q(t);gi(t)&&(67!=e&&86!=e&&90!=e&&89!=e||q(t))}}},Si.EditInteraction=Es;function gs(t){this.graph=t}gs.prototype={onkeydown:function(t,i){if(t.metaKey&&83==t.keyCode){var e=i.exportImage(i.scale,i.viewportBounds),n=u.open().document;n.title="export image - "+e.width+" x "+e.height;var r=n.createElement("img");r.src=e.data,n.body.appendChild(r),q(t)}}};function vs(t){this.graph=t}function ps(t){this.graph=t}function ms(t){c(this,ms,arguments),this.handlerSize=G?8:5}function ys(t){return t.type==Be||t.type==Ge}ps.prototype={onkeydown:function(t,i){gi(t)||(37==t.keyCode?(this._65(i,1,0),q(t)):39==t.keyCode?(this._65(i,-1,0),q(t)):38==t.keyCode?(this._65(i,0,1),q(t)):40==t.keyCode&&(this._65(i,0,-1),q(t)))},_65:function(t,i,e){t._m03(i,e)},onstart:function(t,i){this._kf&&this.destroy(i)},_kf:!(vs.prototype={destroy:function(t){delete this.draggingElements,delete this.currentDraggingElement},_2b:function(i){var e=new ht;return i.selectionModel.forEach(function(t){i.isMovable(t)&&i.isVisible(t)&&e.add(t)},this),e},onstart:function(t,i){this.currentDraggingElement&&this.destroy(i)},startdrag:function(t,i){if(!(t.responded||t.touches&&1!=t.touches.length)){var e=t.getData();if(e&&i.isSelected(e)&&i.isMovable(e)){t.responded=!0,this.currentDraggingElement=e,this.draggingElements=this._2b(i);var n=new Rs(i,Rs.ELEMENT_MOVE_START,t,this.currentDraggingElement,this.draggingElements.datas);!1!==i.beforeInteractionEvent(n)?i.onInteractionEvent(n):this.destroy(i)}else this.destroy(i)}},ondrag:function(t,i){if(this.currentDraggingElement)if(t.touches&&1!=t.touches.length)this.enddrag(t,i);else{X(t);var e=t.dx,n=t.dy,r=i.scale;e/=r,n/=r;var s=new Rs(i,Rs.ELEMENT_MOVING,t,this.currentDraggingElement,this.draggingElements.datas);i.moveElements(this.draggingElements.datas,e,n),i.onInteractionEvent(s)}},enddrag:function(t,i){if(this.currentDraggingElement){if(this.draggingElements&&this.draggingElements.length){if(t.shiftKey){var r,e=i.toLogical(t),s=e.x,o=e.y;i.forEachReverseVisibleUI(function(t){var i=t.data;if(!this.draggingElements.contains(i)&&t.uiBounds.intersectsPoint(s-t.x,o-t.y)&&t.hitTest(s,o,1)){if(i instanceof Si.Edge){if(!i.enableSubNetwork)return;for(var e=this.draggingElements.length;0<e--;){var n=this.draggingElements.get(e);if(n instanceof Si.Node&&n.linkedWith(i))return}return r=i,!1}return(i.enableSubNetwork||i._hx()&&i.expanded)&&(r=i),!1}},this),r&&this.draggingElements.forEach(function(t){for(var i=t.parent;i;){if(this.draggingElements.contains(i))return;i=i.parent}t.parent=r},this)}var n=new Rs(i,Rs.ELEMENT_MOVE_END,t,this.currentDraggingElement,this.draggingElements.datas);i.onInteractionEvent(n)}this.destroy(i)}},onpinch:function(t,i){this.currentDraggingElement&&this.enddrag(t,i)},step:1,onkeydown:function(t,i){var e,n;if(gi(t)&&(37==t.keyCode?e=-1:39==t.keyCode?e=1:38==t.keyCode?n=-1:40==t.keyCode&&(n=1),e||n)){var r=this._2b(i).datas;if(0!=r.length){q(t),e=e||0,n=n||0;var s=this.step/i.scale,o=new Rs(i,Rs.ELEMENT_MOVE_END,t,null,r);i.moveElements(r,e*s,n*s),i.onInteractionEvent(o)}}}}),startdrag:function(t,i){if(!t.responded){i.stopAnimation(),t.responded=!0,this._kf=!0,i.cursor=ei;var e=new Rs(i,Rs.PAN_START,t);i.onInteractionEvent(e)}},ondrag:function(t,i){this._kf&&i.translate(t.dx||0,t.dy||0)},enddrag:function(t,i){if(this._kf){if(!1!==i.enableInertia){var e=t.vx,n=t.vy;(.1<Math.abs(e)||.1<Math.abs(n))&&i._m03(e,n)}this.destroy(i);var r=new Rs(i,Rs.PAN_END,t);i.onInteractionEvent(r)}},startpinch:function(t,i){i.pauseRendering(!0)},onpinch:function(t,i){this._kf=!0;var e=t.dScale;if(e){var n=i.globalToLocal(t.center);i.zoomAt(e,n.x,n.y,!1)}},endpinch:function(t,i){i.pauseRendering(!1)},destroy:function(t){this._kf=!1,t.cursor=null}},ms.prototype={onDataPropertyChange:function(t){this.graph.callLater(function(){this._je()},this)},destroy:function(){this.graph.cursor=null,this.element&&delete this.element._editting,this._mousePressed=!1,delete this._9f,delete this._9g,delete this._m3anEdit,v(this,ms,"destroy",arguments)},_9f:null,_5n:function(t){this._9f=t,this.invalidate()},isEndPointEditable:function(t,i){return this.graph.isEndPointEditable(t,i)},drawPoint:function(t,i,e){i.isEndPoint&&!this.isEndPointEditable(this.element,i.isFrom)||(t.beginPath(),i.isControlPoint?t.rect(i.x-this.handlerSize/e,i.y-this.handlerSize/e,this.handlerSize/e*2,this.handlerSize/e*2):t.arc(i.x,i.y,this.handlerSize/e,0,2*Math.PI,!1),t.lineWidth=1/e,t.lineDash=[],t.strokeStyle="#888",t.fillStyle="rgba(255, 255, 0, 0.8)",t.stroke(),t.fill())},_fy:function(t,i,e,n){n?t.moveTo(i,e):t.lineTo(i,e)},doDraw:function(t,i){this.drawLine(t,i)},drawLine:function(o,e){if(this._9f&&this._9f.length){var t=this._9f;o.save(),this.element instanceof Qn&&(o.translate(this.element.x,this.element.y),this.element.rotate&&o.rotate(this.element.rotate));var h,a=[];o.beginPath();var l=t.length;t.forEach(function(t,i){if(t.type!=Ii.SEGMENT_CLOSE)for(var e=!i||i==l-1,n=0,r=t.points;n+1<r.length;){var s={x:r[n],y:r[n+1],isControlPoint:this._6o(t,n)};e&&(s.isEndPoint=!0,s.isFrom=0==i),a.push(s),this._fy(o,s.x,s.y,null==h),h=s,n+=2}},this),o.lineWidth=1/e,o.lineDash=[2/e,3/e],o.strokeStyle="#555",o.stroke(),a.forEach(function(t,i){this.drawPoint(o,t,e,i)},this),o.restore()}},invalidate:function(){this.topCanvas.invalidate()},_38:function(t){if(this.element!=t&&(this.element&&this.destroy(),t&&this.isEditable(t))){var i=this._5o(t,this.graph);i&&(this.setCurrentElement(t,!0),t._editting=!0,this._m3anEdit=!0,this._5n(i),this.addDrawable())}},_je:function(){if(this.isShowing()&&this.element){var t=this._5o(this.element,this.graph);t?this._5n(t):this.destroy(this.graph)}},_5o:function(t,i){if(i.isEditable(t)){var e=t.pathSegments||[];e instanceof ht&&(e=e.toDatas());var n=i.getUI(t);if(n instanceof Si.EdgeUI){var r=n.getEndPointBounds(i.getUI(t.fromAgent)),s=n.getEndPointBounds(i.getUI(t.toAgent)),o=r.center,h=s.center,a=n.getStyle(dr.EDGE_FROM_OFFSET),l=n.getStyle(dr.EDGE_TO_OFFSET);a&&(o.x+=a.x||0,o.y+=a.y||0),l&&(h.x+=l.x||0,h.y+=l.y||0),e.splice(0,0,new Si.PathSegment(Ii.SEGMENT_MOVE_TO,[o.x,o.y])),e.push(new Si.PathSegment(Ii.SEGMENT_MOVE_TO,[h.x,h.y]))}return e}},_i0:function(t,i){var e={x:t-=this.element.x,y:i-=this.element.y};return this.element.rotate&&Gr(e,-this.element.rotate),e},isPointAddable:function(t,i){return!0},isPointRemovable:function(t,i,e){return!0},onclick:function(t,i){if(i.editable&&t.altKey&&this.element){var e=this._g0(t,i);if(e&&e.isControlPoint&&!1!==this.isPointRemovable(this.element,e,i))0<=e.index&&(this.element.removePathSegmentByIndex(e.index),(n=new Rs(i,Rs.POINT_REMOVE,t,this.element)).point=e,i.onInteractionEvent(n));else if(this.element==t.getData()&&!1!==this.isPointAddable(this.element,i)){var n,r=i.toLogical(t);!1!==i.getUI(this.element).addPoint(r.x,r.y,this.handlerSize||2)&&((n=new Rs(i,Rs.POINT_ADD,t,this.element)).point=r,i.onInteractionEvent(n))}}},isEditable:function(t){return this.graph.isEditable(t)&&(t instanceof Qn||t instanceof Vn&&(!t.isLooped()||t.hasPathSegments()))},ondblclick:function(t,i){if(i.editable){var e=t.getData();e&&e!=this.element&&!e._editting?this._38(e):this.destroy(i)}else this.element&&this.destroy(i)},onstart:function(t,i){if(this._mousePressed=!0,i.editable){if(!t.responded)if(this.element&&this._g0(t,i))t.responded=!0;else{var e=t.getData();e&&i.isResizable(e)&&e instanceof Qn?this.element&&e!=this.element&&this.destroy():this._38(e)}}else this.element&&this.destroy(i)},onrelease:function(t,i){this._mousePressed=!1,this.element&&(this._m3anEdit=!0)},_9g:null,_g0:function(t,l){var _=l.toLogical(t);this.element instanceof Qn&&(_=this._i0(_.x,_.y));var u,i=l.scale,c=this.handlerSize/i,f=this._9f,d=f.length,E=this.element instanceof Si.Edge;if(f.forEach(function(t,i){for(var e=0,n=t.points;e+1<n.length;){var r=n[e],s=n[e+1];if(_t(_.x,_.y,r,s)<c){if(u={oldPoints:n.slice(0),segment:t,index:i,pointIndex:e},E&&--u.index,E&&!ys(t)&&(0==i||i==f.length-1)){u.isEndPoint=!0;var o=0==i,h=(u.isFrom=o)?Si.Styles.EDGE_FROM_OFFSET:Si.Styles.EDGE_TO_OFFSET,a=l.getStyle(this.element,h)||{};u.oldPoints=[a.x||0,a.y||0]}return this._6o(t,e)&&(u.isControlPoint=!0,0<i&&(u.prevSegment=f instanceof ht?f.getByIndex(i-1):f[i-1]),i+1<d&&(u.nextSegment=f instanceof ht?f.getByIndex(i+1):f[i+1],u.nextSegment.points&&(u.oldNextPoints=u.nextSegment.points.slice(0)))),!1}e+=2}},this),!u||!u.isEndPoint||this.isEndPointEditable(this.element,u.isFrom))return u},_6o:function(t,i){return i==t.points.length-2},startdrag:function(t,i){if(this.element&&this._m3anEdit&&(this._9g=this._g0(t,i),this._9g)){this.removeDrawable(),t.responded=!0;var e=new Rs(i,Rs.POINT_MOVE_START,t,this.element);e.point=this._9g,i.onInteractionEvent(e)}},onkeyup:function(t,i){this._mousePressed&&16!=!t.keyCode&&this.element&&this._9g&&this._9g.delta&&this._m3c(this._9g.delta.x,this._9g.delta.y,i,t,!1)},onkeydown:function(t,i){v(this,ms,"onkeydown",arguments),this._mousePressed&&this.element&&this._9g&&t.shiftKey&&this._9g.delta&&this._m3c(this._9g.delta.x,this._9g.delta.y,i,t,!0)},_m3c:function(t,i,e,n,r){var s=this._9g,o=this.element,h=s.oldPoints,a=s.segment;if(s.isEndPoint){var l,_=s.isFrom?Si.Styles.EDGE_FROM_OFFSET:Si.Styles.EDGE_TO_OFFSET,u={x:h[0]+t,y:h[1]+i};return o.setStyle(_,u),(l=new Rs(e,Rs.POINT_MOVING,n,o)).point=s,void e.onInteractionEvent(l)}if(r&&s.isControlPoint){var c=h[h.length-2]+t,f=h[h.length-1]+i,d=s.prevSegment,E=s.nextSegment,g=20/e.scale,v=Number.MAX_VALUE,p=v,m=v,y=v;d&&(d=d.lastPoint,v=Math.abs(c-d.x),m=Math.abs(f-d.y)),E&&(E=E.lastPoint,p=Math.abs(c-E.x),y=Math.abs(f-E.y)),v<g&&v<p?t+=d.x-c:p<g&&p<v&&(t+=E.x-c),m<g&&m<y?i+=d.y-f:y<g&&y<m&&(i+=E.y-f)}if(s.isControlPoint&&ys(a)){for(var T=a.points.length-4;T<a.points.length;){var O=h[T]+t,A=h[T+1]+i;a.points[T]=O,a.points[T+1]=A,T+=2}if(s.nextSegment&&ys(s.nextSegment)){var w=s.oldNextPoints;O=w[0]+t,A=w[1]+i,s.nextSegment.points[0]=O,s.nextSegment.points[1]=A}}else O=h[T=s.pointIndex]+t,A=h[T+1]+i,a.points[T]=O,a.points[T+1]=A;o.firePathChange(),(l=new Rs(e,Rs.POINT_MOVING,n,o)).point=s,e.onInteractionEvent(l)},ondrag:function(t,i){if(this.element&&this._9g){var e=this._9g,n=this.element,r=t.totalDeltaX,s=t.totalDeltaY,o=i.scale;if(r/=o,s/=o,n.rotate){var h={x:r,y:s};Gr(h,-n.rotate),r=h.x,s=h.y}e.delta={x:r,y:s},this._m3c(r,s,i,t,t.shiftKey)}},enddrag:function(t,i){if(this.element&&this._9g){this.addDrawable(),this._je();var e=new Rs(i,Rs.POINT_MOVE_END,t,this.element);e.point=this._9g,i.onInteractionEvent(e)}},onmousemove:function(t,i){this.element&&(i.cursor=t.altKey&&(this._g0(t,i)||this.element==t.getData())?"crosshair":null)}},t(ms,ns),ot.SELECTION_RECTANGLE_STROKE=1,ot.SELECTION_RECTANGLE_STROKE_COLOR=Q(3724541951),ot.SELECTION_RECTANGLE_FILL_COLOR=Q(1430753245),Ii.RECTANGLE_SELECTION_MODE_INTERSECT="intersect",Ii.RECTANGLE_SELECTION_MODE_CONTAIN="contain",ot.RECTANGLE_SELECTION_MODE=Ii.RECTANGLE_SELECTION_MODE_INTERSECT;function Ts(t){this.graph=t,this.topCanvas=t.topCanvas}Ts.prototype={onstart:function(t,i){this._kf&&this.destroy(i)},startdrag:function(t,i){t.responded||(t.responded=!0,this._kf=i.toLogical(t),i.cursor="crosshair",this._12Id=this.topCanvas.addDrawable(this._12,this).id)},ondrag:function(t,i){if(this._kf){X(t),this._end=i.toLogical(t),this.invalidate();var e=new Rs(i,Rs.SELECT_START,t,i.selectionModel);i.onInteractionEvent(e)}},enddrag:function(t,i){if(this._kf){this._fbTimer&&(clearTimeout(this._fbTimer),this._fbTimer=null),this._fb(!0),this.destroy(i);var e=new Rs(i,Rs.SELECT_END,t,i.selectionModel);i.onInteractionEvent(e)}},onpinch:function(t,i){this._kf&&this.enddrag(t,i)},_12:function(t,i){t.strokeStyle=ot.SELECTION_RECTANGLE_STROKE_COLOR,t.fillStyle=ot.SELECTION_RECTANGLE_FILL_COLOR,t.lineWidth=ot.SELECTION_RECTANGLE_STROKE/i;var e=this._kf.x,n=this._kf.y;t.rect(e,n,this._end.x-e,this._end.y-n),t.fill(),t.stroke()},invalidate:function(){this.invalidateFlag?this.topCanvas.invalidate():(this.invalidateFlag=!0,this._fbTimer=setTimeout(this._fb.bind(this),100))},_fb:function(t){if(this.invalidateFlag=!1,this._fbTimer=null,!this._kf||I&&!t)this.topCanvas.invalidate();else{var i=Math.min(this._kf.x,this._end.x),e=Math.min(this._kf.y,this._end.y),n=Math.abs(this._kf.x-this._end.x),r=Math.abs(this._kf.y-this._end.y);if(n&&r){var s=[],o=this.graph.scale,h=this.graph.rectangleSelectionMode;if(this.graph.forEachVisibleUI(function(t){t._hy&&this.graph.isSelectable(t.$data)&&this.inRectangle(i,e,n,r,t,o,h)&&s.push(t.data)}.bind(this)),this.graph.selectionModel.set(s),this.topCanvas.invalidate(),!t){var a=new Rs(this.graph,Rs.SELECT_BETWEEN,null,this.graph.selectionModel);this.graph.onInteractionEvent(a)}}else this.graph.selectionModel.clear()}},inRectangle:function(t,i,e,n,r,s,o){var h=r.getBounds();return!!vt(t,i,e,n,h.x,h.y,h.width,h.height)||(o=o||ot.RECTANGLE_SELECTION_MODE)!=Ii.RECTANGLE_SELECTION_MODE_CONTAIN&&function(t,i,e,n,r,s){t-=r.$x,i-=r.$y;var o=r._fu.intersection(t,i,e,n);if(!o)return!1;t=o.x*s,i=o.y*s,e=o.width*s,n=o.height*s,e=Math.round(e)||1,n=Math.round(n)||1;var h=Gi(),a=h.canvas;a.width<e||a.height<n?(a.width=e,a.height=n):(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,e,n)),h.setTransform(1,0,0,1,-t-r.$x*s,-i-r.$y*s),h.scale(s,s),r._jc(h,1);var l=zi(h,0,0,e,n);if(!l)return!1;for(var _=(l=l.data).length/4;0<_--;)if(l[4*_-1]>ze)return!0;return!1}(t,i,e,n,r,s)},destroy:function(t){this._kf=null,t.cursor=null,this._12Id&&(this.topCanvas.removeDrawable(this._12Id),delete this._12Id,this.topCanvas.invalidate())}};var Os=E({super:Ts,onstart:null,startdrag:null,ondrag:null,enddrag:null,accept:function(t,i,e){return!1!==e.enableRectangleSelectionByRightButton},oncontextmenu:function(t,i){i.popupmenu||X(t)},onstart2:function(t,i){Ts.prototype.onstart.apply(this,arguments)},startdrag2:function(t,i){t.responded||(i.popupmenu&&i.popupmenu.hide instanceof Function&&i.popupmenu.hide(),Ts.prototype.startdrag.apply(this,arguments))},ondrag2:function(t,i){Ts.prototype.ondrag.apply(this,arguments)},enddrag2:function(t,i){Ts.prototype.enddrag.apply(this,arguments)}});function As(t){c(this,As,arguments),this.handlerSize=G?8:4,this._rotateHandleLength=G?30:20}function ws(t,i){var e=new pt;return e.addPoint(nn.call(t,{x:i.x,y:i.y})),e.addPoint(nn.call(t,{x:i.x+i.width,y:i.y})),e.addPoint(nn.call(t,{x:i.x+i.width,y:i.y+i.height})),e.addPoint(nn.call(t,{x:i.x,y:i.y+i.height})),e}rs=Math.PI/4,As.prototype={_dv:!1,_dw:!1,onDataPropertyChange:function(t){this.graph.callLater(function(){this._9i()},this)},ondblclick:function(t,i){this.element&&this.destroy(i)},destroy:function(t){t.cursor=null,delete this._m3d,delete this._m1ody,delete this._9g,delete this._m3anEdit,delete this._jh,delete this._rotatePoint,delete this._dw,delete this._dv,delete this._insets,v(this,As,"destroy",arguments)},_m3d:null,_jh:null,_89:function(t){this._m3d=t;var i=this._m3d.x,e=this._m3d.y,n=this._m3d.width,r=this._m3d.height;if(this.element instanceof hr&&this.element.expanded,this._dw){var s=[];s.push({x:i,y:e,p:yt.LEFT_TOP,cursor:"nwse-resize",rotate:5*rs}),s.push({x:i+n/2,y:e,p:yt.CENTER_TOP,cursor:"ns-resize",rotate:6*rs}),s.push({x:i+n,y:e,p:yt.RIGHT_TOP,cursor:"nesw-resize",rotate:7*rs}),s.push({x:i,y:e+r/2,p:yt.LEFT_MIDDLE,cursor:"ew-resize",rotate:4*rs}),s.push({x:i,y:e+r,p:yt.LEFT_BOTTOM,cursor:"nesw-resize",rotate:3*rs}),s.push({x:i+n,y:e+r/2,p:yt.RIGHT_MIDDLE,cursor:"ew-resize",rotate:0}),s.push({x:i+n/2,y:e+r,p:yt.CENTER_BOTTOM,cursor:"ns-resize",rotate:2*rs}),s.push({x:i+n,y:e+r,p:yt.RIGHT_BOTTOM,cursor:"nwse-resize",rotate:rs}),this._jh=s}this._dv?this._rotatePoint={x:i+n/2,y:e,cursor:"url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFVJREFUeNpi/P//PwMlgBGfAYyMIOn/jGQZANIMoskyAKYZGeAyiGgX4PIOSWGAzRBGUmMBw1CqGUBMlA1yA4gxhKhYwBnfpKQDqqREquRGYgBAgAEAD8h/4adTIzwAAAAASUVORK5CYII=) 8 8,crosshair"}:this._rotatePoint=null,this.invalidate()},_dy:function(t,i,e,n){t.beginPath();var r=(this.handlerSize-1)/n;t.rect(i-r,e-r,2*r,2*r),t.lineWidth=1/n,t.lineDash=[],t.strokeStyle="#888",t.fillStyle="rgba(255, 255, 255, 0.8)",t.stroke(),t.fill()},_5q:function(t,i,e,n,r,s){r=r||this.handlerSize,s=s||"rgba(0, 255, 0, 1)",t.beginPath(),r/=n,t.arc(i,e,r,0,2*Math.PI,!1),t.lineWidth=1/n,t.lineDash=[],t.strokeStyle="#888",t.fillStyle=s,t.stroke(),t.fill()},_i0:function(t,i){var e={x:t-=this.element.x,y:i-=this.element.y};return this.element.rotate&&Gr(e,-this.element.rotate),e},doDraw:function(i,e){if(this._m3d){if(i.save(),i.translate(this.element.x,this.element.y),this.element.rotate&&i.rotate(this.element.rotate),this._rotatePoint){this._5q(i,0,0,e,3,"#FF0");var t=this._rotatePoint.x,n=this._rotatePoint.y-this._rotateHandleLength/e;i.beginPath(),i.moveTo(t,this._rotatePoint.y),i.lineTo(t,n),i.lineWidth=1/e,i.strokeStyle="#555",i.stroke(),this._5q(i,t,n,e)}if(this._jh){var r=this._m3d.x,s=this._m3d.y,o=this._m3d.width,h=this._m3d.height;i.beginPath(),i.rect(r,s,o,h),i.lineWidth=1/e,i.lineDash=[2/e,3/e],i.strokeStyle="#555",i.stroke(),b(this._jh,function(t){this._dy(i,t.x,t.y,e)},this)}i.restore()}},_9i:function(){if(this.isShowing()&&this.element){var t=this.graph.getUI(this.element);this._m1ody=t.body;var i=ws(this._m1ody,this._m1ody._j4),e=ws(this._m1ody,this._m1ody._83);this._insets=new mt(i.y-e.y,i.x-e.x,e.bottom-i.bottom,e.right-i.right),this._89(e)}},_m13:function(t,i,e){return i.isResizable(t)},_m15:function(t,i){return(!(t instanceof hr)||!t.expanded)&&i.isRotatable(t)},_m3e:function(t,i){return t instanceof Jn&&i.isEditable(t)},onstart:function(t,i){if(i.editable){if(!t.responded){var e=i.getUI(t),n=t.getData();if(n!=this.element){if(this.element){if(this._g0(t,i))return void(t.responded=!0);this.destroy(i)}if(n&&!n._editting&&this._m3e(n,i)){var r=this._m13(n,i,e),s=this._m15(n,i,e);(r||s)&&(this.setCurrentElement(n,!0),this.addDrawable(),this._dw=r,this._dv=s,this._9i())}}}}else this.element&&this.destroy(i)},onrelease:function(t,i){this.element&&(this._m3anEdit=!0,this.addDrawable(),i.callLater(function(){this._9i()},this))},_9g:null,_g0:function(t,i){var e=i.toLogical(t);e=this._i0(e.x,e.y);var n,r=i.scale,s=this.handlerSize/r;if(this._rotatePoint){var o=this._rotatePoint.x,h=this._rotatePoint.y-this._rotateHandleLength/r;if(_t(e.x,e.y,o,h)<s)return this._rotatePoint}if(this._jh&&this._jh.length)return b(this._jh,function(t,i){if(_t(e.x,e.y,t.x,t.y)<s)return n=t,!1},this),n},onmousemove:function(t,i){if(this.element){var e=this._g0(t,i);if(e)if(e!=this._rotatePoint&&this.element.rotate){var n=e.rotate+this.element.rotate;i.cursor=function(t){t%=2*Math.PI;var i=Math.round(t/rs);return 0==i||4==i?"ew-resize":1==i||5==i?"nwse-resize":2==i||6==i?"ns-resize":"nesw-resize"}(n)}else i.cursor=e.cursor;else i.cursor=null}},startdrag:function(t,i){if(this.element&&(this.removeDrawable(),this._m3anEdit&&(this._9g=this._g0(t,i),this._9g))){var e;if(t.responded=!0,this._9g==this._rotatePoint)return this._9g.start=i.toLogical(t),this._9g.rotate=this.element.rotate||0,(e=new Rs(i,Rs.ROTATE_START,t,this.element)).value=this.element.rotate,void i.onInteractionEvent(e);(e=new Rs(i,Rs.RESIZE_START,t,this.element)).point=this._9g,i.onInteractionEvent(e)}},_6p:function(t,o,h,i,e,n){var r=this._m3d,a=r.x,l=r.y,s=r.width,_=r.height;n&&(i!=s?e=i*_/s:i=e*s/_);var u=t.path.segments,c=i/s,f=e/_,d=-a*c+o,E=-l*f+h;u.forEach(function(t){if(t.type!=Ii.SEGMENT_CLOSE){var i=t.points;if(i&&i.length)for(var e=0,n=i.length;e<n;e+=2){var r=i[e],s=i[e+1];i[e]=(r-a)*c+o-d,i[e+1]=(s-l)*f+h-E}}}),this._m3d.set(o-d,h-E,i,e),t.setLocation(t.x+d,t.y+E),t.firePathChange()},_9k:function(t,i,e,n,r,s){this._m3d.set(i,e,n,r),t.minSize={x:i,y:e,width:n,height:r}},_44:function(t,i,e,n,r){if(this.element instanceof hr&&this.element.expanded)return this._9k(this.element,t,i,e,n,r);if(this.element instanceof Qn)return this._6p(this.element,t,i,e,n,r);var s=this._m1ody instanceof Sr;if(!s&&r){var o=this._m3d,h=this._m1ody.originalBounds;e!=o.width?n=e*h.height/h.width:e=n*h.width/h.height}var a=this.element.anchorPosition,l=new dt(e-this._insets.left-this._insets.right,n-this._insets.top-this._insets.bottom);if(l.width<1&&(e=this._insets.left+this._insets.right+1,l.width=1),l.height<1&&(n=this._insets.top+this._insets.bottom+1,l.height=1),s?this.element.setStyle(dr.LABEL_SIZE,l):this.element.size=l,a){var _=(c=St(a,e,n)).x+t-(this._m1ody.offsetX||0),u=c.y+i-(this._m1ody.offsetY||0);this._m3d.set(t-_,i-u,e,n),this.element.rotate&&(_=(c=Gr({x:_,y:u},this.element.rotate)).x,u=c.y),this.element.x+=_,this.element.y+=u}else{var c;_=this._m3d.x*e/this._m3d.width-t,u=this._m3d.y*n/this._m3d.height-i,this._m3d.set(t+_,i+u,e,n),this.element.rotate&&(_=(c=Gr({x:_,y:u},this.element.rotate)).x,u=c.y),this.element.x-=_,this.element.y-=u}},ondrag:function(t,i){if(this.element&&this._9g){if(this._9g==this._rotatePoint){var e=(E=(r=i.toLogical(t)).x,g=r.y,v=this.element.x,p=this.element.y,m=this._9g.start.x,y=this._9g.start.y,T=!0,O=ae(v,p,E,g)-ae(v,p,m,y),T||(O<0&&(O=-O),O>Math.PI&&(O-=Math.PI)),O);e+=this._9g.rotate||0,t.shiftKey&&(e=Math.round(e/Math.PI*4)*Math.PI/4);var n=this.element.rotate;return this.element.rotate=e%(2*Math.PI),(a=new Rs(i,Rs.ROTATING,t,this.element)).oldValue=n,a.value=this.element.rotate,void i.onInteractionEvent(a)}var r,s=t.dx,o=t.dy,h=i.scale;s/=h,o/=h,this.element.rotate&&(Gr(r={x:s,y:o},-this.element.rotate),s=r.x,o=r.y);var a,l=this._9g.p,_=this._m3d,u=_.x,c=_.y,f=_.width,d=_.height;l.horizontalPosition==Tt?f<=s?(u+=f,f=s-f||1):(u+=s,f-=s):l.horizontalPosition==Ot&&(f<=-s?u-=f=-s-f||1:f+=s),l.verticalPosition==At?d<=o?(c+=d,d=o-d||1):(c+=o,d-=o):l.verticalPosition==wt&&(d<=-o?c-=d=-o-d||1:d+=o),this._44(u,c,f,d,t.shiftKey),(a=new Rs(i,Rs.RESIZING,t,this.element)).point=this._9g,i.onInteractionEvent(a)}var E,g,v,p,m,y,T,O},enddrag:function(t,i){if(this.element&&this._9g){var e;if(this._9g==this._rotatePoint)return(e=new Rs(i,Rs.ROTATE_END,t,this.element)).value=this.element.rotate,void i.onInteractionEvent(e);(e=new Rs(i,Rs.RESIZE_END,t,this.element)).point=this._9g,i.onInteractionEvent(e)}}},t(As,ns),Si.ResizeInteraction=As;function bs(t){this.graph=t}function Ls(){}bs.prototype={onstart2:function(t,i){this.onstart(t,i)},onstart:function(t,i){if(!t.responded){var e=t.getData();if(e&&!i.isSelectable(e)&&(e=null),e&&gi(t)){i.reverseSelect(e);var n=new Rs(i,Rs.SELECT,t,i.selectionModel);i.onInteractionEvent(n)}else e&&i.selectionModel.isSelected(e)||(e?(i.setSelection(e),i.sendToTop(e)):i.setSelection(null),n=new Rs(i,Rs.SELECT,t,i.selectionModel),i.onInteractionEvent(n))}},onkeydown:function(t,i){27!=t.keyCode?gi(t)&&65==t.keyCode&&(i.selectAll(),q(t)):i.unSelectAll()}},ot.TOOLTIP_DURATION=3e3,ot.TOOLTIP_DELAY=1e3,Ls.CLASS_NAME="Q-Tooltip",Ls.CURSOR_OFFSET_X=0,Ls.CURSOR_OFFSET_Y=15,Kt("."+Ls.CLASS_NAME,{"user-select":"none","background-color":"#FFFFCA",overflow:"hidden","box-shadow":"0 5px 10px rgba(136, 136, 136, 0.5)",color:"#000","pointer-events":"none",border:"1px solid #D9D9D9",padding:"2px 4px",display:"block",position:"absolute"}),Ls.getInstance=function(){var t=Ls.instance;return t||(Ls.instance=new Ls)},Ls.show=function(t,i,e){Ls.getInstance().show(t,i,e)},Ls.hide=function(){Ls.getInstance().hide()},Ls.prototype={getTooltipElement:function(){var t=this._kz;return t||((t=y.createElement("div")).className=Ls.CLASS_NAME,this._kz=t,y.body.appendChild(t)),t},update:function(t,i){if(this.isShowing()){var e="text"==i;t&&!e&&(t=t.replace(/\n/g,"<br>"));var n=this.getTooltipElement();e?n.textContent=t||"":n.innerHTML=t||"",r=n,s=this._info.x+Ls.CURSOR_OFFSET_X,o=this._info.y+Ls.CURSOR_OFFSET_Y,h=y.documentElement,a=new pt(u.pageXOffset,u.pageYOffset,h.clientWidth-2,h.clientHeight-2),l=r.offsetWidth,_=r.offsetHeight,s+l>a.x+a.width&&(s=a.x+a.width-l),o+_>a.y+a.height&&(o=a.y+a.height-_),s<a.x&&(s=a.x),o<a.y&&(o=a.y),r.style.left=s+"px",r.style.top=o+"px"}var r,s,o,h,a,l,_},setTooltip:function(t,i){if(!t||!t.content)return this._info=null,this._kz&&(this._kz.style.display="none"),void(this._9m=Date.now());this._9m=null,this._info=t,this.getTooltipElement().style.display="",this.update(this._info.content,this._info.type),isNaN(i)&&(i=ot.TOOLTIP_DURATION),i&&this.startTimer(this.setTooltip.bind(this,!1),i)},_9m:null,_kc:null,stopTimer:function(){this._kc&&(clearTimeout(this._kc),this._kc=null)},startTimer:function(t,i){this.stopTimer(),this._kc=setTimeout(function(t){this._kc=null,t()}.bind(this,t),i)},show:function(t,i,e){this.isShowing()||this._9m&&Date.now()-this._9m<1e3?this.setTooltip(t,e):(isNaN(i)&&(i=ot.TOOLTIP_DELAY),i?this.startTimer(this.setTooltip.bind(this,t,e),i):this.setTooltip(t,e))},isShowing:function(){return this._kz&&"none"!==this._kz.style.display},hide:function(){this.stopTimer(),this.isShowing()&&this.setTooltip(!1)}};function Ss(t){this.graph=t}Ss.prototype={onstart:function(t,i){this.destroy(i)},_in:null,onmousemove:function(t,i){if(i.enableTooltip){var e=t.getData(),n=e?i.getTooltip(e,t):null;n?Ls.show({target:e,content:n,type:e.tooltipType,x:t.pageX,y:t.pageY},i.tooltipDelay,i.tooltipDuration):Ls.hide()}},destroy:function(t){Ls.hide()}};function Is(t){this.graph=t}function xs(t){this._m0ction=t,this.action=function(t){if(this._kc&&(this._isFrameTimer?(cancelAnimationFrame(this._kc),this._isFrameTimer=null):clearTimeout(this._kc),this._kc=null),!0!==t&&!1!==t)return t?void(this._kc=setTimeout(function(){this._m0ction(),this._kc=null}.bind(this),t)):(this._isFrameTimer=!0,void(this._kc=requestAnimationFrame(function(){this._m0ction(),this._kc=null,this._isFrameTimer=null}.bind(this))));this._m0ction()}}Is.prototype={destroy:function(t){this.delayAction&&(this.delayAction=null)},onmousewheel:function(t,i){if(!1!==i.enableWheelZoom&&t.delta){if(Si.stopEvent(t),i.stopAnimation(),i.delayedRendering){var e=this.delayAction;e=e||(this.delayAction=new xs(function(){i.pauseRendering(!1)})),i.pauseRendering(!0),e.action(100)}i.zoomByMouseEvent(t,t.delta,!1)}}};function Ds(t){this.graph=t}Ds.prototype={onclick:function(t,i){i.zoomByMouseEvent(t,!gi(t))}};function Cs(t){this.graph=t}function Rs(t,i,e,n,r){this.source=t,this.type="interaction",this.kind=i,this.event=e,this.data=n,this.datas=r}function Ps(t){this._46={},this._ke=t,this._ke._1b.addListener(this._9n,this),this.currentMode=Ii.INTERACTION_MODE_DEFAULT}Cs.prototype={onclick:function(t,i){i.zoomByMouseEvent(t,gi(t))}},t(Rs,xt),Rs.ELEMENT_MOVE_START="element.move.start",Rs.ELEMENT_MOVING="element.moving",Rs.ELEMENT_MOVE_END="element.move.end",Rs.ELEMENT_CREATED="element.created",Rs.ELEMENT_REMOVED="element.removed",Rs.POINT_MOVE_START="point.move.start",Rs.POINT_MOVING="point.moving",Rs.POINT_MOVE_END="point.move.end",Rs.POINT_ADD="point.add",Rs.POINT_REMOVE="point.remove",Rs.RESIZE_START="resize.start",Rs.RESIZING="resizing",Rs.RESIZE_END="resize.end",Rs.ROTATE_START="rotate.start",Rs.ROTATING="rotating",Rs.ROTATE_END="rotate.end",Rs.PAN_START="pan.start",Rs.PAN_END="pan.end",Rs.GROUP_EXPANDED="group.expanded",Rs.EDGE_BUNDLE="edge.bundle",Rs.SELECT="select",Rs.SELECT_START="select.start",Rs.SELECT_BETWEEN="select.between",Rs.SELECT_END="select.end",Rs.LONG_CLICK="long.click",it(Ps.prototype={_9n:function(t){if(this._interactionSupport)switch(t.kind){case Gt.KIND_REMOVE:this._interactionSupport._onElementRemoved(t.data);break;case Gt.KIND_CLEAR:this._interactionSupport._onElementClear(t.data)}},destroy:function(){delete this._ke,delete this._46,this._interactionSupport&&(this._interactionSupport._i1(),delete this._interactionSupport)},_ke:null,_46:null,defaultMode:null,_g2:function(t,i,e){this._46[t]=new ss(i,e),t==this.currentMode&&this._interactionSupport._loInteraction(i)},addCustomInteraction:function(t){this._interactionSupport._lkCustomInteractionListener(t)},removeCustomInteraction:function(t){this._interactionSupport._iqCustomInteractionListener(t)},_ln:function(t){return this._46[t]||Ns[t]}},{defaultCursor:{get:function(){if(this.currentInteractionMode)return this.currentInteractionMode.defaultCursor}},currentMode:{get:function(){return this._m3urrentMode},set:function(t){this._m3urrentMode!=t&&(this._m3urrentMode,this._interactionSupport||(this._interactionSupport=new Ei(this._ke)),this._m3urrentMode=t,this.currentInteractionMode=this._ln(this._m3urrentMode),this._ke.cursor=this.defaultCursor,this.currentInteractionMode?this._interactionSupport._loInteraction(this.currentInteractionMode.getInteractionInstances(this._ke)):this._interactionSupport._loInteraction([]))}}});var Ns={};ot.registerInteractions=function(t,i,e){var n=new ss(i,e);Ns[t]=n},Ii.INTERACTION_MODE_VIEW="view",Ii.INTERACTION_MODE_DEFAULT="default",Ii.INTERACTION_MODE_SELECTION="selection",Ii.INTERACTION_MODE_ZOOMIN="zoomin",Ii.INTERACTION_MODE_ZOOMOUT="zoomout",Ii.INTERACTION_MODE_CREATE_SIMPLE_EDGE="create.simple.edge",Ii.INTERACTION_MODE_CREATE_EDGE="create.edge",Ii.INTERACTION_MODE_CREATE_SHAPE="create.shape",Ii.INTERACTION_MODE_CREATE_LINE="create.line",ot.registerInteractions(Ii.INTERACTION_MODE_VIEW,[bs,ps,Is,gs,ds,Ss,Os]),ot.registerInteractions(Ii.INTERACTION_MODE_CREATE_SIMPLE_EDGE,[Es,us,bs,ps,Is,gs,Ss]),ot.registerInteractions(Ii.INTERACTION_MODE_CREATE_EDGE,[Es,ms,bs,hs,ps,Is,gs,Ss]),ot.registerInteractions(Ii.INTERACTION_MODE_CREATE_SHAPE,[Es,ls,bs,ps,Is,gs,Ss]),ot.registerInteractions(Ii.INTERACTION_MODE_CREATE_LINE,[_s,bs,ps,Is,gs,Ss]),ot.registerInteractions(Ii.INTERACTION_MODE_DEFAULT,[Es,ms,As,bs,vs,ps,Is,gs,ds,Ss,Os]),ot.registerInteractions(Ii.INTERACTION_MODE_SELECTION,[Es,ms,As,bs,vs,Ts,ps,Is,gs,ds,Ss]),ot.registerInteractions(Ii.INTERACTION_MODE_ZOOMIN,[Is,gs,Ds],ti),ot.registerInteractions(Ii.INTERACTION_MODE_ZOOMOUT,[Is,gs,Cs],ii),Si.PanInteraction=ps,Si.SelectionInteraction=bs,Si.MoveInteraction=vs,Si.WheelZoomInteraction=Is,Si.DoubleClickInteraction=ds,Si.ExportInteraction=gs,Si.TooltipInteraction=Ss,Si.RectangleSelectionInteraction=Ts,Si.RectangleSelectionInteractionByRightButton=Os,Si.PointsInteraction=ms;function ks(t){this.graph=t}(Si.Layouter=ks).prototype={getNodeBounds:function(t){return this.graph.getUIBounds(t)},isLayoutable:function(t,i){return this.graph.isVisible(t)&&!1!==t.layoutable},getLayoutResult:function(t){},updateLocations:function(t,i,e,n,r){if(!0!==i){for(var s in t){var o=t[s];o.node.setLocation(o.x,o.y)}r&&r.call(this,t)}else{if(this.animate||(this.animate=new Js),e&&(this.animate.duration=e),n&&(this.animate.animationType=n),this.animate.locations=t,r){var h=r,a=this;r=function(){h.call(a,t)}}this.animate.start(r)}},_g4:function(t){var i,e,n,r=null;t&&(i=t.byAnimate,r=t.callback,e=t.duration,n=t.animationType);var s=this.getLayoutResult(t);return!!s&&(this.updateLocations(s,i,e,n,r),s)},doLayout:function(t,i){if(!this.graph||!0===i)return this._g4(t);this.graph.callLater(function(){this._g4(t)},this)}};Ii.DIRECTION_RIGHT=110,Ii.DIRECTION_LEFT=120,Ii.DIRECTION_CENTER=130,Ii.DIRECTION_BOTTOM=210,Ii.DIRECTION_TOP=220,Ii.DIRECTION_MIDDLE=230,Ii.DIRECTION_RIGHT_TOP=111,Ii.DIRECTION_RIGHT_BOTTOM=112,Ii.DIRECTION_LEFT_TOP=121,Ii.DIRECTION_LEFT_BOTTOM=122,Ii.DIRECTION_BOTTOM_LEFT=211,Ii.DIRECTION_BOTTOM_RIGHT=212,Ii.DIRECTION_TOP_LEFT=221,Ii.DIRECTION_TOP_RIGHT=222;var Ms="even",Bs="two.side";function Gs(t){return 100<=t&&t<200}Ii.LAYOUT_TYPE_EVEN=Ms,Ii.LAYOUT_TYPE_EVEN_HORIZONTAL="even.h",Ii.LAYOUT_TYPE_EVEN_VERTICAL="even.v",Ii.LAYOUT_TYPE_TWO_SIDE=Bs,Si.isHorizontalDirection=Gs;function Fs(t){this.graph=t}Fs.prototype={hGap:50,vGap:50,parentChildrenDirection:210,layoutType:Ms,defaultSize:{width:50,height:60},getNodeSize:function(t){if(this.graph._8k._m0t){var i=this.graph.getUI(t);if(i)return i._fu}return t.image&&t.image.bounds?{width:t.image.bounds.width,height:t.image.bounds.height}:this.defaultSize},_m3x:function(t,i){var e=t.id;if(!(e in this._m04)&&this.isLayoutable(t)){var n,r=this.getNodeSize(t);n=r instanceof pt?[-r.x,-r.y]:[r.width/2,r.height/2],t.parentChildrenDirection;var s=i?this._m04[i.id]:this._m1j;this._m04[e]=new $s(this.getHGap(t),this.getVGap(t),this.getLayoutType(t),t.parentChildrenDirection,s,t,r.width,r.height,n)}},getHGap:function(t){return t&&U(t.hGap)?t.hGap:this.hGap},getVGap:function(t){return t&&U(t.vGap)?t.vGap:this.vGap},getLayoutType:function(t){return t&&t.layoutType?t.layoutType:this.layoutType},_m04:null,_m1j:null,_kh:function(){this._m04=null,this._m1j=null},getLayoutResult:function(t){var i,e,n,r,s=this.graph;t instanceof Object&&(i=t.x,e=t.y,s=t.root||this.graph,n=t.bounds,r=t.undirected),this._m04={},this._m1j=new $s,this._m1j._lo(this.hGap,this.vGap,this.parentChildrenDirection,this.layoutType);var o={};return to(s,this._m3x,this,!1,r)&&(this._m1j._g4(i||0,e||0,o),n&&n.set(this._m1j.x,this._m1j.y,this._m1j.width,this._m1j.height)),this._kh(),o},doLayout:function(t,i){if(U(t)){var e=t,n=0;U(i)&&(n=i),t={x:e,y:n},i=!0}return v(this,Fs,"doLayout",[t,i])}},t(Fs,ks);var $s=function(t,i,e,n,r,s,o,h,a){this._lc=t||0,this._ld=i||0,this.layoutType=e,this.parentChildrenDirection=n,(this.parentBounds=r)&&r._h4(this),this.node=s,this._er=o,this._m3z=h,this._m0nchorLocation=a};function js(t){this.graph=t,this.currentMovingNodes={}}$s.prototype={_lo:function(t,i,e,n){this._lc=t,this._ld=i,this.parentChildrenDirection=e,this.layoutType=n},_8m:function(){this._fr=[]},_lc:0,_ld:0,_fr:null,_er:0,_m3z:0,layoutType:null,parentChildrenDirection:null,_h4:function(t){this._fr||(this._fr=[]),this._fr.push(t)},_d0:function(i,e,t,n,r){var s=new pt;return t(this._fr,function(t){t._3r(i,e),s.add(t),n?i+=t.width+this._lc:e+=t.height+this._ld},this),s},_8o:function(e,n,t,r,i){var s,o=r?this._lc:this._ld,h=r?this._ld:this._lc,a=r?"width":"height",l=r?"height":"width",_=r?"_er":"_m3z",u=r?"_m3z":"_er",c=r?"hostDX":"hostDY",f=r?"hostDY":"hostDX",d=new pt,E=0,g=0,v=[],p=0,m=0;t(this._fr,function(t){var i=g<=m;t._inheritedParentChildrenDirection=i?r?120:220:r?110:210,t._3r(e,n),i?(v.push(t),E=Math.max(E,t[a]),g+=t[l]+h):((s=s||[]).push(t),p=Math.max(p,t[a]),m+=t[l]+h)},this),g-=h,m-=h;var y=Math.max(g,m),T=o,O=0;this.node&&(i&&(T+=this[_]+o,y>this[u]?this[f]=(y-this[u])/2:O=(this[u]-y)/2),this[c]=E+T/2-this[_]/2);var A,w=O;return b(v,function(t){r?t.offset(E-t[a],w):t.offset(w,E-t[a]),w+=h+t[l],d.add(t)},this),s&&(w=O,A=E+T,b(s,function(t){r?t.offset(A,w):t.offset(w,A),w+=h+t[l],d.add(t)},this)),d},offset:function(t,i){this.x+=t,this.y+=i,this.nodeX+=t,this.nodeY+=i,this._7n(t,i)},_m1l:function(t,i){return 2*this.cx-t-i-t},_m1m:function(t,i){return 2*this.cy-t-i-t},_lf:function(t){if(this._fr&&0!=this._fr.length){if(t)return this.node&&(this.nodeX+=this._m1l(this.nodeX,this._er)),void b(this._fr,function(t){t.offset(this._m1l(t.x,t.width),0)},this);this.node&&(this.nodeY+=this._m1m(this.nodeY,this._m3z)),b(this._fr,function(t){t.offset(0,this._m1m(t.y,t.height))},this)}},_7n:function(i,e){this._fr&&b(this._fr,function(t){t.offset(i,e)},this)},_3r:function(t,i){this.x=t||0,this.y=i||0,this._fr&&0!=this._fr.length?this._1q(this.x,this.y,this.layoutType):this.node&&(this.width=this._er,this.height=this._m3z,this.nodeX=this.x,this.nodeY=this.y)},_7o:function(i){if(this.node){var t=this._m0nchorLocation,e=t[0],n=t[1];i[this.node.id]={node:this.node,x:this.nodeX+e,y:this.nodeY+n,left:this.nodeX,top:this.nodeY,width:this._er,height:this._m3z}}this._fr&&b(this._fr,function(t){t._7o(i)},this)},_g4:function(t,i,e){this._3r(t,i),this._7o(e)},_1q:function(t,i,e){var n,r=t,s=i;!this.parentChildrenDirection&&this.parentBounds&&(this.parentChildrenDirection=this._inheritedParentChildrenDirection||this.parentBounds.parentChildrenDirection);var o,h=this.parentChildrenDirection,a=Gs(h);if(this.node){var l=120==(o=h)||122==o||121==o||220==o||221==o||222==o;(n=130==h||230==h)||(a?t+=this._er+this._lc:i+=this._m3z+this._ld)}var _,u,c,f=this.node&&this.node.layoutReverse?g:b,d=0,E=0;(_=e==Bs?this._8o(t,i,f,!a,n):(u=e==Ms?!a:"even.h"==e,this._d0(t,i,f,u,n)))&&!_.isEmpty()&&(d=_.width,E=_.height,this.add(_)),this.node&&(this.nodeX=r,this.nodeY=s,void 0!==this.hostDX||void 0!==this.hostDY?(this.nodeX+=this.hostDX||0,this.nodeY+=this.hostDY||0):(c=210==h||220==h||120==h||110==h?1:212==h||222==h||122==h||112==h?0:2,a?(1==c?this.nodeY+=E/2-this._m3z/2:2==c&&(this.nodeY+=E-this._m3z),s>this.nodeY&&this.offset(0,s-this.nodeY)):(1==c?this.nodeX+=d/2-this._er/2:2==c&&(this.nodeX+=d-this._er),r>this.nodeX&&this.offset(r-this.nodeX,0))),this.addRect(this.nodeX,this.nodeY,this._er,this._m3z),l&&this._lf(a))},node:null,uiBounds:null},t($s,pt),js.prototype={layoutDatas:null,isMovable:function(t){return!this.currentMovingNodes[t.id]},_6r:!1,_3a:function(){this._6r=!0,this.graph._1b.addListener(this._9p,this),this.graph._18.addListener(this._25,this)},_1h:function(){this._6r=!1,this.graph._1b.removeListener(this._9p,this),this.graph._18.removeListener(this._25,this)},invalidateFlag:!0,invalidateLayoutDatas:function(){this.invalidateFlag=!0},resetLayoutDatas:function(){return this.invalidateFlag=!1,this.layoutDatas=function(){var n,r,s={},o=[],h=0,a={},l=0;this.graph.forEach(function(t){if(this.isLayoutable(t))if(t instanceof Jn){var i={node:t,id:t.id,x:t.x,y:t.y};for(this.appendNodeInfo&&this.appendNodeInfo(t,i),s[t.id]=i,o.push(i),h++,r=t.parent;r instanceof hr;){var e=(n=n||{})[r.id];(e=e||(n[r.id]={id:r.id,children:[]})).children.push(i),r=r.parent}}else t instanceof Vn&&!t.isLooped()&&t.fromAgent&&t.toAgent&&(i={edge:t},a[t.id]=i,l++)},this);var t={};for(var i in a){var e=a[i],_=e.edge,u=_.fromAgent,c=_.toAgent,f=u.id+"-"+c.id,d=c.id+"-"+u.id;if(s[u.id]&&s[c.id]&&!t[f]&&!t[d]){var E=s[u.id],g=s[c.id];e.from=E,e.to=g,t[f]=e,this.appendEdgeInfo&&this.appendEdgeInfo(_,e)}else delete a[i],l--}return{groups:n,nodesArray:o,nodes:s,nodeCount:h,edges:a,edgeCount:l,minEnergy:this.minEnergyFunction(h,l)}}.call(this)},_25:function(t){Rs.ELEMENT_MOVE_START==t.kind?(this.currentMovingNodes={},t.datas.forEach(function(t){this.currentMovingNodes[t.id]=t},this)):Rs.ELEMENT_MOVE_END==t.kind&&(this.currentMovingNodes={})},_9p:function(t){this.invalidateLayoutDatas()},isRunning:function(){return this.timer&&this.timer._e0()},getLayoutResult:function(t){this.stop(),this.resetLayoutDatas();for(var i=this.getMaxIterations(this.layoutDatas.nodeCount||0,this.layoutDatas.edgeCount||0),e=0;e<i&&!1!==this.step(!1);e++);var n=this.layoutDatas.nodes;return this.onstop(),n},_l1:function(){return!1},step:function(t){if(!1===t)return this._l1(this.timeStep);!this.invalidateFlag&&this.layoutDatas||this.resetLayoutDatas();var i=this._l1(t),e=this.layoutDatas.nodes;for(var n in e){var r=e[n],s=r.node;this.isMovable(s)?s.setLocation(r.x,r.y):(r.x=s.x,r.y=s.y,r.vx=0,r.vy=0)}return i},onstop:function(){delete this.layoutDatas},start:function(t){if(this.isRunning())return!1;this._6r||this._3a(),this._jkr||(this._jkr=function(t){return this.step(t)}.bind(this)),this.invalidateLayoutDatas(),this.timer=new pi(this._jkr);var i=this;return this.timer._kf(function(){i.onstop(),t&&t()}),!0},stop:function(){this.timer&&(this.timer._l7(),this.onstop())},getMaxIterations:function(t,i){return Math.min(1e3,3*t+10)},minEnergyFunction:function(t,i){return 10+Math.pow(t+i,1.4)},resetGraph:function(){this._6r||this._3a(),this.resetLayoutDatas()},destroy:function(){this.stop(),this._1h()}},t(js,ks);function zs(t,i,e,n){this.graph=t,U(i)&&(this.radius=i),U(e)&&(this.gap=e),U(n)&&(this.startAngle=n)}Si.BalloonLayouter=zs;var Ys="proportional",Us="regular",Hs="variable";Ii.ANGLE_SPACING_PROPORTIONAL=Ys,Ii.ANGLE_SPACING_REGULAR=Us,Ii.RADIUS_MODE_UNIFORM="uniform",Ii.RADIUS_MODE_VARIABLE=Hs,zs.prototype={angleSpacing:Ys,radiusMode:Hs,gap:4,radius:50,startAngle:0,_m04:null,_m1j:null,_kh:function(){this._m04=null,this._m1j=null},getLayoutResult:function(t){var i,e=0,n=0,r=this.graph;t instanceof Object&&(e=t.cx||0,n=t.cy||0,r=t.root||this.graph,i=t.bounds),this._m04={},this._m1j=new Ws(this);var s={};return io(r,this._m3x,this)&&(this._m1j._fr&&1==this._m1j._fr.length&&(this._m1j=this._m1j._fr[0]),this._m1j._eu(!0),this._m1j._66(e,n,this.startAngle,s,i)),this._kh(),s},_m3x:function(t,i){if(this.isLayoutable(t)){var e=i?this._m04[i.id]:this._m1j;this._m04[t.id]=new Ws(this,t,e)}},defaultSize:40,getRadius:function(t,i,e){return this.radius},getNodeSize:function(t,i,e){if(this.graph._8k._m0t){var n=this.graph.getUI(t);if(n)return(n._fu.width+n._fu.height)/2}return this.defaultSize},getGap:function(t,i,e){return this.gap},_30:function(t,i,e){return this.getNodeSize(t,i,e)+this.getGap(t,i,e)}};var Ws=function(t,i,e){this.layouter=t,i&&(this._lj=i,this.id=i.id),e&&(e._h4(this),e._lh=!1,this._kr=e._kr+1)};Sn=2*Math.PI,Ws.prototype={_kp:0,_kq:0,_k0:0,_et:0,_d1:0,_kr:0,_lh:!0,_li:0,_h6:0,_fr:null,_lj:null,_h4:function(t){this._fr||(this._fr=[]),this._fr.push(t),t.parent=this},_h7:function(i){this._kq=(this._kq+i)%Sn,this._fr&&(1!=this._fr.length?(i=this._kq+Math.PI,b(this._fr,function(t){t._h7(i)},this)):this._fr[0]._h7(this._kq))},_8p:0,_7p:function(t){return this._lj&&(this._h6=this.layouter._30(this._lj,this._kr,this._lh)/2),this._fr?(this._h6,this._8p=this._fr.length,this._8p<=2||this.layouter.angleSpacing==Us?function(t){var i=this._8p,e=2*Math.PI/i,n=0,r=t?0:1<i?-e/2:0;return b(this._fr,function(t){t._kq=r%Sn,r+=e,t._kp=e;var i=t._eu();n<i&&(n=i)},this),[n,e]}.call(this,t):function(n){var e,t=this._fr.length,r=0,s=0;if(b(this._fr,function(t){var i=t._eu();i<1&&(i=1),s+=i,r<i&&(r=i,e=t)},this),1<t){var o=0,h={},a=s/t/3;s=0,b(this._fr,function(t){var i=t._li;i<a&&(i=a),h[t.id]=i,s+=i},this);var l=Sn/s;b(this._fr,function(t,i){var e=h[t.id]*l;0===i&&(o=n?-e/2:-e),t._kq=o+e/2,t._kp=e,o+=e},this)}return[r,e._kp]}.call(this,t)):null},_eu:function(t){var i=this._7p(t);if(!i)return this._li=this._h6;var e=i[0],n=i[1],r=this.layouter.getRadius(this._lj,this._kr);if(r<this._h6&&(r=this._h6),this._et=r,this._h6+e>r&&(r=this._h6+e),e&&1<this._8p&&n<Math.PI){var s=e/Math.sin(n/2);r<s&&(r=s)}return this._k0=r,this._li=r+e,this._lj&&this._fr&&this.layouter.radiusMode==Hs&&b(this._fr,function(t){var i=t._li;1==t._8p&&(i/=2);var e=this._h6+i,n=t._kp;if(n&&n<Math.PI){var r=i/Math.sin(n/2);i<r&&(i=r)}i<e&&(i=e),t._d1=i},this),this._lj&&!t||this._h7(0),this._li},_66:function(s,o,h,a,l){if(this._lj&&(a[this._lj.id]={x:s,y:o,node:this._lj},l&&l.addRect(s-this._h6/2,o-this._h6/2,this._h6,this._h6)),this._fr)if(this._lj||1!=this._fr.length){h=h||0;var _=this._k0,u=this._et;b(this._fr,function(t){var i=_;t._d1&&(i=Math.max(u,t._d1));var e=t._kq+h,n=s+i*Math.cos(e),r=o+i*Math.sin(e);t._66(n,r,h,a,l)},this)}else this._fr[0]._66(s,o,h,a,l)}},t(zs,ks);var qs=function(t){c(this,qs,arguments)};t(qs,Zs);var Vs=function(t,i){(this.node1=t)==(this.node2=i)?(this.isLooped=!0,this._ks=t._k8):this._ks=new ht,this._8r=[],this._h9=ot.EDGE_BUNDLE_EXPANDED};ot.EDGE_BUNDLE_EXPANDED=!0,Vs.prototype={node1:null,node2:null,_ks:null,_h9:ot.EDGE_BUNDLE_EXPANDED,_8r:null,_ha:null,agentEdge:null,_m1o:function(i,e,n){this._ks.forEach(function(t){if(!n||t.$from==n||t.fromAgent==n)return i.call(e,t)})},_67:0,_68:0,_io:function(t,i){if(!1===this._ks.add(t))return!1;i==this.node1?this._67++:this._68++,this._m0t?this._14(t):this._m0t=!0},_d2:function(t,i){if(!1===this._ks.remove(t))return!1;i==this.node1?this._67--:this._68--,this._14(t),this._ks.forEach(function(t){t._edgeBundleInvalidateFlag=!0,t.__3y=!0},this)},_14:function(t){this._m3aBindableFlag=!0,this._6e=!0,t._edgeBundleInvalidateFlag=!0,t.__3y=!0},invalidate:function(){this._m3a()},_m3a:function(){this._6e||(this._6e=!0,this._ks.forEach(function(t){t._edgeBundleInvalidateFlag=!0}))},isEmpty:function(){return this._ks.isEmpty()},isPositiveOrder:function(t){return this.node1==t.$from||this.node1==t.fromAgent},canBind:function(t){return t&&this._6e&&this.validate(t),1<this._ks.length&&1<this._8r.length},_hr:function(t){return this._8r.indexOf(t)},getYOffset:function(t){return this._ha[t.id]},_4x:function(t){if(this.canBind()){var i={},e=this._8r.length;if(!(e<2)){var n=0,r=this._8r[0];i[r.id]=0;for(var s=1;s<e;s++)r=this._8r[s],n+=t.getStyle(r,dr.EDGE_BUNDLE_GAP)||Cr[dr.EDGE_BUNDLE_GAP],i[r.id]=n;if(!this.isLooped&&n){var o=n/2;for(s=0;s<e;s++)i[(r=this._8r[s]).id]-=o}this._ha=i}}else this._ha={}},_m1q:function(t){return this._h9!=t&&(this._h9=t,this._m3a(),!0)},reverseExpanded:function(){return this._m1q(!this._h9)},_19:function(){var i;this._8r.length=0,this._ks.forEach(function(t){if(t.isBundleEnabled()){if(!this.isPositiveOrder(t))return void(i=i||[]).push(t);this._8r.push(t)}},this),i&&(this._8r=i.concat(this._8r))},_e7:function(t){return t==this.agentEdge||!this.canBind()||this._h9},validate:function(t){this._6e=!1,this._ks.forEach(function(t){t._edgeBundleInvalidateFlag=!1}),this._m3aBindableFlag&&(this._19(),this._m3aBindableFlag=!1),1<this._8r.length&&this.sortBindingEdges instanceof Function&&this.sortBindingEdges(this._8r);var i=this._h9,e=!this.canBind()||i;if(b(this._8r,function(t){t._$m=!0,(t._hyInBundle=e)&&(t.__3y=!0)},this),!e)return this._m06(this._8r[0],t),this.agentEdge._hyInBundle=!0,void(this.agentEdge.__3y=!0);this._m06(null,t),this._4x(t)},_m06:function(t,i){if(t!=this.agentEdge){var e=this.agentEdge;return this.agentEdge=t,i&&i._4q(new Dt(this,"agentEdge",t,e)),!0}}},it(Vs.prototype,{bindableEdges:{get:function(){return this._8r}},edges:{get:function(){return this._ks._j2}},length:{get:function(){return this._ks?this._ks.length:1}},expanded:{get:function(){return this._h9},set:function(t){if(this._h9==t)return!1;this._h9=t,this._m3a()}}});function Xs(t){t.fx-=t.x*this.attractive,t.fy-=t.y*this.attractive}function Ks(t){if(0!=t.k){var i=this._m3g,e=t.from,n=t.to,r=n.x-e.x,s=n.y-e.y,o=r*r+s*s,h=Math.sqrt(o)||.1,a=(h-i)*t.k*this.elastic,l=(a/=h)*r,_=a*s;n.fx-=l,n.fy-=_,e.fx+=l,e.fy+=_}}function Zs(t){c(this,Zs,arguments)}Zs.prototype={appendNodeInfo:function(t,i){i.mass=t.layoutMass||1,i.fx=0,i.fy=0,i.vx=0,i.vy=0},appendEdgeInfo:function(t,i){i.k=t.layoutElasticity||1},setMass:function(t,i){t.layoutMass=i,this.layoutDatas&&this.layoutDatas.nodes&&(t=this.layoutDatas.nodes[t.id])&&(t.mass=i)},setElasticity:function(t,i){t.layoutElasticity=i,this.layoutDatas&&this.layoutDatas.edges&&(t=this.layoutDatas.edges[t.id])&&(t.k=i)},_m3g:50,_i6:.5,timeStep:.05,repulsion:50,attractive:.1,elastic:3,_l3:1e3,_ji:function(t){return this._l3+.3*(t-this._l3)},_l1:function(t,i){Date.now();var e=this.layoutDatas.nodes;for(var n in e){var r=e[n];i&&(r.x+=Math.random()-.5,r.y+=Math.random()-.5),Xs.call(this,r)}var s=this.layoutDatas.groups;if(s)for(var n in s){var o=s[n].children,h=0,a=0;o.forEach(function(t){h+=t.x,a+=t.y}),h/=o.length,a/=o.length;var l=10*this.attractive;o.forEach(function(t){t.fx-=(t.x-h)*l,t.fy-=(t.y-a)*l})}var _=this._nbodyForce;for(var n in(_=_||(this._nbodyForce=function(){var f=-1e6;function n(t,i){this.node=t,this.body=i}function t(){this.stack=[],this.popIdx=0}function i(){this.body=null,this.quads=[],this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0,this.isInternal=!1}function p(){var t;return e[E]?((t=e[E]).quads[0]=null,t.quads[1]=null,t.quads[2]=null,t.quads[3]=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0,t.isInternal=!1):(t=new i,e[E]=t),++E,t}function m(t,i){var e=Math.abs(t.x-i.x),n=Math.abs(t.y-i.y);return e<1e-8&&n<1e-8}function d(t){for(y.reset(),y.push(T,t);!y.isEmpty();){var i=y.pop(),e=i.node,n=i.body;if(e.isInternal){var r=n.x,s=n.y;e.mass=e.mass+n.mass,e.massX=e.massX+n.mass*r,e.massY=e.massY+n.mass*s;var o=0,h=e.left,a=(e.right+h)/2,l=e.top,_=(e.bottom+l)/2;if(a<r){o+=1;var u=h;a+=(h=a)-u}if(_<s){o+=2;var c=l;_+=(l=_)-c}var f=e.quads[o];f||((f=p()).left=h,f.top=l,f.right=a,f.bottom=_,e.quads[o]=f),y.push(f,n)}else if(e.body){var d=e.body;if(e.body=null,e.isInternal=!0,m(d,n)){if(e.right-e.left<1e-8)return;do{var E=Math.random(),g=(e.right-e.left)*E,v=(e.bottom-e.top)*E;d.x=e.left+g,d.y=e.top+v}while(m(d,n))}y.push(e,d),y.push(e,n)}else e.body=n}}t.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,i){var e=this.stack[this.popIdx];e?(e.node=t,e.body=i):this.stack[this.popIdx]=new n(t,i),++this.popIdx},pop:function(){if(0<this.popIdx)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};var u=[],y=new t,e=[],E=0,T=p();return{init:function(t,i){f=i;var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,s=Number.MIN_VALUE,o=Number.MIN_VALUE,h=t,a=h.length;for(e=a;e--;){var l=h[e].x,_=h[e].y;l<n&&(n=l),s<l&&(s=l),_<r&&(r=_),o<_&&(o=_)}var u=s-n,c=o-r;for(c<u?o=r+u:s=n+c,E=0,(T=p()).left=n,T.right=s,T.top=r,T.bottom=o,e=a;e--;)d(h[e])},update:function(t){var i,e,n,r,s=u,o=1,h=0,a=1;for(s[0]=T;o;){var l=s[h],_=l.body;--o,h+=1,_&&_!==t?(e=_.x-t.x,n=_.y-t.y,0===(r=Math.sqrt(e*e+n*n))&&(e=(Math.random()-.5)/50,n=(Math.random()-.5)/50,r=Math.sqrt(e*e+n*n)),(i=f*_.mass*t.mass/(r*r))<-1e3&&(i=-1e3),i/=r,t.fx=t.fx+i*e,t.fy=t.fy+i*n):(l.mass||(l.mass=1),e=l.massX/l.mass-t.x,n=l.massY/l.mass-t.y,0===(r=Math.sqrt(e*e+n*n))&&(e=(Math.random()-.5)/50,n=(Math.random()-.5)/50,r=Math.sqrt(e*e+n*n)),(l.right-l.left)/r<.8?((i=f*l.mass*t.mass/(r*r))<-1e3&&(i=-1e3),i/=r,t.fx=t.fx+i*e,t.fy=t.fy+i*n):(l.quads[0]&&(s[a]=l.quads[0],o+=1,a+=1),l.quads[1]&&(s[a]=l.quads[1],o+=1,a+=1),l.quads[2]&&(s[a]=l.quads[2],o+=1,a+=1),l.quads[3]&&(s[a]=l.quads[3],o+=1,a+=1)))}}}}())).init(this.layoutDatas.nodesArray,-this.repulsion*this.repulsion*this.repulsion),e)_.update(e[n]);if(this.elastic){var u=this.layoutDatas.edges;for(var n in u)Ks.call(this,u[n])}return this._l5(t)},_l5:function(t){var i=this.layoutDatas.minEnergy,e=(this.layoutDatas.currentEnergy,this.layoutDatas.nodes),n=(t=this.timeStep,0),r=this._i6;for(var s in e){var o=e[s],h=o.fx/o.mass,a=o.fy/o.mass,l=o.vx+=h*t,_=o.vy+=a*t;o.x+=l*t,o.y+=_*t,n<i&&(n+=2*(l*l+_*_)),o.fx=0,o.fy=0,o.vx*=r,o.vy*=r}return i<=(this.layoutDatas.currentEnergy=n)}},t(Zs,js),Si.SpringLayouter=Zs;var Js=function(t){this.locations=t};Js.prototype={oldLocations:null,_ev:null,duration:700,animationType:Ai.easeOutStrong,_7r:function(t){if(this._ev=t,this.oldLocations={},t)for(var i in t){var e=t[i].node;this.oldLocations[i]={x:e.x,y:e.y}}},setLocation:function(t,i,e){t.setLocation(i,e)},forEach:function(t,i){for(var e in this.locations){var n=this.oldLocations[e],r=this.locations[e];t.call(i,n,r)}},_k2:function(s,t,i,e){this.forEach(function(t,i){var e=i.node,n=t.x+(i.x-t.x)*s,r=t.y+(i.y-t.y)*s;this.setLocation(e,n,r)},this)},stop:function(){this._m0nimate&&this._m0nimate._l7()},start:function(t){this._m0nimate?(this._m0nimate._l7(),this._m0nimate._i8=this.duration,this._m0nimate._eqType=this.animationType,this._m0nimate._onfinish=this._onfinish):this._m0nimate=new wi(this._k2,this,this.duration,this.animationType),this._m0nimate._kf(t)}},it(Js.prototype,{locations:{get:function(){return this._ev},set:function(t){this._ev!=t&&this._7r(t)}}});function Qs(i,e,n,r,s,o){if(e instanceof Ft)return i(e,n,r,s,o),e;if(e instanceof Hr){var h=new ht;e._keModel.forEach(function(t){e.isVisible(t)&&(t._hx()&&t._h9&&t.hasChildren()?t.$location&&(t.$location.invalidateFlag=!1):h.add(t))}),e=h}else if(Array.isArray(e))e=new ht(e);else if(!(e instanceof ht))throw new Error("roots error");return(a=e,_=new ht,a.forEach(function(t){var i,e;t instanceof Jn&&(e=!1,t.forEachInEdge(function(t){if(a.contains(t)&&!t.isLooped())return!(e=!0)}),e?!l&&(i=!1,t.forEachOutEdge(function(t){if(a.contains(t)&&!t.isLooped())return!(i=!0)}),i)&&(l=t):_.add(t))}),_.isEmpty()&&l&&_.add(l),e=_).forEach(function(t){i(t,n,r,s,o)}),e;var a,l,_}var to=function(t,i,e,n,r){return Qs(eo,t,i,e,n,r)},io=function(t,i,e,n,r){return Qs(ro,t,i,e,n,r)};or.prototype.forEachByTopoDepthFirstSearch=function(t,i,e,n){to(this,t,i,e,n)},or.prototype.forEachByTopoBreadthFirstSearch=function(t,i,e,n){t instanceof Object&&1==arguments.length&&(i=t.scope),io(this,t,i,e,n)},Si.forEachByTopoDepthFirstSearch=to,Si.forEachByTopoBreadthFirstSearch=io;var eo=function(t,i,e,n,r,s,o,h){!function i(e,n,r,s,o,h,a,t){e._marker=h,s||n.call(r,e,t,a),no(e,function(t){i(t,n,r,s,o,h,a+1,e)},t,o,h,r),s&&n.call(r,e,t,a)}(t,i,e,n,r,{},0)};function no(e,n,r,t,s){t?e.forEachEdge(function(t){var i=t.otherNode(e);i!=r&&i._marker!=s&&n(i,e)},this,!0):e.forEachOutEdge(function(t){var i=t.toAgent;i!=r&&i._marker!=s&&n(i,e)})}var ro=function(t,i,e,n,r){!function t(i,n,r,s,o,h,a){var l,_=i.length;i.forEach(function(t,i){var e=t.v;e._marker=h,s||n.call(r,e,t._from,a,i,_),no(e,function(t){l=l||[],t._marker=h,l.push({v:t,_from:e})},e,o,h)}),l&&t(l,n,r,s,o,h,a+1),s&&i.forEach(function(t,i){n.call(r,t.v,t._from,a,i,_)})}([{v:t}],i,e,n,r,{},0)};Si.toColor=Q,Si.log=rt,Si.error=st,Si.trace=function(t){u.console&&console.trace(t)},Si.isIE=L,Si.isOpera=w,Si.isWebkit=x,Si.isGecko=D,Si.isFirefox=C,Si.isSafari=P,Si.isChrome=R,Si.isMac=N,Si.DefaultStyles=Cr,Si.Defaults=ot,Si.Styles=dr,Si.Consts=Ii,Si.Graphs=tn,Si.Graph=Hr,Si.BaseUI=lr,Si.ElementUI=wr,Si.NodeUI=Dr,Si.EdgeUI=xr,Si.LabelUI=Sr,Si.ImageUI=Lr,Si.Shapes=tr,Si.Path=Ye,Si.Gradient=Le,Si.InteractionEvent=Rs,Si.Element=zn,Si.Node=Jn,Si.Edge=Vn,Si.GraphModel=or,Si.EdgeBundle=Vs,Si.TreeLayouter=Fs,Si.name="Qunee for HTML5";Si.version="2.7.7.4",Si.about="Qunee - Diagramming Components for HTML5/Canvas",Si.copyright="Copyright © 2019 Qunee.com",Si.css=qt;return Si.IDrawable={draw:function(t,i){}},rt=function(){},Si.publishDate="18/12/2019",Si}(window,document);