webpackJsonp([4],{"/IH0":function(t,e){window.Q=function(t,e){function i(t,e,n){if(t.hasChildren()){var s=t._fr||t.getChildren();if(s){for(var r=0,o=(s=s._j2||s).length;r<o;r++)if(!1===e.call(n,s[r])||!1===i(s[r],e,n))return!1;return!0}}}function n(t){if(!t.hasChildren())return t instanceof zn?t:null;for(var e,i=t._fr._j2,s=i.length-1;0<=s;){if(e=n(e=i[s]))return e;s--}return null}function s(t,e,i,n){return n?function t(e,i,n){for(var s,r=0,o=(e=e._j2||e).length;r<o;r++)if((s=e[r]).hasChildren()&&!t(s.children,i,n)||!1===i.call(n,s))return!1;return!0}(t,e,i):function t(e,i,n){for(var s,r=0,o=(e=e._j2||e).length;r<o;r++)if(s=e[r],!1===i.call(n,s)||s.hasChildren()&&!t(s.children,i,n))return!1;return!0}(t,e,i)}function r(t,e,i,n){return n?function t(e,i,n){for(var s,r=(e=e._j2||e).length-1;0<=r;r--)if((s=e[r]).hasChildren()&&!t(s.children,i,n)||!1===i.call(n,s))return!1;return!0}(t,e,i):function t(e,i,n){for(var s,r=(e=e._j2||e).length-1;0<=r;r--)if(s=e[r],!1===i.call(n,s)||s.hasChildren()&&!t(s.children,i,n))return!1;return!0}(t,e,i)}function o(t,e,i){for(var n,s=(t._j2||t).slice(0);s.length;){if(n=s[0],s=s.splice(1),!1===e.call(i,n))return!1;if(n.hasChildren()){var r=n.children;r=r._j2||r,s=s.concat(r)}}return!0}function h(t,e){return function t(i){var n=i.length,s=Math.ceil(n/2);return n<=1?i:function(t,i){for(var n=t.length,s=i.length,r=n+s,o=new Array(r),h=0,a=0,l=0;l<r;)h===n?o[l++]=i[a++]:a===s||e(t[h],i[a])<=0?o[l++]=t[h++]:o[l++]=i[a++];return o}(t(i.slice(0,s)),t(i.slice(s)))}(t)}function a(t,e,i,n){t instanceof ot&&(t=t._j2);for(var s=0,r=(t._j2||t).length;s<r;s++)if(!1===e.call(i,t[s],s,n))return!1;return!0}function l(t,e,i){for(var n=t instanceof ot,s=t._j2||t,r=0,o=s.length;r<o;r++){var h=s[r];e.call(i,h)&&(n?t.remove(h):t.splice(r,1),r--,o--)}}function _(t,e,i,n){t instanceof ot&&(t=t._j2);for(var s=(t._j2||t).length-1;0<=s;s--)if(!1===e.call(i,t[s],s,n))return!1;return!0}function u(t){if(t.clone instanceof Function)return t.clone(!0);var e,i=[];return a(t,function(t){e=t&&t.clone instanceof Function?t.clone():t,i.push(e)},this),i}function c(t,e,i){void 0===i||i<0?t.push(e):t.splice(i,0,e)}function d(t,e){var i=t.indexOf(e);return!(i<0||i>=t.length)&&t.splice(i,1)}function f(t,e){var i=t;for(var n in e)if(e.__lookupGetter__){var s=e.__lookupGetter__(n),r=e.__lookupSetter__(n);s||r?(s&&i.__defineGetter__(n,s),r&&i.__defineSetter__(n,r)):i[n]=e[n]}else i[n]=e[n];return i}function g(t,e,i){if(!(t instanceof Function))throw new Error("subclass must be type of Function");var n=null;function s(){}"object"==typeof e&&(n=e,e=t,t=function(){e.apply(this,arguments)});var r=t.prototype;return s.prototype=e.prototype,t.prototype=new s,t.superclass=e.prototype,t.superclass.constructor=e,f(t.prototype,r),n&&f(t.prototype,n),i&&f(t.prototype,i),t.prototype.class=t}function v(t,e,i){return E(t,e,"constructor",i)}function E(t,e,i,n){var s=e.superclass;if(s){var r=s[i];return r?r.apply(t,n):void 0}}function p(t,e,i,n){if("constructor"==i)return m(t,e,n);if(e.super_ instanceof Function){var s=e.super_.prototype[i];return s instanceof Function?s.apply(t,n):void 0}}function m(t,e,i){if(e.super_ instanceof Function)return e.super_.apply(t,i)}function y(t,e,i){var n,s,r;if(!(t instanceof Function)&&t instanceof Object)return e=t.super,t.hasOwnProperty("constructor")?(n=t.constructor,delete t.constructor):n=e?function(){e.apply(this,arguments)}:function(){},y(n,e,t);if(e&&!(e instanceof Function)&&e instanceof Object)return y(t,e.super,e);if(e&&(r=e,(s=t).super_=r,s.prototype=Object.create(r.prototype,{super_:{value:r,enumerable:!1},constructor:{value:s,enumerable:!1}})),i){var o=t.prototype;for(var h in i)o[h]=i[h]}return t}function T(t,e,i,n,s){if(n)Object.defineProperty(t,e,{value:i,enumerable:!0});else{var r={configurable:!0,enumerable:!0},o="$"+e;void 0!==i&&(t[o]=i),r.get=function(){return this[o]},r.set=function(t){var i=this[o];if(i==t)return!1;var n=new It(this,e,t,i);return!!this.beforeEvent(n)&&(this[o]=t,s&&s.call(this,t,i),this.onEvent(n),!0)},Object.defineProperty(t,e,r)}}function b(t,e){for(var i=0,n=e.length;i<n;i++){var s=e[i];T(t,s.name||s,s.defaultValue||s.value,s.readOnly,s.onSetting)}}var O=0;if(t.navigator){var w=navigator.userAgent,L=/opera/i.test(w),A=!L&&/msie/i.test(w),x=/rv:11.0/i.test(w),S=/MSIE 10./i.test(w);if(/Edge/i.test(w),x&&(A=!0),/msie\s[6,7,8]/i.test(w))throw new Error("your browser is not supported");var I=/webkit|khtml/i.test(w),C=!I&&/gecko/i.test(w),D=/firefox\//i.test(w),R=/Chrome\//i.test(w),P=!R&&/Safari\//i.test(w),N=/Macintosh;/i.test(w),k=/(iPad|iPhone|iPod)/g.test(w),M=/Android/g.test(w),B=/Windows Phone/g.test(w),G=(k||M||B)&&"ontouchstart"in t,F=w.match(/AppleWebKit\/([0-9\.]*)/);if(F&&1<F.length)parseFloat(F[1]);M&&parseFloat(w.match(/Android\s([0-9\.]*)/)[1])}function $(t,e){return t.className=e,t}function j(t,e){if(!t.hasOwnProperty("classList")){var i=t.getAttribute("class");if(!i)return $(t,e);for(var n=i.split(" "),s=0,r=n.length;s<r;s++)if(n[s]==e)return;return $(t,i+=" "+e)}t.classList.add(e)}function z(t,e){if(!t.hasOwnProperty("classList")){var i=t.getAttribute("class");if(!i||!i.indexOf(e))return;for(var n="",s=i.split(" "),r=0,o=s.length;r<o;r++)s[r]!=e&&(n+=s[r]+" ");return $(t,n)}t.classList.remove(e)}function H(t){return!isNaN(t)&&t instanceof Number||"number"==typeof t}function Y(t){return void 0!==t&&(t instanceof String||"string"==typeof t)}function U(t){return Array.isArray(t)}function W(e){(e=e||t.event).preventDefault?e.preventDefault():e.returnValue=!1}function q(e){(e=e||t.event).stopPropagation?e.stopPropagation():e.cancelBubble||(e.cancelBubble=!0)}function X(t){W(t),q(t)}function V(t){return Math.floor(Math.random()*t)}function K(t){return 0<t?Math.floor(t):Math.ceil(t)}function Z(t){return 0<t?Math.ceil(t):Math.floor(t)}function Q(t){return t<16777216?"#"+("000000"+t.toString(16)).slice(-6):"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+((t>>24&255)/255).toFixed(2)+")"}function J(t,e,i){"object"!=typeof i||i.hasOwnProperty("enumerable")||(i.enumerable=!0),Object.defineProperty(t,e,i)}function tt(t,e){for(var i in e)if("_"!=i[0]){var n=e[i];"object"!=typeof n||n.hasOwnProperty("enumerable")||(n.enumerable=!0)}Object.defineProperties(t,e)}function et(e,i){i=i||t;for(var n=e.split("."),s=0,r=n.length;s<r;s++)i=i[n[s]];return i}function it(t){return t instanceof MouseEvent||t instanceof Object&&void 0!==t.touches}function nt(e){t.console&&console.log.apply(console,arguments)}function st(e){t.console&&console.error(e)}t.requestAnimationFrame||(t.requestAnimationFrame=t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e,i){return t.setTimeout(function(){e()},1e3/60)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||function(e){return t.clearTimeout(e)});var rt={SELECTION_TOLERANCE:G?7:4,LABEL_COLOR:"#333"};tt(rt,{FONT_STYLE:{get:function(){return this._fontStyle||(this._fontStyle="normal")},set:function(t){this._fontStyle!=t&&(this._fontStyle=t,this._fontChanged=!0)}},FONT_SIZE:{get:function(){return this._fontSize||(this._fontSize=12)},set:function(t){this._fontSize!=t&&(this._fontSize=t,this._fontChanged=!0)}},FONT_FAMILY:{get:function(){return this._fontFamily||(this._fontFamily="Verdana,helvetica,arial,sans-serif")},set:function(t){this._fontFamily!=t&&(this._fontFamily=t,this._fontChanged=!0)}},FONT:{get:function(){return!this._fontChanged&&void 0!==this._fontChanged||(this._fontChanged=!1,this._font=this.FONT_STYLE+" "+this.FONT_SIZE+"px "+this.FONT_FAMILY),this._font}}});var ot=function(t){this._j2=[],this._kw={},t&&this.add(t)};ot.prototype={_j2:null,_kw:null,get:function(t){return this.getByIndex(t)},getById:function(t){return this._kw[t]},getByIndex:function(t){return this._j2[t]},forEach:function(t,e,i){return a(this._j2,t,e,i)},forEachReverse:function(t,e,i){return _(this._j2,t,e,i)},size:function(){return this._j2.length},contains:function(t){return this.containsById(t.id)},containsById:function(t){return this._kw.hasOwnProperty(t)},setIndex:function(t,e){var i=this._j2.indexOf(t);if(i<0)throw new Error("'"+t.id+"' not exist");return i!=e&&(this._j2.splice(i,1),this._j2.splice(e,0,t),!0)},setIndexAfter:function(t,e){var i=this._j2.indexOf(t);if(i<0)throw new Error("'"+t.id+"' not exist");return i==e?e:i==e+1?e+1:(e<i&&(e+=1),this._j2.splice(i,1),this._j2.splice(e,0,t),e)},setIndexBefore:function(t,e){var i=this._j2.indexOf(t);if(i<0)throw new Error("'"+t.id+"' not exist");return i==e?e:i==e-1?e-1:(i<e&&--e,this._j2.splice(i,1),this._j2.splice(e,0,t),e)},indexOf:function(t){return this._j2.indexOf(t)},getIndexById:function(t){var e=this.getById(t);return e?this._j2.indexOf(e):-1},add:function(t,e){return U(t)?this._fp(t,e):this._ka(t,e)},addFirst:function(t){return this.add(t,0)},_fp:function(t,e){if(0==t.length)return!1;for(var i=!1,n=0<=e,s=0,r=(t=t._j2||t).length;s<r;s++){var o=t[s];null!=o&&this._ka(o,e,!0)&&(i=!0,n&&e++)}return i},_ka:function(t,e,i){var n=t.id;return void 0!==n&&!this.containsById(n)&&(c(this._j2,t,e),this._kw[n]=t)},remove:function(t){return U(t)?this._m0q(t):t.id?this._fk(t.id,t):this.removeById(t)},_m0q:function(t){if(0==t.length)return!1;for(var e=!1,i=0,n=(t=t._j2||t).length;i<n;i++){var s=t[i];if(null!=s){void 0===s.id&&(s=this._kw[s]);var r=s.id;this._fk(r,s,!0)&&(e=!0)}}return e},_fk:function(t,e,i){return!(void 0===t||!this.containsById(t)||(null==e&&(e=this.getById(t)),delete this._kw[t],d(this._j2,e),0))},removeById:function(t){var e=this._kw[t];return!!e&&this._fk(t,e)},set:function(t){if(!t||0==t)return this.clear();if(this.isEmpty()||!U(t))return this.clear(),this.add(t);var e=[],i={},n=0;if(a(t,function(t){this._kw[t.id]?(i[t.id]=t,n++):e.push(t)},this),n!=this.length){var s=[];this.forEach(function(t){i[t.id]||s.push(t)},this),s.length&&this._m0q(s)}return e.length&&this._fp(e),!0},clear:function(){return!this.isEmpty()&&(this._j2.length=0,this._kw={},!0)},toDatas:function(){return this._j2.slice(0)},isEmpty:function(){return 0==this._j2.length},valueOf:function(){return this._j2.length},clone:function(t){var e=new ot;return t?e.add(u(this._j2)):e.add(this.toDatas()),e}},tt(ot.prototype,{datas:{get:function(){return this._j2}},random:{get:function(){return this._j2&&this._j2.length?this._j2[V(this._j2.length)]:null}},length:{get:function(){return this._j2?this._j2.length:0}}}),Math.PI;var ht=.5*Math.PI,at=function(t,e,i){t instanceof at&&(e=t.y,i=(t=t.x).rotate),this.set(t,e,i)},lt=function(t,e,i,n){var s=t-i,r=e-n;return Math.sqrt(s*s+r*r)};at.prototype={x:0,y:0,rotate:void 0,set:function(t,e,i){this.x=t||0,this.y=e||0,this.rotate=i||0},negate:function(){this.x=-this.x,this.y=-this.y},offset:function(t,e){this.x+=t,this.y+=e},equals:function(t){return this.x==t.x&&this.y==t.y},distanceTo:function(t){return lt(this.x,this.y,t.x,t.y)},toString:function(){return"Point("+this.x+", "+this.y+")"},clone:function(){return new at(this.x,this.y)}},Object.defineProperty(at.prototype,"distance",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}});var _t=function(t,e,i,n){void 0!==t&&this._lo(t,e,i,n)};function ut(t,e,i){var n,s,r;0==t._m0?(n=-1,r=0,s=e):0==t._m3?(n=0,r=1,s=i):(n=-1/t._m0,s=(t._m0-n)*e+t._m1,r=1);var o=new _t;return o._m0=n,o._m1=s,o._m3=r,o._lu=e,o._lv=i,o._kq=Math.atan2(n,r),o._m3os=Math.cos(o._kq),o._sin=Math.sin(o._kq),o}function ct(t,e,i,n,s){var r,o,h,a;if(n<e?r=-1:e<n&&(r=1),s<i?o=-1:i<s&&(o=1),!r)return{x:e,y:a=o<0?t.y:t.bottom};if(!o)return{x:h=r<0?t.x:t.right,y:i};var l=(i-s)/(e-n),_=i-l*e,u=r<0?e-t.x:e-t.right,c=o<0?i-t.y:i-t.bottom;return Math.abs(l)>=Math.abs(c/u)?h=((a=o<0?t.y:t.bottom)-_)/l:a=l*(h=r<0?t.x:t.right)+_,{x:h,y:a}}function dt(t,e){this.width=t,this.height=e}function ft(t,e,i,n,s,r,o,h){return!(o<=0||h<=0||i<=0||n<=0)&&(h+=r,i+=t,n+=e,((o+=s)<s||t<o)&&(h<r||e<h)&&(i<t||s<i)&&(n<e||r<n))}function gt(t,e,i,n,s,r){return t<=s&&s<=t+i&&e<=r&&r<=e+n}function vt(t,e,i,n,s,r,o,h,a){return a&&(t-=a,e-=a,i+=a+a,n+=a+a),t<=s&&e<=r&&s+o<=t+i&&r+h<=e+n}_t.prototype={_lu:null,_lv:null,_lw:null,_ly:null,_m0:null,_m1:null,_m3:1,_lo:function(t,e,i,n){this._lu=t,this._lv=e,this._lw=i,this._ly=n,t==i?(this._m0=-1,this._m3=0,this._m1=t):(this._m0=(e-n)/(t-i),this._m1=e-this._m0*t,this._m3=1),this._kq=Math.atan2(this._ly-this._lv,this._lw-this._lu),this._m3os=Math.cos(this._kq),this._sin=Math.sin(this._kq)},_m3i:function(t){return 0==this._m3?Number.NaN:this._m0*t+this._m1},_m3j:function(t){return 0==this._m0?Number.NaN:(t-this._m1)/this._m0},_$b:function(t){var e,i,n,s,r,o,h,a=t[0],l=t[2],_=t[4],u=t[1],c=t[3],d=t[5],f=this._m0,g=this._m1;if(0!=(r=0==this._m3?(n=Math.sqrt((-f*f*a-f*g)*_+f*f*l*l+2*f*g*l-f*g*a),s=-f*l+f*a,f*_-2*f*l+f*a):(n=Math.sqrt((f*a-u+g)*d+c*c+(-2*f*l-2*g)*c+(f*_+g)*u+(-f*f*a-f*g)*_+f*f*l*l+2*f*g*l-f*g*a),s=-c+u+f*l-f*a,d-2*c+u-f*_+2*f*l-f*a)))return i=(-n+s)/r,0<=(e=(n+s)/r)&&e<=1&&(o=$e(e,t)),0<=i&&i<=1&&(h=$e(i,t)),o&&h?[o,h]:o||h||void 0},_3b:function(t,e,i){if(this._m0==t._m0||0==this._m3&&0==t._m3)return null;var n,s,r,o,h;if(n=0==this._m3?this._m1:0==t._m3?t._m1:(t._m1-this._m1)/(this._m0-t._m0),s=0==this._m0?this._m1:0==t._m0?t._m1:this._m3?this._m0*n+this._m1:t._m0*n+t._m1,!e)return{x:n,y:s};if(i)o=-(r=-e/2);else{var a=-(r=-lt(this._lu,this._lv,n,s))+(o=lt(this._lw,this._ly,n,s));if(e<a){var l=e/a;r*=l,o*=l}else h=(e-a)/2}var _=this._6t(n,s,r),u=this._6t(n,s,o);return h&&(_._rest=h,u._rest=h),[_,u]},_6t:function(t,e,i){return 0==this._m3?{x:t,y:e+i}:{x:t+i*this._m3os,y:e+i*this._sin}}},dt.prototype={width:0,height:0,isEmpty:function(){return this.width<=0||this.height<=0},clone:function(){return new dt(this.width,this.height)},toString:function(){return"Size("+this.width+", "+this.height+")"}};var Et=function(t,e,i,n){t instanceof Object&&!H(t)&&(e=t.y,i=t.width,n=t.height,t=t.x),void 0===i&&(i=-1),void 0===n&&(n=-1),this.x=t||0,this.y=e||0,this.width=i,this.height=n};function pt(t,e,i,n){1==arguments.length?e=i=n=t:2==arguments.length&&(i=t,n=e),this.set(t,e,i,n)}Et.prototype={x:0,y:0,width:-1,height:-1,setByRect:function(t){this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0},set:function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},offset:function(t,e){return this.x+=t,this.y+=e,this},contains:function(t,e,i,n){if(1!=arguments.length)return 2==arguments.length?t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height:vt(this.x,this.y,this.width,this.height,t,e,i||0,n||0);if("object"==typeof t&&"x"in(s=t)&&"y"in s)return this.contains(t.x,t.y,t.width,t.height);var s;throw{message:"arguments error"}},intersectsPoint:function(t,e,i){return!(this.width<=0&&this.height<=0)&&(i?this.intersectsRect(t-i,e-i,2*i,2*i):t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height)},intersectsRect:function(t,e,i,n){return ft(this.x,this.y,this.width,this.height,t,e,i,n)},intersects:function(t,e){return H(t.width)?this.intersectsRect(t.x,t.y,t.width,t.height):this.intersectsPoint(t,e)},intersection:function(t,e,i,n){var s=this.x,r=this.y,o=s,h=r,a=t,l=e;return s<t&&(s=t),r<e&&(r=e),(a+=i)<(o+=this.width)&&(o=a),(l+=n)<(h+=this.height)&&(h=l),h-=r,(o-=s)<0||h<0?null:new Et(s,r,o,h)},addPoint:function(t){this.add(t.x,t.y)},add:function(t,e){if(H(t.width))return this.addRect(t.x,t.y,t.width,t.height);if(H(t.x)&&(e=t.y,t=t.x),this.width<0||this.height<0)return this.x=t,this.y=e,void(this.width=this.height=0);var i=this.x,n=this.y,s=this.width,r=this.height;s+=i,r+=n,t<i&&(i=t),e<n&&(n=e),s<t&&(s=t),r<e&&(r=e),r-=n,(s-=i)>Number.MAX_VALUE&&(s=Number.MAX_VALUE),r>Number.MAX_VALUE&&(r=Number.MAX_VALUE),this.set(i,n,s,r)},addRect:function(t,e,i,n){var s=this.width,r=this.height;(s<0||r<0)&&this.set(t,e,i,n);var o=i,h=n;if(!(o<0||h<0)){var a=this.x,l=this.y;s+=a,r+=l,t<a&&(a=t),e<l&&(l=e),s<(o+=t)&&(s=o),r<(h+=e)&&(r=h),r-=l,(s-=a)>Number.MAX_VALUE&&(s=Number.MAX_VALUE),r>Number.MAX_VALUE&&(r=Number.MAX_VALUE),this.set(a,l,s,r)}},shrink:function(t,e,i,n){return H(t)?n=1==arguments.length?e=i=t||0:2==arguments.length?(i=t||0,e||0):(t=t||0,e=e||0,i=i||0,n||0):(e=t.left||0,i=t.bottom||0,n=t.right||0,t=t.top||0),this.x+=e,this.y+=t,this.width-=e+n,this.height-=t+i,this},grow:function(t,e,i,n){return H(t)?n=1==arguments.length?e=i=t||0:2==arguments.length?(i=t||0,e||0):(t=t||0,e=e||0,i=i||0,n||0):(e=t.left||0,i=t.bottom||0,n=t.right||0,t=t.top||0),this.x-=e,this.y-=t,this.width+=e+n,this.height+=t+i,this},scale:function(t){return this.x*=t,this.y*=t,this.width*=t,this.height*=t,this},isEmpty:function(){return this.width<=0&&this.height<=0},toString:function(){return this.x+" , "+this.y+" , "+this.width+" , "+this.height},union:function(t){var e=this.width,i=this.height;if(e<0||i<0)return new Et(t.x,t.y,t.width,t.height);var n=t.width,s=t.height;if(n<0||s<0)return new Et(this.x,this.y,this.width,this.height);var r=this.x,o=this.y;e+=r,i+=o;var h=t.x,a=t.y;return h<r&&(r=h),a<o&&(o=a),e<(n+=h)&&(e=n),i<(s+=a)&&(i=s),i-=o,(e-=r)>Number.MAX_VALUE&&(e=Number.MAX_VALUE),i>Number.MAX_VALUE&&(i=Number.MAX_VALUE),new Et(r,o,e,i)},clear:function(){this.set(0,0,-1,-1)},equals:function(t){return t&&this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},clone:function(t,e){return new Et(this.x+(t||0),this.y+(e||0),this.width,this.height)},toArray:function(){return[this.x,this.y,this.width,this.height]},getIntersectionPoint:function(t,e,i,n){return ct(this,t,e,i,n)}},g(Et,dt),Et.equals=function(t,e){return t==e||t&&e&&t.x==e.x&&t.y==e.y&&t.width==e.width&&t.height==e.height},tt(Et.prototype,{left:{get:function(){return this.x}},top:{get:function(){return this.y}},bottom:{get:function(){return this.y+this.height}},right:{get:function(){return this.x+this.width}},cx:{get:function(){return this.x+this.width/2}},cy:{get:function(){return this.y+this.height/2}},center:{get:function(){return new at(this.cx,this.cy)}}}),Et.intersects=ft,Et.intersection=function(t,e,i,n,s,r,o,h){var a=t,l=e,_=s,u=r;return t<s&&(t=s),e<r&&(e=r),(_+=o)<(a+=i)&&(a=_),(u+=h)<(l+=n)&&(l=u),l-=e,(a-=t)<0||l<0?null:new Et(t,e,a,l)},Et.intersectsPoint=gt,pt.prototype={top:0,bottom:0,left:0,right:0,set:function(t,e,i,n){this.top=t||0,this.left=e||0,this.bottom=i||0,this.right=n||0},clone:function(){return new pt(this.top,this.left,this.bottom,this.right)},equals:function(t){return t&&this.top==t.top&&this.bottom==t.bottom&&this.left==t.left&&this.right==t.right}};var mt=function(t,e){this.horizontalPosition=t,this.verticalPosition=e};mt.prototype={verticalPosition:!1,horizontalPosition:!1,toString:function(){return(this.horizontalPosition||"")+(this.verticalPosition||"")}},J(mt.prototype,"sortName",{get:function(){return(this.horizontalPosition||"")+(this.verticalPosition||"")}});var yt="l",Tt="r",bt="t",Ot="b";mt.LEFT_TOP=new mt(yt,bt),mt.LEFT_MIDDLE=new mt(yt,"m"),mt.LEFT_BOTTOM=new mt(yt,Ot),mt.CENTER_TOP=new mt("c",bt),mt.CENTER_MIDDLE=new mt("c","m"),mt.CENTER_BOTTOM=new mt("c",Ot),mt.RIGHT_TOP=new mt(Tt,bt),mt.RIGHT_MIDDLE=new mt(Tt,"m"),mt.RIGHT_BOTTOM=new mt(Tt,Ot);var wt=[mt.LEFT_TOP,mt.LEFT_MIDDLE,mt.LEFT_BOTTOM,mt.CENTER_TOP,mt.CENTER_MIDDLE,mt.CENTER_BOTTOM,mt.RIGHT_TOP,mt.RIGHT_MIDDLE,mt.RIGHT_BOTTOM];function Lt(t,e){var i=At(t,e.width,e.height);return i.x+=e.x||0,i.y+=e.y||0,i}function At(t,e,i){if(!t)return{x:0,y:0};if(Y(t)&&(t=mt.fromString(t)),t instanceof mt){var n,s,r=t.horizontalPosition,o=t.verticalPosition;switch(r){case yt:n=0;break;case Tt:n=e;break;default:n=e/2}switch(o){case bt:s=0;break;case Ot:s=i;break;default:s=i/2}return{x:n,y:s}}if(void 0!==t.x)return t.byPercent?{x:t.x*e,y:t.y*i}:{x:t.x,y:t.y};throw new Error("Position not be supported - "+t)}function xt(t,e,i,n,s){this.set(t,e,i,n),this.radius=s}function St(t,e,i,n){this.source=t,this.type=e,this.kind=i,this.value=n}J(mt,"random",{get:function(){return wt[V(wt.length)]}}),mt.fromString=function(t){for(var e in mt){var i=mt[e];if(i&&"random"!=e&&i instanceof mt&&i.toString()==t)return i}throw new Error("Position not be supported - "+t)},xt.prototype={radius:0,classify:function(t,e,i,n){return t<e?0:t<e+n?1:t<i-n?2:t<i?3:4},intersectsRect:function(t,e,i,n){if(!1===E(this,xt,"intersectsRect",arguments))return!1;var s=this.x,r=this.y,o=s+this.width,h=r+this.height,a=2*radius,l=2*radius,_=Math.min(this.width,Math.abs(a))/2,u=Math.min(this.height,Math.abs(l))/2,c=this.classify(t,s,o,_),d=this.classify(t+i,s,o,_),f=this.classify(e,r,h,u),g=this.classify(e+n,r,h,u);return 2==c||2==d||2==f||2==g||c<2&&2<d||f<2&&2<g||(t=1==d?t=t+i-(s+_):t-=o-_,e=1==g?e=e+n-(r+u):e-=h-u,(t/=_)*t+(e/=u)*e<=1)},intersectsPoint:function(t,e){if(!1===E(this,xt,"intersectsPoint",arguments))return!1;var i=this.x,n=this.y,s=i+this.width,r=n+this.height;if(t<i||e<n||s<=t||r<=e)return!1;var o=2*radius,h=2*radius,a=Math.min(this.width,Math.abs(o))/2,l=Math.min(this.height,Math.abs(h))/2;return t>=(i+=a)&&t<(i=s-a)||e>=(n+=l)&&e<(n=r-l)||(t=(t-i)/a)*t+(e=(e-n)/l)*e<=1},clone:function(){return new xt(this.x,this.y,this.width,this.height,this.radius)}},g(xt,Et),St.prototype={source:null,type:null,kind:null,value:null,toString:function(){return"source: "+this.source+", type: "+this.type+", kind: "+this.kind}};var It=function(t,e,i,n,s){this.source=t,this.kind=e,this.oldValue=n,this.value=i,this.propertyType=s};function Ct(t,e,i){this.source=t,this.oldValue=t.parent,this.value=e,this.newIndex=i,this.oldValue&&(this.oldIndex=this.oldValue.getChildIndex(t))}function Dt(t,e){this.source=t,this.value=e}function Rt(t,e){this.source=t,this.value=e}function Pt(t,e,i,n){this.source=e,this.oldValue=i,this.value=n,this.parent=t,this.child=e,this.oldIndex=i,this.newIndex=n}function Nt(){}function kt(t,e){this.listener=t,this.scope=e,t instanceof Function?this.onEvent=t:(this.onEvent=t.onEvent,this.beforeEvent=t.beforeEvent),this.equals=function(t){return t&&this.listener==t.listener&&this.scope==t.scope}}It.prototype={type:"property.change",propertyType:null,toString:function(){return"source: "+this.source+", type: "+this.type+", propertyName: "+this.kind+", oldValue: "+this.oldValue+", value: "+this.value}},g(It,St),J(It.prototype,"propertyName",{get:function(){return this.kind},set:function(t){this.kind=t}}),Ct.prototype={kind:"parent"},g(Ct,It),Dt.prototype.kind="child.add",g(Dt,It),Rt.prototype.kind="child.remove",g(Rt,It),Pt.prototype.kind="child.index",g(Pt,It),Nt.prototype={listener:null,beforeEvent:function(t){return null==this.listener||!this.listener.beforeEvent||this.listener.beforeEvent(t)},onEvent:function(t){null!=this.listener&&this.listener.onEvent&&this.listener.onEvent(t)}};var Mt=function(){v(this,Mt,arguments),this.events={},this.listeners=[]};function Bt(t,e,i,n,s){this.source=t,this.type="list",this.kind=e,this.data=i,this.index=n,this.oldIndex=s}function Gt(){this.id=++O,this._m34={}}function Ft(){this._j2=[],this._kw={},this._1b=new Mt}kt.prototype={equals:function(t){return t&&this.listener==t.listener&&this.scope==t.scope},destroy:function(){delete this.scope,delete this.listener}},Mt.prototype={listeners:null,_m17:function(){return this.listeners&&0<this.listeners.length},_6v:function(t,e){return t instanceof Mt?t:new kt(t,e)},_9r:function(t,e){if(t instanceof Mt)return this.listeners.indexOf(t);for(var i=this.listeners,n=0,s=i.length;n<s;n++){var r=i[n];if(r.listener==t&&r.scope==e)return n}return-1},contains:function(t,e){return 0<=this._9r(t,e)},addListener:function(t,e){if(this.contains(t,e))return!1;this.listeners.push(this._6v(t,e))},removeListener:function(t,e,i){var n=this._9r(t,e);0<=n&&this.listeners.splice(n,1)},on:function(t,e){this.addListener(t,e)},un:function(t,e,i){this.removeListener(t,e,i)},onEvent:function(t){if(!this.listeners)return!1;a(this.listeners,function(e){e.onEvent&&(e.scope?e.onEvent.call(e.scope,t):e.onEvent(t))},this)},beforeEvent:function(t){return!this.listeners||a(this.listeners,function(e){return!e.beforeEvent||(e.scope?e.beforeEvent.call(e.scope,t):e.beforeEvent(t))},this)},_dg:function(t){return!1!==this.beforeEvent(t)&&(this.onEvent(t),!0)},clear:function(){this.listeners=[]},destroy:function(){this.clear()}},g(Mt,Nt),Bt.prototype={index:-1,oldIndex:-1,toString:function(){return"source: "+this.source+", type: "+this.type+", kind: "+this.kind+", data: "+this.data+", index: "+this.index+", oldIndex: "+this.oldIndex}},g(Bt,St),Bt.KIND_ADD="add",Bt.KIND_REMOVE="remove",Bt.KIND_CLEAR="clear",Bt.KIND_INDEX_CHANGE="index.change",Gt.prototype={_m34:null,id:null,get:function(t){return this._m34[t]},set:function(t,e){var i=this.get(t);if(i===e)return!1;var n=new It(this,t,e,i);return n.propertyType=Le.PROPERTY_TYPE_CLIENT,this._m0o(t,e,n,this._m34)},_m0o:function(t,e,i,n){return!1!==this.beforeEvent(i)&&(n=n||this._m34,void 0===e?delete n[t]:n[t]=e,this.onEvent(i),!0)},remove:function(t){this.set(t,null)},valueOf:function(){return this.id},toString:function(){return this.id},_dr:function(t,e){if(void 0===e&&(e=-1),this==t||t==this._ja)return!1;if(t&&this==t._ja&&!t._dr(null))return!1;var i,n,s=new Ct(this,t,e);if(!this.beforeEvent(s))return!1;var r,o,h,a,l,_=this._ja;return!(t&&(i=new Dt(t,this),!t.beforeEvent(i))||null!=_&&(n=new Rt(_,this),!_.beforeEvent(n))||(null!=(this._ja=t)&&(a=this,l=e,(h=t).children.add(a,l),h.onChildAdd(a,l)),null!=_&&(o=this,(r=_)._fr&&(r._fr.remove(o),r.onChildRemove(o))),this.onEvent(s),null!=t&&t.onEvent(i),null!=_&&_.onEvent(n),this.onParentChanged(_,t),0))},addChild:function(t,e){var i=t._dr(this,e);return i&&this.onChildAdd(t,e),i},removeChild:function(t){if(!this._fr||!this._fr.contains(t))return!1;var e=t._dr(null);return this.onChildRemove(t),e},toChildren:function(){return this._fr?this._fr.toDatas():null},clearChildren:function(){if(this._fr&&this._fr.length){var t=this.toChildren();a(t,function(t){t._dr(null)},this),this.onChildrenClear(t)}},forEachChild:function(t,e){return!!this.hasChildren()&&this._fr.forEach(t,e)},onChildAdd:function(t,e){},onChildRemove:function(t){},onChildrenClear:function(t){},onParentChanged:function(t,e){},getChildIndex:function(t){return this._fr&&this._fr.length?this._fr.indexOf(t):-1},setChildIndex:function(t,e){if(!this._fr||!this._fr.length)return!1;var i=this._fr.indexOf(t);if(i<0||i==e)return!1;var n=new Pt(this,t,i,e);return!1!==this.beforeEvent(n)&&(this._fr.remove(t)&&this._fr.add(t,e),this.onEvent(n),!0)},hasChildren:function(){return this._fr&&0<this._fr.length},getChildAt:function(t){return null==this._fr?null:this._fr._j2[t]},isDescendantOf:function(t){if(!t.hasChildren())return!1;for(var e=this.parent;null!=e;){if(t==e)return!0;e=e.parent}return!1},firePropertyChangeEvent:function(t,e,i,n){this.onEvent(new It(this,t,e,i,n))}},g(Gt,Nt),tt(Gt.prototype,{childrenCount:{get:function(){return this._fr?this._fr.length:0}},children:{get:function(){return this._fr||(this._fr=new ot),this._fr}},parent:{get:function(){return this._ja},set:function(t){this._dr(t,-1)}},properties:{get:function(){return this._m34},set:function(t){this._m34!=t&&(this._m34=t)}}}),Ft.prototype={beforeEvent:function(t){return null==this._1b||!this._1b.beforeEvent||this._1b.beforeEvent(t)},onEvent:function(t){this._1b instanceof Function?this._1b(t):null!=this._1b&&this._1b.onEvent&&this._1b.onEvent(t)},_1b:null,setIndex:function(t,e){if(!this.contains(t))throw new Error("'"+t.getId()+"' not exist");var i=this.indexOf(t);if(i==e)return!1;var n=new Bt(this,Bt.KIND_INDEX_CHANGE,t,e,i);return!1!==this.beforeEvent(n)&&(0<=this._j2.remove(t)&&this._j2.add(e,t),this.onEvent(n),!0)},_fp:function(t,e){if(0==t.length)return!1;var i=!1,n=0<=e,s=new Bt(this,Bt.KIND_ADD,t,e);if(!1===this.beforeEvent(s))return!1;for(var r=[],o=0,h=(t=t._j2||t).length;o<h;o++){var a=t[o];null!=a&&this._ka(a,e,!0)&&(r.push(a),i=!0,n&&e++)}return s.data=r,this.onEvent(s),i},_ka:function(t,e,i){if(!1===this.accept(t))return!1;if(i)return E(this,Ft,"_ka",arguments);var n=new Bt(this,Bt.KIND_ADD,t,e);return!1!==this.beforeEvent(n)&&!!E(this,Ft,"_ka",arguments)&&(this._k9(t,n),t)},_k9:function(t,e){this.onEvent(e)},_m0q:function(t){if(0==t.length)return!1;var e=new Bt(this,Bt.KIND_REMOVE,t);if(!1===this.beforeEvent(e))return!1;for(var i=[],n=!1,s=0,r=(t=t._j2||t).length;s<r;s++){var o=t[s];if(null!=o){var h=o.id||o;void 0===o.id&&(o=null),this._fk(h,o,!0)&&(i.push(o),n=!0)}}return e.data=i,this.onEvent(e),n},_fk:function(t,e,i){if(i)return E(this,Ft,"_fk",arguments);var n=new Bt(this,Bt.KIND_REMOVE,e);return!1!==this.beforeEvent(n)&&!!E(this,Ft,"_fk",arguments)&&(this.onEvent(n),!0)},clear:function(){if(this.isEmpty())return!1;var t=new Bt(this,Bt.KIND_CLEAR,this.toDatas());return!1!==this.beforeEvent(t)&&!!E(this,Ft,"clear")&&(this.onEvent(t),!0)},accept:function(t){return!this.filter||!1!==this.filter(t)}},g(Ft,ot),J(Ft.prototype,"listChangeDispatcher",{get:function(){return this._1b}});var $t=function(){v(this,$t,arguments),this.selectionChangeDispatcher=new Mt,this._selectionModel=new jt(this),this._selectionModel._1b=this.selectionChangeDispatcher,this.dataChangeDispatcher=new Mt,this.dataChangeDispatcher.addListener({beforeEvent:this.beforeDataPropertyChange,onEvent:this.onDataPropertyChanged},this),this.parentChangeDispatcher=new Mt,this.childIndexChangeDispatcher=new Mt,this.$roots=new ot;var t=this;this.$roots.setIndex=function(e,i){if(!t.$roots.contains(e))throw new Error("'"+e.id+"' not exist");var n=t.$roots._j2.indexOf(e);if(n==i)return!1;t.$roots._j2.splice(n,1),t.$roots._j2.splice(i,0,e),t._m3aIndexFlag=!0;var s=new Pt(t,e,n,i);return t._1t(s),!0}};$t.prototype={selectionModel:null,selectionChangeDispatcher:null,dataChangeDispatcher:null,parentChangeDispatcher:null,roots:null,_k9:function(t,e){t.listener=this.dataChangeDispatcher,t.parent||this.$roots.add(t),this.onEvent(e)},_fk:function(t,e){if(E(this,$t,"_fk",arguments)){if(e instanceof Gn)e.disconnect();else if(e instanceof zn){var i=e.getEdges();this.remove(i)}var n=e.parent;return null==n?this.$roots.remove(e):(n.removeChild(e),n.__6e=!0),e.hasChildren()&&this.remove(e.toChildren()),!(e.listener=null)}return!1},_5b:function(t){var e=t.source;this.contains(e)&&(null==e.parent?this.$roots.add(e):null==t.oldValue&&this.$roots.remove(e),this.parentChangeDispatcher.onEvent(t))},_1t:function(t){this.childIndexChangeDispatcher.onEvent(t)},beforeDataPropertyChange:function(t){return!(t instanceof Ct)||this.parentChangeDispatcher.beforeEvent(t)},onDataPropertyChanged:function(t){if(t instanceof Ct)return this._m3aIndexFlag=!0,t.source._m3aIndexFlag=!0,void this._5b(t);t instanceof Pt&&(this._m3aIndexFlag=!0,t.source._m3aIndexFlag=!0,this._1t(t))},toRoots:function(){return this.$roots.toDatas()},_fm:function(t){var e,i=t._ja,n=(e=i?i._fr:this.$roots).indexOf(t);if(n<0)throw new Error("data '"+t+"' not exist in the box");return 0==n?i:e.getByIndex(n-1)},_fo:function(t){var e,i=t._ja,n=(e=i?i._fr:this.$roots).indexOf(t);if(n<0)throw new Error("data '"+t+"' not exist in the box");return n==e.length-1?i?this._fo(i):null:e.getByIndex(n+1)},forEachByDepthFirst:function(t,e,i){return!!this.$roots.length&&s(this.$roots,t,e,i)},forEachByDepthFirstReverse:function(t,e,i){return!!this.$roots.length&&r(this.$roots,t,e,i)},forEachByBreadthFirst:function(t,e){return!!this.$roots.length&&o(this.$roots,t,e)},forEachByBreadthFirstReverse:function(t,e){return!!this.$roots.length&&function(t,e,i){for(var n,s=(t._j2||t).slice(0);s.length;){if(n=s[s.length-1],s=s.splice(0,s.length-1),!1===e.call(i,n))return!1;if(n.hasChildren()){var r=n.children;r=r._j2||r,s=s.concat(r)}}return!0}(this.$roots,t,e)},clear:function(){return!!E(this,$t,"clear")&&(this.$roots.clear(),this.selectionModel.clear(),!0)}},g($t,Ft),tt($t.prototype,{selectionModel:{get:function(){return this._selectionModel}},roots:{get:function(){return this.$roots}}});var jt=function(t){v(this,jt),this.box=t,this._m1oxChangeListener={onEvent:function(t){Bt.KIND_REMOVE==t.kind?null!=t.data?this.remove(t.data):null!=t.datas&&this.remove(t.datas):Bt.KIND_CLEAR==t.kind&&this.clear()}},this.box.listChangeDispatcher.addListener(this._m1oxChangeListener,this)};function zt(t){return t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})}jt.prototype={box:null,isSelected:function(t){return this.containsById(t.id||t)},select:function(t){return this.add(t)},unselect:function(t){return this.remove(t)},reverseSelect:function(t){return this.contains(t)?this.remove(t):this.add(t)},accept:function(t){return this.box.contains(t)}},g(jt,Ft);var Ht=null,Yt=null,Ut=function(){if(!e.createElement)return function(t){return t};var t=e.createElement("div").style,i={};return function(e){if(i[e])return i[e];var n=zt(e);return void 0!==t[n]||Yt&&void 0!==t[n=zt(Yt+n)]?i[e]=n:e}}();function Wt(t,e){var i,n,s=t.style;if(!s)return!1;for(i in e)e.hasOwnProperty(i)&&(n=Ut(i))&&(s[n]=e[i]);return t}function qt(t,e,i){(e=Ut(e))&&(t.style[e]=i)}function Xt(t,e){if(!Ht)return!1;e&&!Y(e)&&(e=function(t){var e,i,n="";for(e in t)t.hasOwnProperty(e)&&(i=Ut(e))&&(n+=i.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")+":"+t[e]+";");return n?n.substring(0,n.length-1):n}(e)),Ht.insertRule?Ht.insertRule(t+"{"+e+"}",0):Ht.addRule&&Ht.addRule(t,e,0)}var Vt,Kt,Zt,Qt={};function Jt(t,e){var i=t.clientWidth;return i?(e=e||t.getBoundingClientRect()).width/i:1}function te(t,e,i,n,s){if(s){var r=function(t){r.handle.call(r.scope,t)};return r.scope=s,r.handle=i,t.addEventListener(e,r,n),r}return t.addEventListener(e,i,n),i}if(function(){if(e.head){for(var i=e.head,n="Webkit Moz O ms Khtml".split(" "),s=0;s<n.length;s++)if(void 0!==i.style[n[s]+"Transform"]){Yt="-"+n[s].toLowerCase()+"-";break}var r,o,h=e.createElement("style");for(var a in t.createPopup||h.appendChild(e.createTextNode("")),h.type="text/css",h.id="qunee-styles",i.appendChild(h),Ht=h.sheet,Qt){var l=Qt[a];for(var _ in r=a,o="",l)o+=Ut(_)+":"+l[_]+";\n";Xt(r,o)}}}(),rt.DOUBLE_CLICK_INTERVAL_TIME=200,rt.LONG_PRESS_INTERVAL=800,rt.DELAY_CLICK=!0,t.navigator&&navigator.userAgent){var ee,ie="ontouchstart"in t,ne=ie&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent);if(ne)ee="touchstart,touchmove,touchend,touchcancel";else{var se="onmousewheel"in t?"mousewheel":"DOMMouseScroll";ee="contextmenu,mousedown,mouseup,click,dblclick,mousemove,keydown,keyup,"+se,ie&&(ee+=",touchstart,touchmove,touchend,touchcancel")}function re(t){return rt.DOUBLE_CLICK_INTERVAL_TIME}function oe(t){ce._m3urrentItem&&ce._m3urrentItem._onWindowMouseMove(t)}function he(t){ce._m3urrentItem&&(ce._m3urrentItem._onWindowMouseUp(t),le(null))}ee=ee.split(/[\s,]+/);var ae=function(e){return t.TouchEvent&&e instanceof t.TouchEvent},W=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},q=function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},X=function(t){W(t),q(t)},le=function(t){ce._m3urrentItem!=t&&(ce._m3urrentItem&&(ce._m3urrentItem.__dragging=!1),ce._m3urrentItem=t)};function _e(t,e){var i,n;n=t.touches?(i=t.cx,t.cy):(i=t.clientX,t.clientY);var s=Jt(e);return s&&1!==s&&(i/=s,n/=s),{timeStamp:t.timeStamp,x:i,y:n}}function ue(t,e,i){this._kz=t,this._scope=i,this._handler=e,this._dragPoints=new fe,this._install()}ue.prototype={_install:function(){var e,i;this.__m0ction||(this.__m0ction=function(t){this._m0ction(t)}.bind(this),e=this._kz,i=this.__m0ction,ee.forEach(function(t){e.addEventListener(t,i,!1)}),G||ce._m0t||(ce._m0t=!0,t.addEventListener("mousemove",oe,!0),t.addEventListener("mouseup",he,!0)))},_uninstall:function(){var t,e;this.__m0ction&&(t=this._kz,e=this.__m0ction,ee.forEach(function(i){t.removeEventListener(i,e,!1)}))},_m0ction:function(t){var e=(t=this._toQEvent(t)).type;!1===this._handleEvent(t,e)&&this._onEvent(t,"on"+e)},_m3ancelLongPressTimer:function(){this.__longPressTimer&&(clearTimeout(this.__longPressTimer),this.__longPressTimer=null)},__kfLongPress:function(t){this.__onLongPressFunction||(this.__onLongPressFunction=function(){this._kfEvent&&(this.__m3ancelClick=!0,this._kfEvent.button?this._onEvent(this._kfEvent,"onlongpress2"):this._onEvent(this._kfEvent,"onlongpress"))}.bind(this)),this._m3ancelLongPressTimer(),this.__longPressTimer=setTimeout(this.__onLongPressFunction,rt.LONG_PRESS_INTERVAL)},__fixTouchEvent:function(t){for(var e,i,n=0,s=0,r=t.touches.length,o=0;o<r;){var h=t.touches[o++],a=h.clientX,l=h.clientY;if(2==o){var _=i[0]-a,u=i[1]-l;e=Math.sqrt(_*_+u*u)}i=[a,l],n+=a,s+=l}t.cx=n/r,t.cy=s/r,t.center={x:t.cx,y:t.cy,clientX:t.cx,clientY:t.cy},t.distance=e},__touchCountChange:function(t){this._dragPoints.clear(),this._9g=_e(t,this._kz)},_handleTouchEvent:function(t,e){switch(e){case"touchstart":q(t),this.__fixTouchEvent(t),this.__touchCountChange(t);var i=t.touches.length;this._kfEvent||(this._kfEvent=t,this._onstart(t),this.__m3ancelClick=!1,this.__kfLongPress(t)),1==i&&(this.__kfMulTouchEvent=null),2<=i&&!this.__kfMulTouchEvent&&(this.__kfMulTouchEvent={cx:t.cx,cy:t.cy,distance:t.distance});break;case"touchmove":if(X(t),this.__fixTouchEvent(t),2<=(i=t.touches.length)&&this.__kfMulTouchEvent){var n=this.__kfMulTouchEvent.distance;t._scale=t.distance/n,this.__kfMulTouchEvent.prevScale?t.dScale=t._scale/this.__kfMulTouchEvent.prevScale:t.dScale=t._scale,this.__kfMulTouchEvent.prevScale=t._scale,this.__pinching||(this.__pinching=!0,this._onEvent(t,"startpinch"))}this.__dragging||(this.__dragging=!0,this._kfdrag(t)),this._ondrag(t),this.__pinching&&this._onEvent(t,"onpinch");break;case"touchend":X(t),(i=t.touches.length)&&(this.__fixTouchEvent(t),this.__touchCountChange(t)),i<=1&&(this.__pinching&&(this.__pinching=!1,this._onEvent(t,"endpinch")),this.__kfMulTouchEvent=null),0==i&&(this.__dragging?(this._enddrag(t),this.__dragging=!1):t.timeStamp-this._kfEvent.timeStamp<.8*re()&&this.__onclick(this._kfEvent),this._onrelease(t));break;case"touchcancel":this.__dragging=!1,this.__pinching=!1,this.__kfMulTouchEvent=null}return!1},_handleEvent:function(t,e){if(ae(t))return this._handleTouchEvent(t,e);if("mousedown"==e)q(t),le(this),this._9g=_e(t,this._kz),this._kfEvent||(this._kfEvent=t,this._onstart(t)),this.__m3ancelClick=!1,this.__kfLongPress(t);else if("mouseup"==e)le(),this._onrelease(t);else if("click"==e){if(this.__m3ancelClick)return!0;if(this._isDelayClick())return this.__onclick(t),!0}else if("dblclick"==e){if(this._isDelayClick())return!0}else{if("contextmenu"==e)return this._onEvent(t,"oncontextmenu"),this._kfEvent&&function(t){return t.defaultPrevented||!1===t.returnValue}(t)&&le(this),!0;if(e==se){var i=t.wheelDelta;if(void 0!==i?i/=120:i=-t.detail,!i)return;return t.delta=i,this._onEvent(t,"onmousewheel")}}return!1},_onEvent:function(t,e){if(this._handler){var i=this._handler;if(e=e||t.type,i instanceof Function)return i(t,e);if(!(i.accept instanceof Function&&!1===i.accept(e,t)))return i.onevent instanceof Function&&i.onevent(e,t,this._scope||this._kz),i[e]instanceof Function?i[e].call(i,t,this._scope||this._kz):void 0}},_toQEvent:function(t){return t},_onWindowMouseUp:function(t){this.__dragging&&(X(t),this.__dragging=!1,t=this._toQEvent(t),this._enddrag(t),this._onrelease(t),this._onEvent(t,"onmouseup"))},_kfDragDistance:4,_onWindowMouseMove:function(t){if(this._kfEvent){if(X(t),!this.__dragging){var e=this._kfEvent.screenX-t.screenX,i=this._kfEvent.screenY-t.screenY;if(e*e+i*i<this._kfDragDistance)return;this.__dragging=!0,this._kfdrag(t)}this._ondrag(this._toQEvent(t))}},_isDelayClick:function(){return rt.DELAY_CLICK},__onclick:function(t){if(!this.__m3ancelClick){var e=re();this.__m3lickTimer?this.__dblclicked||(clearTimeout(this.__m3lickTimer),this.__m3lickTimer=null,this._onEvent(t,"ondblclick"),this.__dblclicked=!0):(this.__dblclicked=!1,this.__m3lickTimer=setTimeout(function(t,e){this.__m3lickTimer=null,this.__dblclicked||this._onEvent(t,"onclick")}.bind(this,t,e),e))}},_onstart:function(t){t.button?this._onEvent(t,"onstart2"):this._onEvent(t,"onstart")},_onrelease:function(t){this._kfEvent&&(this._m3ancelLongPressTimer(),t.button?this._onEvent(t,"onrelease2"):this._onEvent(t,"onrelease"),this._kfEvent=null,this._9g=null)},_m0ppendDragInfo:function(t){var e=this._9g;this._9g=_e(t,this._kz),this._dragPoints.add(e,this._9g,t)},_kfdrag:function(t){this.__m3ancelClick=!0,this._m3ancelLongPressTimer(),this._kfEvent.button?this._onEvent(this._kfEvent,"startdrag2"):this._onEvent(this._kfEvent,"startdrag")},_ondrag:function(t){this._m0ppendDragInfo(t),this._kfEvent.button?this._onEvent(t,"ondrag2"):this._onEvent(t,"ondrag")},_enddrag:function(t){if(t.timeStamp-this._9g.timeStamp<100){var e=this._dragPoints.getCurrentSpeed();e&&(t.vx=e.x,t.vy=e.y)}this._kfEvent.button?this._onEvent(t,"enddrag2"):this._onEvent(t,"enddrag"),this._dragPoints.clear()},_i1:function(t){this._khStatus()},_khStatus:function(){ce._m3urrentItem==this&&delete ce._m3urrentItem,this._m3ancelLongPressTimer(),delete this._9g,this._kfEvent&&(delete this._kfEvent.getData,delete this._kfEvent.getUI,delete this._kfEvent)}};var ce=y(function(t){this._ke=t,ue.apply(this,[t.canvasPanel,null,t])},{super:ue,_lnData:function(t){return this._ke.getElementByMouseEvent(t)},_kn:function(t){return this._ke.getUIByMouseEvent(t)},_toQEvent:function(e){return(e instanceof MouseEvent||t.TouchEvent&&e instanceof t.TouchEvent)&&(e.getData=this._lnData.bind(this,e),e.getUI=this._kn.bind(this,e)),e},_onElementRemoved:function(t){this._hcListeners(function(e){e.onElementRemoved instanceof Function&&e.onElementRemoved(t,this._ke)})},_onElementClear:function(){this._hcListeners(function(t){t.onClear instanceof Function&&t.onClear(this._ke)})},_i1:function(t){this._25s&&this._i1Interactions(this._25s,t),this._m3ustomInteractionListeners&&this._i1Interactions(this._m3ustomInteractionListeners,t),this._khStatus()},_ke:null,_25s:null,_m3ustomInteractionListeners:null,_loInteraction:function(t){if(this._25s==t)return!1;this._25s&&this._25s.length&&this._i1Interactions(this._25s),this._25s=t},_lkCustomInteractionListener:function(t){this._m3ustomInteractionListeners||(this._m3ustomInteractionListeners=[]),this._m3ustomInteractionListeners.push(t)},_iqCustomInteractionListener:function(t){this._m3ustomInteractionListeners&&0!=this._m3ustomInteractionListeners.length&&d(this._m3ustomInteractionListeners,t)},_onEvent:function(t,e,i){this._ke[e]instanceof Function&&this._ke[e].call(this._ke,t,i),this._25s&&this.__onEvent(t,e,this._25s,i),this._m3ustomInteractionListeners&&this.__onEvent(t,e,this._m3ustomInteractionListeners,i)},_hcListeners:function(t){this._25s&&a(this._25s,t,this),this._m3ustomInteractionListeners&&a(this._m3ustomInteractionListeners,t,this)},__onEvent:function(t,e,i,n){if(U(i))for(var s=0;s<i.length;s++){var r=i[s];this.__handleEvent(t,e,r,n)}else this.__handleEvent(t,e,i,n)},__handleEvent:function(t,e,i,n){if(!(i.accept instanceof Function&&!1===i.accept(e,t,this._ke,n))){i.onevent instanceof Function&&i.onevent(e,t,this._ke,n);var s=i[e];s instanceof Function&&s.call(i,t,this._ke,n)}},_i1Interaction:function(t){t.destroy instanceof Function&&t.destroy.call(t,this._ke)},_i1Interactions:function(t,e){if(U(t))for(var i=0;i<t.length;i++){var n=t[i];n&&this._i1Interaction(n,e)}else this._i1Interaction(t,e)}})}function de(t){return N&&t.metaKey||!N&&t.ctrlKey}function fe(){this.points=[]}function ge(t){this._jk=t}fe.prototype={limitCount:10,points:null,add:function(t,e,i){0==this.points.length&&(this._kfX=t.x,this._kfY=t.y);var n=e.timeStamp-t.timeStamp||1;i.interval=n;var s=e.x-t.x,r=e.y-t.y;i.dx=s,i.dy=r,i.startX=this._kfX,i.startY=this._kfY,i.totalDeltaX=e.x-this._kfX,i.totalDeltaY=e.y-this._kfY,this.points.splice(0,0,{interval:n,dx:s,dy:r}),this.points.length>this.limitCount&&this.points.pop()},getCurrentSpeed:function(){if(!this.points.length)return null;for(var t=0,e=0,i=0,n=0,s=this.points.length;n<s;n++){var r=this.points[n],o=r.interval;if(150<o){t=0;break}if(t+=o,e+=r.dx,i+=r.dy,300<t)break}return 0==t||0==e&&0==i?null:{x:e/t,y:i/t}},clear:function(){this.points=[]}},Zt=I?(Vt="-webkit-zoom-in",Kt="-webkit-zoom-out","-webkit-grabbing"):C?(Vt="-moz-zoom-in",Kt="-moz-zoom-out","-moz-grabbing"):(Kt=Vt="crosshair","move");var ve=Math.PI,Ee=Math.pow,pe=Math.sin,me=1.70158,ye={swing:function(t){return-Math.cos(t*ve)/2+.5},easeNone:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return(2-t)*t},easeBoth:function(t){return(t*=2)<1?.5*t*t:.5*(1- --t*(t-2))},easeInStrong:function(t){return t*t*t*t},easeOutStrong:function(t){return 1- --t*t*t*t},easeBothStrong:function(t){return(t*=2)<1?.5*t*t*t*t:.5*(2-(t-=2)*t*t*t)},elasticIn:function(t){return 0===t||1===t?t:-Ee(2,10*--t)*pe(2*ve*(t-.075)/.3)},elasticOut:function(t){return 0===t||1===t?t:Ee(2,-10*t)*pe(2*ve*(t-.075)/.3)+1},elasticBoth:function(t){return 0===t||2==(t*=2)?t:t<1?Ee(2,10*--t)*pe(2*ve*(t-.1125)/.45)*-.5:Ee(2,-10*--t)*pe(2*ve*(t-.1125)/.45)*.5+1},backIn:function(t){return 1===t&&(t-=.001),t*t*((me+1)*t-me)},backOut:function(t){return--t*t*((me+1)*t+me)+1},backBoth:function(t){return(t*=2)<1?t*t*((1+(me*=1.525))*t-me)*.5:.5*((t-=2)*t*((1+(me*=1.525))*t+me)+2)},bounceIn:function(t){return 1-ye.bounceOut(1-t)},bounceOut:function(t){var e=7.5625;return t<1/2.75?e*t*t:t<2/2.75?e*(t-=1.5/2.75)*t+.75:t<2.5/2.75?e*(t-=2.25/2.75)*t+.9375:e*(t-=2.625/2.75)*t+.984375},bounceBoth:function(t){return t<.5?.5*ye.bounceIn(2*t):.5*ye.bounceOut(2*t-1)+.5}};function Te(t,e,i,n){this._onStep=t,this._scope=e||this,this._3c=n,i&&0<i&&(this._i8=i)}ge.prototype={_jk:null,_8b:function(){this._m3allback instanceof Function&&(this._m3allback(),this._m3allback=null)},_kf:function(t){var e=Date.now();this._l7(),this._m3allback=t,this._requestID=requestAnimationFrame(function t(){var i=Date.now(),n=i-e;!n||this._jk&&!1!==this._jk(n)?(e=i,this._requestID=requestAnimationFrame(t.bind(this))):this._l7()}.bind(this))},_6x:function(){},_l7:function(){if(!this._requestID)return!1;this._6x(),this._8b(),t.cancelAnimationFrame(this._requestID),delete this._requestID},_e0:function(){return null!=this._requestID}},Te.prototype={_i8:1e3,_3c:null,_e2:0,_l7:function(){return this._e2=0,this._m3k=0,E(this,Te,"_l7")},_m3k:0,_jk:function(t){if(this._e2+=t,this._e2>=this._i8)return this._onStep.call(this._scope,1,(1-this._m3k)*this._i8,t,this._i8),!1;var e=this._e2/this._i8;if(this._3c&&(e=this._3c(e)),!1===this._onStep.call(this._scope,e,(e-this._m3k)*this._i8,t,this._i8))return!1;this._m3k=e}},g(Te,ge);var be=function(t){st(t)};function Oe(t,e,i,n,s){!1!==i&&!1!==n||(s=!1);try{var r=new XMLHttpRequest,o=encodeURI(t);!1!==s&&(o+=(0<o.indexOf("?")?"&":"?")+"__time="+Date.now()),r.open("GET",o),r.onreadystatechange=function(n){4==r.readyState&&(r.status&&200!=r.status?(i||be)("'"+t+"' load error"):e&&e(r))},r.send(n)}catch(n){(i||be)("'"+t+"' load error",n)}}var we={version:"0.0",extend:g,doSuperConstructor:v,doSuper:E,createFunction:function(t,e){return e.bind(t)},setClass:$,appendClass:j,removeClass:z,forEach:a,forEachReverse:_,isNumber:H,isString:Y,isBoolean:function(t){return void 0!==t&&(t instanceof Boolean||"boolean"==typeof t)},isArray:U,eventPreventDefault:W,eventStopPropagation:q,stopEvent:X,callLater:function(t,e,i){return e instanceof Object?t=t.bind(e):e&&!i&&(i=parseInt(e)),e&&!i&&(i=parseInt(e)),i?setTimeout(t,i):setTimeout(t)},nextFrame:function(e,i){return i&&(e=e.bind(i)),t.requestAnimationFrame(e)},forEachChild:i,forEachByDepthFirst:s,forEachByDepthFirstReverse:r,forEachByBreadthFirst:o,randomInt:V,randomBool:function(){return.5<=Math.random()},randomColor:function(t){if(t&&0<t&&t<1){var e=Math.floor(16777215*Math.random());return"rgba("+(e>>16&255)+","+(e>>8&255)+","+(255&e)+","+t.toFixed(2)+")"}return Q(Math.floor(16777215*Math.random()))},addEventListener:te,getFirstElementChildByTagName:function(t,e){e=e.toUpperCase();for(var i=A?t.firstChild:t.firstElementChild;i&&(1!=i.nodeType||i.tagName&&i.tagName.toUpperCase()!=e);)i=A?i.nextSibling:i.nextElementSibling;return i&&1==i.nodeType&&i.tagName&&i.tagName.toUpperCase()==e?i:null}};we.isTouchSupport=G,we.isIOS=k,we.intersectsPoint=gt,we.containsRect=vt,we.Rect=Et,we.Size=dt,we.Point=at,we.Insets=pt,we.Event=St,we.PropertyChangeEvent=It,we.ListEvent=Bt,we.Handler=Nt,we.Dispatcher=Mt,we.Position=mt,we.Data=Gt,we.SelectionModel=jt,we.DataModel=$t,we.IListener={onEvent:function(t){},beforeEvent:function(t){}},we.loadURL=Oe,we.loadXML=function(t,e,i,n,s){Oe(t,function(n){if(e){var s=n.responseXML;if(!s)return void(i||be)("'"+t+"' XML format error.");e(s)}},i,n,s)},we.loadJSON=function(t,e,i,n,s){Oe(t,function(n){if(e){var s,r=n.responseText;if(!r)return(i||be)("'"+t+"' JSON format error."),s=new Error("'"+t+"' JSON format error."),e(r,s);try{r=JSON.parse(r)}catch(n){(i||be)(n),s=n}e(r,s)}},i,n,s)},we.isMetaKey=de,we.calculateDistance=lt,we.HashList=ot,we.DragSupport=ue,we.alert=function(t){alert(t)},we.prompt=function(t,e,i,n){var s=prompt(t,e);return s!=e&&i?i.call(n,s):s},we.confirm=function(t,e,i){var n=confirm(t);return n&&e?e.call(i):n},we.addCSSRule=Xt;var Le={IMAGE_ADJUST_FLIP:"flip",IMAGE_ADJUST_MIRROR:"mirror",SELECTION_TYPE_BORDER_RECT:"border.rect",SELECTION_TYPE_BORDER:"border",SELECTION_TYPE_SHADOW:"shadow",NS_SVG:"http://www.w3.org/2000/svg",PROPERTY_TYPE_ACCESSOR:0,PROPERTY_TYPE_STYLE:1,PROPERTY_TYPE_CLIENT:2,EDGE_TYPE_DEFAULT:null,EDGE_TYPE_ELBOW:"elbow",EDGE_TYPE_ELBOW_HORIZONTAL:"elbow.H",EDGE_TYPE_ELBOW_VERTICAL:"elbow.V",EDGE_TYPE_ORTHOGONAL:"orthogonal",EDGE_TYPE_ORTHOGONAL_HORIZONTAL:"orthogonal.H",EDGE_TYPE_ORTHOGONAL_VERTICAL:"orthogonal.V",EDGE_TYPE_HORIZONTAL_VERTICAL:"orthogonal.H.V",EDGE_TYPE_VERTICAL_HORIZONTAL:"orthogonal.V.H",EDGE_TYPE_EXTEND_TOP:"extend.top",EDGE_TYPE_EXTEND_LEFT:"extend.left",EDGE_TYPE_EXTEND_BOTTOM:"extend.bottom",EDGE_TYPE_EXTEND_RIGHT:"extend.right",EDGE_TYPE_ZIGZAG:"zigzag",EDGE_CORNER_NONE:"none",EDGE_CORNER_ROUND:"round",EDGE_CORNER_BEVEL:"bevel",GROUP_TYPE_RECT:"rect",GROUP_TYPE_CIRCLE:"circle",GROUP_TYPE_ELLIPSE:"ELLIPSE",SHAPE_CIRCLE:"oval",SHAPE_RECT:"rect",SHAPE_ROUNDRECT:"roundrect",SHAPE_STAR:"star",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",SHAPE_PENTAGON:"pentagon",SHAPE_TRAPEZIUM:"trapezium",SHAPE_RHOMBUS:"rhombus",SHAPE_PARALLELOGRAM:"parallelogram",SHAPE_HEART:"heart",SHAPE_DIAMOND:"diamond",SHAPE_CROSS:"cross",SHAPE_ARROW_STANDARD:"arrow.standard",SHAPE_ARROW_1:"arrow.1",SHAPE_ARROW_2:"arrow.2",SHAPE_ARROW_3:"arrow.3",SHAPE_ARROW_4:"arrow.4",SHAPE_ARROW_5:"arrow.5",SHAPE_ARROW_6:"arrow.6",SHAPE_ARROW_7:"arrow.7",SHAPE_ARROW_8:"arrow.8",SHAPE_ARROW_OPEN:"arrow.open"};function ft(t,e,i,n,s,r,o,h){return!(o<=0||h<=0||i<=0||n<=0)&&(h+=r,i+=t,n+=e,((o+=s)<s||t<o)&&(h<r||e<h)&&(i<t||s<i)&&(n<e||r<n))}function vt(t,e,i,n,s,r,o,h){return t<=s&&e<=r&&s+o<=t+i&&r+h<=e+n}function Ae(t,e,i){return t instanceof Object&&t.x?Se(t,e,0,0):xe(t,e,i,0,0)}function xe(t,e,i,n,s){var r=Math.sin(i),o=Math.cos(i),h=t-n,a=e-s;return new at(t=h*o-a*r+n,e=h*r+a*o+s,i)}function Se(t,e,i,n){i=i||0,n=n||0;var s=Math.sin(e),r=Math.cos(e),o=t.x-i,h=t.y-n;return t.x=o*r-h*s+i,t.y=o*s+h*r+n,t}function Ie(t,e,i){return Ce(t,e,i,0,0)}function Ce(t,e,i,n,s){var r=xe(t.x,t.y,e,n,s),o=xe(t.x+t.width,t.y,e,n,s),h=xe(t.x+t.width,t.y+t.height,e,n,s),a=xe(t.x,t.y+t.height,e,n,s);return i?i.clear():i=new Et,i.addPoint(r),i.addPoint(o),i.addPoint(h),i.addPoint(a),i}Le.LINE_CAP_TYPE_BUTT="butt",Le.LINE_CAP_TYPE_ROUND="round",Le.LINE_CAP_TYPE_SQUARE="square",Le.LINE_JOIN_TYPE_BEVEL="bevel",Le.LINE_JOIN_TYPE_ROUND="round",Le.LINE_JOIN_TYPE_MITER="miter",Le.EDGE_BUNDLE_TYPE_CURVE="curve",Le.EDGE_BUNDLE_TYPE_PARALLEL="parallel",Le.EDGE_BUNDLE_TYPE_ELBOW="elbow",rt.SELECTION_TYPE=Le.SELECTION_TYPE_SHADOW,rt.SELECTION_TOLERANCE=ne?8:3,rt.SELECTION_BORDER=2,rt.SELECTION_SHADOW_BLUR=7,rt.SELECTION_COLOR=Q(3422561023),rt.SELECTION_TYPE=Le.SELECTION_TYPE_SHADOW,rt.BORDER_RADIUS=10,rt.POINTER_WIDTH=10,rt.ARROW_SIZE=10,rt.IMAGE_MAX_SIZE=200,rt.LINE_HEIGHT=1.2;var De,Re=t.devicePixelRatio||1;function Pe(t,e){var i=this.ratio||1;this.style.width=t+"px",this.style.height=e+"px",this.width=t*i,this.height=e*i}function Ne(t,i,n){var s=e.createElement("canvas");if(s.g=s.getContext("2d"),!0!==t&&!n)return t&&i&&(s.width=t,s.height=i),s;var r,o,h=s.g;return h.ratio=s.ratio=(o=(r=h).webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1,Re/o),s.setSize=Pe,h._kh=function(){this.canvas.width=this.canvas.width},t&&i&&s.setSize(t,i),s}function ke(t,e){return De=De||Ne(),t&&e&&(De.width=t,De.height=e),De.g}Re<1&&(Re=1),we.createCanvas=Ne;var Me=R&&!G;function Be(t,e,i){return(i||rt.FONT_STYLE)+" "+(e||rt.FONT_SIZE)+"px "+(t||rt.FONT_FAMILY)}function Ge(t,e,i,n,s){var r;try{r=t.getImageData(e,i,n,s)}catch(t){}return r}function Fe(t,e){var i=1/(e=e||t(1)),n=.5*i,s=Math.min(1,e/100);return function(r){if(r<=0)return 0;if(e<=r)return 1;for(var o=r*i,h=0;h++<10;){var a=r-t(o);if(Math.abs(a)<=s)return o;o+=a*n}return o}}function $e(t,e,i){var n=1-t,s=n*n*e[0]+2*n*t*e[2]+t*t*e[4],r=n*n*e[1]+2*n*t*e[3]+t*t*e[5];if(i){var o=(e[0]+e[4]-2*e[2])*t+e[2]-e[0],h=(e[1]+e[5]-2*e[3])*t+e[3]-e[1];return{x:s,y:r,rotate:Math.atan2(h,o)}}return{t:t,x:s,y:r}}function je(t,e,i){var n=t-2*e+i;return 0!=n?(t-e)/n:-1}function ze(t,e){return Math.abs(t-e)<1e-7}function He(t,e){return ze(t[0],e[0])&&ze(t[1],e[1])}function Ye(t,e,i){var n=1-t,s=e[0],r=e[2],o=e[4],h=e[6],a=s*n*n*n+3*r*t*n*n+3*o*t*t*n+h*t*t*t;if(i)var l=3*t*t*h+(6*t-9*t*t)*o+(9*t*t-12*t+3)*r+(-3*t*t+6*t-3)*s;var _=(s=e[1])*n*n*n+3*(r=e[3])*t*n*n+3*(o=e[5])*t*t*n+(h=e[7])*t*t*t;if(i){var u=3*t*t*h+(6*t-9*t*t)*o+(9*t*t-12*t+3)*r+(-3*t*t+6*t-3)*s;return{x:a,y:_,rotate:Math.atan2(u,l)}}return{x:a,y:_}}function Ue(t,e,i){return We(e,i,t.cx,t.cy)<=t._squareR+Ze}var We=function(t,e,i,n){var s=t-i,r=e-n;return s*s+r*r};function qe(t,e,i,n){return i=i||(r=e,lt((s=t).x,s.y,r.x,r.y)),new Xe((t.x+e.x)/2,(t.y+e.y)/2,i/2,t,e,null,n);var s,r}function Xe(t,e,i,n,s,r,o){this.cx=t,this.cy=e,this.r=i,this._squareR=i*i,this.p1=n,this.p2=s,this.p3=r,this._otherPoint=o}function Ve(t,e,i,n){this.cx=t,this.cy=e,this.width=i,this.height=n}function Ke(t){var e=t[0],i=t[1],n=t[2];return function t(e,i,n,s,r){for(var o,h,a=e.length,l=r._squareR,_=0;_<a;_++)if((o=e[_])!=i&&o!=n&&o!=s){var u=We(r.cx,r.cy,o.x,o.y);l<u-Ze&&(l=u,h=o)}if(!h)return r;var c,d=Xe._m3reateCircle(h,i,n),f=Xe._m3reateCircle(h,i,s),g=Xe._m3reateCircle(h,s,n);return Ue(d,s.x,s.y)&&(c=d),Ue(f,n.x,n.y)&&(!c||c.r>f.r)&&(c=f),Ue(g,i.x,i.y)&&(!c||c.r>g.r)&&(c=g),t(e,i=c.p1,n=c.p2,s=c.p3||c._otherPoint,c)}(t,e,i,n,Xe._m3reateCircle(e,i,n))}Xe.prototype={equals:function(t){return this.cx==t.cx&&this.cy==t.cy&&this.r==t.r}},Xe._m3reateCircle=function(t,e,i){if(!i)return qe(t,e);var n,s=We(t.x,t.y,e.x,e.y),r=We(t.x,t.y,i.x,i.y),o=We(i.x,i.y,e.x,e.y);if(r+o<=s+Ze)return qe(t,e,0,i);if(s+o<=r+Ze)return qe(t,i,0,e);if(s+r<=o+Ze)return qe(e,i,0,t);Math.abs(i.y-e.y)<1e-4&&(n=t,t=e,e=n),n=i.x*(t.y-e.y)+t.x*(e.y-i.y)+e.x*(-t.y+i.y);var h=(i.x*i.x*(t.y-e.y)+(t.x*t.x+(t.y-e.y)*(t.y-i.y))*(e.y-i.y)+e.x*e.x*(-t.y+i.y))/(2*n),a=(e.y+i.y)/2-(i.x-e.x)/(i.y-e.y)*(h-(e.x+i.x)/2);return new Xe(h,a,lt(h,a,t.x,t.y),t,e,i)};var Ze=.01;function Qe(t,e,i){if(!this._jl||this._g6.length<2){if(this._g6.length){var n=!1!==i?this._g6[0].firstPoint:this._g6[this._g6.length-1].lastPoint;return e&&(n.y+=e),t&&(n.x+=t),n}return null}var s=this._g6;!1===i&&(t+=this._jl);var r,o=s[0];if(t<=0)return xs(o.points[0],o.points[1],s[1].points[0],s[1].points[1],t,e);if(t>=this._jl){var h,a,l=(o=s[s.length-1]).points,_=l[(f=l.length)-2],u=l[f-1];return a=4<=f?(h=l[f-4],l[f-3]):(h=(v=(o=s[s.length-2]).lastPoint).x,v.y),xs(_,u,_+_-h,u+u-a,t-this._jl,e)}for(var c=0,d=1,f=s.length;d<f;d++)if((r=s[d])._jl){if(!(c+r._jl<t)){var g,v=o.lastPoint;if(r.type==Ri){var E=r.points;g=Je(t-c,r,v.x,v.y,E[0],E[1],E[2],E[3],r._r)}else{if(!r._lf)return xs(v.x,v.y,r.points[0],r.points[1],t-c,e);var p=Fe(r._lf,r._jl)(t-c);E=r.points,(g=r.type==Di&&6==E.length?Ye(p,[v.x,v.y].concat(E),!0):$e(p,[v.x,v.y].concat(E),!0)).t=p}return e&&(g.x-=e*Math.sin(g.rotate||0),g.y+=e*Math.cos(g.rotate||0)),g}c+=r._jl,o=r}else o=r}function Je(t,e,i,n,s,r,o,h){if(t<=e._l1)return xs(i,n,s,r,t,t);if(t>=e._jl)return t-=e._jl,xs(e._p2x,e._p2y,o,h,t,t);if(t-=e._l1,e._o){var a=t/e._r;e._CCW&&(a=-a);var l=xe(e._p1x,e._p1y,a,e._o.x,e._o.y);return l.rotate+=e._m01||0,l.rotate+=Math.PI,l}return xs(e._p1x,e._p1y,e._p2x,e._p2y,t,t)}function ut(t,e,i){var n,s,r;0==t._m0?(n=-1,r=0,s=e):0==t._m3?(n=0,r=1,s=i):(n=-1/t._m0,s=(t._m0-n)*e+t._m1,r=1);var o=new _t;return o._m0=n,o._m1=s,o._m3=r,o._lu=e,o._lv=i,o}function ti(t){return(t%=2*Math.PI)<0&&(t+=2*Math.PI),t}function ei(t,e,i,n){return Math.atan2(n-e,i-t)}var ii={_m0f:function(t,e,i,n,s){if(Y(t)&&(t=mt.fromString(t)),!t)return{x:0,y:0};var r=0,o=0,h=e._jl;if(i=i||0,void 0===t.x){var a=t.horizontalPosition,l=t.verticalPosition,_=!0;switch(a){case Tt:_=!1;break;case"c":r+=h/2}switch(l){case bt:o-=i/2;break;case Ot:o+=i/2}}else r=t.x,o=t.y,0<Math.abs(r)&&Math.abs(r)<1&&(r*=h);s&&null!=n&&(o+=n.y,Math.abs(n.x)<1?r+=n.x*h:r+=n.x);var u=Qe.call(e,r,o,_);return u?(s||null==n||u.offset(n),u):{x:0,y:0}},_l8:function(t,e,i){var n=e.type,s=e.points;switch(n){case Ri:t.arcTo(s[0],s[1],s[2],s[3],e._r);break;case Si:t.moveTo(s[0],s[1]);break;case Ii:t.lineTo(s[0],s[1]);break;case Ci:t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case Di:t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case Pi:t.closePath()}},_5r:function(t,e,i,n){var s=e.type;if(s!=Si&&s!=Pi){var r=i.lastPoint,o=e.points;switch(i.type==Si&&t.add(r.x,r.y),s){case Ri:(function(t,e,i,n,s,r,o,h){var a=lt(e,i,n,s),l=lt(n,s,r,o);if(!a||!l)return t._d=0,t._r=0,t._l1=a,t._l2=l,t._jl=0;var _=ei(n,s,e,i),u=ei(n,s,r,o),c=(t._m01=_)-(t._m02=u);(c=ti(c))>Math.PI&&(c=2*Math.PI-c,t._CCW=!0);var d=Math.PI-c,f=Math.tan(c/2),g=h/f,v=Math.min(a,l);v<g&&(h=f*(g=v));var E,p=n+Math.cos(_)*g,m=s+Math.sin(_)*g,y=n+Math.cos(u)*g,T=s+Math.sin(u)*g,b=new _t(e,i,n,s),O=new _t(n,s,r,o),w=ut(b,p,m),L=ut(O,y,T),A=w._3b(L),x=Math.atan2(m-A.y,p-A.x),S=Math.atan2(T-A.y,y-A.x);E=t._CCW?S:x;for(var I,C=0;C<4;){var D,R;if(ti(C*ht-E)<=d&&(I?I++:I=1,R=0==C?(D=A.x+h,A.y):1==C?(D=A.x,A.y+h):2==C?(D=A.x-h,A.y):(D=A.x,A.y-h),t["$boundaryPoint"+I]={x:D,y:R},2==I))break;C++}t._p1x=p,t._p1y=m,t._p2x=y,t._p2y=T,t._o=A,t._d=g,t._r=h,t._l1=a-g,t._l2=l-g,t._jl=t._l1+d*h})(e,r.x,r.y,o[0],o[1],o[2],o[3],o[4]),t.add(o[0],o[1]),t.add(e._p1x,e._p1y),t.add(e._p2x,e._p2y),e.$boundaryPoint1&&t.add(e.$boundaryPoint1.x,e.$boundaryPoint1.y),e.$boundaryPoint2&&t.add(e.$boundaryPoint2.x,e.$boundaryPoint2.y);break;case Ii:t.add(o[0],o[1]);break;case Ci:!function(t,e){e.add(t[4],t[5]);var i=je(t[0],t[2],t[4]);if(0<i&&i<1){var n=$e(i,t);e.add(n.x,n.y)}var s=je(t[1],t[3],t[5]);0<s&&s<1&&(n=$e(s,t),e.add(n.x,n.y))}([r.x,r.y].concat(o),t);break;case Di:!function(t,e){e.add(t[6],t[7]);var i=function(t,e,i,n,s,r,o,h){for(var a,l,_,u,c,d,f,g,v=[],E=0;E<2;++E)if(_=0===E?(l=6*t-12*i+6*s,a=-3*t+9*i-9*s+3*o,3*i-3*t):(l=6*e-12*n+6*r,a=-3*e+9*n-9*r+3*h,3*n-3*e),Math.abs(a)<1e-12){if(Math.abs(l)<1e-12)continue;0<(u=-_/l)&&u<1&&v.push(u)}else f=l*l-4*_*a,g=Math.sqrt(f),f<0||(0<(c=(-l+g)/(2*a))&&c<1&&v.push(c),0<(d=(-l-g)/(2*a))&&d<1&&v.push(d));return v}.apply(this,t);if(i)for(var n=0;n<i.length;n++){var s=i[n];if(!(s<0||1<s)){var r=Ye(s,t);e.add(r.x,r.y)}}}([r.x,r.y].concat(o),t);break;case Pi:n&&t.add(n.points[0],n.points[1])}}},_5t:function(t,e,i){var n=t.type;if(n==Si)return 0;var s,r,o,h,a,l,_,u,c,d,f,g,v,E,p,m,y,T,b,O,w,L,A,x,S,I,C=e.lastPoint,D=t.points;switch(n==Di&&4==D.length&&(n=Ci),n){case Ii:return lt(D[0],D[1],C.x,C.y);case Ri:return t._jl;case Ci:var R=function(t){if(He([t[0],t[1]],[t[2],t[3]])){var e=t[0],i=t[1],n=t[4],s=t[5],r=Math.sqrt(We(e,i,n,s));return function(t){return r*t}}if(He([t[0],t[1]],[t[4],t[5]])||He([t[2],t[3]],[t[4],t[5]]))return e=t[0],i=t[1],n=t[2],s=t[3],r=Math.sqrt(We(e,i,n,s)),function(t){return r*t};var o=t[0],h=t[2],a=t[4],l=o-2*h+a,_=2*h-2*o,u=(o=t[1])-2*(h=t[3])+(a=t[5]),c=2*h-2*o,d=4*(l*l+u*u),f=4*(l*_+u*c),g=_*_+c*c;if((r=4*d*g-f*f)<1e-5&&-1e-5<r){var v=lt(t[0],t[1],t[2],t[3]),E=lt(t[2],t[3],t[4],t[5]);return function(t){return(2*v+(E-v)*t)*t}}var p,m=1/r,y=.125*Math.pow(d,-1.5),T=2*Math.sqrt(d),b=(r*(p=f/Math.sqrt(r),Math.log(p+Math.sqrt(p*p+1)))+Math.sqrt(d)*(2*f)*Math.sqrt(g))*y;return function(t){var e=f+2*t*d,i=e/Math.sqrt(r),n=e*e*m;return(r*Math.log(i+Math.sqrt(1+n))+T*e*Math.sqrt(g+t*f+t*t*d))*y-b}}([C.x,C.y].concat(D));return(t._lf=R)(1);case Di:return L=[C.x,C.y].concat(D),x=N(L[0],L[2],L[4],L[6]),S=N(L[1],L[3],L[5],L[7]),I=1/(A=A||100),R=function(t){if(!t)return 0;for(var e,i=0,n=0;;){if(t<=(e=i+I))return n+k(i,e-i);n+=k(i,I),i=e}},(t._lf=R)(1)||(r=(s=[C.x,C.y].concat(D))[0],o=s[1],h=s[2],a=s[3],l=s[4],_=s[5],u=s[6],c=s[7],m=3*(3*(g=h-0)-(d=r-0)-3*(E=l-0)+(u-0)),y=6*(d-2*g+E),T=3*(g-d),b=3*(3*(v=a-0)-(f=o-0)-3*(p=_-0)+(c-0)),O=6*(f-2*v+p),w=3*(v-f),(P(0)+4*P(.5)+P(1))/6);case Pi:if(C&&i)return t.points=i.points,lt(i.points[0],i.points[1],C.x,C.y)}function P(t){var e=m*t*t+y*t+T,i=b*t*t+O*t+w;return Math.sqrt(e*e+i*i)}function N(t,e,i,n){var s=3*e-t-3*i+n,r=2*t-4*e+2*i,o=e-t;return function(t,e){return 3*(s*t*t+r*t+o)}}function k(t,e){var i=x(t),n=S(t);return Math.sqrt(i*i+n*n)*e}return 0}},ni=/^data:image\/(\w+);base64,/i,si=/^gif/i,ri=/^svg/i,oi=10,hi=11,ai=12,li=20,_i=30;function ui(t,e,i,n,s){if(e&&i){t.lineWidth=.5,t.strokeStyle="#CCC",t.strokeRect(0,0,e,i),n&&(t.fillStyle=n,t.fillRect(0,0,e,i));var r=Math.min(e/50,i/38);t.save(),t.globalAlpha=.6,t.translate(e/2,i/2),t.scale(r,r),t.translate(-20,-14),t.beginPath(),t.rect(0,0,40,28),t.clip(),t.fillStyle="#f0f1f2",t.fill(),t.globalAlpha=1,t.moveTo(0,21),t.lineTo(12,12),t.lineTo(26,28),t.moveTo(18,18),t.lineTo(28,8),t.lineTo(40,18),t.lineWidth=2,t.strokeStyle="#dbdcde",t.stroke(),s&&(t.beginPath(),t.moveTo(26,-4),t.lineTo(17,11),t.lineTo(23,17),t.lineTo(14,32),t.lineWidth=5,t.strokeStyle=n||"#FFF",t.stroke()),t.restore()}}function ci(t){var e=ni.exec(t);if(e)return e[1];var i=t.lastIndexOf(".");return 0<=i&&i<t.length-1?t.substring(i+1):void 0}function di(t,e,i){if(this._kv=function(t){if(!t)return null;if(t instanceof Mi)return _i;if(t.draw instanceof Function)return li;if(Y(t)){var e=ci(t);if(e){if(!A&&si.test(e))return ai;if(ri.test(e))return hi}return oi}}(t),!this._kv)throw new Error("the image format is not supported",t);this._kt=t,this._m0g=e,this._8v=i,this.width=e||rt.IMAGE_WIDTH,this.height=i||rt.IMAGE_HEIGHT,this._iy={}}rt.IMAGE_WIDTH=50,rt.IMAGE_HEIGHT=30,rt.IMAGE_DEFAULT={draw:function(t,e){ui(t,e.width,e.height,e.renderColor)}},rt.IMAGE_INVALID={draw:function(t,e){ui(t,e.width,e.height,e.renderColor,!0)}},rt.MAX_CACHE_PIXELS=1e6,di.prototype={_it:0,_6e:!0,_k6:null,_iv:null,_kt:null,_kv:null,_m0g:void 0,_8v:void 0,_6f:function(){return 1==this._it},getBounds:function(t){return this._kv==_i?this._kt.getBounds(t):(this._6e&&this._fb(),this)},validate:function(){this._6e&&this._fb()},_fb:function(){if(this._6e=!1,this._kv==_i)return this._kt.validate(),void this.setByRect(this._kt.bounds);if(this._kv!=li){if(1!=this._it)try{this._dc()}catch(t){this._it=3,we.error(t)}}else this._8x()},_50:function(){this._dg(),this._dispatcher.clear(),delete this._dispatcher},_hn:function(t){this._k6.parentNode&&this._k6.parentNode.removeChild(this._k6),this._it=3,we.error("Image load error - "+this._kt),this._pixels=null,this._iv=null,this._k6=null,!1!==t&&this._50()},_dc:function(){var t,i,n,s,r,o,h,a,l,_,u,c,d,f,g,v=this._kt;if(this._it=1,this._dispatcher=new Mt,this._kv!=ai)this._k6||(this._k6=e.createElement("img"),A&&(this._k6.style.visibility="hidden",e.body.appendChild(this._k6))),A?(this._k6.onload=function(t){setTimeout(this._7w.bind(this),100)}.bind(this),this._k6.onerror=this._hn.bind(this)):(this._k6.onload=this._7w.bind(this),this._k6.onerror=this._7w.bind(this)),this._k6.src=v;else{for(var E in sn)this[E]=sn[E];t=this._kt,n=(i=this)._m3o,s=this._hn,r=this._e5,f={hdr:p(function(t){o=t,(c=c||Ne()).width=o.width,c.height=o.height,i.width=o.width,i.height=o.height}),gce:p(function(t){y(),l=_,u=_=a=h=null,h=t.transparencyGiven?t.transparencyIndex:null,a=10*t.delayTime,_=t.disposalMethod}),com:p(m),app:{NETSCAPE:p(m)},img:p(function(t){u=u||c.getContext("2d");var e=t.lctFlag?t.lct:o.gct,i=u.getImageData(t.leftPos,t.topPos,t.width,t.height);t.pixels.forEach(function(t,n){h!==t?(i.data[4*n+0]=e[t][0],i.data[4*n+1]=e[t][1],i.data[4*n+2]=e[t][2],i.data[4*n+3]=255):2!==l&&3!==l||(i.data[4*n+3]=0)}),u.putImageData(i,t.leftPos,t.topPos)}),eof:function(t){y(),n.call(i)}},g=new XMLHttpRequest,A||g.overrideMimeType("text/plain; charset=x-user-defined"),g.onload=function(t){d=new rn(g.responseText);try{on(d,f)}catch(t){s.call(i,"parse")}},g.onerror=function(){s.call(i,"xhr")},g.open("GET",t,!0),g.send()}function p(t){return function(e){t(e)}}function m(){}function y(){if(u){var t=u.getImageData(0,0,o.width,o.height),e={data:t,_pixels:$i(t.data,o.width,o.height),delay:a};r.call(i,e)}}},_ho:!0,_7w:function(){var t,e=this._k6.width,i=this._k6.height;if(e&&i){if(this._k6.parentNode&&this._k6.parentNode.removeChild(this._k6),this._it=2,this.width=e,this.height=i,A&&this._kv==hi)this._pixels=null,this._ho=!1;else if(this._kv==hi||(t=ci(t=this._k6.src),/^png/i.test(t)||/^gif/i.test(t))){var n=Ne();n.width=e,n.height=i,n.g.drawImage(this._k6,0,0,e,i),function(t,e){for(var i=t.getImageData(0,0,e.width,e.height).data,n=!1,s=3,r=i.length;s<r;s+=4)if(i[s]<255){n=!0;break}return n}(n.g,n)&&(this._iv=n,this._pixels=function(t){var e=t.width,i=t.height,n=Ge(t.g,0,0,e,i);if(n)return $i(n.data,e,i)}(n))}this._50()}else this._hn()},_8x:function(){var t=this._kt;if(t.draw instanceof Function){if(!1===t.cacheable&&t.width&&t.height)return this.width=t.width,void(this.height=t.height);var e=t.width||rt.IMAGE_MAX_SIZE,i=t.height||rt.IMAGE_MAX_SIZE,n=this._de();n.width=e,n.height=i;var s=n.g;t.draw(s);var r=Ge(s,0,0,e,i);if(r){var o=$i(r.data,e,i);this.x=o._x,this.y=o._y,this.width=o._width,this.height=o._height,n.width=this.width,n.height=this.height,s.putImageData(r,-this.x,-this.y),this._pixels=o}}else this._hn(!1)},_de:function(){return this._iv||(this._iv=Ne())},draw:function(t,e,i,n,s,r){if(this.width&&this.height){e=e||1,n=n||1,s=s||1;var o=this.width*n,h=this.height*s;if(r&&i.shadowColor&&(t.shadowColor=i.shadowColor,t.shadowBlur=(i.shadowBlur||0)*e,t.shadowOffsetX=(i.shadowOffsetX||0)*e,t.shadowOffsetY=(i.shadowOffsetY||0)*e),1!=this._it)if(3!=this._it){if(this._kv==_i)return t.scale(n,s),void this._kt.draw(t,e,i);var a=this._fc(e,n,s);if(a)return(this.x||this.y)&&t.translate(this.x*n,this.y*s),t.scale(n/a.scale,s/a.scale),void a._l8(t,i.renderColor,i.renderColorBlendMode);this._iw(t,e,n,s,this.width*n,this.height*s,i)}else rt.IMAGE_INVALID&&rt.IMAGE_INVALID.draw(t,{src:this._kt,width:o,height:h,renderColor:i.renderColor});else rt.IMAGE_DEFAULT&&rt.IMAGE_DEFAULT.draw(t,{src:this._kt,width:o,height:h,renderColor:i.renderColor})}},_iw:function(t,e,i,n,s,r,o){if(this._kv==li)return 1!=i&&1!=n&&t.scale(i,n),void this._kt.draw(t,o);if(this._k6){if(!D)return void t.drawImage(this._k6,0,0,s,r);i=e*s/this.width,n=e*r/this.height,t.scale(1/i,1/n),t.drawImage(this._k6,0,0,s*i,r*n)}},_iy:null,_fc:function(t,e,i){if(this._kv==li&&!1===this._kt.cacheable)return null;if(this._kv==oi||(t*=Math.max(e,i))<=1)return this._defaultCache||(this._defaultCache=this._fd(this._iv||this._k6,1,this._ho)),this._defaultCache;var n=this._iy.maxScale||0;if((t=Math.ceil(t))<=n){for(var s=t,r=this._iy[s];!r&&++s<=n;)r=this._iy[s];if(r)return r}t%2&&t++;var o=this.width*t,h=this.height*t;if(o*h>rt.MAX_CACHE_PIXELS)return null;var a=Ne(o,h);return(this.x||this.y)&&a.g.translate(-this.x*t,-this.y*t),this._iw(a.g,1,t,t,o,h),this._fd(a,t)},_fd:function(t,e){var i=new zi(t,e);return this._iy[e]=i,this._iy.maxScale=e,i},hitTest:function(t,e,i){return this._kv==_i?this._kt.hitTest.apply(this._kt,arguments):!(this._pixels||this._k6&&this._k6._pixels)||(this._pixels||this._k6._pixels)._hp(t,e,i)},_dg:function(){this._dispatcher&&this._dispatcher.onEvent(new St(this,"image","load",this._k6))},_m0i:function(t,e){this._dispatcher&&this._dispatcher.addListener(t,e)},_6h:function(t,e){this._dispatcher&&this._dispatcher.removeListener(t,e)},_m1y:function(t){this._iy={},(t||1e5<this.width*this.height)&&(this._k6=null,this._iv=null)}},g(di,Et);var fi={};function gi(t,e,i,n){if(e)return fi[t]=new di(e,i,n),t;delete fi[t]}function vi(t){if(t._k6)return t._k6;if(!Y(t)&&!t.name)return t._k6=new di(t);var e=t.name||t;return e in fi?fi[e]:fi[e]=new di(t)}function Ei(t){return t in fi}function pi(t,e,i){i=i||{};var n=t.getBounds(i.lineWidth);if(!n.width||!n.height)return!1;var s=e.getContext("2d"),r=e.ratio||1,o=i.scaleMode||"full.uniform",h=/full/i.test(o),a=/uniform/i.test(o),l=1,_=1;if(h){var u,c,d,f,g=e.width,v=e.height,E=i.padding,p=0,m=0;E&&(H(E)?u=c=d=f=E:(u=E.top||0,c=E.bottom||0,d=E.left||0,f=E.right||0),g-=d+f,v-=u+c,p+=d,m+=u),l=g/n.width,_=v/n.height,a&&(_<l?(p+=(g-_*n.width)/2,l=_):l<_&&(m+=(v-l*n.height)/2,_=l)),(p||m)&&s.translate(p,m)}s.translate(-n.x*l,-n.y*_),t.draw(s,r,i,l,_,!0)}function mi(t,e,i,n,s,r){this.type=t,this.colors=e,this.positions=i,this.angle=n||0,this.tx=s||0,this.ty=r||0}we.drawImage=function(t,e,i){var n=vi(t);if(!n)return we.error("draw image error - "+t),!1;n.validate(),n._kv!=ai&&!n._6f()||n._m0i(function(t){t.source&&(this.width=this.width,pi(t.source,this,i))},e),pi(n,e,i)},we.registerImage=gi,we.hasImage=Ei,we.getAllImages=function(){var t=[];for(var e in fi)t.push(e);return t},Le.GRADIENT_TYPE_RADIAL="r",Le.GRADIENT_TYPE_LINEAR="l",mi.prototype={type:null,colors:null,positions:null,angle:null,tx:0,ty:0,position:mt.CENTER_MIDDLE,isEmpty:function(){return null==this.colors||0==this.colors.length},_6z:function(){var t=this.colors.length;if(1==t)return[0];for(var e=[],i=1/(t-1),n=0;n<t;n++)e.push(i*n);return this.positions||(this.positions=e),e},generatorGradient:function(t){if(null==this.colors||0==this.colors.length)return null;var e,i=ke();if(this.type==Le.GRADIENT_TYPE_LINEAR){var n,s=this.angle;if(s>Math.PI&&(s-=Math.PI),s<=Math.PI/2){var r=Math.atan2(t.height,t.width),o=Math.sqrt(t.width*t.width+t.height*t.height),h=r-s;n=Math.cos(h)*o}else r=Math.atan2(t.width,t.height),o=Math.sqrt(t.width*t.width+t.height*t.height),h=r-(s-Math.PI/2),n=Math.cos(h)*o;var a=n/2,l=a*Math.cos(s),_=a*Math.sin(s),u=t.x+t.width/2-l,c=t.y+t.height/2-_,d=t.x+t.width/2+l,f=t.y+t.height/2+_;e=i.createLinearGradient(u,c,d,f)}else{if(!(this.type=Le.GRADIENT_TYPE_RADIAL))return null;var g=At(this.position,t.width,t.height);g.x+=t.x,g.y+=t.y,this.tx&&(Math.abs(this.tx)<1?g.x+=t.width*this.tx:g.x+=this.tx),this.ty&&(Math.abs(this.ty)<1?g.y+=t.height*this.ty:g.y+=this.ty);var v=lt(g.x,g.y,t.x,t.y);v=Math.max(v,lt(g.x,g.y,t.x,t.y+t.height)),v=Math.max(v,lt(g.x,g.y,t.x+t.width,t.y+t.height)),v=Math.max(v,lt(g.x,g.y,t.x+t.width,t.y)),e=i.createRadialGradient(g.x,g.y,0,g.x,g.y,v)}var E=this.colors,p=this.positions;p&&p.length==E.length||(p=this._6z());for(var m=0,y=E.length;m<y;m++)e.addColorStop(p[m],E[m]);return e}};var yi=new mi(Le.GRADIENT_TYPE_LINEAR,[Q(2332033023),Q(1154272460),Q(1154272460),Q(1442840575)],[.1,.3,.7,.9],Math.PI/2),Ti=new mi(Le.GRADIENT_TYPE_LINEAR,[Q(2332033023),Q(1154272460),Q(1154272460),Q(1442840575)],[.1,.3,.7,.9],0),bi=(new mi(Le.GRADIENT_TYPE_LINEAR,[Q(1154272460),Q(1442840575)],[.1,.9],0),new mi(Le.GRADIENT_TYPE_RADIAL,[Q(2298478591),Q(1156509422),Q(1720223880),Q(1147561574)],[.1,.3,.7,.9],0,-.3,-.3)),Oi=[Q(0),Q(4294901760),Q(4294967040),Q(4278255360),Q(4278250239),Q(4278190992),Q(4294901958),Q(0)],wi=[0,.12,.28,.45,.6,.75,.8,1],Li=new mi(Le.GRADIENT_TYPE_LINEAR,Oi,wi),Ai=new mi(Le.GRADIENT_TYPE_LINEAR,Oi,wi,Math.PI/2),xi=new mi(Le.GRADIENT_TYPE_RADIAL,Oi,wi);mi.LINEAR_GRADIENT_VERTICAL=yi,mi.LINEAR_GRADIENT_HORIZONTAL=Ti,mi.RADIAL_GRADIENT=bi,mi.RAINBOW_LINEAR_GRADIENT=Li,mi.RAINBOW_LINEAR_GRADIENT_VERTICAL=Ai,mi.RAINBOW_RADIAL_GRADIENT=xi;var Si="m",Ii="l",Ci="q",Di="c",Ri="a",Pi="z";Le.SEGMENT_MOVE_TO=Si,Le.SEGMENT_LINE_TO=Ii,Le.SEGMENT_QUAD_TO=Ci,Le.SEGMENT_CURVE_TO=Di,Le.SEGMENT_ARC_TO=Ri,Le.SEGMENT_CLOSE=Pi;var Ni=function(t,e){this.id=++O,U(t)?this.points=t:(this.type=t,this.points=e)};Ni.prototype={toJSON:function(){var t={type:this.type,points:this.points};return this.invalidTerminal&&(t.invalidTerminal=!0),t},parseJSON:function(t){this.type=t.type,this.points=t.points,this.invalidTerminal=t.invalidTerminal},points:null,type:Ii,clone:function(){return new Ni(this.type,this.points?u(this.points):null)},move:function(t,e){if(this.points)for(var i=0,n=this.points.length;i<n;i++){var s=this.points[i];we.isNumber(s)&&(this.points[i]+=i%2==0?t:e)}}},tt(Ni.prototype,{lastPoint:{get:function(){return this.type==Ri?{x:this._p2x,y:this._p2y}:{x:this.points[this.points.length-2],y:this.points[this.points.length-1]}}},firstPoint:{get:function(){return{x:this.points[0],y:this.points[1]}}}}),we.PathSegment=Ni;var ki=0;rt.ADD_SEGMENT_TYPE="curve";var Mi=function(t){this.bounds=new Et,this._g6=t||[]};function Bi(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}}function Gi(t,e,i,n,s){n=n||rt.ADD_SEGMENT_TYPE;var r=function(t,e,i,n){var s=t.length;if(s&&!(s<0)){n=n||1;for(var r,o,h=0;h++<s;)if((r=t.getLocation(h,0))&&!(n<(o=lt(e,i,r.x,r.y)))){for(var a=0;a++<n;)if(r=t.getLocation(h+a,0)){var l=lt(e,i,r.x,r.y);if(o<=l){h+=a;break}o=l}for(var _=h,u=t.length-1,c=0,d=(h=0,t._g6.length);h<d;h++)if(_<(c+=t._g6[h]._jl||0)){u=h;break}return r.length=_,r.index=u,r}}}(t,e,i,s);if(r){e=r.x,i=r.y;var o=t._g6,h=r.index,a=h==o.length-1,l=o[h],_=o.slice(0);if(l.type==Ii||l.type==Pi)if("line"==n)_.splice(h,0,new Ni(Ii,[r.x,r.y]));else{var u=o[h-1].lastPoint,c=l.firstPoint,d=Bi(u,r,g=lt(u.x,u.y,e,i)/lt(u.x,u.y,c.x,c.y)),f=Bi(r,c,g);_.splice(h,1,new Ni(Ci,[d.x,d.y,e,i]),new Ni(Ci,l.invalidTerminal?[f.x,f.y]:[f.x,f.y,c.x,c.y]))}else if("t"in r&&"line"!=n){var g=r.t;if(l.type==Di){u=o[h-1].lastPoint,c={x:l.points[0],y:l.points[1]};var v={x:l.points[2],y:l.points[3]},E={x:l.points[4],y:l.points[5]},p=(d=Bi(u,c,g),f=Bi(c,v,g),Bi(v,E,g)),m=Bi(d,f,g),y=Bi(f,p,g);_.splice(h,1,new Ni(Di,[d.x,d.y,m.x,m.y,e,i]),new Ni(Di,l.invalidTerminal?[y.x,y.y,p.x,p.y]:[y.x,y.y,p.x,p.y,E.x,E.y]))}else l.type==Ci&&(u=o[h-1].lastPoint,c={x:l.points[0],y:l.points[1]},v={x:l.points[2],y:l.points[3]},d=Bi(u,c,g),f=Bi(c,v,g),_.splice(h,1,new Ni(Ci,[d.x,d.y,e,i]),new Ni(Ci,l.invalidTerminal?[f.x,f.y]:[f.x,f.y,v.x,v.y])))}else c=l.lastPoint,_.splice(h,1,new Ni(Ii,[e,i]),new Ni(Ii,[c.x,c.y]));return{atEnd:a,index:h,isCurve:"line"!==n,segments:_}}}function Fi(t,e,i){this._$w(t,e,i)}function $i(t,e,i){return new Fi(t,e,i)}function ji(t,e,i){return(i=i||rt.BLEND_MODE)==Le.BLEND_MODE_MULTIPLY?t*e:i==Le.BLEND_MODE_DARKEN?Math.min(t,e):i==Le.BLEND_MODE_COLOR_BURN?1-(1-e)/t:i==Le.BLEND_MODE_LINEAR_BURN?t+e-1:i==Le.BLEND_MODE_LIGHTEN?Math.max(t,e):i==Le.BLEND_MODE_SCREEN?t+e-t*e:e}Mi.prototype={toJSON:function(){var t=[];return this._g6.forEach(function(e){t.push(e.toJSON())}),t},parseJSON:function(t){var e=this._g6;t.forEach(function(t){e.push(new Ni(t.type,t.points))})},clear:function(){this._g6.length=0,this.bounds.clear(),this._jl=0,this._6e=!0},_e4:!0,_70:function(t,e){this._e4&&0===this._g6.length&&t!=Si&&this._g6.push(new Ni(Si,[0,0])),this._g6.push(new Ni(t,e)),this._6e=!0},add:function(t,e){c(this._g6,t,e),this._6e=!0},removePathSegment:function(t){if(t>=this._g6.length)return!1;this._g6.splice(t,1),this._6e=!0},moveTo:function(t,e){this._70(Si,[t,e])},lineTo:function(t,e){this._70(Ii,[t,e])},quadTo:function(t,e,i,n){this._70(Ci,[t,e,i,n])},curveTo:function(t,e,i,n,s,r){this._70(Di,[t,e,i,n,s,r])},arcTo:function(t,e,i,n,s){this._70(Ri,[t,e,i,n,s])},closePath:function(){this._70(Pi)},_85:function(t,e,i,n,s){if(n.selectionColor){if(i==Le.SELECTION_TYPE_SHADOW){if(!n.selectionShadowBlur)return;return t.shadowColor=n.selectionColor,t.shadowBlur=n.selectionShadowBlur*e,t.shadowOffsetX=(n.selectionShadowOffsetX||0)*e,void(t.shadowOffsetY=(n.selectionShadowOffsetY||0)*e)}if(i==Le.SELECTION_TYPE_BORDER){if(!n.selectionBorder)return;t.strokeStyle=n.selectionColor;var r=s.lineWidth||0;s.outline&&(r+=2*s.outline),t.lineWidth=n.selectionBorder+r,this._l8(t),t.stroke()}}},_6e:!0,_g6:null,_jl:0,lineCap:"butt",lineJoin:"round",draw:function(t,e,i,n,s){t.lineCap=i.lineCap||this.lineCap,t.lineJoin=i.lineJoin||this.lineJoin,n&&(s=s||i,this._85(t,e,s.selectionType,s,i));var r=n&&s.selectionType==Le.SELECTION_TYPE_SHADOW;i.outlineStyle&&(this._l8(t),t.lineWidth=i.lineWidth+2*(i.outline||0),t.strokeStyle=i.outlineStyle,t.stroke(),r&&(r=!1,t.shadowColor="rgba(0,0,0,0)")),t.lineWidth=0,this._l8(t),i.fillColor&&(t.fillStyle=i.renderColor||i.fillColor,t.fill()),i.fillGradient&&(t.fillStyle=i._fillGradient||i.fillGradient,t.fill()),i.lineWidth&&(t.lineWidth=i.lineWidth,i.lineDash&&(i.lineFillColor&&(t.strokeStyle=i.lineFillColor,t.stroke(),r&&(t.shadowColor="rgba(0,0,0,0)")),t.lineCap=i.lineDashCap||t.lineCap,t.lineJoin=i.lineDashJoin||t.lineJoin,t.lineDash=i.lineDash,t.lineDashOffset=i.lineDashOffset),t.strokeStyle=i.renderColor||i.strokeStyle,t.stroke(),t.lineDash=[])},_l8:function(t){var e,i;t.beginPath();for(var n=0,s=this._g6.length;n<s;n++)e=this._g6[n],ii._l8(t,e,i),i=e},invalidate:function(){this._6e=!0},validate:function(){if(this._6e=!1,this.bounds.clear(),(this._jl=0)!=this._g6.length)for(var t,e,i=this._g6,n=1,s=i[0],r=s,o=i.length;n<o;n++)(t=i[n]).type==Si?r=t:(ii._5r(this.bounds,t,s,r),e=ii._5t(t,s,r),t._jl=e,this._jl+=e),s=t},getBounds:function(t,e){if(this._6e&&this.validate(),e=e||new Et,t){var i=t/2;e.set(this.bounds.x-i,this.bounds.y-i,this.bounds.width+t,this.bounds.height+t)}else e.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);return e},hitTest:function(t,e,i,n,s,r){return function(t,e,i,n,s,r){if(i=i||0,!(s=s||0)&&!r)return!1;if(!n&&!this.getBounds(s).intersectsPoint(t,e,i))return!1;var o=Math.round(2*i)||1,h=ke(o,o),a=(h.canvas,-t+i),l=-e+i;if(h.setTransform(1,0,0,1,a,l),h.isPointInStroke)return h.lineWidth=(s||0)+2*i,this._l8(h),!(!s||!h.isPointInStroke(i,i))||!!r&&h.isPointInPath(i,i);this._l8(h),s&&h.stroke(),r&&h.fill();var _=Ge(h,0,0,o,o);if(!_)return!1;for(var u=(_=_.data).length/4;0<u;){if(_[4*u-1]>ki)return!0;--u}return!1}.call(this,t,e,i,n,s,r)},toSegments:function(){return[].concat(this._g6)},generator:function(t,e,i,n,s){return function(t,e,i,n,s){this._6e&&this.validate();var r=s?this.getBounds(s):this.bounds,o=i/r.width,h=t-o*r.x,l=n/r.height,_=e-l*r.y,u=[];return a(this._g6,function(t){var e=t.clone(),i=e.points;if(i&&i.length){for(var n=i.length,s=[],r=0;r<n;r++){var a=i[r],c=i[++r];a=o*a+h,c=l*c+_,s.push(a),s.push(c)}e.points=s}u.push(e)},this),new Mi(u)}.call(this,t,e,i,n,s)},getLocation:function(t,e){return Qe.call(this,t,e||0)}},tt(Mi.prototype,{segments:{get:function(){return this._g6},set:function(t){this.clear(),this._g6=t}},length:{get:function(){return this._6e&&this.validate(),this._jl}},_empty:{get:function(){return 0==this._g6.length}}}),Fi.prototype={_$w:function(t,e,i){var n,s,r,o,h,a=t.length,l=0,_=0;for(h=0;h<a;h+=4)if(0<t[h+3]){n=(h+4)/e/4|0;break}for(h=a-4;0<=h;h-=4)if(0<t[h+3]){s=(h+4)/e/4|0;break}for(l=0;l<e;l++){for(_=n;_<s;_++)if(0<t[_*e*4+4*l+3]){r=l;break}if(0<=r)break}for(l=e-1;0<=l;l--){for(_=n;_<s;_++)if(0<t[_*e*4+4*l+3]){o=l;break}if(0<=o)break}this._x=r,this._y=n,this._width=o-r+1,this._height=s-n+1,this._j4=new Et(r,n,this._width,this._height),this._pixelSize=this._width*this._height,this._originalPixelsWidth=e,this._originalPixels=t},_dk:function(t,e){return this._originalPixels[4*(t+this._x+(this._y+e)*this._originalPixelsWidth)+3]},_hp:function(t,e,i){(!i||i<=1)&&(i=1),i|=0,t=Math.round(t-this._x)-i,e=Math.round(e-this._y)-i,i+=i;for(var n=t,s=e;s<e+i;){for(n=t;n<t+i;){if(this._dk(n,s))return!0;++n}++s}return!1}},Le.BLEND_MODE_DARKEN="darken",Le.BLEND_MODE_MULTIPLY="multiply",Le.BLEND_MODE_COLOR_BURN="color.burn",Le.BLEND_MODE_LINEAR_BURN="linear.burn",Le.BLEND_MODE_LIGHTEN="lighten",Le.BLEND_MODE_SCREEN="screen",Le.BLEND_MODE_GRAY="gray",rt.BLEND_MODE=Le.BLEND_MODE_LINEAR_BURN;var zi=function(t,e,i){this._iv=t,this.scale=e||1,this._ho=i};zi.prototype={scale:1,_iv:null,_iy:null,_ho:!0,_l8:function(t,e,i){if((e=e&&function(t){if("#"==t[0]){if(3==(t=t.substring(1)).length)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(6!=t.length)return;return[(t=parseInt(t,16))>>16&255,t>>8&255,255&t]}if(/^rgb/i.test(t)){var e=t.indexOf("("),i=t.indexOf(")");if(e<0||i<e)return;if((t=(t=t.substring(e+1,i)).split(",")).length<3)return;return[parseInt(t[0]),parseInt(t[1]),parseInt(t[2]),3==t.length?255:parseInt(t[3])]}we.error("color format error, ["+t+"]")}(e))&&!1!==this._ho){this._iv instanceof Image&&((n=Ne()).width=this._iv.width,n.height=this._iv.height,n.g.drawImage(this._iv,0,0,this._iv.width,this._iv.height),this._iv=n),this._iy||(this._iy={});var n,s=e+i;if((n=this._iy[s])||((n=function(t,e,i){var n=Ge(t.g,0,0,t.width,t.height);if(n){var s=n.data;if(i instanceof Function)s=i(t,s,e)||s;else{var r=e[0]/255,o=e[1]/255,h=e[2]/255;if(i==Le.BLEND_MODE_GRAY)for(var a=0,l=s.length;a<l;a+=4){var _=77*s[a]+151*s[a+1]+28*s[a+2]>>8;s[a]=_*r|0,s[a+1]=_*o|0,s[a+2]=_*h|0}else for(a=0,l=s.length;a<l;a+=4)s[a]=255*ji(r,s[a]/255,i)|0,s[a+1]=255*ji(o,s[a+1]/255,i)|0,s[a+2]=255*ji(h,s[a+2]/255,i)|0}return(t=Ne(t.width,t.height)).g.putImageData(n,0,0),t}}(this._iv,e,i))||(this._ho=!1),this._iy[s]=n||this._iv),n)if(A)try{t.drawImage(n,0,0)}catch(t){}else t.drawImage(n,0,0)}else t.drawImage(this._iv,0,0)}};var Hi=function(t,e,i,n,s,r,o,h,a){this._ky=function(t,e,i,n,s,r,o,h,a){if(gt(t,e,i,n,h,a))return null;var l,_,u=new Ni(Ii,[t+i-s,e]),c=new Ni(Ci,[t+i,e,t+i,e+r]),d=new Ni(Ii,[t+i,e+n-r]),f=new Ni(Ci,[t+i,e+n,t+i-s,e+n]),g=new Ni(Ii,[t+s,e+n]),v=new Ni(Ci,[t,e+n,t,e+n-r]),E=new Ni(Ii,[t,e+r]),p=new Ni(Ci,[t,e,t+s,e]),m=(new Ni(Pi),[u,c,d,f,g,v,E,p]),y=new Et(t+s,e+r,i-s-s,n-r-r);_=h<t?(l=yt,5):t+i<h?(l=Tt,1):(l="c",0),a<e?l==yt&&(_=7):e+n<a?l==Tt?_=3:"c"==l&&(_=4):l==yt?_=6:l==Tt&&(_=2);var T=function(t,e,i,n,s,r,o,h,a,l,_){var u=h/2;switch(r=r||1e-4,o=o||1e-4,t){case 7:var c=[e,i+o,e,i,e+r,i],d=e+r,f=i+o;return Yi(t,c,d,f,e,i,n,s,r,o,h,a,l,_);case 5:return Yi(t,c=[e+r,i+s,e,i+s,e,i+s-o],d=e+r,f=i+s-o,e,i,n,s,r,o,h,a,l,_);case 3:return Yi(t,c=[e+n,i+s-o,e+n,i+s,e+n-r,i+s],d=e+n-r,f=i+s-o,e,i,n,s,r,o,h,a,l,_);case 1:return Yi(t,c=[e+n-r,i,e+n,i,e+n,i+o],d=e+n-r,f=i+o,e,i,n,s,r,o,h,a,l,_);case 0:return function(t,e,i,n,s,r,o,h){var a,l;if(t+n<=o-r)a={y:e,x:o-r,_kyNO:0};else{a={y:e+s,x:Math.max(t,o-r)};var _=[t,e+s,t,e,t+n,e];(a=new _t(o,h,a.x,a.y)._$b(_))?(U(a)&&(a=a[0].t>a[1].t?a[0]:a[1]),(u=(u=Ui(_,[a]))[0])&&(a._ky=new Ni(Ci,u.slice(2))),a._kyNO=7):a={y:e,x:t+n,_kyNO:0}}if(o+r<=t+i-n)l={y:e,x:o+r,_kyNO:0};else{l={y:e+s,x:Math.min(t+i,o+r)};var u,c=[t+i-n,e,t+i,e,t+i,e+s];(l=new _t(o,h,l.x,l.y)._$b(c))?(U(l)&&(l=l[0].t<l[1].t?l[0]:l[1]),(u=Ui(c,[l]))&&u[u.length-1]&&(l._ky=new Ni(Ci,u[u.length-1].slice(2))),l._kyNO=1):l={y:e,x:t+i-n,_kyNO:0}}return[a,l]}(e,i,n,r,o,u,a,l);case 2:return function(t,e,i,n,s,r,o,h,a){var l,_;if(e+r<=a-o)l={x:t+i,y:a-o,_kyNO:2};else{l={x:t+i-s,y:Math.max(e,a-o)};var u=[t+i-s,e,t+i,e,t+i,e+r];(l=new _t(h,a,l.x,l.y)._$b(u))?(U(l)&&(l=l[0].t>l[1].t?l[0]:l[1]),(c=(c=Ui(u,[l]))[0])&&(l._ky=new Ni(Ci,c.slice(2))),l._kyNO=1):l={x:t+i,y:e+r,_kyNO:2}}if(a+o<=e+n-r)_={x:t+i,y:a+o,_kyNO:2};else{_={x:t+i-s,y:Math.min(e+n,a+o)};var c,d=[t+i,e+n-r,t+i,e+n,t+i-s,e+n];(_=new _t(h,a,_.x,_.y)._$b(d))?(U(_)&&(_=_[0].t<_[1].t?_[0]:_[1]),(c=Ui(d,[_]))[1]&&(_._ky=new Ni(Ci,c[1].slice(2))),_._kyNO=3):_={x:t+i,y:e+n-r,_kyNO:2}}return[l,_]}(e,i,n,s,r,o,u,a,l);case 4:return function(t,e,i,n,s,r,o,h,a){var l,_;if(t+s<=h-o)_={y:e+n,x:h-o,_kyNO:4};else{_={y:e+n-r,x:Math.max(t,h-o)};var u=[t+s,e+n,t,e+n,t,e+n-r];(_=new _t(h,a,_.x,_.y)._$b(u))?(U(_)&&(_=_[0].t<_[1].t?_[0]:_[1]),(c=(c=Ui(u,[_]))[c.length-1])&&(_._ky=new Ni(Ci,c.slice(2))),_._kyNO=5):_={y:e+n,x:t+s,_kyNO:4}}if(h+o<=t+i-s)l={y:e+n,x:h+o,_kyNO:4};else{l={y:e+n-r,x:Math.min(t+i,h+o)};var c,d=[t+i,e+n-r,t+i,e+n,t+i-s,e+n];(l=new _t(h,a,l.x,l.y)._$b(d))?(U(l)&&(l=l[0].t>l[1].t?l[0]:l[1]),(c=Ui(d,[l]))[0]&&(l._ky=new Ni(Ci,c[0].slice(2))),l._kyNO=3):l={y:e+n,x:t+i-s,_kyNO:4}}return[l,_]}(e,i,n,s,r,o,u,a,l);case 6:return function(t,e,i,n,s,r,o,h){var a,l;if(e+s<=h-r)l={x:t,y:h-r,_kyNO:6};else{l={x:t+n,y:Math.max(e,h-r)};var _=[t,e+s,t,e,t+n,e];(l=new _t(o,h,l.x,l.y)._$b(_))?(U(l)&&(l=l[0].t<l[1].t?l[0]:l[1]),(u=(u=Ui(_,[l]))[u.length-1])&&(l._ky=new Ni(Ci,u.slice(2)))):l={x:t,y:e+s},l._kyNO=7}if(h+r<=e+i-s)a={x:t,y:h+r,_kyNO:6};else{a={x:t+n,y:Math.min(e+i,h+r)};var u,c=[t+n,e+i,t,e+i,t,e+i-s];(a=new _t(o,h,a.x,a.y)._$b(c))?(U(a)&&(a=a[0].t>a[1].t?a[0]:a[1]),(u=Ui(c,[a]))[0]&&(a._ky=new Ni(Ci,u[0].slice(2))),a._kyNO=5):a={x:t,y:e+i-s,_kyNO:6}}return[a,l]}(e,i,s,r,o,u,a,l)}}(_,t,e,i,n,s,r,o,h,a,y),b=T[0],O=T[1],w=new Mi,L=w._g6;L.push(new Ni(Si,[b.x,b.y])),L.push(new Ni(Ii,[h,a])),L.push(new Ni(Ii,[O.x,O.y])),O._ky&&(L.push(O._ky),O._kyNO++);for(var A=O._kyNO%8,x=b._kyNO;L.push(m[A]),++A,(A%=8)!=x;);return b._ky&&L.push(b._ky),w.closePath(),w}(t,e,i,n,s,r,o,h,a)};function Yi(t,e,i,n,s,r,o,h,a,l,_,u,c,d){var f=new _t(u,c,i,n),g=new _t(e[0],e[1],e[4],e[5])._3b(f,_),v=g[0],E=g[1];if(void 0!==v._rest){v._kyNO=(t-1)%8,E._kyNO=(t+1)%8;var p=v._rest;7==t?(v.y=r+l+Math.min(d.height,p),E.x=s+a+Math.min(d.width,p)):5==t?(v.x=s+a+Math.min(d.width,p),E.y=r+h-l-Math.min(d.height,p)):3==t?(v.y=r+h-l-Math.min(d.height,p),E.x=s+o-a-Math.min(d.width,p)):1==t&&(v.x=s+o-a-Math.min(d.width,p),E.y=r+l+Math.min(d.height,p))}else{f._lo(f._lu,f._lv,v.x,v.y),v=f._$b(e),f._lo(f._lu,f._lv,E.x,E.y);var m=Ui(e,[v,E=f._$b(e)]),y=m[0],T=m[2];v._kyNO=t,E._kyNO=t,v._ky=new Ni(Ci,y.slice(2)),E._ky=new Ni(Ci,T.slice(2))}return[v,E]}function Ui(t,e){for(var i,n,s,r,o,h,a=t[0],l=t[1],_=t[2],u=t[3],c=t[4],d=t[5],f=[],g=0;g<e.length;g++)0!=(h=(o=e[g]).t)&&1!=h?(i=a+(_-a)*h,n=l+(u-l)*h,s=_+(c-_)*h,r=u+(d-u)*h,f.push([a,l,i,n,o.x,o.y]),a=o.x,l=o.y,_=s,u=r):f.push(null);return void 0!==s&&f.push([o.x,o.y,s,r,c,d]),f}var Wi={server:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var e=t.createLinearGradient(6.75,3.9033,30.5914,27.7447);e.addColorStop(.0493,"#1C6B9D"),e.addColorStop(.0689,"#186493"),e.addColorStop(.0939,"#145E8B"),e.addColorStop(.129,"#115B87"),e.addColorStop(.2266,"#115A85"),e.addColorStop(.2556,"#125C89"),e.addColorStop(.2869,"#176291"),e.addColorStop(.3194,"#1D6C9F"),e.addColorStop(.3525,"#2479B0"),e.addColorStop(.3695,"#2881BB"),e.addColorStop(.5025,"#1F6FA2"),e.addColorStop(.9212,"#115A86"),e.addColorStop(1,"#004063"),t.fillStyle=e,t.beginPath(),t.moveTo(25.677,4.113),t.bezierCurveTo(25.361,2.4410000000000007,23.364,2.7940000000000005,22.14,2.7990000000000004),t.bezierCurveTo(19.261,2.813,16.381,2.8260000000000005,13.502,2.8400000000000003),t.bezierCurveTo(12.185,2.846,10.699000000000002,2.652,9.393,2.8790000000000004),t.bezierCurveTo(9.19,2.897,8.977,2.989,8.805,3.094),t.bezierCurveTo(8.084999999999999,3.5109999999999997,7.436999999999999,4.1259999999999994,6.776,4.63),t.bezierCurveTo(5.718999999999999,5.436,4.641,6.22,3.6029999999999998,7.05),t.bezierCurveTo(4.207,6.5889999999999995,21.601999999999997,36.579,21.028,37.307),t.bezierCurveTo(22.019,36.063,23.009999999999998,34.819,24.000999999999998,33.575),t.bezierCurveTo(24.587999999999997,32.84,25.589999999999996,31.995000000000005,25.593999999999998,30.983000000000004),t.bezierCurveTo(25.595999999999997,30.489000000000004,25.598,29.994000000000003,25.601,29.500000000000004),t.bezierCurveTo(25.612,26.950000000000003,25.622,24.400000000000006,25.633,21.85),t.bezierCurveTo(25.657,16.318,25.680999999999997,10.786000000000001,25.704,5.253),t.bezierCurveTo(25.706,4.885,25.749,4.478,25.677,4.113),t.bezierCurveTo(25.67,4.077,25.697,4.217,25.677,4.113),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(19.763,6.645),t.bezierCurveTo(20.002000000000002,6.643999999999999,20.23,6.691999999999999,20.437,6.778),t.bezierCurveTo(20.644000000000002,6.864999999999999,20.830000000000002,6.991,20.985,7.146999999999999),t.bezierCurveTo(21.14,7.302999999999999,21.266,7.488999999999999,21.352999999999998,7.696999999999999),t.bezierCurveTo(21.438999999999997,7.903999999999999,21.487,8.133,21.487,8.372),t.lineTo(21.398,36.253),t.bezierCurveTo(21.397,36.489,21.349,36.713,21.262,36.917),t.bezierCurveTo(21.174,37.121,21.048000000000002,37.305,20.893,37.458),t.bezierCurveTo(20.738,37.611,20.553,37.734,20.348,37.818999999999996),t.bezierCurveTo(20.141,37.903999999999996,19.916,37.95099999999999,19.679,37.949),t.lineTo(4.675,37.877),t.bezierCurveTo(4.4399999999999995,37.876000000000005,4.216,37.827000000000005,4.012,37.741),t.bezierCurveTo(3.8089999999999997,37.653999999999996,3.6249999999999996,37.528999999999996,3.4719999999999995,37.376),t.bezierCurveTo(3.3179999999999996,37.221,3.1939999999999995,37.037,3.1079999999999997,36.833999999999996),t.bezierCurveTo(3.022,36.629999999999995,2.9739999999999998,36.406,2.9739999999999998,36.172),t.lineTo(2.924,8.431),t.bezierCurveTo(2.923,8.192,2.971,7.964,3.057,7.758),t.bezierCurveTo(3.143,7.552,3.267,7.365,3.4219999999999997,7.209),t.bezierCurveTo(3.5769999999999995,7.052999999999999,3.76,6.925,3.965,6.837),t.bezierCurveTo(4.17,6.749,4.396,6.701,4.633,6.7),t.lineTo(19.763,6.645),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.fillStyle="#efefef",t.beginPath(),t.arc(12.208,26.543,2.208,0,6.283185307179586,!0),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.arc(12.208,26.543,1.876,0,6.283185307179586,!0),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#efefef",t.beginPath(),t.moveTo(19.377,17.247),t.bezierCurveTo(19.377,17.724,18.991999999999997,18.108999999999998,18.516,18.108999999999998),t.lineTo(5.882,18.108999999999998),t.bezierCurveTo(5.404999999999999,18.108999999999998,5.02,17.723,5.02,17.247),t.lineTo(5.02,11.144),t.bezierCurveTo(5.02,10.666,5.406,10.281,5.882,10.281),t.lineTo(18.516,10.281),t.bezierCurveTo(18.993,10.281,19.377,10.666,19.377,11.144),t.lineTo(19.377,17.247),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(18.536,13.176),t.bezierCurveTo(18.536,13.518,18.261000000000003,13.794,17.919,13.794),t.lineTo(6.479,13.794),t.bezierCurveTo(6.1370000000000005,13.794,5.861,13.518,5.861,13.176),t.lineTo(5.861,11.84),t.bezierCurveTo(5.861,11.498,6.137,11.221,6.479,11.221),t.lineTo(17.918,11.221),t.bezierCurveTo(18.259999999999998,11.221,18.535,11.497,18.535,11.84),t.lineTo(18.535,13.176),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(18.536,16.551),t.bezierCurveTo(18.536,16.892999999999997,18.261000000000003,17.168999999999997,17.919,17.168999999999997),t.lineTo(6.479,17.168999999999997),t.bezierCurveTo(6.1370000000000005,17.168999999999997,5.861,16.892999999999997,5.861,16.551),t.lineTo(5.861,15.215999999999998),t.bezierCurveTo(5.861,14.872999999999998,6.137,14.596999999999998,6.479,14.596999999999998),t.lineTo(17.918,14.596999999999998),t.bezierCurveTo(18.259999999999998,14.596999999999998,18.535,14.872999999999998,18.535,15.215999999999998),t.lineTo(18.535,16.551),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore()}},exchanger2:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var e=t.createLinearGradient(.4102,24.3613,39.5898,24.3613);e.addColorStop(0,"#1C6B9D"),e.addColorStop(.0788,"#115A85"),e.addColorStop(.2046,"#135D89"),e.addColorStop(.3649,"#186494"),e.addColorStop(.5432,"#1F70A4"),e.addColorStop(.6798,"#257AB2"),e.addColorStop(.7462,"#2377AD"),e.addColorStop(.8508,"#1E6DA0"),e.addColorStop(.98,"#125C89"),e.addColorStop(1,"#105984"),t.fillStyle=e,t.beginPath(),t.moveTo(.41,16.649),t.bezierCurveTo(.633,19.767,.871,20.689,1.094,23.807000000000002),t.bezierCurveTo(1.29,26.548000000000002,3.324,28.415000000000003,5.807,29.711000000000002),t.bezierCurveTo(10.582,32.202000000000005,16.477,32.806000000000004,21.875999999999998,32.523),t.bezierCurveTo(26.929,32.258,32.806,31.197000000000003,36.709999999999994,27.992000000000004),t.bezierCurveTo(38.30499999999999,26.728000000000005,38.83599999999999,25.103000000000005,38.998999999999995,23.161000000000005),t.bezierCurveTo(39.589,16.135000000000005,39.589,16.135000000000005,39.589,16.135000000000005),t.bezierCurveTo(39.589,16.135000000000005,3.26,16.647,.41,16.649),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(16.4,25.185),t.bezierCurveTo(12.807999999999998,24.924999999999997,9.139,24.238,5.857999999999999,22.705),t.bezierCurveTo(3.175999999999999,21.450999999999997,-.32200000000000095,18.971999999999998,.544999999999999,15.533999999999999),t.bezierCurveTo(1.3499999999999992,12.335999999999999,4.987999999999999,10.495999999999999,7.807999999999999,9.428999999999998),t.bezierCurveTo(11.230999999999998,8.133999999999999,14.911999999999999,7.519999999999999,18.558,7.345999999999998),t.bezierCurveTo(22.233,7.169999999999998,25.966,7.437999999999998,29.548000000000002,8.300999999999998),t.bezierCurveTo(32.673,9.052999999999999,36.192,10.296,38.343,12.814999999999998),t.bezierCurveTo(40.86600000000001,15.768999999999998,39.208000000000006,19.066999999999997,36.406000000000006,21.043999999999997),t.bezierCurveTo(33.566,23.046999999999997,30.055000000000007,24.071999999999996,26.670000000000005,24.676999999999996),t.bezierCurveTo(23.289,25.28,19.824,25.436,16.4,25.185),t.bezierCurveTo(13.529,24.977,19.286,25.396,16.4,25.185),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(5.21,21.754),t.lineTo(8.188,17.922),t.lineTo(9.53,18.75),t.lineTo(15.956,16.004),t.lineTo(18.547,17.523),t.lineTo(12.074,20.334),t.lineTo(13.464,21.204),t.lineTo(5.21,21.754),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(17.88,14.61),t.lineTo(9.85,13.522),t.lineTo(11.703,12.757),t.lineTo(7.436,10.285),t.lineTo(10.783,8.942),t.lineTo(15.091,11.357),t.lineTo(16.88,10.614),t.lineTo(17.88,14.61),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(17.88,14.61),t.lineTo(9.85,13.522),t.lineTo(11.703,12.757),t.lineTo(7.436,10.285),t.lineTo(10.783,8.942),t.lineTo(15.091,11.357),t.lineTo(16.88,10.614),t.lineTo(17.88,14.61),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(23.556,15.339),t.lineTo(20.93,13.879),t.lineTo(26.953,11.304),t.lineTo(25.559,10.567),t.lineTo(33.251,9.909),t.lineTo(31.087,13.467),t.lineTo(29.619,12.703),t.lineTo(23.556,15.339),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(30.028,23.383),t.lineTo(24.821,20.366),t.lineTo(22.915,21.227),t.lineTo(21.669,16.762),t.lineTo(30.189,17.942),t.lineTo(28.33,18.782),t.lineTo(33.579,21.725),t.lineTo(30.028,23.383),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(30.028,23.383),t.lineTo(24.821,20.366),t.lineTo(22.915,21.227),t.lineTo(21.669,16.762),t.lineTo(30.189,17.942),t.lineTo(28.33,18.782),t.lineTo(33.579,21.725),t.lineTo(30.028,23.383),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.restore(),t.restore(),t.restore()}},exchanger:{draw:function(t){var e;t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(e=t.createLinearGradient(.2095,20.7588,39.4941,20.7588)).addColorStop(0,"#6A6969"),e.addColorStop(.0788,"#4F4C4B"),e.addColorStop(.352,"#545252"),e.addColorStop(.6967,"#646262"),e.addColorStop(.8916,"#6F6E6F"),e.addColorStop(.9557,"#4C4948"),e.addColorStop(1,"#494645"),t.fillStyle=e,t.beginPath(),t.moveTo(39.449,12.417),t.lineTo(39.384,9.424),t.bezierCurveTo(39.384,9.424,.7980000000000018,22.264,.3710000000000022,23.024),t.bezierCurveTo(-.026999999999997804,23.733,.4240000000000022,24.903000000000002,.5190000000000022,25.647000000000002),t.bezierCurveTo(.7240000000000022,27.244000000000003,.9240000000000023,28.841,1.1350000000000022,30.437),t.bezierCurveTo(1.3220000000000023,31.843,2.7530000000000023,32.094,3.9620000000000024,32.094),t.bezierCurveTo(8.799000000000003,32.092,13.636000000000003,32.091,18.473000000000003,32.089),t.bezierCurveTo(23.515,32.086999999999996,28.556000000000004,32.086,33.598,32.083999999999996),t.bezierCurveTo(34.859,32.083999999999996,36.286,31.979999999999997,37.266,31.081999999999997),t.bezierCurveTo(37.537,30.820999999999998,37.655,30.535999999999998,37.699999999999996,30.229999999999997),t.lineTo(37.711,30.316999999999997),t.lineTo(39.281,16.498999999999995),t.bezierCurveTo(39.281,16.498999999999995,39.467999999999996,15.126999999999995,39.489,14.666999999999994),t.bezierCurveTo(39.515,14.105,39.449,12.417,39.449,12.417),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(e=t.createLinearGradient(19.8052,7.7949,19.8052,24.7632)).addColorStop(0,"#7D7D7D"),e.addColorStop(.1455,"#808080"),e.addColorStop(.2975,"#888888"),e.addColorStop(.4527,"#939293"),e.addColorStop(.6099,"#9E9D9D"),e.addColorStop(.7687,"#A7A5A4"),e.addColorStop(.9268,"#A9A6A5"),e.addColorStop(.9754,"#A7A4A3"),e.addColorStop(1,"#FFFFFF"),t.fillStyle=e,t.beginPath(),t.moveTo(33.591,24.763),t.bezierCurveTo(23.868000000000002,24.754,14.145,24.746000000000002,4.423000000000002,24.738000000000003),t.bezierCurveTo(3.140000000000002,24.737000000000002,-.48799999999999777,24.838000000000005,.3520000000000021,22.837000000000003),t.bezierCurveTo(1.292000000000002,20.594000000000005,2.2330000000000023,18.351000000000003,3.1730000000000023,16.108000000000004),t.bezierCurveTo(4.113000000000002,13.865000000000006,5.054000000000002,11.623000000000005,5.994000000000002,9.380000000000004),t.bezierCurveTo(6.728000000000002,7.629000000000005,9.521000000000003,7.885000000000004,11.156000000000002,7.880000000000004),t.bezierCurveTo(16.974000000000004,7.861000000000004,22.793000000000003,7.843000000000004,28.612000000000002,7.825000000000005),t.bezierCurveTo(30.976000000000003,7.818000000000005,33.341,7.810000000000005,35.707,7.803000000000004),t.bezierCurveTo(36.157000000000004,7.802000000000004,36.609,7.787000000000004,37.06,7.804000000000005),t.bezierCurveTo(37.793,7.833000000000005,39.389,7.875000000000004,39.385000000000005,9.424000000000005),t.bezierCurveTo(39.38400000000001,9.647000000000006,39.31,10.138000000000005,39.27700000000001,10.359000000000005),t.bezierCurveTo(38.81900000000001,13.361000000000004,38.452000000000005,15.764000000000006,37.99400000000001,18.766000000000005),t.bezierCurveTo(37.806000000000004,19.998000000000005,37.61800000000001,21.230000000000004,37.43000000000001,22.462000000000007),t.bezierCurveTo(37.151,24.271,35.264,24.77,33.591,24.763),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(10.427,19.292),t.lineTo(5.735,16.452),t.lineTo(12.58,13.8),t.lineTo(12.045,15.07),t.lineTo(20.482,15.072),t.lineTo(19.667,17.887),t.lineTo(11.029,17.851),t.lineTo(10.427,19.292),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(13.041,13.042),t.lineTo(8.641,10.73),t.lineTo(14.82,8.474),t.lineTo(14.373,9.537),t.lineTo(22.102,9.479),t.lineTo(21.425,11.816),t.lineTo(13.54,11.85),t.lineTo(13.041,13.042),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(29.787,16.049),t.lineTo(29.979,14.704),t.lineTo(21.51,14.706),t.lineTo(22.214,12.147),t.lineTo(30.486,12.116),t.lineTo(30.653,10.926),t.lineTo(36.141,13.4),t.lineTo(29.787,16.049),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(28.775,23.14),t.lineTo(29.011,21.49),t.lineTo(19.668,21.405),t.lineTo(20.523,18.295),t.lineTo(29.613,18.338),t.lineTo(29.815,16.898),t.lineTo(35.832,19.964),t.lineTo(28.775,23.14),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.restore()}},cloud:{draw:function(t){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(90.75,0),t.lineTo(90.75,62.125),t.lineTo(0,62.125),t.closePath(),t.clip(),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save();var e=t.createLinearGradient(44.0054,6.4116,44.0054,51.3674);e.addColorStop(0,"rgba(159, 160, 160, 0.7)"),e.addColorStop(.9726,"#E9EAEA"),t.fillStyle=e,t.beginPath(),t.moveTo(57.07,20.354),t.bezierCurveTo(57.037,20.354,57.006,20.358,56.974000000000004,20.358),t.bezierCurveTo(54.461000000000006,14.308,48.499,10.049000000000001,41.538000000000004,10.049000000000001),t.bezierCurveTo(33.801,10.049000000000001,27.309000000000005,15.316000000000003,25.408000000000005,22.456000000000003),t.bezierCurveTo(18.988000000000007,23.289,14.025000000000006,28.765000000000004,14.025000000000006,35.413000000000004),t.bezierCurveTo(14.025000000000006,42.635000000000005,19.880000000000006,48.49,27.102000000000004,48.49),t.bezierCurveTo(29.321000000000005,48.49,31.407000000000004,47.933,33.237,46.961),t.bezierCurveTo(34.980000000000004,49.327,37.78,50.867999999999995,40.945,50.867999999999995),t.bezierCurveTo(43.197,50.867999999999995,45.261,50.086,46.896,48.785999999999994),t.bezierCurveTo(49.729,50.78699999999999,53.244,51.98799999999999,57.07,51.98799999999999),t.bezierCurveTo(66.412,51.98799999999999,73.986,44.90699999999999,73.986,36.17099999999999),t.bezierCurveTo(73.986,27.436,66.413,20.354,57.07,20.354),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},node:{width:60,height:100,draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(13.948,31.075),t.lineTo(25.914,31.075),t.quadraticCurveTo(25.914,31.075,25.914,31.075),t.lineTo(25.914,34.862),t.quadraticCurveTo(25.914,34.862,25.914,34.862),t.lineTo(13.948,34.862),t.quadraticCurveTo(13.948,34.862,13.948,34.862),t.lineTo(13.948,31.075),t.quadraticCurveTo(13.948,31.075,13.948,31.075),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(29.679,35.972),t.bezierCurveTo(29.679,36.675000000000004,29.110999999999997,37.244,28.407999999999998,37.244),t.lineTo(11.456,37.244),t.bezierCurveTo(10.751999999999999,37.244,10.183,36.675,10.183,35.972),t.lineTo(10.183,36.136),t.bezierCurveTo(10.183,35.431000000000004,10.751999999999999,34.863,11.456,34.863),t.lineTo(28.407,34.863),t.bezierCurveTo(29.11,34.863,29.678,35.431,29.678,36.136),t.lineTo(29.678,35.972),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(.196,29.346),t.bezierCurveTo(.196,30.301,.9690000000000001,31.075,1.925,31.075),t.lineTo(37.936,31.075),t.bezierCurveTo(38.891,31.075,39.665,30.301,39.665,29.346),t.lineTo(39.665,27.174),t.lineTo(.196,27.174),t.lineTo(.196,29.346),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(37.937,3.884),t.lineTo(1.926,3.884),t.bezierCurveTo(.97,3.884,.19699999999999984,4.657,.19699999999999984,5.614),t.lineTo(.19699999999999984,27.12),t.lineTo(39.666000000000004,27.12),t.lineTo(39.666000000000004,5.615),t.bezierCurveTo(39.665,4.657,38.892,3.884,37.937,3.884),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var e=t.createLinearGradient(6.9609,2.9341,32.9008,28.874);e.addColorStop(0,"#B2CBEA"),e.addColorStop(1,"#2E8ECE"),t.fillStyle=e,t.beginPath(),t.moveTo(35.788,6.39),t.lineTo(4.074,6.39),t.bezierCurveTo(3.315,6.39,2.702,7.003,2.702,7.763),t.lineTo(2.702,24.616),t.lineTo(37.159,24.616),t.lineTo(37.159,7.763),t.bezierCurveTo(37.159,7.003,36.546,6.39,35.788,6.39),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},group:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(47.75,0),t.lineTo(47.75,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(10.447,26.005),t.lineTo(18.847,26.005),t.quadraticCurveTo(18.847,26.005,18.847,26.005),t.lineTo(18.847,28.663),t.quadraticCurveTo(18.847,28.663,18.847,28.663),t.lineTo(10.447,28.663),t.quadraticCurveTo(10.447,28.663,10.447,28.663),t.lineTo(10.447,26.005),t.quadraticCurveTo(10.447,26.005,10.447,26.005),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(21.491,29.443),t.bezierCurveTo(21.491,29.935000000000002,21.094,30.338,20.597,30.338),t.lineTo(8.698,30.338),t.bezierCurveTo(8.201,30.338,7.8020000000000005,29.936,7.8020000000000005,29.443),t.lineTo(7.8020000000000005,29.557000000000002),t.bezierCurveTo(7.8020000000000005,29.063000000000002,8.201,28.662000000000003,8.698,28.662000000000003),t.lineTo(20.597,28.662000000000003),t.bezierCurveTo(21.093,28.662000000000003,21.491,29.062,21.491,29.557000000000002),t.lineTo(21.491,29.443),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(.789,24.79),t.bezierCurveTo(.789,25.461,1.334,26.005,2.0060000000000002,26.005),t.lineTo(27.289,26.005),t.bezierCurveTo(27.961000000000002,26.005,28.504,25.461,28.504,24.79),t.lineTo(28.504,23.267),t.lineTo(.789,23.267),t.lineTo(.789,24.79),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(27.289,6.912),t.lineTo(2.006,6.912),t.bezierCurveTo(1.3339999999999996,6.912,.7889999999999997,7.455,.7889999999999997,8.126),t.lineTo(.7889999999999997,23.227),t.lineTo(28.503999999999998,23.227),t.lineTo(28.503999999999998,8.126),t.bezierCurveTo(28.504,7.455,27.961,6.912,27.289,6.912),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var e=t.createLinearGradient(5.54,6.2451,23.7529,24.458);e.addColorStop(0,"#B2CBEA"),e.addColorStop(1,"#2E8ECE"),t.fillStyle=e,t.beginPath(),t.moveTo(25.78,8.671),t.lineTo(3.514,8.671),t.bezierCurveTo(2.9819999999999998,8.671,2.549,9.101999999999999,2.549,9.635),t.lineTo(2.549,21.466),t.lineTo(26.743,21.466),t.lineTo(26.743,9.636),t.bezierCurveTo(26.743,9.102,26.312,8.671,25.78,8.671),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(27.053,33.602),t.lineTo(36.22,33.602),t.quadraticCurveTo(36.22,33.602,36.22,33.602),t.lineTo(36.22,36.501),t.quadraticCurveTo(36.22,36.501,36.22,36.501),t.lineTo(27.053,36.501),t.quadraticCurveTo(27.053,36.501,27.053,36.501),t.lineTo(27.053,33.602),t.quadraticCurveTo(27.053,33.602,27.053,33.602),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(39.104,37.352),t.bezierCurveTo(39.104,37.891,38.67,38.327,38.13,38.327),t.lineTo(25.143,38.327),t.bezierCurveTo(24.602,38.327,24.166,37.891,24.166,37.352),t.lineTo(24.166,37.477999999999994),t.bezierCurveTo(24.166,36.937,24.602,36.501,25.143,36.501),t.lineTo(38.131,36.501),t.bezierCurveTo(38.671,36.501,39.105,36.937,39.105,37.477999999999994),t.lineTo(39.105,37.352),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(16.514,32.275),t.bezierCurveTo(16.514,33.004999999999995,17.107,33.601,17.839,33.601),t.lineTo(45.433,33.601),t.bezierCurveTo(46.166,33.601,46.758,33.005,46.758,32.275),t.lineTo(46.758,30.607999999999997),t.lineTo(16.514,30.607999999999997),t.lineTo(16.514,32.275),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(45.433,12.763),t.lineTo(17.839,12.763),t.bezierCurveTo(17.107,12.763,16.514,13.356,16.514,14.089),t.lineTo(16.514,30.57),t.lineTo(46.757999999999996,30.57),t.lineTo(46.757999999999996,14.088),t.bezierCurveTo(46.758,13.356,46.166,12.763,45.433,12.763),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(e=t.createLinearGradient(21.6973,12.0352,41.5743,31.9122)).addColorStop(0,"#B2CBEA"),e.addColorStop(1,"#2E8ECE"),t.fillStyle=e,t.beginPath(),t.moveTo(43.785,14.683),t.lineTo(19.486,14.683),t.bezierCurveTo(18.903000000000002,14.683,18.433,15.153,18.433,15.735),t.lineTo(18.433,28.649),t.lineTo(44.837,28.649),t.lineTo(44.837,15.734),t.bezierCurveTo(44.838,15.153,44.367,14.683,43.785,14.683),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.globalAlpha=.5,t.beginPath(),t.moveTo(23.709,36.33),t.lineTo(4.232,36.33),t.lineTo(4.232,27.199),t.lineTo(5.304,27.199),t.lineTo(5.304,35.259),t.lineTo(23.709,35.259),t.lineTo(23.709,36.33),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},subnetwork:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(60.75,0),t.lineTo(60.75,42.125),t.lineTo(0,42.125),t.closePath(),t.clip(),t.translate(0,.26859504132231393),t.scale(.6694214876033058,.6694214876033058),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var e=t.createLinearGradient(43.6724,-2.7627,43.6724,59.3806);e.addColorStop(0,"rgba(159, 160, 160, 0.7)"),e.addColorStop(.9726,"#E9EAEA"),t.fillStyle=e,t.beginPath(),t.moveTo(61.732,16.509),t.bezierCurveTo(61.686,16.509,61.644,16.515,61.599,16.515),t.bezierCurveTo(58.126,8.152000000000001,49.884,2.2650000000000006,40.262,2.2650000000000006),t.bezierCurveTo(29.567,2.2650000000000006,20.594,9.545000000000002,17.966,19.415),t.bezierCurveTo(9.09,20.566,2.229,28.136,2.229,37.326),t.bezierCurveTo(2.229,47.309,10.322,55.403000000000006,20.306,55.403000000000006),t.bezierCurveTo(23.374000000000002,55.403000000000006,26.257,54.633,28.787,53.28900000000001),t.bezierCurveTo(31.197,56.56000000000001,35.067,58.69000000000001,39.442,58.69000000000001),t.bezierCurveTo(42.555,58.69000000000001,45.408,57.60900000000001,47.669,55.81200000000001),t.bezierCurveTo(51.586,58.57800000000001,56.443999999999996,60.238000000000014,61.732,60.238000000000014),t.bezierCurveTo(74.64699999999999,60.238000000000014,85.116,50.45000000000002,85.116,38.37400000000001),t.bezierCurveTo(85.116,26.298,74.646,16.509,61.732,16.509),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(34.966,44.287),t.lineTo(45.112,44.287),t.quadraticCurveTo(45.112,44.287,45.112,44.287),t.lineTo(45.112,47.497),t.quadraticCurveTo(45.112,47.497,45.112,47.497),t.lineTo(34.966,47.497),t.quadraticCurveTo(34.966,47.497,34.966,47.497),t.lineTo(34.966,44.287),t.quadraticCurveTo(34.966,44.287,34.966,44.287),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#727171",t.beginPath(),t.moveTo(48.306,48.439),t.bezierCurveTo(48.306,49.034,47.824999999999996,49.52,47.226,49.52),t.lineTo(32.854,49.52),t.bezierCurveTo(32.253,49.52,31.771,49.034000000000006,31.771,48.439),t.lineTo(31.771,48.578),t.bezierCurveTo(31.771,47.981,32.253,47.497,32.854,47.497),t.lineTo(47.226,47.497),t.bezierCurveTo(47.824999999999996,47.497,48.306,47.98,48.306,48.578),t.lineTo(48.306,48.439),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#b5b5b6",t.beginPath(),t.moveTo(23.302,42.82),t.bezierCurveTo(23.302,43.63,23.96,44.287,24.772,44.287),t.lineTo(55.308,44.287),t.bezierCurveTo(56.12,44.287,56.775,43.629999999999995,56.775,42.82),t.lineTo(56.775,40.98),t.lineTo(23.302,40.98),t.lineTo(23.302,42.82),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(55.307,21.229),t.lineTo(24.771,21.229),t.bezierCurveTo(23.959,21.229,23.301000000000002,21.884,23.301000000000002,22.695),t.lineTo(23.301000000000002,40.933),t.lineTo(56.774,40.933),t.lineTo(56.774,22.695),t.bezierCurveTo(56.774,21.884,56.119,21.229,55.307,21.229),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(e=t.createLinearGradient(29.04,20.4219,51.0363,42.4181)).addColorStop(0,"#B2CBEA"),e.addColorStop(1,"#2E8ECE"),t.fillStyle=e,t.beginPath(),t.moveTo(53.485,23.353),t.lineTo(26.592,23.353),t.bezierCurveTo(25.948999999999998,23.353,25.427,23.873,25.427,24.517000000000003),t.lineTo(25.427,38.807),t.lineTo(54.647,38.807),t.lineTo(54.647,24.517000000000003),t.bezierCurveTo(54.648,23.873,54.127,23.353,53.485,23.353),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore()}}};for(var qi in Wi)gi("Q-"+qi,Wi[qi]);function Xi(t){return this.$layoutByAnchorPoint&&this._m0v&&(t.x-=this._m0v.x,t.y-=this._m0v.y),this.$rotate&&Se(t,this.$rotate),t.x+=this.$offsetX||0,t.y+=this.$offsetY||0,this.$rotatable&&this.$_hostRotate?Se(t,this.$_hostRotate):t}function Vi(t){return this.$rotatable&&this.$_hostRotate&&Se(t,-this.$_hostRotate),t.x-=this.$offsetX||0,t.y-=this.$offsetY||0,this.$rotate&&Se(t,-this.$rotate),this.$layoutByAnchorPoint&&this._m0v&&(t.x+=this._m0v.x,t.y+=this._m0v.y),t}function Ki(){var t=this.$invalidateSize;this.$invalidateSize&&(this.$invalidateSize=!1,this.$invalidateAnchorPoint=!0,this._83.setByRect(this._j4),this.$padding&&this._83.grow(this.$padding),this.$border&&this._83.grow(this.$border));var e=this._$o();if(e)var i=this.showPointer&&this.$pointerWidth;return this.$invalidateAnchorPoint&&this.$layoutByAnchorPoint&&(this.$invalidateAnchorPoint=!1,i&&(t=!0),this._m0v=At(this.$anchorPosition,this._83.width,this._83.height),this._m0v.x+=this._83.x,this._m0v.y+=this._83.y),e?(t&&(this._m1ackgroundGradientInvalidateFlag=!0,function(t){var e=this._83.x+this.$border/2,i=this._83.y+this.$border/2,n=this._83.width-this.$border,s=this._83.height-this.$border,r=0,o=0;if(this.$borderRadius&&(H(this.$borderRadius)?r=o=this.$borderRadius:(r=this.$borderRadius.x||0,o=this.$borderRadius.y||0),r=Math.min(r,n/2),o=Math.min(o,s/2)),t&&(this._pointerX=this._m0v.x-this.$offsetX+this.$pointerX,this._pointerY=this._m0v.y-this.$offsetY+this.$pointerY,!this._83.intersectsPoint(this._pointerX,this._pointerY))){var h=new Hi(e,i,n,s,r,o,this.$pointerWidth,this._pointerX,this._pointerY);return this._l9Shape=h._ky,this._l9Shape.bounds.set(e,i,n,s),void(this.__l0Pointer=!0)}this._l9Shape&&this._l9Shape.clear(),this._l9Shape=Yn.getRect(e,i,n,s,r,o,this._l9Shape),this._l9Shape.bounds.set(e,i,n,s)}.call(this,i)),this._m1ackgroundGradientInvalidateFlag&&(this._m1ackgroundGradientInvalidateFlag=!1,this.backgroundGradient&&this._l9Shape&&this._l9Shape.bounds?this._m1ackgroundGradient=mi.prototype.generatorGradient.call(this.backgroundGradient,this._l9Shape.bounds):this._m1ackgroundGradient=null)):this.__l0Pointer=!1,t}function Zi(t,e,i,n){if(n&&(t.width<0||t.height<0))return t.x=e,t.y=i,void(t.width=t.height=0);e<t.x?(t.width+=t.x-e,t.x=e):e>t.x+t.width&&(t.width=e-t.x),i<t.y?(t.height+=t.y-i,t.y=i):i>t.y+t.height&&(t.height=i-t.y)}var Qi=function(){this.$invalidateRotate=!1;var t=this._fu;t.clear();var e=this.$border||0,i=this._83.x+e/2,n=this._83.y+e/2,s=this._83.width-e,r=this._83.height-e,o=Xi.call(this,{x:i,y:n});Zi(t,o.x,o.y,!0),Zi(t,(o=Xi.call(this,{x:i+s,y:n})).x,o.y),Zi(t,(o=Xi.call(this,{x:i+s,y:n+r})).x,o.y),Zi(t,(o=Xi.call(this,{x:i,y:n+r})).x,o.y),this.__l0Pointer&&Zi(t,(o=Xi.call(this,{x:this._pointerX,y:this._pointerY})).x,o.y),e&&t.grow(e/2)};function Ji(t,e){if(e)if(e._83.isEmpty())t.$x=e.$x,t.$y=e.$y;else{var i=function(t,e,i){var n,s=t.position,r=void 0===t.layoutByPath?this.layoutByPath:t.layoutByPath;return this.$data instanceof Mi&&r?((n=ii._m0f(s,this.$data,this.lineWidth,e,i)).x*=this._j6,n.y*=this._j8):((n=At(s,this._83.width,this._83.height)).x+=this._83.x,n.y+=this._83.y),Xi.call(this,n)}.call(e,t);t.$x=i.x,t.$y=i.y,t._hostRotate=i.rotate}else t.$x=0,t.$y=0;t.$invalidateRotate&&Qi.call(t)}function tn(t){if(void 0===t.lineDash){var e,i;if(t.setLineDash)e=t.getLineDash,i=t.setLineDash;else{var n;if(void 0!==t.mozDash)n="mozDash";else{if(void 0===t.webkitLineDash)return!1;n="webkitLineDash"}i=function(t){this[n]=t},e=function(){return this[n]}}J(t,"lineDash",{get:function(){return e.call(this)},set:function(t){i.call(this,t)}})}if(void 0===t.lineDashOffset){var s;if(void 0!==t.mozDashOffset)s="mozDashOffset";else{if(void 0===t.webkitLineDashOffset)return;s="webkitLineDashOffset"}J(t,"lineDashOffset",{get:function(){return this[s]},set:function(t){this[s]=t}})}}function en(t){return t.reduce(function(t,e){return 2*t+e},0)}function nn(t){for(var e=[],i=7;0<=i;i--)e.push(!!(t&1<<i));return e}var sn={_g7:!1,_jn:null,_m3m:0,_kg:-1,_kc:null,_e5:function(t){this._jn||(this._jn=[],this._it=2),this._jn.push(t),this._d5(),this._kf()},_kf:function(){if(!this._kc){var t=this;this._kc=setTimeout(function e(){!1===t._d5()?delete t._kc:t._kc=setTimeout(e,t._g9())},this._g9())}},_g9:function(){return Math.max(20,this._jn[this._kg].delay)},_d5:function(){return this._ey(this._kg+1)},_ey:function(t){if(this._g7)t%=this._m3m;else if(t>=this._jn.length)return!1;if(this._kg==t)return!1;this._kg=t;var e=this._jn[this._kg],i=e._m3ache;return i||(e._m3ache=i=Ne(this.width,this.height),i.g.putImageData(e.data,0,0),i._pixels=e._pixels),this._k6=i,this.$invalidateSize=!0,this._dg()},_m3o:function(){if(this._jn){if(this._g7=!0,this._m3m=this._jn.length,1==this._m3m)return this._dg();this._kf()}else this._hn()},_l7:function(){this._kc&&(clearTimeout(this._kc),delete this._kc)},_dg:function(){var t=this._dispatcher.listeners;if(!t||!t.length)return!1;for(var e=new St(this,"image","load",this._k6),i=0,n=t.length;i<n;i++){var s=t[i];s.scope._ja&&s.scope._ja._i1ed?(t.splice(i,1),i--,n--):s.onEvent.call(s.scope,e)}return 0<t.length},_m0i:function(t,e){this._dispatcher.addListener(t,e),this._g7&&!this._kc&&this._kf()},_6h:function(t,e){this._dispatcher.removeListener(t,e),this._dispatcher._m17()||this._l7()},_i1:function(){this._l7(),this._dispatcher.clear()},_fc:function(t,e,i){var n=this._k6._m1ufferedImage;return n||(this._k6._m1ufferedImage=n=new zi(this._k6,1)),n}},rn=function(t){this.data=t,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return 255&t.charCodeAt(this.pos++)},this.readBytes=function(t){for(var e=[],i=0;i<t;i++)e.push(this.readByte());return e},this.read=function(t){for(var e="",i=0;i<t;i++)e+=String.fromCharCode(this.readByte());return e},this.readUnsigned=function(){var t=this.readBytes(2);return(t[1]<<8)+t[0]}},on=function(t,e){function i(e){for(var i=[],n=0;n<e;n++)i.push(t.readBytes(3));return i}function n(){var e,i;for(i="";e=t.readByte(),i+=t.read(e),0!==e;);return i}e=e||{};var s=function(){var r={};switch(r.sentinel=t.readByte(),String.fromCharCode(r.sentinel)){case"!":r.type="ext",function(i){var s,r,o;switch(i.label=t.readByte(),i.label){case 249:i.extType="gce",function(i){t.readByte();var n=nn(t.readByte());i.reserved=n.splice(0,3),i.disposalMethod=en(n.splice(0,3)),i.userInput=n.shift(),i.transparencyGiven=n.shift(),i.delayTime=t.readUnsigned(),i.transparencyIndex=t.readByte(),i.terminator=t.readByte(),e.gce&&e.gce(i)}(i);break;case 254:i.extType="com",(r=i).comment=n(),e.com&&e.com(r);break;case 1:i.extType="pte",o=i,t.readByte(),o.ptHeader=t.readBytes(12),o.ptData=n(),e.pte&&e.pte(o);break;case 255:i.extType="app",function(i){var s,r;switch(t.readByte(),i.identifier=t.read(8),i.authCode=t.read(3),i.identifier){case"NETSCAPE":r=i,t.readByte(),r.unknown=t.readByte(),r.iterations=t.readUnsigned(),r.terminator=t.readByte(),e.app&&e.app.NETSCAPE&&e.app.NETSCAPE(r);break;default:(s=i).appData=n(),e.app&&e.app[s.identifier]&&e.app[s.identifier](s)}}(i);break;default:i.extType="unknown",(s=i).data=n(),e.unknown&&e.unknown(s)}}(r);break;case",":r.type="img",function(s){s.leftPos=t.readUnsigned(),s.topPos=t.readUnsigned(),s.width=t.readUnsigned(),s.height=t.readUnsigned();var r=s.width*s.height,o=nn(t.readByte());s.lctFlag=o.shift(),s.interlaced=o.shift(),s.sorted=o.shift(),s.reserved=o.splice(0,2),s.lctSize=en(o.splice(0,3)),s.lctFlag&&(s.lct=i(1<<s.lctSize+1)),s.lzwMinCodeSize=t.readByte();var h=n();s.pixels=function(t,e,i){function n(t){for(var i=0,n=0;n<t;n++)e.charCodeAt(h>>3)&1<<(7&h)&&(i|=1<<n),h++;return i}function s(){c=[],u=t+1;for(var e=0;e<l;e++)c[e]=[e];c[l]=[],c[_]=null}for(var r,o,h=0,a=[],l=1<<t,_=1+l,u=t+1,c=[],d=0;o=r,r=n(u),!(d++>i);)if(r!==l){if(r===_)break;if(r<c.length)o!==l&&c.push(c[o].concat(c[r][0]));else{if(r!==c.length)throw new Error("Invalid LZW code.");c.push(c[o].concat(c[o][0]))}a.push.apply(a,c[r]),c.length===1<<u&&u<12&&u++}else s();return a}(s.lzwMinCodeSize,h,r),s.interlaced&&(s.pixels=function(t,e){for(var i,n,s=new Array(t.length),r=t.length/e,o=[0,4,2,1],h=[8,8,4,2],a=0,l=0;l<4;l++)for(var _=o[l];_<r;_+=h[l])i=_,n=t.slice(a*e,(a+1)*e),s.splice.apply(s,[i*e,e].concat(n)),a++;return s}(s.pixels,s.width)),e.img&&e.img(s)}(r);break;case";":r.type="eof",e.eof&&e.eof(r);break;default:throw new Error("Unknown block: 0x"+r.sentinel.toString(16))}"eof"!==r.type&&setTimeout(s,0)};!function(){var n={};if(n.sig=t.read(3),n.ver=t.read(3),"GIF"!==n.sig)throw new Error("Not a GIF file.");n.width=t.readUnsigned(),n.height=t.readUnsigned();var s=nn(t.readByte());n.gctFlag=s.shift(),n.colorRes=en(s.splice(0,3)),n.sorted=s.shift(),n.gctSize=en(s.splice(0,3)),n.bgColor=t.readByte(),n.pixelAspectRatio=t.readByte(),n.gctFlag&&(n.gct=i(1<<n.gctSize+1)),e.hdr&&e.hdr(n)}(),setTimeout(s,0)},hn="";e.addEventListener&&e.addEventListener("keydown",function(t){if(t.ctrlKey&&t.shiftKey&&t.altKey&&73==t.keyCode){var e=we.name+"\nVersion - "+we.version+"\nPublish Date - "+we.publishDate+"\n"+we.about+"\n"+we.copyright+hn;we.alert(e)}},!1),hn="\nLicensed to: "+decodeURIComponent("%E5%8C%97%E4%BA%AC%E4%B8%AD%E6%99%BA%E6%B6%A6%E9%82%A6%E7%A7%91%E6%8A%80%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8%20-%20%E9%93%81%E8%B7%AF%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1%E5%B9%B3%E5%8F%B0");var an="Q-Canvas";Xt("."+an,{position:"absolute",userSelect:"none",outline:"none",transformOrigin:"0 0","-webkit-tap-highlight-color":"rgba(0,0,0,0)"});var ln="Q-CanvasPanel";Xt("."+ln,{width:"100%",height:"100%",position:"relative",overflow:"hidden",textAlign:"left",outline:"none",tapHighlightColor:"rgba(0,0,0,0)",userSelect:"none"});var _n="Q-Graph";function h(t,e){return function t(i){var n=i.length,s=Math.ceil(n/2);return n<=1?i:function(t,i){for(var n=t.length,s=i.length,r=n+s,o=new Array(r),h=0,a=0,l=0;l<r;)h===n?o[l++]=i[a++]:a===s||e(t[h],i[a])<=0?o[l++]=t[h++]:o[l++]=i[a++];return o}(t(i.slice(0,s)),t(i.slice(s)))}(t)}Xt("."+_n,{overflow:"hidden","text-align":"left","-webkit-tap-highlight-color":"rgba(0,0,0,0)",outline:"none"});var un,cn=y(function(t){this._m1f=new fn,this._lq=new ot,this._8f=[],this._m3p=[],this._l8ingList=[],this._8e={},this.bounds=new Et,this._jo=new bn,this._viewport=new Ln,this._jo.listener=function(t){this._76(t)}.bind(this),this._m3s(),this.setParent(t)},{_m18:null,_iv:null,_lq:null,_m3p:null,_jo:null,_m3a:function(t){return t?(this._6es||(this._6es={}),!this._6es[t]&&(this._6es[t]=!0,void this.invalidate())):this.invalidate()},_9s:function(t){return this._6es&&this._6es[t]},isInvalidate:function(){return this._6e},clear:function(){this._lq.clear(),this._m3p.length=0,this._8e={},this._m0t=!1,this.invalidate()},_72:function(){this._m3a("size"),this._2l()},_2l:function(){this._m3a("viewport")},invalidate:function(t){!t&&this._6e||(this._6e=!0,this._l7||(this._jcingID=requestAnimationFrame(this._fb.bind(this))))},_73:function(t){(this._l7=t)?this._jcingID&&(cancelAnimationFrame(this._jcingID),this._jcingID=null):this._6e&&this.invalidate(!0)},_fb:function(){this._jcingID=null,this._6e=!1;var t=this._m0t;this._m0t||(this._m3r(),this._m0t=!0),this._m3q(!t),this._3d(),this._jc(),this._28()},_m3q:function(t){this._m1d=t||this.fullRefresh,(t||this._6es.size)&&this._9u(),(t||this._6es.matrix)&&this._78(),this._m1b(t),this._4a(t),this._6es={}},_3d:function(){this._m3p.length=0;var t=this._viewport;if(this._lq.forEach(function(e){if(!1!==e.__hy){var i=this._m19(e);t.intersects(i.x,i.y,i.width,i.height)&&this._m3p.push(e)}},this),this._m3p=this._ia(this._m3p),!this._m1d){var e=this._m1f;this._l8ingList.length=0,e._m1e(this._viewport),e._id()||this._m3p.forEach(function(t){var i=this._m19(t);e._ee(i.x,i.y,i.width,i.height)&&this._l8ingList.push(t)},this)}},_ia:function(t){return R?t=h(t,this._9t):t.sort(this._9t),t},_9t:function(t,e){return(t=t.zIndex||0)-(e.zIndex||0)},_m19:function(t){return t.boundingBox},_jc:function(){if(this._m1d)return this._eb(),this._75(!0),void this.render(this._m3tx,this._m3p);this._75(this._m1uffer);var t=this._m1f,e=this._m3tx;e.save(),this._m1uffer&&(dn(e),e.drawImage(this._m1uffer.canvas,this._m1uffer.x,this._m1uffer.y)),t._js(e,this._ec.bind(this)),this._eb(),this.render(e,this._l8ingList),e.restore()},_75:function(t){var e;this._m3aCanvasSizeFlag?(this._m3aCanvasSizeFlag=!1,this._iv.setSize(this._width,this._height)):t&&((e=this._iv).width=e.width)},_9u:function(){var t=this.width,e=this.height;if(this._width==t&&this._height==e)return!1;this._width=t,this._height=e,this._m3aCanvasSizeFlag=!0},_4a:function(t){if(!t&&!this._6es.viewport)return!1;var e=this._jo.reverseTransform([0,0]),i=this.scale,n=this._width/i,s=this._height/i,r=this.rotate,o=this._viewport;if(o.x==e[0]&&o.y==e[1]&&o.width==n&&o.height==s&&o.rotate==r)return!1;var h=o.toJSON();return this._viewport.set(e[0],e[1],n,s,r,i),this._37(this._viewport,h,t),!0},_37:function(t,e,i){this._m1d||i||(this._m1uffer=this._gf(e,t))},_76:function(t){var e;this._m0t&&(this._l7&&(this._m3urrentMatrix?this._m3urrentMatrix.transMatrix=e=En.mul([],this._jo.m,En.invert([],this._m3urrentMatrix.m)):e=this._jo.m,this._5l(e)),this._m3a("matrix"),this._2l())},_5l:function(t){this.__m3ssMatrix=t,An.setStyle(this._iv,"transform",t?"matrix("+t.join(",")+")":"")},_78:function(){var t=this._m3urrentMatrix;if(this._m3urrentMatrix={tx:this._jo.m[4],ty:this._jo.m[5],m:this._jo.m.slice(),scale:this._jo._gz(),rotate:this._jo._ei()},this.__m3ssMatrix&&this._5l(null),!this._m1d){if(this._2m(this._m3urrentMatrix,t),!t||t.scale!=this._m3urrentMatrix.scale)return this._7c(this._m3urrentMatrix.scale,t?t.scale:null),void(this._m1d=!0);if(!t||t.rotate!=this._m3urrentMatrix.rotate)return this._5v(this._m3urrentMatrix.rotate,t?t.rotate:null),void(this._m1d=!0);var e=t.m[4]-this._m3urrentMatrix.m[4],i=t.m[5]-this._m3urrentMatrix.m[5],n=this.ratio;e*=n,i*=n,(1e-4<Math.abs(e-Math.round(e))||1e-4<Math.abs(i-Math.round(i)))&&(this._m1d=!0)}},_7a:function(){var t=this.bounds,e=t.clone();t.clear(),this._lq.forEach(function(e){!1!==e.__hy&&t.add(this._m19(e))},this),t.equals(e)||this._3f(t,e)},_3f:function(t,e){},_m0t:!1,_m3r:function(){},_9v:function(t){var e=t.ratio;t.scale(e,e),t.transform.apply(t,this._jo.m)},render:function(t,e){e&&e.length&&(t.save(),this._9v(t),e.forEach(function(e){if(t.save(),!1!==e.visible)try{e.render(t)}catch(e){console.error(e)}t.restore()},this),t.restore())},setParent:function(t){Y(t)&&(t=e.getElementById(t)),this._ls!=t&&(this._ls&&this._m18&&(z(this._ls,_n),this._ls.removeChild(this._m18)),this._ls=t,this._ls&&(j(this._ls,_n),this._ls.appendChild(this._7b()),this._72()))},_7b:function(){return this._m18||this._m3s(),this._m18},_m3s:function(){var t=Ne(!0);tn(t.g),t.className=an;var i=e.createElement("div");return i.addEventListener("mousedown",function(t){if(e.activeElement==this)return t.preventDefault&&t.preventDefault(),!1}.bind(i),!1),i.className=ln,i.appendChild(t),i.tabIndex=0,this._iv=t,this._m18=i,this._m3tx=this._iv.getContext("2d"),t},toLogical:function(t,e){return t instanceof Object&&(it(t)&&(t=this._7v(t)),t=Array.isArray(t)?(e=t[1]||0,t[0]||0):(e=t.y||0,t.x||0)),this._jo.reverseTransform([t,e])},toCanvas:function(t,e){return this._jo.transform([t,e])},_7v:function(e){return function(e,i){e.touches&&(e=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e.touches[0]);var n=e.clientX||0,s=e.clientY||0;G&&P&&(t.pageXOffset&&n==e.pageX&&(n-=t.pageXOffset),t.pageYOffset&&s==e.pageY&&(s-=t.pageYOffset));var r=i.getBoundingClientRect();n-=r.left,s-=r.top;var o=Jt(i,r);return o&&1!==o&&(n/=o,s/=o),{x:n,y:s}}(e,this._m18)},_e6:function(t,e,i){if(t.hitTest instanceof Function)return t.hitTest(e,i);var n=this._m19(t);return n?i?Et.intersects(n.x,n.y,n.width,n.height,e[0]-i,e[1]-i,i+i,i+i):Et.intersects(n.x,n.y,n.width,n.height,e[0],e[1]):t},hitTest:function(t,e){return this._8c(t,e)},_8c:function(t,e){e=this._9w(e),t=this.toLogical(t);for(var i,n=this._m3p.length;0<=--n;)if(i=this._m3p[n],this._e6(i,t,e))return i},_9w:function(t){return null==t&&(t=rt.SELECTION_TOLERANCE),t?t/this.scale:0},getUIByMouseEvent:function(t,e){if(t.uiId)return this._lq.getById(t.uiId);var i=this._8c(t,e);return t.uiId=i?i.id:-1,i},_8e:null,invalidateUI:function(t){this._8e[t.id]=t,this.invalidate()},_9y:function(t){t.validate instanceof Function&&t.validate(this)},_m3t:function(t,e){t.__j4&&this._gh(t.__j4);var i=t.__hy;if(t.__hy=this._e7(t,e),!t.__hy)return i;var n=t.__j4;this._9y(t);var s=this._m19(t);t.__j4={x:s.x,y:s.y,width:s.width,height:s.height};var r=t.__hy!==i||!Et.equals(n,s);return r&&t.__j4&&this._gh(t.__j4),r},_e7:function(t,e){return!1!==t.visible},_$q:function(t){this._lq.forEach(function(e){this._m3t(e,t)},this),this._8e={},this._7a()},_m1b:function(t){var e=this.scale;if(t)return this._$q(e);var i=this._m3aBoundsFlag;for(var n in this._m3aBoundsFlag=!1,this._8e){var s=this._8e[n];i?this._m3t(s,e):i=this._m3t(s,e)}this._8e={},i&&this._7a()},_8f:null,_28:function(){if(!this._8f.length)return!1;var t=this._8f;this._8f=[],t.forEach(function(t){try{var e=t.call,i=t.scope,n=t.delay;i instanceof Object?e=e.bind(i):i&&!n&&(n=parseInt(i)),n?setTimeout(e,n):e()}catch(t){}},this),this._6e&&this._fb()},_d3:function(t,e,i){this._8f.push({call:t,scope:e,delay:i}),this._6e||this._28()},_4c:function(t,e){for(var i=this._m3p,n=0,s=i.length;n<s;n++)if(!1===t.call(e,i[n]))return!1},_e8:function(t,e){this._lq.forEach(t,e)},_$u:function(t,e){for(var i=this._m3p,n=i.length-1;0<=n;n--)if(!1===t.call(e,i[n]))return!1},_4d:function(t,e){this._lq.forEachReverse(t,e)},_4e:function(){return this.bounds},_ga:function(t,e,i){t/=this.scale||1,this._jp(t,e,i)},_jp:function(t,e,i){if(this._m0t&&null==e){var n=this.toLogical(this.width/2,this.height/2);e=n[0]||0,i=n[1]||0}return this._jo.scale(t,[e||0,i||0])},_e9:function(t,e){this._jo.translate([t,e],!0)},_m1c:function(t,e,i,n){if(i==this.scale&&!1!==n){var s=this.ratio;s!=(0|s)&&(t=Math.round(t*s)/s,e=Math.round(e*s)/s)}this._jo.translateTo([t,e],i)},_jq:function(t,e){return this._jp(this._ea,t,e)},_ic:function(t,e){return this._jp(1/this._ea,t,e)},_1j:function(){var t=this._4e();if(!t.isEmpty()){var e=this.width/t.width,i=this.height/t.height,n=Math.min(e,i);return{scale:n=Math.max(this._gd,Math.min(this._gc,n)),cx:t.cx,cy:t.cy}}},_ea:1.2,_gc:10,_gd:.1,_m1d:!1,_7c:function(t,e){},_5v:function(t,e){},_2m:function(){},_eb:function(){this._m1uffer=null,this._m1f._kh()},_ec:function(t){var e=this._jo,i=this._iv.ratio,n=this.scale;if(!e._ei()){var s=e.transform([t[0],t[1]]);return s[0]*=i,s[1]*=i,i*=n,s[2]=t[2]*i,s[3]=t[3]*i,s}var r=new Et,o=e.transform([t[0],t[1]]);return r.add(o[0],o[1]),o=e.transform([t[0]+t[2],t[1]]),r.add(o[0],o[1]),o=e.transform([t[0],t[1]+t[3]]),r.add(o[0],o[1]),o=e.transform([t[0]+t[2],t[1]+t[3]]),r.add(o[0],o[1]),[r.x*i,r.y*i,r.width*i,r.height*i]},_gf:function(t,i){var n=this._iv;if(n.width&&n.height){var s=i._3q(t.x,t.y,t.width,t.height);if(s&&s.width&&s.width){var r=this.scale*this.ratio,o=this._m1f,h={};1e-6<s.x&&(h.left=i._4o(0,0,s.x,i.height,r)),1e-6<i.width-s.right&&(h.right=i._4o(s.right,0,i.width-s.right,i.height,r)),1e-6<s.y&&(h.top=i._4o(s.x,0,s.width,s.y,r)),1e-6<i.height-s.bottom&&(h.bottom=i._4o(s.x,s.bottom,s.width,i.height-s.bottom,r)),function(t){var e=!0;for(var i in t){e=!1;break}return e}(h)||o._4g(h);var a=i._i0(t.x,t.y),l=(a[0]-s.x)*r,_=(a[1]-s.y)*r,u=s.width*r,c=s.height*r;l=Math.round(l),_=Math.round(_),u=Math.round(u),c=Math.round(c);var d=this._m1ackCanvas;return d||((d=this._m1ackCanvas=e.createElement("canvas")).g=d.getContext("2d")),d.width=u,d.height=c,dn(d.g),d.g.drawImage(n,l,_),{x:l=a[0]*r-l,y:_=a[1]*r-_,canvas:d}}}},_l9:function(t,e,i,n){this._m1f._lk(t,e,i,n)},_gh:function(t){this._m1f._ie(t)}});function dn(t){t[un=un||("imageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"imageSmoothingEnabled":"mozImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"mozImageSmoothingEnabled":"msImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"msImageSmoothingEnabled":"webkitImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"webkitImageSmoothingEnabled":"imageSmoothingEnabled")]=!1}Object.defineProperties(cn.prototype,{width:{get:function(){return this._m18.clientWidth}},height:{get:function(){return this._m18.clientHeight}},rotate:{get:function(){return this._jo._ei()}},tx:{get:function(){return this._jo._8i()[0]}},ty:{get:function(){return this._jo._8i()[1]}},ratio:{get:function(){if(this._iv)return this._iv.ratio}},scale:{get:function(){return this._jo._gz()},set:function(t){this._ga(t)}},renderScale:{get:function(){return this.scale*this.ratio}},uis:{get:function(){return this._lq}},length:{get:function(){return this._lq.length}},viewportBounds:{get:function(){return this._viewport.getGlobalBounds()}}});var fn=y({constructor:function(){this._gl=[],this._j4=new Et,this._gj=A?20:50},_gj:20,_gl:null,_lb:!1,_j4:null,_kh:function(){this._lb=!1,this._gl.length=0,this._viewportClips=null,this._j4.clear()},_id:function(){return 0==this._gl.length&&!this._viewportClips},_lk:function(t,e,i,n){i<=0||n<=0||this._gl.push([t,e,i,n])},_ie:function(t){this._lk(t.x,t.y,t.width,t.height)},_4g:function(t){var e=this._j4;for(var i in t){var n=t[i].getGlobalBounds();e.add(n)}this._viewportClips=t},_m1e:function(t,e){for(var i=[],n=this._gl,s=0,r=n.length;s<r;s++){var o=n[s];t.intersects(o[0],o[1],o[2],o[3])&&(i.push(o),this._j4.addRect(o[0],o[1],o[2],o[3]))}this._gl=i,this._lb=e||i.length>=this._gj},_ee:function(t,e,i,n){if(!this._j4.intersectsRect(t,e,i,n))return!1;if(this._lb)return!0;if(this._viewportClips){var s=this._viewportClips;for(var r in s)if(s[r].intersects(t,e,i,n))return!0}for(var o,h=0,a=this._gl.length;h<a;h++)if(o=this._gl[h],Et.intersects(t,e,i,n,o[0],o[1],o[2],o[3]))return!0;return!1},_js:function(t,e){if(this._id())return!1;if(t.beginPath(),this._lb)return gn(t,(o=e([this._j4.x,this._j4.y,this._j4.width,this._j4.height]))[0],o[1],o[2],o[3]),void t.clip();if(this._viewportClips)for(var i in this._viewportClips)gn(t,(o=this._viewportClips[i].canvasBounds)[0],o[1],o[2],o[3]);for(var n=this._gl,s=0,r=n.length;s<r;s++){var o;gn(t,(o=e(n[s]))[0],o[1],o[2],o[3])}t.clip()}});function gn(t,e,i,n,s){n=Z(e+n)-(e=K(e)),s=Z(i+s)-(i=K(i)),t.clearRect(e,i,n,s),t.rect(e,i,n,s)}function K(t){return Math.floor(t)}function Z(t){return Math.ceil(t)}fn._toIntRect=function(t,e,i,n){return t instanceof Object&&(e=t.y,i=t.width,n=t.height,t=t.x),i=Z(t+i)-(t=K(t)),n=Z(e+n)-(e=K(e)),[t,e,i,n]},fn._m1w=K,fn._f6=Z,Le.NAVIGATION_BUTTON="navigation.button",Le.NAVIGATION_SCROLLBAR="navigation.scrollbar",rt.NAVIGATION_TYPE=Le.NAVIGATION_SCROLLBAR;var vn=y({_jc:function(){p(this,vn,"_jc",arguments),this._topCanvas._jc()},_9t:function(t,e){return(t=t.$data.zIndex||0)-(e.$data.zIndex||0)},super:cn,constructor:function(t,i){this._ke=t,Y(i)&&(i=e.getElementById(i)),i&&i.tagName||(i=e.createElement("div")),m(this,vn,[i]),this._topCanvas=new Hs(this,this._m18),this._gr=[],this._ke._8.addListener(this._1g,this),this._ke._1b.addListener(this._9n,this),this._ke._11.addListener(this._7d,this),this._ke._$i.addListener(this._2p,this),this._ke._$l.addListener(this._3l,this),this._m1h={},this._3p(rt.NAVIGATION_TYPE,!0)},_5l:function(t){p(this,vn,"_5l",arguments),this._topCanvas._5l(t)},_gn:function(t){if(t.id||(t=this._lq.getById(t)),!t)return!1;this._lq.remove(t),t.destroy(),t.__j4&&this._gh(t.__j4),this._m3aBoundsFlag=!0},_gp:function(){this._lq.forEach(function(t){t.destroy()}),this._lq.clear()},_e7:function(t,e){var i=t.data||t;return i._$m&&(i._$m=!1,i._hy=this._5f(i,e)),!1!==i._hy},_5f:function(t,e){return!(!this._3h(t,e)||this._ke._hyFilter&&!1===this._ke._hyFilter(t,e))},_9z:function(t){return this._ke._34==Ns(t)},_3h:function(t,e){if(!1===t.visible)return!1;if(!(t instanceof Gn))return this._ke._34==Ns(t)&&!t._dn;var i=t.fromAgent,n=t.toAgent;if(!i||!n)return!1;if(i==n&&!t.isLooped())return!1;if(t.isBundleEnabled()){var s=t.getEdgeBundle(!0);if(s&&!s._e7(t,e))return!1}return!(!this._e7(i,e)||!this._e7(n,e))},_m19:function(t){if(t._m0t)return{x:t.$x+t.uiBounds.x,y:t.$y+t.uiBounds.y,width:t.uiBounds.width,height:t.uiBounds.height}},_2n:function(t){var e=this._kn(t);if(e){var i=this._m19(e);if(i)return new Et(i)}},_e6:function(t,e,i){return t.hitTest(e[0],e[1],i)},hitTest:function(t,e){var i=p(this,vn,"hitTest",arguments);if(i){t=this.toLogical(t),e=this._9w(e);var n=i.hitTest(t[0],t[1],e,!0);if(n instanceof Jn)return n}return i},_3j:function(t){return this.getUIByMouseEvent(t)},_75:function(t){p(this,vn,"_75",arguments),this._topCanvas._i3(this.width,this.height)},_kj:1,_m3p:null,_8g:null,_8h:null,_lq:null,_ls:null,_iv:null,_m1f:null,_6e:!1,_m0t:!1,_jo:null,_4c:function(t,e){for(var i=this._m3p,n=0,s=i.length;n<s;n++)if(!1===t.call(e,i[n]))return!1},_e8:function(t,e){this._lq.forEach(t,e)},_$u:function(t,e){for(var i=this._m3p,n=i.length-1;0<=n;n--)if(!1===t.call(e,i[n]))return!1},_4d:function(t,e){this._lq.forEachReverse(t,e)},_37:function(t,e,i){p(this,vn,"_37",arguments),this._viewportChanged={value:t}},_m3r:function(){this._4a(!0),this._originAdjusted||(this._originAdjusted=!0,this._ke&&this._ke.originAtCenter&&this._jo.translateTo([this.width/2,this.height/2]))},_fb:function(){if(!this._i1ed&&this._6e){if(this._jcingID=null,this._6e=!1,this._m0t&&this._ke&&this._ke._$m&&(this._ke._$m=!1,this._ke.forEach(function(t){t.invalidateVisibility(!0)})),p(this,vn,"_fb",arguments),this._8hChanged){this._7g&&this._7g._je();var t=this._8hChanged.value,e=this._8hChanged.old;this._8hChanged=null,this._ke._4q(new It(this._ke,"element.bounds",t,e))}this._viewportChanged&&(this._viewportChanged=!1,this._7g&&this._7g._37&&this._7g._37(this._viewport.width*this._viewport.scale,this._viewport.height*this._viewport.scale),this._ke._4q(new It(this._ke,"viewport",this._viewport)))}},_gr:null,_m3t:function(t){var e=t.$data;if(!t._1e&&!e._6e&&!e._$m)return!1;var i=t.$invalidateSize;return p(this,vn,"_m3t",arguments)||i},_9y:function(t){var e=t.$data;e.__3y&&(e.__3y=!1,t._3y()),e.__6e&&e._hx()&&(t._5j(),e.__6e=!1),(t._1e||e._6e)&&(e._6e=!1,t.validate())},_gs:function(t,e){var i=t.ratio;t.scale(i,i),t.transform.apply(t,this._jo.m);for(var n=this.renderScale,s=[],r=0,o=e.length;r<o;r++){var h=e[r];h._jc(t,n),h._j3&&h._j3.length&&s.push(h)}if(s.length)for(r=0,o=s.length;r<o;r++)s[r]._99(t,n)},render:function(t,e){if(e.length){if(t.save(),A)try{this._gs(t,e)}catch(t){}else this._gs(t,e);t.restore()}},_gt:function(t,e,i){var n,s;t.save(),t.translate(-i.x*e,-i.y*e),t.scale(e,e);for(var r=this._lq._j2.slice(),o=[],h=0,a=(r=this._ia(r)).length;h<a;h++)(n=r[h]).__hy&&(s=this._m19(n),i.intersectsRect(s.x,s.y,s.width,s.height)&&(n._jc(t,e),n._j3&&n._j3.length&&o.push(n)));if(o.length)for(h=0,a=o.length;h<a;h++)o[h]._99(t,e);t.restore()},_10:function(t,e){},_1l:function(){for(var t,e,i=this._lq._j2,n=new Et,s=i.length-1;0<=s;s--)(t=i[s])._hy&&(e=t.uiBounds,n.addRect(t.$x+e.x,t.$y+e.y,e.width,e.height));var r=this._8h;(this._8h=n).equals(r)||this._10(r,n)},_5w:function(){this._m3p.length=0,this._8g={}},_kl:function(){this._kh()},_i1:function(){this._kh(),this._i1ed=!0,this._6e=!1,this._topCanvas.clear(),this._8f.length=0,this._7g&&(this._7g._i1(),delete this._7g)},_kn:function(t){return this._lq.getById(t.id||t)},_$c:function(t){return this._ef(t)},_gv:function(t,e){var i=this.toCanvas(t,e);return{x:i[0],y:i[1]}},_ef:function(t,e){var i=this.toLogical(t,e);return{x:i[0],y:i[1]}},_$d:null,_3l:function(t){var e=t.source,i=t.data;if(i)if(this._m0t){if(U(i))for(r=0,o=i.length;r<o;r++)s=i[r].id,(n=this._lq.getById(s))&&(n.selected=e.containsById(s),n.invalidateRender());else{if(s=i.id,!(n=this._lq.getById(s)))return;n.selected=e.containsById(s),n.invalidateRender()}this._m3a()}else{var n,s;if(this._$d||(this._$d={}),U(i))for(var r=0,o=i.length;r<o;r++)s=i[r].id,this._$d[s]=!0;else s=i.id,this._$d[s]=!0}},_ke:null,_m3u:function(t){var e=t.uiClass;if(e)return new e(t,this._ke)},_1g:function(t){if(!this._m0t)return!1;var e=t.source,i=t.kind;"enableSubNetwork"==i&&this._ke.invalidateVisibility(),"uiClass"==i?(this._gn(e.id),this._k9(e)):"expanded"==i&&e._hx()&&t.value&&this._5y(e);var n=this._lq.getById(e.id);n&&n._m0t&&n.onPropertyChange(t)&&this._m3a()},_3n:function(t){var e=this._kn(t);e&&(e.invalidateData(),this._m3a())},_9n:function(t){if(!this._m0t)return!1;switch(t.kind){case Bt.KIND_ADD:this._k9(t.data);break;case Bt.KIND_REMOVE:this._gx(t.data);break;case Bt.KIND_CLEAR:this._if(t.data)}},_kh:function(){this._m1h={},this._gp(),this.clear()},_m1h:null,_k9:function(t){var e=this._m3u(t);e&&(this._lq.add(e),this._m0t&&(this._m1h[t.id]=t),this._m3a())},_gx:function(t){if(Array.isArray(t)){for(var e,i=[],n=0,s=t.length;n<s;n++)e=t[n].id,i.push(e),delete this._m1h[e];t=i}else t=t.id,delete this._m1h[t],t=[t];t.forEach(function(t){this._gn(t)},this),this._m3a()},_if:function(t){this._kh()},_7d:function(t){if(!this._m0t)return!1;t.source instanceof zn&&!this._m1h[t.source.id]&&(t.oldValue&&(this._3n(t.oldValue),t.oldValue.__6e=!0),t.value&&(this._3n(t.value),t.value.__6e=!0),this._5y(t.source))},_2p:function(t){if(!this._m0t)return!1;t.source instanceof zn&&!this._m1h[t.source.id]&&this._5y(t.source)},_2q:function(t){if(t._edgeBundleInvalidateFlag){var e=t.getEdgeBundle(!0);if(!e)return t._edgeBundleInvalidateFlag=!1,void t.validateEdgeBundle();e.validate(this._ke),e._m1o(function(t){t.validateEdgeBundle()})}},_$q:function(t){this._ke;var e,i=this._ke.graphModel,n=this._lq,s=[],r=1;if(i.forEachByDepthFirst(function(t){if(t instanceof Gn)return this._2q(t),void s.push(t);(d=this._m3u(t))&&(n.add(d),t.__kg=r++)},this),n.length){var o=n._j2;for(r=o.length-1;0<=r;r--)d=o[r],this._3o(d,d.$data,t)}r=0;for(var h=s.length;r<h;r++)if(e=s[r],d=this._m3u(e)){this._3o(d,e,t),n.add(d);var a=e.fromAgent,l=e.toAgent,_=a.__kg||0;a!=l&&(_=Math.max(_,l.__kg||0)),e.__kg=_}if(s.length&&n._j2.sort(function(t,e){return t.$data.__kg-e.$data.__kg}),this._$d){var u=i.selectionModel;for(var c in this._$d){var d;u.containsById(c)&&(d=n.getById(c))&&(d.selected=!0)}this._$d=null}this._7a()},_m1b:function(t,e){if(t)return this._$q();var i,n,s=this._m3aBoundsFlag;for(var r in this._m3aBoundsFlag=!1,this._m1h){var o=this._m1h[r];o instanceof zn?this._5y(o):this._60(o)}this._m1h={};for(var h=this._lq._j2,a=[],l=h.length-1;0<=l;l--)(n=(i=h[l]).$data)instanceof Gn?(this._2q(n),a.push(i)):this._3o(i,n,e)&&!s&&(s=!0);if(a.length){l=0;for(var _=a.length;l<_;l++)i=a[l],this._3o(i,i.$data,e)&&!s&&(s=!0)}s&&this._7a()},_3o:function(t,e,i){if(e instanceof Gn)return e.__3y&&(e.__3y=!1,t._3y()),this._m3t(t,i);if(e.__6e&&e._hx()&&(t._5j(),e.__6e=!1),this._m3t(t,i)){var n=this._4k(e);return n&&(n.__6e=!0),e.hasEdge()&&e.forEachEdge(function(t){t.__3y=!0},this),!0}},_2s:function(t,e){var i=t.fromAgent,n=t.toAgent,s=e.getIndexById(i.id);if(i==n)return s;var r=e.getIndexById(n.id);return Math.max(s,r)},_2u:function(t,e){var i=this.graphModel._fi(t);return i?e.getIndexById(i.id):0},_5y:function(t){var e=this._lq,n=e.getById(t.id);if(!n)throw new Error("UI '"+t.name+"' not found");var s=this._2u(t,e),r=[n];t.hasChildren()&&i(t,function(t){t instanceof zn&&(n=e.getById(t.id))&&r.push(n)},this),this._4i(e,s,r)},_60:function(t){var e=this._lq.getById(t.id);if(e){var i=this._2s(t,this._lq);this._lq.setIndexBefore(e,i)}},_4i:function(t,e,i){var n=new ot;function s(t){n.add(t)}a(i,function(i){e=t.setIndexAfter(i,e),i.$data.forEachEdge(s)},this),0!=n.length&&n.forEach(this._60,this)},_4k:function(t){var e=kn(t);return e&&e.expanded?e:null},_7e:null,_7g:null,_3p:function(t,e){if(!e&&t==this._7e)return!1;this._7e=t,this._7g&&(this._7g._i1(),delete this._7g),t!=Le.NAVIGATION_SCROLLBAR?t!=Le.NAVIGATION_BUTTON||(this._7g=new $s(this,this._m18)):this._7g=new js(this,this._m18)},_2m:function(t,e){this._7g&&this._7g._je(),this._ke._4q(new It(this._ke,"transform",t,e))},_7c:function(t,e){this._ke._4q(new It(this._ke,"scale",t,e))},_3f:function(t,e){this._8hChanged={value:t,old:e}},_7h:function(){this._72()}});Object.defineProperties(vn.prototype,{_viewportBounds:{get:function(){return this.viewportBounds}},_scale:{get:function(){return this.scale},set:function(t){this._ga(t)}},_tx:{get:function(){return this.tx}},_ty:{get:function(){return this.ty}},graphModel:{get:function(){return this._ke._keModel}}});var En={};function pn(t){var e=[];return t.forEach(function(t,i){e.push(-t)}),e}En.create=function(){return[1,0,0,1,0,0]},En.invert=function(t,e){var i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],h=e[5],a=i*r-n*s;return a?(a=1/a,t[0]=r*a,t[1]=-n*a,t[2]=-s*a,t[3]=i*a,t[4]=(s*h-r*o)*a,t[5]=(n*o-i*h)*a,t):null},En.multiply=function(t,e,i){var n=e[0],s=e[1],r=e[2],o=e[3],h=e[4],a=e[5],l=i[0],_=i[1],u=i[2],c=i[3],d=i[4],f=i[5];return t[0]=n*l+r*_,t[1]=s*l+o*_,t[2]=n*u+r*c,t[3]=s*u+o*c,t[4]=n*d+r*f+h,t[5]=s*d+o*f+a,t},En.mul=En.multiply,En.rotate=function(t,e,i){var n=e[0],s=e[1],r=e[2],o=e[3],h=e[4],a=e[5],l=Math.sin(i),_=Math.cos(i);return t[0]=n*_+r*l,t[1]=s*_+o*l,t[2]=n*-l+r*_,t[3]=s*-l+o*_,t[4]=h,t[5]=a,t},En.scale=function(t,e,i){var n=e[0],s=e[1],r=e[2],o=e[3],h=e[4],a=e[5],l=i[0],_=i[1];return t[0]=n*l,t[1]=s*l,t[2]=r*_,t[3]=o*_,t[4]=h,t[5]=a,t},En.translate=function(t,e,i){var n=e[0],s=e[1],r=e[2],o=e[3],h=e[4],a=e[5],l=i[0],_=i[1];return t[0]=n,t[1]=s,t[2]=r,t[3]=o,t[4]=n*l+r*_+h,t[5]=s*l+o*_+a,t},En.transform=function(t,e){var i=e[0],n=e[1];return[i*t[0]+n*t[2]+t[4],i*t[1]+n*t[3]+t[5]]},En.reverseTransform=function(t,e){return En.transform(En.invert([],t),e)};var mn=Math.PI+Math.PI;function yn(t){return(t%=mn)<0&&(t+=mn),t}var Tn=H,bn=y({equals:function(t){if(!t||!Array.isArray(t))return!1;for(var e=this.m,i=0;i<e.length;){if(e[i]!=t[i])return!1;++i}return!0},constructor:function(t){this.m=t||En.create(),this.im=[]},listener:null,_6e:!0,invalidate:function(){return this._6e=!0,(!this._m1ackM||!this.equals(this._m1ackM))&&(this.listener&&this.listener({target:this,kind:"invalidate"}),this._m1ackM=this.m.slice(),this)},validate:function(){return this._6e=!1,En.invert(this.im,this.m),this},translate:function(t,e){return Tn(t)&&(t=[t,e],e=arguments[2]),!1!==e?(this.m[4]+=t[0],this.m[5]+=t[1]):En.translate(this.m,this.m,t),this.invalidate()},translateTo:function(t,e){return Tn(t)&&(t=[t,e],e=arguments[2]),e&&(e/=this._gz(),En.scale(this.m,this.m,[e,e])),this.m[4]=t[0],this.m[5]=t[1],this.invalidate()},scale:function(t,e){return"number"==typeof t&&(t=[t,t]),e?(En.translate(this.m,this.m,e),En.scale(this.m,this.m,t),En.translate(this.m,this.m,pn(e))):En.scale(this.m,this.m,t),this.invalidate()},rotate:function(t,e){return e?(En.translate(this.m,this.m,e),En.rotate(this.m,this.m,t),En.translate(this.m,this.m,pn(e))):En.rotate(this.m,this.m,t),this.invalidate()},transform:function(t){return En.transform(this.m,t)},reverseTransform:function(t){return En.transform(this._4m(),t)},toString:function(){return"matrix("+this.m.join(",")+")"},_4m:function(){return this._6e&&this.validate(),this.im},_eg:function(){var t=this.m[0],e=this.m[1],i=this.m[2],n=this.m[3];return[Math.sqrt(t*t+i*i),Math.sqrt(e*e+n*n)]},_gz:function(){var t=this.m[0],e=this.m[2];return Math.sqrt(t*t+e*e)},_8i:function(){return[this.m[4],this.m[5]]},_m3w:function(){var t=this.m[0],e=this.m[1],i=this.m[2],n=this.m[3];return[yn(Math.atan2(e,n)),yn(Math.atan2(-i,t))]},_ei:function(){return yn(Math.atan2(this.m[1],this.m[3]))}});function On(t,e,i,n,s,r,o,h){var a=((t*n-e*i)*(s-o)-(t-i)*(s*h-r*o))/((t-i)*(r-h)-(e-n)*(s-o)),l=((t*n-e*i)*(r-h)-(e-n)*(s*h-r*o))/((t-i)*(r-h)-(e-n)*(s-o));if(isNaN(a)||isNaN(l))return!1;if(i<=t){if(!(i<=a&&a<=t))return!1}else if(!(t<=a&&a<=i))return!1;if(n<=e){if(!(n<=l&&l<=e))return!1}else if(!(e<=l&&l<=n))return!1;if(o<=s){if(!(o<=a&&a<=s))return!1}else if(!(s<=a&&a<=o))return!1;if(h<=r){if(!(h<=l&&l<=r))return!1}else if(!(r<=l&&l<=h))return!1;return!0}function wn(t,e,i,n){return[t*n-e*i,t*i+e*n]}var Ln=y({constructor:function(){},x:0,y:0,width:0,height:0,rotate:0,set:function(t,e,i,n,s,r){return this.x=t,this.y=e,this.width=i,this.height=n,this.rotate=s,this._m3os=Math.cos(s),this._sin=Math.sin(s),this.scale=r,this._globalBounds=null,this},_i0:function(t,e){return t-=this.x,e-=this.y,this.rotate?wn(t,e,this._sin,this._m3os):[t,e]},_8j:function(t){var e=new Et;return e.add(this._i0(t.x,t.y)),e.add(this._i0(t.x+t.width,t.y)),e.add(this._i0(t.x,t.y+t.height)),e.add(this._i0(t.x+t.width,t.y+t.height)),e},_h0:function(t,e){if(this.rotate){var i=wn(t,e,Math.sin(-this.rotate),Math.cos(-this.rotate));t=i[0],e=i[1]}return[this.x+t,this.y+e]},_62:function(t,e){var i=this._i0(t,e);return t=i[0],e=i[1],0<=t&&0<=e&&t<=this.width&&e<=this.height},intersects:function(t,e,i,n){if(!this.rotate)return Et.intersects(this.x,this.y,this.width,this.height,t,e,i,n);if(!i||!n)return this._62(t,e);var s=this.getGlobalBounds();if(!s.intersects(t,e,i,n))return!1;for(var r=s.points,o=0;o<r.length;){var h=r[o];if(Et.intersectsPoint(t,e,i,n,h[0],h[1]))return!0;o++}var a=[[t,e],[t+i,e],[t,e+n],[t+i,e+n]];for(o=0;o<a.length;){if(h=a[o],this._62(h[0],h[1]))return!0;o++}return function(t,e){for(var i=0,n=t.length;i<n;){for(var s=t[i],r=t[(i+1)%n],o=0;o<4;){var h=e[o],a=e[(o+1)%n];if(On(s[0],s[1],r[0],r[1],h[0],h[1],a[0],a[1]))return!0;o++}i++}return!1}(r,a)},getGlobalBounds:function(){return this._globalBounds||(this._globalBounds=this._7j(0,0,this.width,this.height)),this._globalBounds},_7j:function(t,e,i,n){if(!this.rotate)return new Et(this.x+t,this.y+e,i,n);var s=[],r=new Et,o=this._h0(t,e);return s.push(o),r.add(o[0],o[1]),o=this._h0(t+i,e),s.push(o),r.add(o[0],o[1]),o=this._h0(t,e+n),s.push(o),r.add(o[0],o[1]),o=this._h0(t+i,e+n),s.push(o),r.add(o[0],o[1]),r.points=s,r},_4o:function(t,e,i,n,s){var r;if(this.rotate){var o=this._h0(t,e);r=(new Ln).set(o[0],o[1],i,n,this.rotate,this.scale)}else r=(new Ln).set(this.x+t,this.y+e,i,n,0,this.scale);return r.canvasBounds=[Math.round(s*t),Math.round(s*e),Math.round(s*i),Math.round(s*n)],r},_3q:function(t,e,i,n){if(!this.rotate){var s=Et.intersection(this.x,this.y,this.width,this.height,t,e,i,n);return s&&s.offset(-this.x,-this.y),s}var r=this._i0(t,e);return t=r[0],e=r[1],Et.intersection(0,0,this.width,this.height,r[0],r[1],i,n)},equals:function(t){return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height&&this.rotate==t.rotate},toString:function(){return this.x+","+this.y+","+this.width+","+this.height+","+this.rotate},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,rotate:this.rotate,scale:this.scale}}}),An={setStyle:qt,setStyles:Wt,addRule:Xt,pre:Ut};function xn(t,e,i){if((i=i||e.toAgent)==t)return!1;var n=t.getEdgeBundle(i);return n||(n=new kr(t,i),t._linkedNodes[i.id]=n),n._io(e,t)}function Sn(t,e,i){if((i=i||e.toAgent)==t)return!1;var n=t.getEdgeBundle(i);return n?n._d2(e,t):void 0}function In(t,e,i){if(void 0===i&&(i=e.toAgent),i!=t){if(t._81||(t._81=new ot),!1===t._81.add(e))return!1;t._91++}}function Cn(t,e,i){if(!t._81||!1===t._81.remove(e))return!1;t._91--,Sn(t,e,i)}function Dn(t,e){if(e.fromAgent!=t){if(t._94||(t._94=new ot),!1===t._94.add(e))return!1;t._m0m++}}function Rn(t,e){if(!t._94||!1===t._94.remove(e))return!1;t._m0m--,Sn(e.fromAgent,e,t)}function Pn(t,e,i,n){this.source=t,this.kind=e,this.oldValue=n,this.value=i,this.propertyType=Le.PROPERTY_TYPE_STYLE}function Nn(t){this.id=++O,this._m34={},this._j1={},t&&(this.$name=t)}function kn(t,e){if(void 0===e&&(e=t instanceof Gn),e){if(t.isInvalid())return null;var i=kn(t.from,!1);if(t.isLooped())return i;for(var n=kn(t.to,!1);null!=i&&null!=n;){if(i==n)return i;if(i.isDescendantOf(n))return n;if(n.isDescendantOf(i))return i;i=kn(i,!1),n=kn(n,!1)}return null}for(var s=t.parent;null!=s;){if(s._hx())return s;s=s.parent}return null}function Mn(t,e){e.parent?e.parent.setChildIndex(e,e.parent.childrenCount-1):t.roots.setIndex(e,t.roots.length-1)}function Bn(t,e){e.parent?e.parent.setChildIndex(e,0):t.roots.setIndex(e,0)}g(Pn,It),Nn.prototype={_j1:null,getStyle:function(t){return this._j1[t]},setStyle:function(t,e){var i=this._j1[t];return!(i===e||i&&e&&i.equals&&i.equals(e))&&this._m0o(t,e,new Pn(this,t,e,i),this._j1)},putStyles:function(t,e){for(var i in t){var n=t[i];e?this._j1[i]=n:this.setStyle(i,n)}},_$m:!0,invalidateVisibility:function(t){this._$m=!0,t||(this instanceof zn&&this.hasEdge()&&this.forEachEdge(function(t){t._$m=!0}),this._hx()&&this.hasChildren()&&this.forEachChild(function(t){t.invalidateVisibility()}))},onParentChanged:function(t,e){this.invalidateVisibility()},_hx:function(){return!this._3v&&this instanceof Zn},invalidate:function(){this.onEvent(new St(this,"ui","invalidate"))},_m33:null,addUI:function(t,e){if(this._m33||(this._m33=new ot),t.id||(t.id=++O),this._m33.containsById(t.id))return!1;var i={id:t.id,ui:t,bindingProperties:e};this._m33.add(i);var n=new St(this,"ui","add",i);return this.onEvent(n)},removeUI:function(t){if(!this._m33)return!1;var e=this._m33.getById(t.id||t);if(!e)return!1;this._m33.remove(e),this.onEvent(new St(this,"ui","remove",e))},clearUIs:function(){this.bindingUIs&&this.bindingUIs.toDatas().forEach(function(t){this.removeUI(t.ui)}.bind(this))},toString:function(){return this.$name||this.id},type:"Q.Element",_3v:!1,_hy:!0,inGroup:function(t){var e=kn(this);return e==t||e&&t instanceof Zn&&e.isDescendantOf(t)}},g(Nn,Gt),b(Nn.prototype,["uiClass","name","zIndex","tooltip"]),tt(Nn.prototype,{enableSubNetwork:{get:function(){return this._3v},set:function(t){if(this._3v!=t){var e=this._3v;this._3v=t,this instanceof zn&&this._$y(),this.onEvent(new It(this,"enableSubNetwork",t,e))}}},bindingUIs:{get:function(){return this._m33}},styles:{get:function(){return this._j1},set:function(t){if(this._j1!=t){for(var e in this._j1)e in t||(t[e]=void 0);this.putStyles(t),this._j1=t}}}}),we.findGroup=kn;var Gn=function(t,e,i){this.id=++O,this._m34={},this._j1={},i&&(this.$name=i),this.$from=t,this.$to=e,this.connect()};function Fn(t,e){return e=e||new ot,t.forEachEdge(function(t){e.add({id:t.id,edge:t,fromAgent:t.$from._dn,toAgent:t.$to._dn})}),t.forEachChild(function(t){t instanceof zn&&Fn(t,e)}),e}function $n(t,e,i){if(t._fh)for(var n=t._fh;n;){if(!1===e.call(i,n))return!1;n=n._ij}}function jn(t,e,i){if(t._ht)for(var n=t._ht;n;){if(!1===e.call(i,n))return!1;n=n._jv}}Gn.prototype={$uiClass:ms,_jt:null,_ih:null,_jv:null,_ij:null,_ek:!1,type:"Q.Edge",otherNode:function(t){return t==this.from?this.to:t==this.to?this.from:void 0},connect:function(){if(this._ek)return!1;if(!this.$from||!this.$to)return!1;if(this._ek=!0,this.$from!=this.$to){(function(t,e){if(t._m0m++,!t._ht)return t._ht=e,t._j0=e;e._jt=t._j0,t._j0._jv=e,t._j0=e})(this.$to,this),function(t,e){if(t._91++,!t._fh)return t._fh=e,t._hv=e;e._ih=t._hv,t._hv._ij=e,t._hv=e}(this.$from,this),xn(this.$from,this,this.$to);var t,e=this.fromAgent,i=this.toAgent;e!=i&&(this.$from._dn&&(In(e,this,i),t=!0),this.$to._dn&&(Dn(i,this),t=!0),t&&xn(e,this,i))}else this.$from._hw(this)},disconnect:function(){if(!this._ek)return!1;if(this._ek=!1,this.$from!=this.$to){o=this,(r=this.$from)._91--,r._hv==o&&(r._hv=o._ih),o._ih?o._ih._ij=o._ij:r._fh=o._ij,o._ij&&(o._ij._ih=o._ih),o._ih=null,o._ij=null,Sn(r,o,o.$to),s=this,(n=this.$to)._m0m--,n._j0==s&&(n._j0=s._jt),s._jt?s._jt._jv=s._jv:n._ht=s._jv,s._jv&&(s._jv._jt=s._jt),s._jt=null,s._jv=null,Sn(this.$from,this,this.$to);var t,e=this.fromAgent,i=this.toAgent;e!=i&&(this.$from._dn&&(Cn(e,this,i),t=!0),this.$to._dn&&(Rn(i,this),t=!0),t&&Sn(e,this,i))}else this.$from._m31(this);var n,s,r,o},isConnected:function(){return this._ek},isInvalid:function(){return!this.$from||!this.$to},isLooped:function(){return this.$from==this.$to},getEdgeBundle:function(t){return t?this._2v():this.isLooped()?this.$from._3u:this.$from.getEdgeBundle(this.$to)},hasEdgeBundle:function(){var t=this.getEdgeBundle(!0);return t&&1<t.edges.length},_2v:function(){return this.fromAgent==this.toAgent?this.$from._dn||this.$to._dn?null:this.$from._3u:this.fromAgent.getEdgeBundle(this.toAgent)},_9f:null,hasPathSegments:function(){return this._9f&&!this._9f.isEmpty()},isBundleEnabled:function(){return this.bundleEnabled&&!this.hasPathSegments()&&!this.edgeType},firePathChange:function(t){this.onEvent(new It(this,"path.segment",t))},addPathSegment:function(t,e,i){var n=new Ni(e||Ii,t);this._9f||(this._9f=new ot),this._9f.add(n,i),this.firePathChange(n)},addPathSegement:function(){return we.log('change "edge.addPathSegement(...)" to "edge.addPathSegment(...)"'),this.addPathSegment.apply(this,arguments)},removePathSegmentByIndex:function(t){return this.removePathSegment(t)},removePathSegment:function(t){if(!this._9f)return!1;H(t)&&(t=this._9f.getByIndex(t)),t&&(this._9f.remove(t),this.firePathChange(t))},movePathSegment:function(t,e,i){if(!this._9f)return!1;if(t=t||0,e=e||0,we.isNumber(i)){var n=this._9f.getByIndex(i);return!!n&&(n.move(t,e),void this.firePathChange())}a(function(i){i.move(t,e)}),this.firePathChange()},move:function(t,e){if(!this._9f)return!1;this._9f.forEach(function(i){i.move(t,e)},this),this.firePathChange()},validateEdgeBundle:function(){}},g(Gn,Nn),tt(Gn.prototype,{pathSegments:{get:function(){return this._9f},set:function(t){we.isArray(t)&&(t=new ot(t)),this._9f=t,this.firePathChange()}},from:{get:function(){return this.$from},set:function(t){if(this.$from!=t){var e=new It(this,"from",t,this.$from);!1!==this.beforeEvent(e)&&(this.disconnect(),this.$from=t,this.connect(),this.onEvent(e))}}},to:{get:function(){return this.$to},set:function(t){if(this.$to!=t){var e=new It(this,"to",t,this.$to);!1!==this.beforeEvent(e)&&(this.disconnect(),this.$to=t,this.connect(),this.onEvent(e))}}},fromAgent:{get:function(){return this.$from?this.$from._dn||this.$from:null}},toAgent:{get:function(){return this.$to?this.$to._dn||this.$to:null}}}),b(Gn.prototype,["edgeType",{name:"bundleEnabled",value:!0},"angle"]);var zn=function(t,e,i){2==arguments.length&&H(t)&&(i=e,e=t,t=null),this.id=++O,this._m34={},this._j1={},t&&(this.$name=t),this.$image="Q-node",this.$anchorPosition=mt.CENTER_MIDDLE,this.$location={x:e||0,y:i||0},this._linkedNodes={}};zn.prototype={$uiClass:ys,_dn:null,forEachEdge:function(t,e,i){return!(!i&&this._k8&&!1===this._k8.forEach(t,e))&&!1!==jn(this,n=t,s=e)&&$n(this,n,s);var n,s},forEachOutEdge:function(t,e){return $n(this,t,e)},forEachInEdge:function(t,e,i){return jn(this,t,e)},getEdges:function(){var t=[];return this.forEachEdge(function(e){t.push(e)}),t},_ht:null,_fh:null,_j0:null,_hv:null,_m0m:0,_91:0,hasInEdge:function(){return null!=this._ht},hasOutEdge:function(){return null!=this._fh},hasEdge:function(){return null!=this._ht||null!=this._fh||this.hasLoops()},linkedWith:function(t){return t.from==this||t.to==this||t.fromAgent==this||t.toAgent==this},hasEdgeWith:function(t){var e=this.getEdgeBundle(t);return e&&0<e.edges.length},_k8:null,_3u:null,hasLoops:function(){return this._k8&&0<this._k8.length},_hw:function(t){return this._k8||(this._k8=new ot,this._3u=new kr(this,this,this._k8)),this._3u._io(t)},_m31:function(t){if(this._3u)return this._3u._d2(t)},getEdgeBundle:function(t){return t==this?this._3u:this._linkedNodes[t.id]||t._linkedNodes[this.id]},_6j:function(){return this._94&&this._94.length},_59:function(){return this._81&&this._81.length},_93:function(){return this._6j()||this._59()},_81:null,_94:null,_m32:function(){var t,e=this._dn,i=(t=this).parent?(t=t.parent)._dn?t._dn:t instanceof Zn&&!1===t._h9?t:null:null;if(e!=i){var n=Fn(this);this._96(i),n.forEach(function(t){var e=t.fromAgent,i=t.toAgent,n=(t=t.edge).$from._dn,s=t.$to._dn;e!=i&&(e&&Cn(e,t,i||t.$to),i&&Rn(i,t,e||t.$from)),n!=s&&(n&&In(n,t,s||t.$to),s&&Dn(s,t,n||t.$from),xn(n||t.$from,t,s||t.$to))},this)}},onParentChanged:function(t,e){we.doSuper(this,zn,"onParentChanged",arguments),this._m32()},_82:null,_$y:function(){var t;if(this._3v?t=null:(t=this._dn)||!1!==this._h9||(t=this),this._82==t)return!1;if(this._82=t,this._fr&&this._fr._j2.length)for(var e,i=this._fr._j2,n=0,s=i.length;n<s;n++)(e=i[n])instanceof zn&&e._96(t)},setLocation:function(t,e){if(this.$location&&this.$location.x==t&&this.$location.y==e)return!1;var i;i=this.$location?{x:this.$location.x,y:this.$location.y}:this.$location;var n=new It(this,"location",i,{x:t,y:e});return!1!==this.beforeEvent(n)&&(this.$location?(this.$location.x=t,this.$location.y=e):this.$location=new at(t,e),this.onEvent(n),!0)},_dp:null,addFollower:function(t){return null!=t&&(t.host=this)},removeFollower:function(t){return!(!this._dp||!this._dp.contains(t))&&(t.host=null)},hasFollowers:function(){return this._dp&&!this._dp.isEmpty()},toFollowers:function(){return this.hasFollowers()?this._dp.toDatas():null},clearFollowers:function(){this.hasFollowers()&&(this.toFollowers(),a(this.toFollowers(),function(t){t.host=null}))},getFollowerIndex:function(t){return this._dp&&this._dp.contains(t)?this._dp.indexOf(t):-1},setFollowerIndex:function(t,e){if(!this._dp||!this._dp.contains(t))return-1;this._dp.setIndex(t,e)},getFollowerCount:function(){return this._dp?this._dp.length:0},_95:function(){return this._dp||(this._dp=new ot),this._dp},isFollow:function(t){if(!t||!this._host)return!1;for(var e=this._host;e;){if(e==t)return!0;e=e._host}return!1},_96:function(t){if(t==this._dn)return!1;this._dn=t,this.invalidateVisibility(),this._$y()},type:"Q.Node"},g(zn,Nn),tt(zn.prototype,{loops:{get:function(){return this._k8}},edgeCount:{get:function(){return this._m0m+this._91}},agentNode:{get:function(){return this._dn||this}},host:{set:function(t){if(this==t||t==this._host)return!1;var e=new It(this,"host",this._host,t);if(!1===this.beforeEvent(e))return!1;var i=null,n=null,s=this._host;return!(null!=t&&(i=new It(t,"follower.add",null,this),!1===t.beforeEvent(i))||null!=s&&(n=new It(s,"follower.remove",null,this),!1===s.beforeEvent(n))||(null!=(this._host=t)&&t._95().add(this),null!=s&&s._95().remove(this),this.onEvent(e),null!=t&&t.onEvent(i),null!=s&&s.onEvent(n),0))},get:function(){return this._host}}}),b(zn.prototype,["location","size","image","rotate","anchorPosition"]),tt(zn.prototype,{x:{get:function(){return this.location.x},set:function(t){t!=this.location.x&&(this.location=new at(t,this.location.y))}},y:{get:function(){return this.location.y},set:function(t){t!=this.location.y&&(this.location=new at(this.location.x,t))}}});var Hn=function(t,e){t instanceof Mi&&(e=t,t=void 0),v(this,Hn,[t]),this.path=e||new Mi,this.anchorPosition=null,this.uiClass=zs,rt.SHAPENODE_STYLES||(rt.SHAPENODE_STYLES={},rt.SHAPENODE_STYLES[ss.ARROW_TO]=!1),this.putStyles(rt.SHAPENODE_STYLES)};Hn.prototype={$uiClass:zs,type:"Q.ShapeNode",moveTo:function(t,e){this.path.moveTo(t,e),this.firePathChange()},lineTo:function(t,e){this.path.lineTo(t,e),this.firePathChange()},quadTo:function(t,e,i,n){this.path.quadTo(t,e,i,n),this.firePathChange()},curveTo:function(t,e,i,n,s,r){this.path.curveTo(t,e,i,n,s,r),this.firePathChange()},arcTo:function(t,e,i,n,s){this.path.arcTo(t,e,i,n,s),this.firePathChange()},closePath:function(){this.path.closePath(),this.firePathChange()},clear:function(){this.path.clear(),this.firePathChange()},removePathSegmentByIndex:function(t){!1!==this.path.removePathSegment(t)&&this.firePathChange()},firePathChange:function(){this.path._6e=!0,this.onEvent(new It(this,"path.segment"))},addPathSegment:function(t,e,i){this.path.add(new Ni(e||Ii,t),i),this.firePathChange()}},g(Hn,zn),tt(Hn.prototype,{path:{get:function(){return this.image},set:function(t){this.image=t}},pathSegments:{get:function(){return this.path.segments},set:function(t){this.path.segments=t||[],this.firePathChange()}},length:{get:function(){return this.path.length}}}),we.ShapeNode=Hn;var Yn={_jx:{},register:function(t,e){Yn._jx[t]=e},getShape:function(t,e,i,n,s,r){void 0===n&&(n=e,s=i,i=e=0),n=n||50,s=s||50;var o=Yn._jx[t];if(o)return o.generator instanceof Function?o.generator(e,i,n,s,r):o},getRect:function(t,e,i,n,s,r,o){return t instanceof Object&&"width"in t&&(e=t.y,i=t.width,n=t.height,s=t.rx,r=t.ry,o=t.path,t=t.x),Un(o||new Mi,t,e,i,n,s,r)},getAllShapes:function(t,e,i,n,s){var r={};for(var o in Yn._jx){var h=Yn.getShape(o,t,e,i,n,s);h&&(r[o]=h)}return r},createRegularShape:function(t,e,i,n,s){return Xn(t,e,i,n,s)}};function Un(t,e,i,n,s,r,o){return r||o?(r=r||0,o=void 0===o?r:o||0,r=Math.min(r,n/2),o=Math.min(o,s/2),t.moveTo(e+r,i),t.lineTo(e+n-r,i),t.quadTo(e+n,i,e+n,i+o),t.lineTo(e+n,i+s-o),t.quadTo(e+n,i+s,e+n-r,i+s),t.lineTo(e+r,i+s),t.quadTo(e,i+s,e,i+s-o),t.lineTo(e,i+o),t.quadTo(e,i,e+r,i)):(t.moveTo(e,i),t.lineTo(e+n,i),t.lineTo(e+n,i+s),t.lineTo(e,i+s)),t.closePath(),t}function Wn(t,e,i,n,s){e instanceof Ve&&(n=e.width,s=e.height,i=e.cy-s/2,e=e.cx-n/2);var r=n/2*.5522848,o=s/2*.5522848,h=e+n,a=i+s,l=e+n/2,_=i+s/2;return t.moveTo(e,_),t.curveTo(e,_-o,l-r,i,l,i),t.curveTo(l+r,i,h,_-o,h,_),t.curveTo(h,_+o,l+r,a,l,a),t.curveTo(l-r,a,e,_+o,e,_),t}function qn(t,e,i,n,s,r){return t.moveTo(e,i),t.lineTo(e+n,i+s/2),t.lineTo(e,i+s),r||(t.lineTo(e+.25*n,i+s/2),t.closePath()),t}function Xn(t,e,i,n,s){if(!t||t<3)throw new Error("edge number must greater than 2");t|=0,n=n||50,s=s||0,e=e||0,i=i||0;for(var r,o,h=0,a=2*Math.PI/t,l=new Mi;h<t;)r=e+n*Math.cos(s),o=i+n*Math.sin(s),h?l.lineTo(r,o):l.moveTo(r,o),++h,s+=a;return l.closePath(),l}function Vn(t,e){v(this,Vn,arguments),this.busLayout=!0}function Kn(){v(this,Kn),this._$s=new Mt}(function(){var t,e,i,n,s,r,o,h,a,l,_,u,c,d,f,g;Yn.register(Le.SHAPE_CIRCLE,Wn(new Mi,0,0,100,100)),Yn.register(Le.SHAPE_RECT,Un(new Mi,0,0,100,100)),Yn.register(Le.SHAPE_ROUNDRECT,Un(new Mi,0,0,100,100,20,20)),Yn.register(Le.SHAPE_STAR,(_=new Mi,c=2*(u=100),d=2*100,f=50+0,g=50+0,_.moveTo(f-c/4,g-d/12),_.lineTo(0+.306*u,57.9),_.lineTo(f-c/6,g+d/4),_.lineTo(50,73.3),_.lineTo(f+c/6,g+d/4),_.lineTo(69.3,57.9),_.lineTo(f+c/4,g-d/12),_.lineTo(61.1,33.2),_.lineTo(f+0,g-d/4),_.lineTo(0+.388*u,33.2),_.closePath(),_)),Yn.register(Le.SHAPE_TRIANGLE,(a=0,l=100,(h=new Mi).moveTo(0,a),h.lineTo(100,a+l/2),h.lineTo(0,a+l),h.closePath(),h)),Yn.register(Le.SHAPE_PENTAGON,Xn(5)),Yn.register(Le.SHAPE_HEXAGON,Xn(6)),Yn.register(Le.SHAPE_DIAMOND,(r=0,o=100,(s=new Mi).moveTo(0,r+o/2),s.lineTo(50,r),s.lineTo(100,r+o/2),s.lineTo(50,r+o),s.closePath(),s)),Yn.register(Le.SHAPE_HEART,((n=new Mi).moveTo(75,40),n.curveTo(75,37,70,25,50,25),n.curveTo(20,25,20,62.5,20,62.5),n.curveTo(20,80,40,102,75,120),n.curveTo(110,102,130,80,130,62.5),n.curveTo(130,62.5,130,25,100,25),n.curveTo(85,25,75,37,75,40),n)),Yn.register(Le.SHAPE_TRAPEZIUM,((i=new Mi).moveTo(20,0),i.lineTo(80,0),i.lineTo(100,100),i.lineTo(0,100),i.closePath(),i)),Yn.register(Le.SHAPE_RHOMBUS,((e=new Mi).moveTo(100,0),e.lineTo(100,80),e.lineTo(0,100),e.lineTo(0,20),e.closePath(),e)),Yn.register(Le.SHAPE_PARALLELOGRAM,((t=new Mi).moveTo(20,0),t.lineTo(100,0),t.lineTo(80,100),t.lineTo(0,100),t.closePath(),t));var v,E,p,m,y,T,b,O,w=new Mi;w.moveTo(20,0),w.lineTo(40,0),w.lineTo(40,20),w.lineTo(60,20),w.lineTo(60,40),w.lineTo(40,40),w.lineTo(40,60),w.lineTo(20,60),w.lineTo(20,40),w.lineTo(0,40),w.lineTo(0,20),w.lineTo(20,20),w.closePath(),Yn.register(Le.SHAPE_CROSS,w),Yn.register(Le.SHAPE_ARROW_STANDARD,qn(new Mi,0,0,100,100)),Yn.register(Le.SHAPE_ARROW_1,((O=new Mi).moveTo(43,23),O.lineTo(28,10),O.lineTo(37,2),O.lineTo(63,31),O.lineTo(37,59),O.lineTo(28,52),O.lineTo(44,38),O.lineTo(3,38),O.lineTo(3,23),O.closePath(),O)),Yn.register(Le.SHAPE_ARROW_2,((b=new Mi).moveTo(1,8),b.lineTo(7,2),b.lineTo(32,26),b.lineTo(7,50),b.lineTo(1,44),b.lineTo(18,26),b.closePath(),b.moveTo(27,8),b.lineTo(33,2),b.lineTo(57,26),b.lineTo(33,50),b.lineTo(27,44),b.lineTo(44,26),b.closePath(),b)),Yn.register(Le.SHAPE_ARROW_3,((T=new Mi).moveTo(0,15),T.lineTo(23,15),T.lineTo(23,1),T.lineTo(47,23),T.lineTo(23,43),T.lineTo(23,29),T.lineTo(0,29),T.closePath(),T)),Yn.register(Le.SHAPE_ARROW_4,((y=new Mi).moveTo(0,21),y.lineTo(30,21),y.lineTo(19,0),y.lineTo(25,0),y.lineTo(47,25),y.lineTo(25,48),y.lineTo(19,48),y.lineTo(30,28),y.lineTo(0,28),y.closePath(),y)),Yn.register(Le.SHAPE_ARROW_5,((m=new Mi).moveTo(0,0),m.lineTo(34,24),m.lineTo(0,48),m.lineTo(14,24),m.closePath(),m)),Yn.register(Le.SHAPE_ARROW_6,((p=new Mi).moveTo(20,0),p.lineTo(34,14),p.lineTo(20,28),p.lineTo(22,18),p.lineTo(1,25),p.lineTo(10,14),p.lineTo(1,3),p.lineTo(22,10),p.closePath(),p)),Yn.register(Le.SHAPE_ARROW_7,((E=new Mi).moveTo(4,18),E.lineTo(45,18),E.lineTo(37,4),E.lineTo(83,25),E.lineTo(37,46),E.lineTo(45,32),E.lineTo(4,32),E.closePath(),E)),Yn.register(Le.SHAPE_ARROW_8,((v=new Mi).moveTo(17,11),v.lineTo(27,11),v.lineTo(42,27),v.lineTo(27,42),v.lineTo(17,42),v.lineTo(28,30),v.lineTo(4,30),v.lineTo(4,23),v.lineTo(28,23),v.closePath(),v)),Yn.register(Le.SHAPE_ARROW_OPEN,qn(new Mi,0,0,100,100,!0))})(),Vn.prototype={type:"Q.Bus"},g(Vn,Hn),we.Bus=Vn,Kn.prototype={_fi:function(t){var e,i=t._ja,s=(e=i?i._fr:this.$roots).indexOf(t);if(s<0)throw new Error("data '"+t+"' not exist in the box");for(;0<=s;){if(0==s)return i instanceof zn?i:null;--s;var r=e.getByIndex(s);if(r=n(r))return r}return null},forEachNode:function(t,e){this.forEach(function(i){if(i instanceof zn&&!1===t.call(e,i))return!1})},_34:null},g(Kn,$t),tt(Kn.prototype,{propertyChangeDispatcher:{get:function(){return this._$s}},currentSubNetwork:{get:function(){return this._34},set:function(t){if(t&&!t.enableSubNetwork&&(t=null),this._34!=t){var e=this._34;this._34=t,this._$s.onEvent(new It(this,"currentSubNetwork",t,e))}}}}),rt.GROUP_TYPE=Le.GROUP_TYPE_RECT,rt.GROUP_PADDING=5,rt.GROUP_EXPANDED=!0,rt.GROUP_MIN_SIZE={width:60,height:60};var Zn=function(t,e,i){v(this,Zn,arguments),void 0!==e&&void 0!==i||(this.$location.invalidateFlag=!0),this.$groupType=rt.GROUP_TYPE,this.$padding=rt.GROUP_PADDING,this.$image=Wi.group,this.$minSize=rt.GROUP_MIN_SIZE,this.expanded=rt.GROUP_EXPANDED};function Qn(t,e,i){v(this,Qn,arguments),this.$image=null}Zn.prototype={type:"Q.Group",$uiClass:ks,_m01:function(){return!this._h9&&!this._dn},forEachOutEdge:function(t,e,i){return!1!==$n(this,t,e)&&(!i&&this._m01()&&this._81?this._81.forEach(t,e):void 0)},forEachInEdge:function(t,e,i){return!1!==jn(this,t,e)&&(!i&&this._m01()&&this._94?this._94.forEach(t,e):void 0)},forEachEdge:function(t,e,i){return!1!==E(this,Zn,"forEachEdge",arguments)&&(i||i||!this._m01()?void 0:(!this._94||!1!==this._94.forEach(t,e))&&(this._81?this._81.forEach(t,e):void 0))},hasInEdge:function(t){return t?null!=this._ht:null!=this._ht||this._6j()},hasOutEdge:function(t){return t?null!=this._fh:null!=this._fh||this._59()},hasEdge:function(t){return t?null!=this._ht||null!=this._fh:null!=this._ht||null!=this._fh||this._93()}},g(Zn,zn),tt(Zn.prototype,{expanded:{get:function(){return this._h9},set:function(t){if(this._h9!=t){var e=new It(this,"expanded",t,this._h9);!1!==this.beforeEvent(e)&&(this._h9=t,this._$y(),this.onEvent(e),this._dn||function t(){if(!0!==this._h9)Fn(this).forEach(function(t){var e=(t=t.edge).$from,i=t.$to,n=e.isDescendantOf(this),s=i.isDescendantOf(this);n&&!s?(In(this,t),xn(this,t)):s&&!n&&(Dn(this,t),xn(t.fromAgent,t,this))},this);else{var e=this._81,i=this._94;if(e)for(e=e._j2;e.length;)Cn(this,n=e[0],n.toAgent);if(i)for(i=i._j2;i.length;){var n;Rn(this,n=i[0],n.fromAgent)}this.forEachChild(function(e){e._hx()&&t.call(e)})}}.call(this))}}}}),b(Zn.prototype,["minSize","groupType","padding","groupImage"]),we.Group=Zn,Qn.prototype.type="Q.Text",g(Qn,zn),we.Text=Qn;var Jn=function(t){this._j4=new Et,this._83=new Et,this._fu=new Et,this.id=++O,t&&(this.data=t)};function ts(t,e,i,n){return t[e]=i,n?{get:function(){return this[e]},set:function(t){if(t!==this[e]){this[e]=t,this._m0t,this._1e=!0;for(var i=n.length;0<=--i;)this[n[i]]=!0}}}:{get:function(){return this[e]},set:function(t){t!==this[e]&&(this[e]=t)}}}function es(t,e){var i={},n={};for(var s in e){var r=e[s];r.validateFlags&&r.validateFlags.forEach(function(t,e,i){i[e]="$invalidate"+t,n[t]=!0}),i[s]=ts(t,"$"+s,r.value,r.validateFlags)}for(var o in n)t["$invalidate"+o]=!0;Object.defineProperties(t,i)}Jn.prototype={invalidate:function(){this.invalidateData()},_1e:!0,_j4:null,_83:null,_fu:null,_m0t:!1,_j6:1,_j8:1,_hy:!0,_84:0,_6l:0,_ja:null,_m0v:null,borderColor:"#444",borderLineDash:null,borderLineDashOffset:null,syncSelection:!0,syncSelectionStyles:!0,_17:function(){this.$anchorPoint=At(this.anchorPosition,this._84,this._6l)},setMeasuredBounds:function(t,e,i,n){if(t instanceof Object&&(i=t.x,n=t.y,e=t.height,t=t.width),this._j4.width==t&&this._j4.height==e&&this._j4.x==i&&this._j4.y==n)return!1;this._j4.set(i||0,n||0,t||0,e||0)},initialize:function(){},measure:function(){},draw:function(t,e,i,n){},_85:function(t,e,i){i.selectionType==Le.SELECTION_TYPE_SHADOW?(t.shadowColor=i.selectionColor,t.shadowBlur=i.selectionShadowBlur*e,t.shadowOffsetX=(i.selectionShadowOffsetX||0)*e,t.shadowOffsetY=(i.selectionShadowOffsetY||0)*e):this._1z(t,e,i)},_1z:function(t,e,i){var n=i.selectionBorder||0;i.selectionBackgroundColor&&(t.fillStyle=i.selectionBackgroundColor,t.fillRect(this._83.x-n/2,this._83.y-n/2,this._83.width+n,this._83.height+n)),t.strokeStyle=i.selectionColor,t.lineWidth=n,t.strokeRect(this._83.x-n/2,this._83.y-n/2,this._83.width+n,this._83.height+n)},_jc:function(t,e,i,n){if(!this._hy)return!1;if(this.syncSelection||(i=this.selected),(!i||this.syncSelectionStyles)&&n||(n=this),t.save(),1!=this.$alpha&&(t.globalAlpha=this.$alpha),t.translate(this.$x,this.$y),this.$rotatable&&this.$_hostRotate&&t.rotate(this.$_hostRotate),(this.offsetX||this.offsetY)&&t.translate(this.offsetX,this.offsetY),this.$rotate&&t.rotate(this.$rotate),this.$layoutByAnchorPoint&&this._m0v&&t.translate(-this._m0v.x,-this._m0v.y),this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur*e,t.shadowOffsetX=this.shadowOffsetX*e,t.shadowOffsetY=this.shadowOffsetY*e),i&&n.selectionType==Le.SELECTION_TYPE_BORDER_RECT&&(this._1z(t,e,n),i=!1),this._$o()&&this._l9Shape&&!this._l9Shape._empty){this._l9Shape.validate();var s={lineWidth:this.$border,strokeStyle:this.borderColor,lineDash:this.borderLineDash,lineDashOffset:this.borderLineDashOffset,fillColor:this.$backgroundColor,fillGradient:this._m1ackgroundGradient,lineCap:"butt",lineJoin:"round"};this._l9Shape.draw(t,e,s,i,n),i=!1,t.shadowColor="rgba(0,0,0,0)"}t.beginPath(),this.draw(t,e,i,n),t.restore()},invalidateData:function(){this.$invalidateData=!0,this.$invalidateSize=!0,this._1e=!0},invalidateSize:function(){this.$invalidateSize=!0,this._1e=!0},invalidateRender:function(){this._1e=!0},_5f:function(){},_$o:function(){return this.$backgroundColor||this.$backgroundGradient||this.$border},_3x:function(){return this.$backgroundColor||this.$backgroundGradient},doValidate:function(){return this.$invalidateData&&(this.$invalidateData=!1)!==this.measure()&&(this.$invalidateSize=!0),this.$invalidateSize&&this.validateSize&&this.validateSize(),Ki.call(this)?(this.$invalidateRotate=!0,this.onBoundsChanged&&this.onBoundsChanged(),!0):this.$invalidateLocation?(this.$invalidateRotate=!0,!(this.$invalidateLocation=!1)):void 0},validate:function(){var t=this._hy;return this.$invalidateVisibility&&(this.$invalidateVisibility=!1,this._hy=this.$visible,!this._hy||(this.$data||this.$showEmpty)&&!1!==this._5f()||(this._hy=!1)),this._hy?(this._1e=!1,this._m0t||(this.initialize(),this._m0t=!0),this.doValidate()):t!=this._hy},_i0:function(t,e){return t-=this.$x,e-=this.$y,Vi.call(this,{x:t,y:e})},hitTest:function(t,e,i,n){if(t-=this.$x,e-=this.$y,!this._fu.intersectsPoint(t,e,i))return!1;var s=Vi.call(this,{x:t,y:e});return t=s.x,e=s.y,!(n||!this._$o()||!this._l9Shape||!this._l9Shape.hitTest(t,e,i,!1,this.$border,this.$backgroundColor||this.$backgroundGradient))||this.doHitTest(t,e,i)},doHitTest:function(t,e,i){return this._j4.intersectsPoint(t,e,i)},hitTestByBounds:function(t,e,i,n){var s=this._i0(t,e);return!(n||!this._$o()||!this._l9Shape||!this._l9Shape.hitTest(t,e,i,!1,this.$border,this.$backgroundColor||this.$backgroundGradient))||this._j4.intersectsPoint(s.x,s.y,i)},onDataChanged:function(t,e){this.$invalidateData=!0,this._1e=!0,this.$invalidateVisibility=!0},getBounds:function(){var t=this._fu.clone();return t.offset(this.x,this.y),this.parent&&(this.parent.rotate&&Ie(t,this.parent.rotate,t),t.offset(this.parent.x||0,this.parent.y||0)),t},destroy:function(){this._i1ed=!0},_ds:!1},tt(Jn.prototype,{originalBounds:{get:function(){return this._j4}},data:{get:function(){return this.$data},set:function(t){if(this.$data!=t){var e=this.$data;this.$data=t,this.onDataChanged(t,e)}}},parent:{get:function(){return this._ja}},showOnTop:{get:function(){return this._ds},set:function(t){t!=this._ds&&(this._ds=t,this._1e=!0,this._ja&&this._ja._m0s&&this._ja._m0s(this))}}}),es(Jn.prototype,{visible:{value:!0,validateFlags:["Visibility","Location"]},showEmpty:{validateFlags:["Visibility"]},anchorPosition:{value:mt.CENTER_MIDDLE,validateFlags:["AnchorPoint","Location"]},position:{value:mt.CENTER_MIDDLE,validateFlags:["Location"]},offsetX:{value:0,validateFlags:["Location"]},offsetY:{value:0,validateFlags:["Location"]},layoutByAnchorPoint:{value:!0,validateFlags:["Size","AnchorPoint","Location"]},padding:{value:0,validateFlags:["Size"]},border:{value:0,validateFlags:["Size"]},borderRadius:{value:rt.BORDER_RADIUS},showPointer:{value:!1,validateFlags:["Size"]},pointerX:{value:0,validateFlags:["Size"]},pointerY:{value:0,validateFlags:["Size"]},pointerWidth:{value:rt.POINTER_WIDTH},backgroundColor:{validateFlags:["Size"]},backgroundGradient:{validateFlags:["Size","BackgroundGradient"]},selected:{value:!1,validateFlags:["Size"]},selectionBorder:{value:rt.SELECTION_BORDER,validateFlags:["Size"]},selectionShadowBlur:{value:rt.SELECTION_SHADOW_BLUR,validateFlags:["Size"]},selectionColor:{value:rt.SELECTION_COLOR,validateFlags:["Size"]},selectionType:{value:rt.SELECTION_TYPE,validateFlags:["Size"]},selectionShadowOffsetX:{value:0,validateFlags:["Size"]},selectionShadowOffsetY:{value:0,validateFlags:["Size"]},shadowBlur:{value:0,validateFlags:["Size"]},shadowColor:{validateFlags:["Size"]},shadowOffsetX:{value:0,validateFlags:["Size"]},shadowOffsetY:{value:0,validateFlags:["Size"]},renderColorBlendMode:{},renderColor:{},x:{value:0,validateFlags:["Location"]},y:{value:0,validateFlags:["Location"]},rotatable:{value:!0,validateFlags:["Rotate","Size"]},rotate:{value:0,validateFlags:["Rotate","Size"]},_hostRotate:{validateFlags:["Rotate"]},lineWidth:{value:0,validateFlags:["Data"]},alpha:{value:1}});var is=[Le.PROPERTY_TYPE_ACCESSOR,Le.PROPERTY_TYPE_STYLE,Le.PROPERTY_TYPE_CLIENT];function ns(){is.forEach(function(t){this[t]={}},this)}ns.prototype={removeBinding:function(t){for(var e=is.length;0<=--e;){var i=this[is[e]];for(var n in i){var s=i[n];Array.isArray(s)?(l(s,function(e){return e.target==t},this),s.length||delete i[n]):s.target==t&&delete i[n]}}},_1v:function(t,e,i){if(!i&&!(i=this[e.propertyType||Le.PROPERTY_TYPE_ACCESSOR]))return!1;var n=i[t];n?(Array.isArray(n)||(i[t]=n=[n]),n.push(e)):i[t]=e},_2h:function(t,e,i,n,s,r){var o=this[t=t||Le.PROPERTY_TYPE_ACCESSOR];if(!o)return!1;var h={property:e,propertyType:t,bindingProperty:n,target:i,callback:s,invalidateSize:r};this._1v(e,h,o)},onBindingPropertyChange:function(t,e,i,n){var s=this[i||Le.PROPERTY_TYPE_ACCESSOR];if(!s)return!1;var r=s[e];return!!r&&(t._1e=!0,function t(e,i,n,s){if(Array.isArray(i))for(var r=i.length;0<=--r;)t(e,i[r],n,s);else{var o=i.target;if(o){if(o instanceof Jn||(o=e[o]),!o)return}else o=e;if(s=s||e.getProperty(i.property,n),i.bindingProperty&&(o[i.bindingProperty]=s),i.callback){var h=i.callback;h instanceof Function||(h=e[h]),h instanceof Function&&h.call(e,s,o)}}}(t,r,i,n),!0)},initBindingProperties:function(t,e){for(var i=is.length;0<=--i;){var n=is[i],s=this[n];for(var r in s){var o=s[r];if(o.bindingProperty){var h,a=o.target;if(a){if(!(a instanceof Jn||(a=t[a])))continue}else a=t;void 0!==(h=!1===e?t.getProperty(o.property,n):n==Le.PROPERTY_TYPE_STYLE?t.graph.getStyle(t.$data,o.property):t.$data[o.property])&&(a[o.bindingProperty]=h)}}}}};var ss={SELECTION_COLOR:"selection.color",SELECTION_BORDER:"selection.border",SELECTION_SHADOW_BLUR:"selection.shadow.blur",SELECTION_SHADOW_OFFSET_X:"selection.shadow.offset.x",SELECTION_SHADOW_OFFSET_Y:"selection.shadow.offset.y",SELECTION_TYPE:"selection.type",RENDER_COLOR:"render.color",RENDER_COLOR_BLEND_MODE:"render.color.blend.mode",ALPHA:"alpha",SHADOW_BLUR:"shadow.blur",SHADOW_COLOR:"shadow.color",SHADOW_OFFSET_X:"shadow.offset.x",SHADOW_OFFSET_Y:"shadow.offset.y",SHAPE_STROKE:"shape.stroke",SHAPE_STROKE_STYLE:"shape.stroke.style",SHAPE_LINE_FILL_COLOR:"shape.stroke.fill.color",SHAPE_LINE_DASH:"shape.line.dash",SHAPE_LINE_DASH_OFFSET:"shape.line.dash.offset",SHAPE_FILL_COLOR:"shape.fill.color",SHAPE_FILL_GRADIENT:"shape.fill.gradient",SHAPE_OUTLINE:"shape.outline",SHAPE_OUTLINE_STYLE:"shape.outline.style",LAYOUT_BY_PATH:"layout.by.path",BACKGROUND_COLOR:"background.color",BACKGROUND_GRADIENT:"background.gradient",BORDER:"border.width",BORDER_COLOR:"border.color",BORDER_LINE_DASH:"border.line.dash",BORDER_LINE_DASH_OFFSET:"border.line.dash.offset",BORDER_RADIUS:"border.radius",PADDING:"padding",LINE_CAP:"line.cap",LINE_JOIN:"line.join",LINE_DASH_CAP:"line.dash.cap",LINE_DASH_JOIN:"line.dash.join",IMAGE_BACKGROUND_COLOR:"image.background.color",IMAGE_BACKGROUND_GRADIENT:"image.background.gradient",IMAGE_BORDER:"image.border.width"};ss.IMAGE_BORDER_STYLE=ss.IMAGE_BORDER_COLOR="image.border.style",ss.IMAGE_BORDER_LINE_DASH="image.border.line.dash",ss.IMAGE_BORDER_LINE_DASH_OFFSET="image.border.line.dash.offset",ss.IMAGE_RADIUS=ss.IMAGE_BORDER_RADIUS="image.radius",ss.IMAGE_PADDING="image.padding",ss.IMAGE_Z_INDEX="image.z.index",ss.IMAGE_ADJUST="image.adjust",ss.IMAGE_ALPHA="image.alpha",ss.LABEL_ROTATE="label.rotate",ss.LABEL_POSITION="label.position",ss.LABEL_VISIBLE="label.visible",ss.LABEL_ANCHOR_POSITION="label.anchor.position",ss.LABEL_COLOR="label.color",ss.LABEL_FONT_SIZE="label.font.size",ss.LABEL_FONT_FAMILY="label.font.family",ss.LABEL_FONT_STYLE="label.font.style",ss.LABEL_PADDING="label.padding",ss.LABEL_POINTER_WIDTH="label.pointer.width",ss.LABEL_POINTER="label.pointer",ss.LABEL_RADIUS="label.radius",ss.LABEL_OFFSET_X="label.offset.x",ss.LABEL_OFFSET_Y="label.offset.y",ss.LABEL_SIZE="label.size",ss.LABEL_ALIGN_POSITION="label.align.position",ss.LABEL_BORDER="label.border",ss.LABEL_BORDER_LINE_DASH="label.border.line.dash",ss.LABEL_BORDER_LINE_DASH_OFFSET="label.border.line.dash.offset",ss.LABEL_BORDER_STYLE="label.border.style",ss.LABEL_BACKGROUND_COLOR="label.background.color",ss.LABEL_BACKGROUND_GRADIENT="label.background.gradient",ss.LABEL_ROTATABLE="label.rotatable",ss.LABEL_SHADOW_BLUR="label.shadow.blur",ss.LABEL_SHADOW_COLOR="label.shadow.color",ss.LABEL_SHADOW_OFFSET_X="label.shadow.offset.x",ss.LABEL_SHADOW_OFFSET_Y="label.shadow.offset.y",ss.LABEL_Z_INDEX="label.z.index",ss.LABEL_ON_TOP="label.on.top",ss.GROUP_BACKGROUND_COLOR="group.background.color",ss.GROUP_BACKGROUND_GRADIENT="group.background.gradient",ss.GROUP_RADIUS="group.radius",ss.GROUP_STROKE="group.stroke",ss.GROUP_STROKE_STYLE="group.stroke.color",ss.GROUP_STROKE_LINE_DASH="group.stroke.line.dash",ss.GROUP_STROKE_LINE_DASH_OFFSET="group.stroke.line.dash.offset",ss.EDGE_BUNDLE_LABEL_ROTATE="edge.bundle.label.rotate",ss.EDGE_BUNDLE_LABEL_POSITION="edge.bundle.label.position",ss.EDGE_BUNDLE_LABEL_ANCHOR_POSITION="edge.bundle.label.anchor.position",ss.EDGE_BUNDLE_LABEL_COLOR="edge.bundle.label.color",ss.EDGE_BUNDLE_LABEL_FONT_SIZE="edge.bundle.label.font.size",ss.EDGE_BUNDLE_LABEL_FONT_FAMILY="edge.bundle.label.font.family",ss.EDGE_BUNDLE_LABEL_FONT_STYLE="edge.bundle.label.font.style",ss.EDGE_BUNDLE_LABEL_PADDING="edge.bundle.label.padding",ss.EDGE_BUNDLE_LABEL_POINTER_WIDTH="edge.bundle.label.pointer.width",ss.EDGE_BUNDLE_LABEL_POINTER="edge.bundle.label.pointer",ss.EDGE_BUNDLE_LABEL_RADIUS="edge.bundle.label.radius",ss.EDGE_BUNDLE_LABEL_OFFSET_X="edge.bundle.label.offset.x",ss.EDGE_BUNDLE_LABEL_OFFSET_Y="edge.bundle.label.offset.y",ss.EDGE_BUNDLE_LABEL_BORDER="edge.bundle.label.border",ss.EDGE_BUNDLE_LABEL_BORDER_STYLE="edge.bundle.label.border.color",ss.EDGE_BUNDLE_LABEL_BACKGROUND_COLOR="edge.bundle.label.background.color",ss.EDGE_BUNDLE_LABEL_BACKGROUND_GRADIENT="edge.bundle.label.background.gradient",ss.EDGE_BUNDLE_LABEL_ROTATABLE="edge.bundle.label.rotatable",ss.EDGE_WIDTH="edge.width",ss.EDGE_COLOR="edge.color",ss.EDGE_OUTLINE="edge.outline",ss.EDGE_OUTLINE_STYLE="edge.outline.style",ss.EDGE_LINE_DASH="edge.line.dash",ss.EDGE_LINE_DASH_OFFSET="edge.line.dash.offset",ss.EDGE_FROM_OFFSET="edge.from.offset",ss.EDGE_TO_OFFSET="edge.to.offset",ss.EDGE_FILL_COLOR="edge.fill.color",ss.EDGE_BUNDLE_TYPE="edge.bundle.type",ss.EDGE_BUNDLE_GAP="edge.bundle.gap",ss.EDGE_LOOPED_EXTAND="edge.looped.extand",ss.EDGE_EXTEND="edge.extend",ss.EDGE_CONTROL_POINT="edge.control.point",ss.EDGE_SPLIT_BY_PERCENT="edge.split.by.percent",ss.EDGE_SPLIT_PERCENT="edge.split.percent",ss.EDGE_SPLIT_VALUE="edge.split.value",ss.EDGE_CORNER="edge.corner",ss.EDGE_CORNER_RADIUS="edge.corner.radius",ss.EDGE_FROM_AT_EDGE="edge.from.at.edge",ss.EDGE_TO_AT_EDGE="edge.to.at.edge",ss.EDGE_FROM_PORT="edge.from.port",ss.EDGE_TO_PORT="edge.to.port",ss.ARROW_FROM="arrow.from",ss.ARROW_FROM_SIZE="arrow.from.size",ss.ARROW_FROM_OFFSET="arrow.from.offset",ss.ARROW_FROM_STROKE="arrow.from.stroke",ss.ARROW_FROM_STROKE_STYLE="arrow.from.stroke.style",ss.ARROW_FROM_OUTLINE="arrow.from.outline",ss.ARROW_FROM_OUTLINE_STYLE="arrow.from.outline.style",ss.ARROW_FROM_LINE_DASH="arrow.from.line.dash",ss.ARROW_FROM_LINE_DASH_OFFSET="arrow.from.line.dash.offset",ss.ARROW_FROM_FILL_COLOR="arrow.from.fill.color",ss.ARROW_FROM_FILL_GRADIENT="arrow.from.fill.gradient",ss.ARROW_FROM_LINE_CAP="arrow.from.line.cap",ss.ARROW_FROM_LINE_JOIN="arrow.from.line.join",ss.ARROW_TO="arrow.to",ss.ARROW_TO_SIZE="arrow.to.size",ss.ARROW_TO_OFFSET="arrow.to.offset",ss.ARROW_TO_STROKE="arrow.to.stroke",ss.ARROW_TO_STROKE_STYLE="arrow.to.stroke.style",ss.ARROW_TO_OUTLINE="arrow.to.outline",ss.ARROW_TO_OUTLINE_STYLE="arrow.to.outline.style",ss.ARROW_TO_LINE_DASH="arrow.to.line.dash",ss.ARROW_TO_LINE_DASH_OFFSET="arrow.to.line.dash.offset",ss.ARROW_TO_FILL_COLOR="arrow.to.fill.color",ss.ARROW_TO_FILL_GRADIENT="arrow.to.fill.gradient",ss.ARROW_TO_LINE_CAP="arrow.to.line.cap",ss.ARROW_TO_LINE_JOIN="arrow.to.line.join";var rs=new ns,os=Le.PROPERTY_TYPE_ACCESSOR,hs=Le.PROPERTY_TYPE_STYLE;rs._2h(hs,ss.SELECTION_TYPE,null,"selectionType"),rs._2h(hs,ss.SELECTION_BORDER,null,"selectionBorder"),rs._2h(hs,ss.SELECTION_SHADOW_BLUR,null,"selectionShadowBlur"),rs._2h(hs,ss.SELECTION_COLOR,null,"selectionColor"),rs._2h(hs,ss.SELECTION_SHADOW_OFFSET_X,null,"selectionShadowOffsetX"),rs._2h(hs,ss.SELECTION_SHADOW_OFFSET_Y,null,"selectionShadowOffsetY"),rs._2h(os,"name","label","data"),rs._2h(hs,ss.LABEL_VISIBLE,"label","visible"),rs._2h(hs,ss.LABEL_POSITION,"label","position"),rs._2h(hs,ss.LABEL_ANCHOR_POSITION,"label","anchorPosition"),rs._2h(hs,ss.LABEL_COLOR,"label","color"),rs._2h(hs,ss.LABEL_FONT_SIZE,"label","fontSize"),rs._2h(hs,ss.LABEL_BORDER,"label","border"),rs._2h(hs,ss.LABEL_BORDER_LINE_DASH,"label","borderLineDash"),rs._2h(hs,ss.LABEL_BORDER_LINE_DASH_OFFSET,"label","borderLineDashOffset"),rs._2h(hs,ss.LABEL_BORDER_STYLE,"label","borderColor"),rs._2h(hs,ss.LABEL_BACKGROUND_COLOR,"label","backgroundColor"),rs._2h(hs,ss.LABEL_ON_TOP,"label","showOnTop"),rs._2h(hs,ss.SHADOW_BLUR,null,"shadowBlur"),rs._2h(hs,ss.SHADOW_COLOR,null,"shadowColor"),rs._2h(hs,ss.SHADOW_OFFSET_X,null,"shadowOffsetX"),rs._2h(hs,ss.SHADOW_OFFSET_Y,null,"shadowOffsetY"),rs._2h(hs,ss.LABEL_FONT_FAMILY,"label","fontFamily"),rs._2h(hs,ss.LABEL_FONT_STYLE,"label","fontStyle"),rs._2h(hs,ss.LABEL_ALIGN_POSITION,"label","alignPosition"),rs._2h(hs,ss.LABEL_ROTATE,"label","rotate"),rs._2h(hs,ss.LABEL_PADDING,"label","padding"),rs._2h(hs,ss.LABEL_POINTER_WIDTH,"label","pointerWidth"),rs._2h(hs,ss.LABEL_POINTER,"label","showPointer"),rs._2h(hs,ss.LABEL_RADIUS,"label","borderRadius"),rs._2h(hs,ss.LABEL_OFFSET_X,"label","offsetX"),rs._2h(hs,ss.LABEL_OFFSET_Y,"label","offsetY"),rs._2h(hs,ss.LABEL_ROTATABLE,"label","rotatable"),rs._2h(hs,ss.LABEL_BACKGROUND_GRADIENT,"label","backgroundGradient"),rs._2h(hs,ss.LABEL_SIZE,"label","size"),rs._2h(hs,ss.LABEL_SHADOW_BLUR,"label","shadowBlur"),rs._2h(hs,ss.LABEL_SHADOW_COLOR,"label","shadowColor"),rs._2h(hs,ss.LABEL_SHADOW_OFFSET_X,"label","shadowOffsetX"),rs._2h(hs,ss.LABEL_SHADOW_OFFSET_Y,"label","shadowOffsetY"),rs._2h(hs,ss.LABEL_Z_INDEX,"label","zIndex"),rs._2h(hs,ss.RENDER_COLOR,null,"renderColor"),rs._2h(hs,ss.RENDER_COLOR_BLEND_MODE,null,"renderColorBlendMode"),rs._2h(hs,ss.ALPHA,null,"alpha");var as=new ns;as._2h(os,"location"),as._2h(os,"anchorPosition",null,"_2j"),as._2h(os,"rotate",null,"rotate"),as._2h(hs,ss.BACKGROUND_COLOR,null,"backgroundColor"),as._2h(hs,ss.BACKGROUND_GRADIENT,null,"backgroundGradient"),as._2h(hs,ss.PADDING,null,"padding"),as._2h(hs,ss.BORDER,null,"border"),as._2h(hs,ss.BORDER_RADIUS,null,"borderRadius"),as._2h(hs,ss.BORDER_COLOR,null,"borderColor"),as._2h(hs,ss.BORDER_LINE_DASH,null,"borderLineDash"),as._2h(hs,ss.BORDER_LINE_DASH_OFFSET,null,"borderLineDashOffset"),as._2h(os,"image","image","data","_m38"),as._2h(os,"size","image","size"),as._2h(hs,ss.SHAPE_STROKE,"image","lineWidth"),as._2h(hs,ss.SHAPE_STROKE_STYLE,"image","strokeStyle"),as._2h(hs,ss.SHAPE_FILL_COLOR,"image","fillColor"),as._2h(hs,ss.LAYOUT_BY_PATH,"image","layoutByPath"),as._2h(hs,ss.IMAGE_ADJUST,"image","adjustType"),as._2h(hs,ss.SHAPE_OUTLINE,"image","outline"),as._2h(hs,ss.SHAPE_OUTLINE_STYLE,"image","outlineStyle"),as._2h(hs,ss.SHAPE_FILL_GRADIENT,"image","fillGradient"),as._2h(hs,ss.SHAPE_LINE_DASH,"image","lineDash"),as._2h(hs,ss.SHAPE_LINE_DASH_OFFSET,"image","lineDashOffset"),as._2h(hs,ss.LINE_CAP,"image","lineCap"),as._2h(hs,ss.LINE_JOIN,"image","lineJoin"),as._2h(hs,ss.IMAGE_BACKGROUND_COLOR,"image","backgroundColor"),as._2h(hs,ss.IMAGE_BACKGROUND_GRADIENT,"image","backgroundGradient"),as._2h(hs,ss.IMAGE_PADDING,"image","padding"),as._2h(hs,ss.IMAGE_BORDER,"image","border"),as._2h(hs,ss.IMAGE_BORDER_RADIUS,"image","borderRadius"),as._2h(hs,ss.IMAGE_BORDER_COLOR,"image","borderColor"),as._2h(hs,ss.IMAGE_BORDER_LINE_DASH,"image","borderLineDash"),as._2h(hs,ss.IMAGE_BORDER_LINE_DASH_OFFSET,"image","borderLineDashOffset"),as._2h(hs,ss.IMAGE_Z_INDEX,"image","zIndex"),as._2h(hs,ss.IMAGE_ALPHA,"image","alpha"),as._2h(os,"expanded",null,null,"checkBody"),as._2h(os,"enableSubNetwork",null,null,"checkBody");var ls=new ns;ls._2h(os,"groupType",null,null,"_5j"),ls._2h(os,"groupImage",null,null,"_5j"),ls._2h(os,"minSize",null,null,"_5j"),ls._2h(os,"padding",null,null,"_5j"),ls._2h(hs,ss.GROUP_BACKGROUND_COLOR,"shape","fillColor"),ls._2h(hs,ss.GROUP_BACKGROUND_GRADIENT,"shape","fillGradient"),ls._2h(hs,ss.GROUP_STROKE,"shape","lineWidth"),ls._2h(hs,ss.GROUP_STROKE_STYLE,"shape","strokeStyle"),ls._2h(hs,ss.GROUP_STROKE_LINE_DASH,"shape","lineDash"),ls._2h(hs,ss.GROUP_STROKE_LINE_DASH_OFFSET,"shape","lineDashOffset"),ls._2h(hs,ss.GROUP_RADIUS,null,null,"_5j");var _s=new ns;_s._2h(os,"from","shape",null,"_3y"),_s._2h(os,"to","shape",null,"_3y"),_s._2h(os,"edgeType","shape",null,"_3y"),_s._2h(hs,ss.EDGE_EXTEND,"shape",null,"_3y"),_s._2h(hs,ss.EDGE_BUNDLE_TYPE,"shape",null,"_3y"),_s._2h(hs,ss.EDGE_WIDTH,"shape","lineWidth"),_s._2h(hs,ss.EDGE_COLOR,"shape","strokeStyle"),_s._2h(hs,ss.ARROW_FROM,"shape","fromArrow"),_s._2h(hs,ss.ARROW_TO,"shape","toArrow"),_s._2h(hs,ss.LINE_DASH_CAP,"shape","lineDashCap"),_s._2h(hs,ss.LINE_DASH_JOIN,"shape","lineDashJoin"),_s._2h(hs,ss.EDGE_FILL_COLOR,"shape","lineFillColor"),_s._2h(hs,ss.EDGE_FROM_AT_EDGE,null,"fromAtEdge","_3y"),_s._2h(hs,ss.EDGE_TO_AT_EDGE,null,"toAtEdge","_3y"),_s._2h(hs,ss.EDGE_OUTLINE,"shape","outline"),_s._2h(hs,ss.EDGE_OUTLINE_STYLE,"shape","outlineStyle"),_s._2h(hs,ss.EDGE_LINE_DASH,"shape","lineDash"),_s._2h(hs,ss.EDGE_LINE_DASH_OFFSET,"shape","lineDashOffset"),_s._2h(hs,ss.EDGE_CONTROL_POINT,"shape",null,"_3y"),_s._2h(hs,ss.EDGE_FROM_OFFSET,"shape",null,"_3y"),_s._2h(hs,ss.EDGE_TO_OFFSET,"shape",null,"_3y"),_s._2h(hs,ss.EDGE_FROM_PORT,"shape",null,"_3y"),_s._2h(hs,ss.EDGE_TO_PORT,"shape",null,"_3y"),_s._2h(hs,ss.LINE_CAP,"shape","lineCap"),_s._2h(hs,ss.LINE_JOIN,"shape","lineJoin"),_s._2h(os,"path.segment",null,null,"_3y",!0),_s._2h(os,"angle",null,null,"_3y",!0),_s._2h(hs,ss.ARROW_FROM_SIZE,"shape","fromArrowSize"),_s._2h(hs,ss.ARROW_FROM_OFFSET,"shape","fromArrowOffset"),_s._2h(hs,ss.ARROW_FROM_STROKE,"shape","fromArrowStroke"),_s._2h(hs,ss.ARROW_FROM_STROKE_STYLE,"shape","fromArrowStrokeStyle"),_s._2h(hs,ss.ARROW_FROM_OUTLINE,"shape","fromArrowOutline"),_s._2h(hs,ss.ARROW_FROM_OUTLINE_STYLE,"shape","fromArrowOutlineStyle"),_s._2h(hs,ss.ARROW_FROM_FILL_COLOR,"shape","fromArrowFillColor"),_s._2h(hs,ss.ARROW_FROM_FILL_GRADIENT,"shape","fromArrowFillGradient"),_s._2h(hs,ss.ARROW_FROM_LINE_DASH,"shape","fromArrowLineDash"),_s._2h(hs,ss.ARROW_FROM_LINE_DASH_OFFSET,"shape","fromArrowLineDashOffset"),_s._2h(hs,ss.ARROW_FROM_LINE_JOIN,"shape","fromArrowLineJoin"),_s._2h(hs,ss.ARROW_FROM_LINE_CAP,"shape","fromArrowLineCap"),_s._2h(hs,ss.ARROW_TO_SIZE,"shape","toArrowSize"),_s._2h(hs,ss.ARROW_TO_OFFSET,"shape","toArrowOffset"),_s._2h(hs,ss.ARROW_TO_STROKE,"shape","toArrowStroke"),_s._2h(hs,ss.ARROW_TO_STROKE_STYLE,"shape","toArrowStrokeStyle"),_s._2h(hs,ss.ARROW_TO_OUTLINE,"shape","toArrowOutline"),_s._2h(hs,ss.ARROW_TO_OUTLINE_STYLE,"shape","toArrowOutlineStyle"),_s._2h(hs,ss.ARROW_TO_FILL_COLOR,"shape","toArrowFillColor"),_s._2h(hs,ss.ARROW_TO_FILL_GRADIENT,"shape","toArrowFillGradient"),_s._2h(hs,ss.ARROW_TO_LINE_DASH,"shape","toArrowLineDash"),_s._2h(hs,ss.ARROW_TO_LINE_DASH_OFFSET,"shape","toArrowLineDashOffset"),_s._2h(hs,ss.ARROW_TO_LINE_JOIN,"shape","toArrowLineJoin"),_s._2h(hs,ss.ARROW_TO_LINE_CAP,"shape","toArrowLineCap");var us=new ns;us._2h(hs,ss.EDGE_BUNDLE_LABEL_COLOR,"bundleLabel","color"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_POSITION,"bundleLabel","position"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_ANCHOR_POSITION,"bundleLabel","anchorPosition"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_FONT_SIZE,"bundleLabel","fontSize"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_ROTATABLE,"bundleLabel","rotatable"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_ROTATE,"bundleLabel","rotate"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_FONT_FAMILY,"bundleLabel","fontFamily"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_FONT_STYLE,"bundleLabel","fontStyle"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_PADDING,"bundleLabel","padding"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_POINTER_WIDTH,"bundleLabel","pointerWidth"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_POINTER,"bundleLabel","showPointer"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_RADIUS,"bundleLabel","borderRadius"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_OFFSET_X,"bundleLabel","offsetX"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_OFFSET_Y,"bundleLabel","offsetY"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_BORDER,"bundleLabel","border"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_BORDER_STYLE,"bundleLabel","borderColor"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_BACKGROUND_COLOR,"bundleLabel","backgroundColor"),us._2h(hs,ss.EDGE_BUNDLE_LABEL_BACKGROUND_GRADIENT,"bundleLabel","backgroundGradient");var cs=new ns;function ds(t,e){return(t=t.zIndex)==(e=e.zIndex)?0:(e=e||0)<(t=t||0)?1:t<e?-1:void 0}cs._2h(os,"location"),cs._2h(hs,ss.BACKGROUND_COLOR,null,"backgroundColor"),cs._2h(hs,ss.BACKGROUND_GRADIENT,null,"backgroundGradient"),cs._2h(hs,ss.PADDING,null,"padding"),cs._2h(hs,ss.BORDER,null,"border"),cs._2h(hs,ss.BORDER_RADIUS,null,"borderRadius"),cs._2h(hs,ss.BORDER_COLOR,null,"borderColor"),cs._2h(hs,ss.BORDER_LINE_DASH,null,"borderLineDash"),cs._2h(hs,ss.BORDER_LINE_DASH_OFFSET,null,"borderLineDashOffset"),cs._2h(os,"rotate",null,"rotate"),cs._2h(os,"path.segment",null,null,"invalidateShape"),cs._2h(os,"path","image","data"),cs._2h(os,"size","image","size"),cs._2h(hs,ss.SHAPE_STROKE,"image","lineWidth"),cs._2h(hs,ss.SHAPE_STROKE_STYLE,"image","strokeStyle"),cs._2h(hs,ss.SHAPE_FILL_COLOR,"image","fillColor"),cs._2h(hs,ss.SHAPE_FILL_GRADIENT,"image","fillGradient"),cs._2h(hs,ss.LINE_DASH_CAP,"image","lineDashCap"),cs._2h(hs,ss.LINE_DASH_JOIN,"image","lineDashJoin"),cs._2h(hs,ss.SHAPE_LINE_FILL_COLOR,"image","lineFillColor"),cs._2h(hs,ss.SHAPE_OUTLINE,"image","outline"),cs._2h(hs,ss.SHAPE_OUTLINE_STYLE,"image","outlineStyle"),cs._2h(hs,ss.SHAPE_LINE_DASH,"image","lineDash"),cs._2h(hs,ss.SHAPE_LINE_DASH_OFFSET,"image","lineDashOffset"),cs._2h(hs,ss.LINE_CAP,"image","lineCap"),cs._2h(hs,ss.LINE_JOIN,"image","lineJoin"),cs._2h(hs,ss.LAYOUT_BY_PATH,"image","layoutByPath"),cs._2h(hs,ss.IMAGE_BACKGROUND_COLOR,"image","backgroundColor"),cs._2h(hs,ss.IMAGE_BACKGROUND_GRADIENT,"image","backgroundGradient"),cs._2h(hs,ss.IMAGE_PADDING,"image","padding"),cs._2h(hs,ss.IMAGE_BORDER,"image","border"),cs._2h(hs,ss.IMAGE_BORDER_RADIUS,"image","borderRadius"),cs._2h(hs,ss.IMAGE_BORDER_COLOR,"image","borderColor"),cs._2h(hs,ss.IMAGE_BORDER_LINE_DASH,"image","borderLineDash"),cs._2h(hs,ss.IMAGE_BORDER_LINE_DASH_OFFSET,"image","borderLineDashOffset"),cs._2h(hs,ss.ARROW_FROM,"image","fromArrow"),cs._2h(hs,ss.ARROW_FROM_SIZE,"image","fromArrowSize"),cs._2h(hs,ss.ARROW_FROM_OFFSET,"image","fromArrowOffset"),cs._2h(hs,ss.ARROW_FROM_STROKE,"image","fromArrowStroke"),cs._2h(hs,ss.ARROW_FROM_STROKE_STYLE,"image","fromArrowStrokeStyle"),cs._2h(hs,ss.ARROW_FROM_FILL_COLOR,"image","fromArrowFillColor"),cs._2h(hs,ss.ARROW_FROM_FILL_GRADIENT,"image","fromArrowFillGradient"),cs._2h(hs,ss.ARROW_FROM_LINE_DASH,"image","fromArrowLineDash"),cs._2h(hs,ss.ARROW_FROM_LINE_DASH_OFFSET,"image","fromArrowLineDashOffset"),cs._2h(hs,ss.ARROW_FROM_LINE_JOIN,"image","fromArrowLineJoin"),cs._2h(hs,ss.ARROW_FROM_LINE_CAP,"image","fromArrowLineCap"),cs._2h(hs,ss.ARROW_TO_SIZE,"image","toArrowSize"),cs._2h(hs,ss.ARROW_TO_OFFSET,"image","toArrowOffset"),cs._2h(hs,ss.ARROW_TO,"image","toArrow"),cs._2h(hs,ss.ARROW_TO_STROKE,"image","toArrowStroke"),cs._2h(hs,ss.ARROW_TO_STROKE_STYLE,"image","toArrowStrokeStyle"),cs._2h(hs,ss.ARROW_TO_FILL_COLOR,"image","toArrowFillColor"),cs._2h(hs,ss.ARROW_TO_FILL_GRADIENT,"image","toArrowFillGradient"),cs._2h(hs,ss.ARROW_TO_LINE_DASH,"image","toArrowLineDash"),cs._2h(hs,ss.ARROW_TO_LINE_DASH_OFFSET,"image","toArrowLineDashOffset"),cs._2h(hs,ss.ARROW_TO_LINE_JOIN,"image","toArrowLineJoin"),cs._2h(hs,ss.ARROW_TO_LINE_CAP,"image","toArrowLineCap");var fs=function(t,e){this.uiBounds=new Et,v(this,fs,arguments),this.id=this.$data.id,this.graph=e,this._fr=[],this._m36=new ns};function gs(t,e,i,n){if(n!=Le.PROPERTY_TYPE_ACCESSOR)if(n!=Le.PROPERTY_TYPE_CLIENT){if(n!=Le.PROPERTY_TYPE_STYLE)return!1;t.setStyle(i,e)}else t.set(i,e);else t[i]=e}fs.prototype={syncSelection:!1,graph:null,layoutByAnchorPoint:!1,_m36:null,_fr:null,addChild:function(t,e){t._ja=this,void 0!==e?c(this._fr,t,e):this._fr.push(t),t._ds&&this._m0s(t),this.invalidateChildrenIndex(),this.invalidateSize(),this.$invalidateChild=!0},removeChild:function(t){this._m36.removeBinding(t),t._ja=null,d(this._fr,t),this._j3&&this._j3.remove(t),this.invalidateSize(),this.$invalidateChild=!0},getProperty:function(t,e){return e==Le.PROPERTY_TYPE_STYLE?this.graph.getStyle(this.$data,t):e==Le.PROPERTY_TYPE_CLIENT?this.$data.get(t):this.$data[t]},getStyle:function(t){return this.graph.getStyle(this.$data,t)},_$t:function(t,e,i){var n=this._m36.onBindingPropertyChange(this,t,e,i);return rs.onBindingPropertyChange(this,t,e,i)||n},onPropertyChange:function(t){if("zIndex"==t.kind)return this.invalidateRender(),!0;if("ui"!=t.type)return this._$t(t.kind,t.propertyType||os,t.value);if("invalidate"==t.kind)return this.invalidate(),!0;var e=t.value;return!(!e||!e.ui||("add"==t.kind?this._98(e):"remove"==t.kind&&this.removeChild(e.ui),0))},label:null,initLabel:function(){var t=new Es;t.name="label",this.addChild(t),this.label=t},initialize:function(){this.initLabel(),this.$data._m33&&this.$data._m33.forEach(this._98,this),rs.initBindingProperties(this),this._m36.initBindingProperties(this,!1)},addBinding:function(t,e){if(!e.property)return!1;e.target=t,this._m36._1v(e.property,e)},_fs:function(t,e){var i=this.$data;if(!i._m33)return!1;var n=i._m33.getById(t.id);if(!n||!n.bindingProperties)return!1;var s=n.bindingProperties;if(U(s)){var r=!1;return a(s,function(t){if("data"==t.bindingProperty)return r=gs(i,e,t.property,t.propertyType),!1},this),r}return"data"==s.bindingProperty&&gs(i,e,s.property,s.propertyType)},_98:function(t){var e=t.ui;if(e){var i=t.bindingProperties;i&&(Array.isArray(i)?i.forEach(function(t){this.addBinding(e,t)},this):this.addBinding(e,i)),this.addChild(e)}},validate:function(){return this._m0t||(this.initialize(),this._m0t=!0),this.doValidate()},_$a:!0,invalidateChildrenIndex:function(){this._$a=!0},doValidate:function(){if(this._1e&&(this._1e=!1,this.validateChildren()&&(this.measure(),this.$invalidateSize=!0),this._$a&&(this._$a=!1,R?this._fr=h(this._fr,ds):this._fr.sort(ds))),Ki.call(this)&&(this.$invalidateRotate=!0),this.$invalidateRotate){Qi.call(this),this.uiBounds.setByRect(this._fu);var t=this.$selectionBorder||0,e=Math.max(this.$selectionBorder||0,this.$shadowOffsetX||0,this.$selectionShadowOffsetX||0),i=Math.max(this.$shadowOffsetY||0,this.$selectionShadowOffsetY||0),n=Math.max(t,this.$shadowBlur,this.$selectionShadowBlur),s=(n+=rt.UI_BOUNDS_GROW||0)-e,r=n+e,o=n-i,a=n+i;return s<0&&(s=0),r<0&&(r=0),o<0&&(o=0),a<0&&(a=0),this.uiBounds.grow(o,s,a,r),this.onBoundsChanged&&this.onBoundsChanged(),this.$invalidateBounds=!0}},validateChildren:function(){var t=this.$invalidateChild;this.$invalidateChild=!1;var e=this._m1ody,i=this.bodyChanged;e&&(e.$renderColor=this.$renderColor,e.$renderColorBlendMode=this.$renderColorBlendMode,e.$shadowColor=this.$shadowColor,e.$shadowBlur=this.$shadowBlur,e.$shadowOffsetX=this.$shadowOffsetX,e.$shadowOffsetY=this.$shadowOffsetY),this.bodyChanged=!1,e&&e._1e&&(i=e.validate()||i,e.$x=0,e.$y=0,e.$invalidateRotate&&Qi.call(e),t=!0);for(var n=0,s=this._fr.length;n<s;n++){var r=this._fr[n];if(r!=e){var o=r._1e&&r.validate();(o||i)&&r._hy&&Ji(r,e),!t&&o&&(t=!0)}}return t},measure:function(){var t,e;this._j4.clear();for(var i=0,n=this._fr.length;i<n;i++)(t=this._fr[i])._hy&&((e=t._fu).width<=0||e.height<=0||this._j4.addRect(t.$x+e.x,t.$y+e.y,e.width,e.height))},_j3:null,_m0s:function(t){return this._j3?t.showOnTop?this._j3.add(t):this._j3.remove(t):t.showOnTop?(this._j3=new ot,this._j3.add(t)):void 0},draw:function(t,e,i,n){for(var s,r=0,o=this._fr.length;r<o;r++)(s=this._fr[r])._hy&&!s.showOnTop&&s._jc(t,e,i,this)},_99:function(t,e){if(!this._hy||!this._j3||!this._j3.length)return!1;var i;t.save(),t.translate(this.$x,this.$y),this.$rotatable&&this.$_hostRotate&&t.rotate(this.$_hostRotate),(this.offsetX||this.offsetY)&&t.translate(this.offsetX,this.offsetY),this.$rotate&&t.rotate(this.$rotate),this.$layoutByAnchorPoint&&this._m0v&&t.translate(-this._m0v.x,-this._m0v.y),this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur*e,t.shadowOffsetX=this.shadowOffsetX*e,t.shadowOffsetY=this.shadowOffsetY*e),t.beginPath();for(var n=0,s=this._fr.length;n<s;n++)(i=this._fr[n])._hy&&i.showOnTop&&i._jc(t,e,this.selected,this);t.restore()},doHitTest:function(t,e,i){if(i){if(!this._j4.intersectsRect(t-i,e-i,2*i,2*i))return!1}else if(!this._j4.intersectsPoint(t,e))return!1;return this.hitTestChildren(t,e,i)},hitTestChildren:function(t,e,i){for(var n,s=this._fr.length-1;0<=s;s--)if((n=this._fr[s])._hy&&n.hitTest(t,e,i))return n;return!1},destroy:function(){this._i1ed=!0;for(var t=this._fr.length-1;0<=t;t--)this._fr[t].destroy()}},g(fs,Jn),tt(fs.prototype,{renderColorBlendMode:{get:function(){return this.$renderColorBlendMode},set:function(t){this.$renderColorBlendMode=t,this._1e=!0,this.body&&(this.body.renderColorBlendMode=this.$renderColorBlendMode)}},renderColor:{get:function(){return this.$renderColor},set:function(t){this.$renderColor=t,this._1e=!0,this.body&&(this.body.renderColor=this.$renderColor)}},bodyBounds:{get:function(){if(this.$invalidateBounds){this.$invalidateBounds=!1;var t,e=this.body;t=e&&e._hy&&!this._$o()?e._fu.clone():this._83.clone(),this.rotate&&(t.original=t.clone(),t.rotate=this.rotate,t.tx=this.x,t.ty=this.y,Ie(t,this.rotate,t)),t.x+=this.$x,t.y+=this.$y,this._m3d=t}return this._m3d}},bounds:{get:function(){return new Et((this.$x||0)+this.uiBounds.x,(this.$y||0)+this.uiBounds.y,this.uiBounds.width,this.uiBounds.height)}},body:{get:function(){return this._m1ody},set:function(t){t&&this._m1ody!=t&&(this._m1ody=t,this.bodyChanged=!0,this.invalidateSize())}}}),rt.UI_BOUNDS_GROW=1;var vs=function(t){v(this,vs,arguments)};vs.prototype={strokeStyle:"#000",lineWidth:0,fillColor:null,fillGradient:null,_j6:1,_j8:1,outline:0,onDataChanged:function(t,e){E(this,vs,"onDataChanged",arguments),this._k6&&this._7w&&this._k6._6h(this._7w,this),t&&this._m38(t)},_m38:function(t){this._k6=vi(t),this._k6.validate(),this._k6._kv!=ai&&!this._k6._6f()||(this._7w||(this._7w=function(t){this.invalidateData(),this._ja&&this._ja.graph&&(this._ja.invalidateSize(),this._ja.graph.invalidate())}),this._k6._m0i(this._7w,this))},_k6:null,initialize:function(){this._m38(this.$data)},_5f:function(){return this._k6&&this._k6.draw},_9u:function(t){if(!t||t.width<=0||t.height<=0||!this.$size||!(this.size instanceof Object))return this._j6=1,void(this._j8=1);var e=this.size.width,i=this.size.height;if(null==e&&(e=-1),null==i&&(i=-1),e<0&&i<0)return this._j6=1,void(this._j8=1);var n,s,r=t.width,o=t.height;0<=e&&(n=e/r),0<=i&&(s=i/o),e<0?n=s:i<0&&(s=n),this._j6=n,this._j8=s},validateSize:function(){if(this.$invalidateScale){this.$invalidateScale=!1;var t=this._originalBounds;this._j6,this._j8,this._9u(t),this.setMeasuredBounds(t.width*this._j6,t.height*this._j8,t.x*this._j6,t.y*this._j8)}},measure:function(){var t=this._k6.getBounds(this.lineWidth+this.outline);if(t)return this.$invalidateScale=!0,void(this._originalBounds=t.clone());this._j4.set(0,0,0,0)},onBoundsChanged:function(){this.$invalidateFillGradient=!0},_1n:function(){this.$invalidateFillGradient=!1,this.fillGradient?this._fillGradient=mi.prototype.generatorGradient.call(this.$fillGradient,this._83):this._fillGradient=null},_jz:function(t){var e,i;if("flip"==this.$adjustType)i=-(e=1);else{if("mirror"!=this.$adjustType)return;e=-1,i=1}var n=this._j4.cx,s=this._j4.cy;t.translate(n,s),t.scale(e,i),t.translate(-n,-s)},draw:function(t,e,i,n){if(this._j6&&this._j8){if(this.$invalidateFillGradient&&this._1n(),t.save(),this.$adjustType&&this._jz(t),this._k6._kv==_i)return t.scale(this._j6,this._j8),this._k6._kt.draw(t,e,this,i,n||this),void t.restore();i&&this._85(t,e,n),this._k6.draw(t,e,this,this._j6,this._j8),t.restore()}},doHitTest:function(t,e,i){if(this._k6.hitTest){"flip"==this.$adjustType?e=2*this._j4.cy-e:"mirror"==this.$adjustType&&(t=2*this._j4.cx-t),t/=this._j6,e/=this._j8;var n=(this._j6+this._j8)/2;return 1<n&&(i/=n,i|=0),this._k6._kt instanceof Mi?this._k6._kt.hitTest(t,e,i,!0,this.$lineWidth,this.$fillColor||this.$fillGradient):this._k6.hitTest(t,e,i)}return!0},$invalidateScale:!0,$invalidateFillGradient:!0},g(vs,Jn),es(vs.prototype,{adjustType:{},fillColor:{},size:{validateFlags:["Size","Scale"]},fillGradient:{validateFlags:["FillGradient"]}}),tt(vs.prototype,{originalBounds:{get:function(){return this._originalBounds}}}),rt.ALIGN_POSITION=mt.CENTER_MIDDLE;var Es=function(t){v(this,Es,arguments),this.color=rt.LABEL_COLOR};Es.prototype={color:rt.LABEL_COLOR,showPointer:!0,fontSize:null,fontFamily:null,fontStyle:null,_h2:null,alignPosition:null,measure:function(){this.$data=""+this.$data,this.font;var t=function t(e,i,n,s,r,o){if(!e)return{width:0,height:0};if(i=i||rt.FONT_SIZE,Me&&i<9){var h=i/9,a=t(e,9,n,s,r);return a.width*=h,a.height*=h,a}var l=ke();l.font=o||Be(n,i,s);for(var _=i*(r=r||rt.LINE_HEIGHT),u=0,c=0,d=e.split("\n"),f=0,g=d.length;f<g;f++){var v=d[f];u=Math.max(l.measureText(v).width,u),c+=_}return{width:u,height:c}}(this.$data,this.$fontSize,this.$fontFamily,this.$fontStyle,rt.LINE_HEIGHT,this.$font);if(this._h2=t,this.$size){var e=this.$size.width||0,i=this.$size.height||0;return this.setMeasuredBounds(e>t.width?e:t.width,i>t.height?i:t.height)}return this.setMeasuredBounds(t.width,t.height)},doHitTest:function(t,e,i){return!!this.$data&&function(t,e,i,n){return i<1&&(i=1),function(t,e,i,n,s){var r=ke(i=Math.round(i)||1,n=Math.round(n)||1);r.setTransform(1,0,0,1,-t,-e),s.draw(r);var o=Ge(r,0,0,i,n);if(!o)return!1;for(var h=(o=o.data).length/4;0<h--;)if(o[4*h-1]>ki)return!0;return!1}(t-i,e-i,2*i,2*i,n)}(t,e,i,this)},draw:function(t,e,i,n){if(i&&this._85(t,e,n),this.$fontSize||rt.FONT_SIZE,this.$rotatable&&this.$_hostRotate){var s=ti(this.$_hostRotate);ht<s&&s<3*ht&&(t.translate(this._j4.width/2,this._j4.height/2),t.rotate(Math.PI),t.translate(-this._j4.width/2,-this._j4.height/2))}var r=this.alignPosition||rt.ALIGN_POSITION,o=r.horizontalPosition,h=r.verticalPosition,a=0;"c"==o?(o="center",a+=this._j4.width/2):o==Tt?(o="right",a+=this._j4.width):o="left";var l=0;"m"==h?l=(this._j4.height-this._h2.height)/2:h==Ot&&(l=this._j4.height-this._h2.height),t.fillStyle=this.color,function(t,e,i,n,s,r,o,h,a,l){if(t.save(),t.translate(i,n),Me&&o<9){var _=o/9;t.scale(_,_),o=9,l=null}a=a||rt.LINE_HEIGHT,a*=o=o||rt.FONT_SIZE,t.font=l||Be(r,o,h),t.textAlign=s,t.textBaseline="middle";for(var u=a/2,c=e.split("\n"),d=0,f=c.length;d<f;d++){var g=c[d];t.fillText(g,0,u),u+=a}t.restore()}(t,this.$data,a,l,o,this.$fontFamily,this.$fontSize,this.$fontStyle,rt.LINE_HEIGHT,this.$font)},_5f:function(){return null!=this.$data||this.$size},$invalidateFont:!0},g(Es,Jn),es(Es.prototype,{size:{validateFlags:["Data"]},fontStyle:{validateFlags:["Data","Font"]},fontSize:{validateFlags:["Data","Font"]},fontFamily:{validateFlags:["Data","Font"]}}),tt(Es.prototype,{font:{get:function(){return this.$invalidateFont&&(this.$invalidateFont=!1,this.$font=(this.$fontStyle||rt.FONT_STYLE)+" "+(this.$fontSize||rt.FONT_SIZE)+"px "+(this.$fontFamily||rt.FONT_FAMILY)),this.$font}}});var ps=function(t){t=t||new Mi,this.pathBounds=new Et,v(this,ps,[t])};function ms(t,e){v(this,ms,arguments)}function ys(t,e){v(this,ys,arguments)}ps.prototype={layoutByPath:!0,layoutByAnchorPoint:!1,measure:function(){this.$invalidateFromArrow=!0,this.$invalidateToArrow=!0,this.$data.getBounds(this.$lineWidth+this.$outline,this.pathBounds),this.setMeasuredBounds(this.pathBounds)},validateSize:function(){if(this.$invalidateFromArrow||this.$invalidateToArrow){var t,e=this.pathBounds.clone();this.$invalidateFromArrow&&(this.$invalidateFromArrow=!1,(t=this.validateFromArrow())&&e.add(t)),this.$invalidateToArrow&&(this.$invalidateToArrow=!1,(t=this.validateToArrow())&&e.add(t)),this.setMeasuredBounds(e)}},validateFromArrow:function(){if(this.$data._jl&&this.$fromArrow){var t=this.$data,e=0,i=0,n=this.$fromArrowOffset;n&&(isNaN(n)&&(n.x||n.y)?(e+=n.x||0,i+=n.y||0):e+=n||0,0<e&&e<1&&(e*=t._jl)),this.fromArrowLocation=t.getLocation(e,i),this.fromArrowLocation.rotate=Math.PI+this.fromArrowLocation.rotate||0,this.$fromArrowShape=Ls(this.$fromArrow,this.$fromArrowSize);var s=this.$fromArrowShape.getBounds(this.fromArrowStyles.lineWidth+this.fromArrowStyles.outline);return this.fromArrowFillGradient instanceof we.Gradient?this.fromArrowStyles._fillGradient=mi.prototype.generatorGradient.call(this.fromArrowFillGradient,s):this.fromArrowStyles&&(this.fromArrowStyles._fillGradient=null),s.offset(this.fromArrowLocation.x,this.fromArrowLocation.y),Ce(s,this.fromArrowLocation.rotate,s,this.fromArrowLocation.x,this.fromArrowLocation.y),s}this.$fromArrowShape=null},validateToArrow:function(){if(this.$data._jl&&this.$toArrow){var t=this.$data,e=0,i=0,n=this.$toArrowOffset;n&&(isNaN(n)&&(n.x||n.y)?(e+=n.x||0,i+=n.y||0):e+=n||0),e<0&&-1<e&&(e*=t._jl),e+=t._jl,this.toArrowLocation=t.getLocation(e,i),this.$toArrowShape=Ls(this.$toArrow,this.$toArrowSize);var s=this.$toArrowShape.getBounds(this.toArrowStyles.lineWidth+this.toArrowStyles.outline);return this.toArrowFillGradient instanceof we.Gradient?this.toArrowStyles._fillGradient=mi.prototype.generatorGradient.call(this.toArrowFillGradient,s):this.toArrowStyles&&(this.toArrowStyles._fillGradient=null),s.offset(this.toArrowLocation.x,this.toArrowLocation.y),Ce(s,this.toArrowLocation.rotate,s,this.toArrowLocation.x,this.toArrowLocation.y),s}this.$toArrowShape=null},_29:function(t){var e=t?"from":"to",i=this[e+"ArrowStroke"];void 0===i&&(i=this.$lineWidth);var n=this[e+"ArrowStrokeStyle"];void 0===n&&(n=this.strokeStyle);var s=this[e+"ArrowStyles"];s||(this[e+"ArrowStyles"]=s={}),s.lineWidth=i,s.strokeStyle=n,s.lineDash=this[e+"ArrowLineDash"],s.lineDashOffset=this[e+"ArrowLineDashOffset"],s.fillColor=this[e+"ArrowFillColor"],s.fillGradient=this[e+"ArrowFillGradient"],s.lineCap=this[e+"ArrowLineCap"],s.lineJoin=this[e+"ArrowLineJoin"],s.outline=this[e+"ArrowOutline"]||0,s.outlineStyle=this[e+"ArrowOutlineStyle"]},doValidate:function(){return this.$fromArrow&&this._29(!0),this.$toArrow&&this._29(!1),E(this,ps,"doValidate")},drawArrow:function(t,e,i,n){if(this.$fromArrow&&this.$fromArrowShape){t.save();var s=(h=this.fromArrowLocation).x,r=h.y,o=h.rotate;t.translate(s,r),o&&t.rotate(o),this.$fromArrowShape.draw(t,e,this.fromArrowStyles,i,n),t.restore()}var h;this.$toArrow&&this.$toArrowShape&&(t.save(),s=(h=this.toArrowLocation).x,r=h.y,o=h.rotate,t.translate(s,r),o&&t.rotate(o),this.$toArrowShape.draw(t,e,this.toArrowStyles,i,n),t.restore())},outlineStyle:null,outline:0,onBoundsChanged:function(){this.$invalidateFillGradient=!0},_1n:function(){this.$invalidateFillGradient=!1,this.$fillGradient?this._fillGradient=mi.prototype.generatorGradient.call(this.$fillGradient,this._83):this._fillGradient=null},draw:function(t,e,i,n){this.$invalidateFillGradient&&this._1n(),this.$data.draw(t,e,this,i,n),this.drawArrow(t,e,i,n)},doHitTest:function(t,e,i){if(this.$data.hitTest(t,e,i,!0,this.$lineWidth+this.$outline,this.$fillColor||this.$fillGradient))return!0;if(this.$toArrow&&this.$toArrowShape){var n=t-this.toArrowLocation.x,s=e-this.toArrowLocation.y;this.toArrowLocation.rotate&&(n=(o=Ae(n,s,-this.toArrowLocation.rotate)).x,s=o.y);var r=this.toArrowStyles.fillColor||this.toArrowStyles.fillGradient;if(this.$toArrowShape.hitTest(n,s,i,!0,this.toArrowStyles.lineWidth,r))return!0}var o;return!!(this.$fromArrow&&this.$fromArrowShape&&(n=t-this.fromArrowLocation.x,s=e-this.fromArrowLocation.y,this.fromArrowLocation.rotate&&(n=(o=Ae(n,s,-this.fromArrowLocation.rotate)).x,s=o.y),r=this.fromArrowStyles.fillColor||this.fromArrowStyles.fillGradient,this.$fromArrowShape.hitTest(n,s,i,!0,this.fromArrowStyles.lineWidth,r)))},$fromArrowOutline:0,$toArrowOutline:0,$invalidateFillGradient:!0,$invalidateFromArrow:!0,$invalidateToArrow:!0},g(ps,Jn),es(ps.prototype,{strokeStyle:{validateFlags:["FromArrow","ToArrow"]},fillColor:{},fillGradient:{validateFlags:["FillGradient"]},fromArrowOffset:{validateFlags:["FromArrow","Size"]},fromArrowSize:{validateFlags:["FromArrow","Size"]},fromArrow:{validateFlags:["FromArrow","Size"]},fromArrowOutline:{validateFlags:["FromArrow","Size"]},fromArrowStroke:{validateFlags:["FromArrow","Size"]},fromArrowStrokeStyle:{validateFlags:["FromArrow"]},toArrowOffset:{validateFlags:["ToArrow","Size"]},toArrowSize:{validateFlags:["ToArrow","Size"]},toArrow:{validateFlags:["ToArrow","Size"]},toArrowOutline:{validateFlags:["ToArrow","Size"]},toArrowStroke:{validateFlags:["ToArrow","Size"]},toArrowStrokeStyle:{validateFlags:["ToArrow"]},outline:{value:0,validateFlags:["Data"]}}),tt(ps.prototype,{length:{get:function(){return this.data.length}}}),ms.prototype={shape:null,path:null,initialize:function(){E(this,ms,"initialize"),this.path=new Mi,this.path._e4=!1,this.shape=new ps(this.path),this.addChild(this.shape,0),this._m1ody=this.shape,_s.initBindingProperties(this)},_1c:!0,_5d:null,_$o:function(){return!1},_3x:function(){return!1},validatePoints:function(){this.shape.invalidateData();var t=this.$data,e=this.path;e.clear();var i=t.fromAgent,n=t.toAgent;i&&n&&function(t,e,i,n,s){var r=n==s,o=t.graph.getUI(n),h=r?o:t.graph.getUI(s);if(o&&h){var a=e.edgeType,l=t.getEndPointBounds(o),_=r?l:t.getEndPointBounds(h),u=e.hasPathSegments();if(r&&!u)return t.drawLoopedEdge(t.path,o,a,l);var c=function(t,e,i){var n=o.getPortPoint(t.getStyle(ss.EDGE_FROM_PORT),i),s=t.getStyle(ss.EDGE_FROM_OFFSET);return s&&(n.x+=s.x||0,n.y+=s.y||0),n}(t,0,l),d=function(t,e,i){var n=h.getPortPoint(t.getStyle(ss.EDGE_TO_PORT),i),s=t.getStyle(ss.EDGE_TO_OFFSET);return s&&(n.x+=s.x||0,n.y+=s.y||0),n}(t,0,_);if(!r&&!a&&!u){var f=n.busLayout;if(f!=s.busLayout){var g,v,E,p;p=f?(g=o,v=l,E=h,_):(g=h,v=_,E=o,l);var m=function(t,e,i,n,s,r){var o=s.cx,h=s.cy,a=Math.cos(r),l=Math.sin(r),_=Cs(e,t,{x:o,y:h},-a,-l);if(!_){var u=o<t.x,c=o>t.right,d=h<t.y,f=h>t.bottom,g=t.cx,v=t.cy,E=u||c,p=d||f;r=Math.atan2(h-v,o-g),E||p||(r+=Math.PI),_=Cs(e,t,{x:o,y:h},-(a=Math.cos(r)),-(l=Math.sin(r)))||{x:g,y:v}}var m=Cs(n,s,{x:_.x,y:_.y},-_.perX||a,-_.perY||l,!1)||{x:o,y:h};return i?[_,m]:[m,_]}(v,g,f,E,p,e.angle);if(m&&2==m.length){var y=m[0],T=m[1];return i.moveTo(y.x,y.y),T.x==y.x&&T.y==y.y&&(T.y+=.01),i.lineTo(T.x,T.y),i._6e=!0}}}t._36(e,i,o,h,a,l,_,c,d),(!r&&!1!==i._g6._linkTerminalPoint||u)&&function(t,e,i,n,s,r,o,h){var a=t.fromAtEdge,l=t.toAtEdge;if(a||l){var _=e._g6;if(_.length){if(a&&Is(i,s,_[0].firstPoint,o,void 0,void 0),l){var u,c=_[_.length-1],d=c.lastPoint,f=c.points.length,g=c.invalidTerminal||void 0===d.x||void 0===d.y;4<=f&&(g||r.contains(d.x,d.y))&&(g||(h=d),u=!0,d={x:c.points[f-4],y:c.points[f-3]},r.contains(d.x,d.y)&&(h=d,6<=f?(d={x:c.points[f-6],y:c.points[f-5]},c.points=c.points.slice(0,4),c.type=Ci):1==_.length?(d={x:o.x,y:o.y},c.points=c.points.slice(0,2),c.type=Ii):d=(c=_[_.length-2]).lastPoint)),Is(n,r,d,h,void 0,void 0),u&&(f=c.points.length,c.points[f-2]=h.x,c.points[f-1]=h.y,h=null)}}else{var v=Math.atan2(h.y-o.y,h.x-o.x),E=Math.cos(v),p=Math.sin(v);a&&Is(i,s,h,o,E,p),l&&Is(n,r,o,h,-E,-p)}Ss(e._g6,o,h)}else Ss(e._g6,o,h)}(t,i,o,h,l,_,c,d),delete i._g6._linkTerminalPoint,i._6e=!0}}(this,t,e,i,n)},getEndPointBounds:function(t){return t.getLinkableBounds()},_36:function(t,e,i,n,s,r,o,h,a){t.hasPathSegments()?e.segments=t.pathSegments.toDatas():i!=n?this.drawEdge(e,i,n,s,r,o,h,a):this.drawLoopedEdge(e,i,s,r,h,a)},drawLoopedEdge:function(t,e,i,n,s,r){!function(t,e,i){var n=t.getStyle(ss.EDGE_LOOPED_EXTAND),s=t._1x(),r=n+.2*s,o=e.x+e.width-r,h=e.y,a=e.x+e.width,l=e.y+r;n+=s;var _={x:o,y:h},u={x:e.x+e.width+.707*n,y:e.y+-.707*n},c={x:a,y:l},d=_.x,f=u.x,g=c.x,v=_.y,E=u.y,p=c.y,m=((p-v)*(E*E-v*v+f*f-d*d)+(E-v)*(v*v-p*p+d*d-g*g))/(2*(f-d)*(p-v)-2*(g-d)*(E-v)),y=((g-d)*(f*f-d*d+E*E-v*v)+(f-d)*(d*d-g*g+v*v-p*p))/(2*(E-v)*(g-d)-2*(p-v)*(f-d)),T=(r=Math.sqrt((d-m)*(d-m)+(v-y)*(v-y)),Math.atan2(_.y-y,_.x-m)),b=Math.atan2(c.y-y,c.x-m)-T;b<0&&(b+=2*Math.PI),function(t,e,i,n,s,r,o){var h,a,l,_,u,c,d,f,g,v;if(Math.abs(n)>2*Math.PI&&(n=2*Math.PI),h=n/(_=Math.ceil(Math.abs(n)/(Math.PI/4))),a=i,0<_){u=t+Math.cos(a)*s,c=e+Math.sin(a)*r,moveTo?o.moveTo(u,c):o.lineTo(u,c);for(var E=0;E<_;E++)l=(a+=h)-h/2,d=t+Math.cos(a)*s,f=e+Math.sin(a)*r,g=t+Math.cos(l)*(s/Math.cos(h/2)),v=e+Math.sin(l)*(r/Math.cos(h/2)),o.quadTo(g,v,d,f)}}(m,y,T,b,r,r,i)}(this,n,t)},drawEdge:function(t,e,i,n,s,r,o,h){if(n==Le.EDGE_TYPE_ZIGZAG){var a=(o.x+h.x)/2,l=(o.y+h.y)/2,_=o.x-h.x,u=o.y-h.y,f=Math.sqrt(_*_+u*u),g=Math.atan2(u,_);g+=Math.PI/6,30<(f*=.04)&&(f=30);var v=Math.cos(g)*f,E=Math.sin(g)*f;return t.lineTo(a-E,l+v),void t.lineTo(a+E,l-v)}var p=function(t,e,i,n,s,r){if(e.hasPathSegments())return e._9f;var o=e.edgeType;if(function(t){return t==Le.EDGE_TYPE_ORTHOGONAL||t==Le.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||t==Le.EDGE_TYPE_HORIZONTAL_VERTICAL||t==Le.EDGE_TYPE_ORTHOGONAL_VERTICAL||t==Le.EDGE_TYPE_VERTICAL_HORIZONTAL||t==Le.EDGE_TYPE_EXTEND_TOP||t==Le.EDGE_TYPE_EXTEND_LEFT||t==Le.EDGE_TYPE_EXTEND_BOTTOM||t==Le.EDGE_TYPE_EXTEND_RIGHT||t==Le.EDGE_TYPE_ELBOW||t==Le.EDGE_TYPE_ELBOW_HORIZONTAL||t==Le.EDGE_TYPE_ELBOW_VERTICAL}(o)){var h=function(t,e,i,n,s,r){var o=function(t,e,i){if(null!=t){if(t==Le.EDGE_TYPE_ELBOW_HORIZONTAL||t==Le.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||t==Le.EDGE_TYPE_HORIZONTAL_VERTICAL||t==Le.EDGE_TYPE_EXTEND_LEFT||t==Le.EDGE_TYPE_EXTEND_RIGHT)return!0;if(t==Le.EDGE_TYPE_ELBOW_VERTICAL||t==Le.EDGE_TYPE_ORTHOGONAL_VERTICAL||t==Le.EDGE_TYPE_VERTICAL_HORIZONTAL||t==Le.EDGE_TYPE_EXTEND_TOP||t==Le.EDGE_TYPE_EXTEND_BOTTOM)return!1}var n=function(t,e){return Math.max(t.x+(t.width||0),e.x+(e.width||0))-Math.min(t.x,e.x)-(t.width||0)-(e.width||0)}(e,i);return function(t,e){return Math.max(t.y+(t.height||0),e.y+(e.height||0))-Math.min(t.y,e.y)-(t.height||0)-(e.height||0)}(e,i)<=n}(t,e,i),h=[];return function(t){return t&&(t==Le.EDGE_TYPE_ELBOW||t==Le.EDGE_TYPE_ELBOW_HORIZONTAL||t==Le.EDGE_TYPE_ELBOW_VERTICAL)}(t)?function(t,e,i,n,s,r,o){t?function(t,e,i,n,s,r){var o=e.x+e.width<t.x,h=t.x+t.width<e.x,a=o?t.x:t.x+t.width,l=s.y,_=h?e.x:e.x+e.width,u=r.y,c=n,d=o?-c:c,f=new at(a+d,l),g=new at(_+(d=h?-c:c),u);if(o==h){var v=o?Math.min(a,_)-n:Math.max(a,_)+n;i.push(new at(v,l)),i.push(new at(v,u))}else if(f.x<g.x==o){var E=l+(u-l)/2;i.push(f),i.push(new at(f.x,E)),i.push(new at(g.x,E)),i.push(g)}else i.push(f),i.push(g)}(e,i,n,s,r,o):function(t,e,i,n,s,r){var o=e.y+e.height<t.y,h=t.y+t.height<e.y,a=s.x,l=o?t.y:t.y+t.height,_=r.x,u=h?e.y:e.y+e.height,c=n,d=o?-c:c,f=new at(a,l+d),g=new at(_,u+(d=h?-c:c));if(o==h){var v=o?Math.min(l,u)-n:Math.max(l,u)+n;i.push(new at(a,v)),i.push(new at(_,v))}else if(f.y<g.y==o){var E=a+(_-a)/2;i.push(f),i.push(new at(E,f.y)),i.push(new at(E,g.y)),i.push(g)}else i.push(f),i.push(g)}(e,i,n,s,r,o)}(o,e,i,h,n.getStyle(ss.EDGE_EXTEND),s,r):function(t,e,i,n,s,r,o,h){var a=r.getStyle(ss.EDGE_CONTROL_POINT),l=null==a;if(null!=a){var _=(new Et).union(e).union(i);_.intersects(a)||(s=function(t,e,i,n,s,r){return!(e<i&&n-t<i-e&&t-r<i-e||s<e&&n-t<e-s&&t-r<e-s)}(a.x,a.y,_.y,_.x,_.bottom,_.right))}else a=function(t,e,i,n,s,r,o){if(t==Le.EDGE_TYPE_HORIZONTAL_VERTICAL)return{x:o.x,y:r.y};if(t==Le.EDGE_TYPE_VERTICAL_HORIZONTAL)return{x:r.x,y:o.y};var h;if(function(t){return null!=t&&(t==Le.EDGE_TYPE_EXTEND_TOP||t==Le.EDGE_TYPE_EXTEND_LEFT||t==Le.EDGE_TYPE_EXTEND_BOTTOM||t==Le.EDGE_TYPE_EXTEND_RIGHT)}(t)){var a=Math.min(i.y,n.y),l=Math.min(i.x,n.x),_=Math.max(i.bottom,n.bottom),u=Math.max(i.right,n.right);if(h=s.getStyle(ss.EDGE_EXTEND),t==Le.EDGE_TYPE_EXTEND_TOP)return new at((l+u)/2,a-h);if(t==Le.EDGE_TYPE_EXTEND_LEFT)return new at(l-h,(a+_)/2);if(t==Le.EDGE_TYPE_EXTEND_BOTTOM)return new at((l+u)/2,_+h);if(t==Le.EDGE_TYPE_EXTEND_RIGHT)return new at(u+h,(a+_)/2)}if((h=s.getStyle(ss.EDGE_SPLIT_BY_PERCENT)?function(t,e,i,n){return function(t,e,i,n){return e?bs(t,i.x,i.right,n.x,n.right):bs(t,i.y,i.bottom,n.y,n.bottom)}(n,t,e,i)*n}(e,i,n,s.getStyle(ss.EDGE_SPLIT_PERCENT)):s.getStyle(ss.EDGE_SPLIT_VALUE))==Number.NEGATIVE_INFINITY||h==Number.POSITIVE_INFINITY)return new at(n.x+n.width/2,n.y+n.height/2);if(0==h)return new at(i.x+i.width/2,i.y+i.height/2);if(e){var c=i.x+i.right<n.x+n.right;return new at(Os(c,h,i.x,i.width),i.y+i.height/2)}var d=i.y+i.bottom<n.y+n.bottom;return new at(i.x+i.width/2,Os(d,h,i.y,i.height))}(t,s,e,i,r,o,h);s?function(t,e,i,n,s,r,o){var h=Math.max(t.x,e.x),a=Math.min(t.x+t.width,e.x+e.width),l=null!=i?i.x:a+(h-a)/2,_=r?r.y:t.y+t.height/2,u=o?o.y:e.y+e.height/2;if(0==s&&null!=i&&(i.y>=t.y&&i.y<=t.y+t.height&&(_=i.y),i.y>=e.y&&i.y<=e.y+e.height&&(u=i.y)),ws(e,l,_)||ws(t,l,_)||n.push(new at(l,_)),ws(e,l,u)||ws(t,l,u)||n.push(new at(l,u)),0==n.length)if(null!=i)ws(e,l,i.y)||ws(t,l,i.y)||n.push(new at(l,i.y));else{var c=Math.max(t.y,e.y),d=Math.min(t.y+t.height,e.y+e.height);n.push(new at(l,c+(d-c)/2))}}(e,i,a,n,l,o,h):function(t,e,i,n,s,r,o){var h=Math.max(t.y,e.y),a=Math.min(t.y+t.height,e.y+e.height),l=null!=i?i.y:a+(h-a)/2,_=r?r.x:t.x+t.width/2,u=o?o.x:e.x+e.width/2;if(0==s&&null!=i&&(i.x>=t.x&&i.x<=t.x+t.width&&(_=i.x),i.x>=e.x&&i.x<=e.x+e.width&&(u=i.x)),ws(e,_,l)||ws(t,_,l)||n.push(new at(_,l)),ws(e,u,l)||ws(t,u,l)||n.push(new at(u,l)),0==n.length)if(null!=i)ws(e,i.x,l)||ws(t,i.x,l)||n.push(new at(i.x,l));else{var c=Math.max(t.x,e.x),d=Math.min(t.x+t.width,e.x+e.width);n.push(new at(c+(d-c)/2,l))}}(e,i,a,n,l,o,h)}(t,e,i,h,o,n,s,r),h}(o,i,n,t,s,r);if(!h||!h.length)return null;c(h,s,0),h.push(r),o!=Le.EDGE_TYPE_ELBOW&&function(t,e){var i=t.length;if(!(i<3)){var n=e.getStyle(ss.EDGE_CORNER);if(n!=Le.EDGE_CORNER_NONE){var s,r,o=e.getStyle(ss.EDGE_CORNER_RADIUS),h=0,a=0;o&&(H(o)?h=a=o:(h=o.x||0,a=o.y||0));for(var l,_,u=t[0],f=t[1],g=2;g<i;g++){var v=t[g],E=f.x-u.x,p=f.y-u.y,m=v.x-f.x,y=v.y-f.y,T=!p||-Ze<p&&p<Ze;((!E||-Ze<E&&E<Ze)&&(!y||-Ze<y&&y<Ze)||T&&(!m||-Ze<m&&m<Ze))&&(_=T?(s=Math.min(2==g?Math.abs(E):Math.abs(E)/2,h),r=Math.min(g==i-1?Math.abs(y):Math.abs(y)/2,a),l=new at(f.x-(0<E?s:-s),f.y),new at(f.x,f.y+(0<y?r:-r))):(s=Math.min(g==i-1?Math.abs(m):Math.abs(m)/2,h),r=Math.min(2==g?Math.abs(p):Math.abs(p)/2,a),l=new at(f.x,f.y-(0<p?r:-r)),new at(f.x+(0<m?s:-s),f.y)),d(t,f),g--,i--,l.x==u.x&&l.y==u.y||(c(t,l,g),g++,i++),n==Le.EDGE_CORNER_BEVEL?(c(t,_,g),g++,i++):n==Le.EDGE_CORNER_ROUND&&(c(t,[f,_],g),g++,i++)),u=f,f=v}}}}(h,t);for(var a=[],l=h.length,_=1;_<l-1;_++){var u=h[_];U(u)?a.push(new Ni(Ci,[u[0].x,u[0].y,u[1].x,u[1].y])):a.push(new Ni(Ii,[u.x,u.y]))}return a}if(e.$bundleEnabled){var f=t._1x();if(!f)return;return function(t,e,i,n,s,r){e=ct(n,e.x,e.y,i.x,i.y),i=ct(s,i.x,i.y,e.x,e.y);var o=Math.PI/2+Math.atan2(i.y-e.y,i.x-e.x),h=t*Math.cos(o),a=t*Math.sin(o);e.x+=h,e.y+=a,i.x+=h,i.y+=a;var l=i.x-e.x,_=i.y-e.y;if(r!=Le.EDGE_BUNDLE_TYPE_PARALLEL)return r!=Le.EDGE_BUNDLE_TYPE_ELBOW?[new Ni(Di,[e.x+.25*l,e.y+.25*_,e.x+.75*l,e.y+.75*_,void 0,void 0])]:(10<Math.sqrt(l*l+_*_)&&(o=Math.atan2(i.y-e.y,i.x-e.x),l=5*Math.cos(o),_=5*Math.sin(o),e.x+=l,e.y+=_,i.x-=l,i.y-=_),[new Ni(Ii,[e.x,e.y]),new Ni(Ii,[i.x,i.y])]);var u=[new Ni(Si,[e.x,e.y]),new Ni(Ii,[i.x,i.y])];return u._linkTerminalPoint=!1,u}(f,s,r,i,n,t.getStyle(ss.EDGE_BUNDLE_TYPE))}}(this,this.data,s,r,o,h);p&&(t._g6=p)},_1x:function(){if(!this.data.isBundleEnabled())return null;var t=this.data.getEdgeBundle(!0);if(!t||!t.canBind(this.graph)||!t._h9)return null;var e=t.getYOffset(this);return t.isPositiveOrder(this.$data)||(e=-e),e},checkBundleLabel:function(){var t=this.getBundleLabel();t?(this.bundleLabel||this.createBundleLabel(),this.bundleLabel._hy=!0,this.bundleLabel.data=t):this.bundleLabel&&(this.bundleLabel._hy=!1,this.bundleLabel.data=null)},createBundleLabel:function(){var t=new Es;t.editable=!1,this.bundleLabel=t,this.addChild(this.bundleLabel),us.initBindingProperties(this)},getBundleLabel:function(){return this.graph.getBundleLabel(this.data)},doValidate:function(){return this._1c&&(this._1c=!1,this.validatePoints()),this.checkBundleLabel(),E(this,ms,"doValidate")},_3y:function(){this._1c=!0,this.invalidateSize()},_$t:function(t,e,i){var n=this._m36.onBindingPropertyChange(this,t,e,i);return n=rs.onBindingPropertyChange(this,t,e,i)||n,this.bundleLabel&&this.bundleLabel.$data&&(n=us.onBindingPropertyChange(this,t,e,i)||n),_s.onBindingPropertyChange(this,t,e,i)||n}},g(ms,fs),ms.drawReferenceLine=function(t,e,i,n){if(t.moveTo(e.x,e.y),n&&n!=Le.EDGE_TYPE_DEFAULT){if(n==Le.EDGE_TYPE_VERTICAL_HORIZONTAL)t.lineTo(e.x,i.y);else if(n==Le.EDGE_TYPE_HORIZONTAL_VERTICAL)t.lineTo(i.x,e.y);else if(0==n.indexOf(Le.EDGE_TYPE_ORTHOGONAL)){o=n==Le.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||n!=Le.EDGE_TYPE_ORTHOGONAL_VERTICAL&&Math.abs(e.x-i.x)>Math.abs(e.y-i.y);var s=(e.x+i.x)/2,r=(e.y+i.y)/2;o?(t.lineTo(s,e.y),t.lineTo(s,i.y)):(t.lineTo(e.x,r),t.lineTo(i.x,r))}else if(0==n.indexOf(Le.EDGE_TYPE_ELBOW)){var o,h=Ts[ss.EDGE_EXTEND]||0;(o=n==Le.EDGE_TYPE_ELBOW_HORIZONTAL||n!=Le.EDGE_TYPE_ELBOW_VERTICAL&&Math.abs(e.x-i.x)>Math.abs(e.y-i.y))?(t.lineTo(e.x+h,e.y),t.lineTo(i.x-h,i.y)):(t.lineTo(e.x,e.y+h),t.lineTo(i.x,i.y-h))}else if(0==n.indexOf("extend."))if(h=Ts[ss.EDGE_EXTEND]||0,n==Le.EDGE_TYPE_EXTEND_TOP){var a=Math.min(e.y,i.y)-h;t.lineTo(e.x,a),t.lineTo(i.x,a)}else if(n==Le.EDGE_TYPE_EXTEND_BOTTOM)a=Math.max(e.y,i.y)+h,t.lineTo(e.x,a),t.lineTo(i.x,a);else if(n==Le.EDGE_TYPE_EXTEND_LEFT){var l=Math.min(e.x,i.x)-h;t.lineTo(l,e.y),t.lineTo(l,i.y)}else n==Le.EDGE_TYPE_EXTEND_RIGHT&&(l=Math.max(e.x,i.x)+h,t.lineTo(l,e.y),t.lineTo(l,i.y));else if(n==Le.EDGE_TYPE_ZIGZAG){s=(e.x+i.x)/2,r=(e.y+i.y)/2;var _=e.x-i.x,u=e.y-i.y,c=Math.sqrt(_*_+u*u),d=Math.atan2(u,_);d+=Math.PI/6,30<(c*=.04)&&(c=30);var f=Math.cos(d)*c,g=Math.sin(d)*c;t.lineTo(s-g,r+f),t.lineTo(s+g,r-f)}t.lineTo(i.x,i.y)}else t.lineTo(i.x,i.y)},tt(ms.prototype,{length:{get:function(){return this.path?this.path.length:0}}}),ms.prototype.addPoint=function(t,e,i){var n=Gi(this.path,t,e,this.data.addSegmentType,i);if(!n)return!1;var s=n.segments;if(2<s.length){var r=this.data,o=s[s.length-1];o.type==Ii?r.pathSegments=s.splice(1,s.length-2):(n.atEnd&&(o.invalidTerminal=!0),r.pathSegments=s.splice(1,s.length-1))}},ys.prototype={_2j:null,image:null,initialize:function(){E(this,ys,"initialize"),this._m0x(),as.initBindingProperties(this)},_m38:function(){this.data.image?this.image&&(this.body=this.image):this.label&&(this.body=this.label)},_m0x:function(){this.image=new vs,this.addChild(this.image,0),this._m38()},doValidate:function(){this.body&&(this instanceof ks&&!this.$data.groupImage&&this._5h()?this.body.$layoutByAnchorPoint=!1:(this.body.$layoutByAnchorPoint=null!=this._2j,this.body.anchorPosition=this._2j));var t=this.$data.$location,e=0,i=0;t&&(e=t.x,i=t.y);var n=this.$x!=e||this.$y!=i;return n&&(this.$invalidateBounds=!0),this.$x=e,this.$y=i,fs.prototype.doValidate.call(this)||n},_$t:function(t,e,i){var n=this._m36.onBindingPropertyChange(this,t,e,i);return n=rs.onBindingPropertyChange(this,t,e,i)||n,as.onBindingPropertyChange(this,t,e,i)||n},getLinkablePorts:function(){return this.data.linkablePorts},getLinkableBounds:function(){return this.bodyBounds},getDefaultPortPoint:function(t){return Lt(mt.CENTER_MIDDLE,t||this.getLinkableBounds())},getPortPoint:function(t,e){return t?((e=e||this.getLinkableBounds()).original?(i=Lt(t,e.original),e.rotate&&(i=xe(i.x,i.y,e.rotate,e.rotateX||0,e.rotateY||0)),i.x+=e.tx||0,i.y+=e.ty||0):i=Lt(t,e),i.port=t,i):this.getDefaultPortPoint(e);var i},getPortPoints:function(){var t=this.getLinkablePorts();if(t&&Array.isArray(t)){var e=[],i=this.getLinkableBounds();return t.forEach(function(t){e.push(this.getPortPoint(t,i))}.bind(this)),e}}},g(ys,fs);var Ts={};function bs(t,e,i,n,s){var r=function(t,e,i,n){return Math.max(e,n)-Math.min(t,i)-(e-t+n-i)}(e,i,n,s),o=e+i<n+s;if(0<r){if(1==t)return r+(s-n)/2;if(0<=t&&t<1)return r;if(t<0)return o?n-e:i-s}return o&&0<t||!o&&t<0?Math.abs(i-s):Math.abs(e-n)}function Os(t,e,i,n){return t==0<e?i+n+Math.abs(e):i-Math.abs(e)}function ws(t,e,i){return e>=t.x&&e<=t.right&&i>=t.y&&i<=t.bottom}function Ls(t,e){var i,n;e&&e.width&&e.height?(i=e.width,n=e.height):i=n=isNaN(e)?rt.ARROW_SIZE:e;var s=Yn.getShape(t,-i,-n/2,i,n);return s||((s=new Mi).moveTo(-i,-n/2),s.lineTo(0,0),s.lineTo(-i,n/2)),s}function As(t,e){var i=Math.sin(e),n=Math.cos(e),s=t.x,r=t.y;return t.x=s*n-r*i,t.y=s*i+r*n,t}function xs(t,e,i,n,s,r){var o=Math.atan2(n-e,i-t),h=new at(s,r);return h.rotate=o,As(h,o),h.x+=t,h.y+=e,h}function Ss(t,e,i){if(c(t,new Ni(Si,[e.x,e.y]),0),i){if(1<t.length){var n=t[t.length-1];if(Ci==n.type&&(n.invalidTerminal||void 0===n.points[2]||null===n.points[2]))return n.points[2]=i.x,n.points[3]=i.y,void(n.invalidTerminal=!0);if(Di==n.type&&(n.invalidTerminal||void 0===n.points[4]||null===n.points[4]))return n.points[4]=i.x,n.points[5]=i.y,void(n.invalidTerminal=!0)}t.push(new Ni(Ii,[i.x,i.y]))}}function Is(t,e,i,n,s,r){if(void 0===s){var o=Math.atan2(i.y-n.y,i.x-n.x);s=Math.cos(o),r=Math.sin(o)}for(i={x:i.x,y:i.y},e.contains(i.x,i.y)||(i=ct(e,n.x,n.y,i.x,i.y));;){if(!e.contains(i.x,i.y))return n;if(t.hitTest(i.x-s,i.y-r,rt.LOOKING_EDGE_ENDPOINT_TOLERANCE)){n.x=i.x-s/2,n.y=i.y-r/2;break}i.x-=s,i.y-=r}return n}function Cs(t,e,i,n,s,r){return e.contains(i.x,i.y)?!1===r?Ds(t,e,i,n,s):Ds(t,e,{x:i.x,y:i.y,perX:n,perY:s},n,s)||Ds(t,e,i,-n,-s):(i=function t(e,i,n,s,r,o){var h,a,l=i<e.x,_=i>e.right,u=n<e.y,c=n>e.bottom;return l&&0<s&&(h=n+(e.x-i)*r/s)>=e.y&&h<=e.bottom?{x:e.x,y:h,perX:s,perY:r}:_&&s<0&&(h=n+(e.right-i)*r/s)>=e.y&&h<=e.bottom?{x:e.right,y:h,perX:s,perY:r}:u&&0<r&&(a=i+(e.y-n)*s/r)>=e.x&&a<=e.right?{x:a,y:e.y,perX:s,perY:r}:c&&r<0&&(a=i+(e.bottom-n)*s/r)>=e.x&&a<=e.right?{x:a,y:e.bottom,perX:s,perY:r}:!1!==o?t(e,i,n,-s,-r,!1):void 0}(e,i.x,i.y,n,s,r))?Ds(t,e,i,i.perX,i.perY):void 0}function Ds(t,e,i,n,s){for(;;){if(!e.contains(i.x,i.y))return;if(t.hitTest(i.x+n,i.y+s))break;i.x+=n,i.y+=s}return i}function Rs(t){return Ei(t)?t:t.match(/.(gif|jpg|jpeg|png)$/gi)||/^data:image\/(\w+\+?\w+);base64,/i.test(t)?t:(t=et(t))instanceof Object&&t.draw?t:void 0}function Ps(e,i){this._$s=new Mt,this._$s.on(function(t){"currentSubNetwork"==t.kind&&this.invalidateVisibility()},this),this._1b=new Mt,this._1b.addListener(function(t){!this.currentSubNetwork||t.kind!=Bt.KIND_CLEAR&&t.kind!=Bt.KIND_REMOVE||this.graphModel.contains(this.currentSubNetwork)||(this.currentSubNetwork=null)},this),this._8=new Mt,this._11=new Mt,this._$i=new Mt,this._$l=new Mt,this.graphModel=i||new Kn,this._8k=new vn(this,e),this._2z=new yr(this),this._18=new Mt,this._onresize=te(t,"resize",function(t){this.updateViewport()},!1,this),this._8k._m18.ondrop=function(t){this.ondrop(t)}.bind(this),this._8k._m18.ondragover=function(t){this.ondragover(t)}.bind(this)}function Ns(t){for(var e=t.parent;e;){if(e.enableSubNetwork)return e;e=e.parent}return null}function ks(t,e){v(this,ks,arguments)}Ts[ss.SELECTION_COLOR]=rt.SELECTION_COLOR,Ts[ss.SELECTION_BORDER]=rt.SELECTION_BORDER,Ts[ss.SELECTION_SHADOW_BLUR]=rt.SELECTION_SHADOW_BLUR,Ts[ss.SELECTION_TYPE]=Le.SELECTION_TYPE_SHADOW,Ts[ss.SELECTION_SHADOW_OFFSET_X]=2,Ts[ss.SELECTION_SHADOW_OFFSET_Y]=2,Ts[ss.LABEL_COLOR]=rt.LABEL_COLOR,Ts[ss.LABEL_POSITION]=mt.CENTER_BOTTOM,Ts[ss.LABEL_ANCHOR_POSITION]=mt.CENTER_TOP,Ts[ss.LABEL_PADDING]=new pt(0,2),Ts[ss.LABEL_POINTER_WIDTH]=8,Ts[ss.LABEL_RADIUS]=8,Ts[ss.LABEL_POINTER]=!0,Ts[ss.LABEL_BORDER]=0,Ts[ss.LABEL_BORDER_STYLE]="#000",Ts[ss.LABEL_ROTATABLE]=!0,Ts[ss.LABEL_BACKGROUND_COLOR]=null,Ts[ss.LABEL_BACKGROUND_GRADIENT]=null,Ts[ss.EDGE_COLOR]="#555555",Ts[ss.EDGE_WIDTH]=1.5,Ts[ss.EDGE_FROM_AT_EDGE]=!0,Ts[ss.EDGE_TO_AT_EDGE]=!0,Ts[ss.GROUP_BACKGROUND_COLOR]=Q(3438210798),Ts[ss.GROUP_STROKE]=1,Ts[ss.GROUP_STROKE_STYLE]="#000",Ts[ss.ARROW_TO]=!0,Ts[ss.ARROW_FROM_SIZE]=rt.ARROW_SIZE,Ts[ss.ARROW_TO_SIZE]=rt.ARROW_SIZE,Ts[ss.EDGE_LOOPED_EXTAND]=10,Ts[ss.EDGE_CORNER_RADIUS]=8,Ts[ss.EDGE_CORNER]=Le.EDGE_CORNER_ROUND,Ts[ss.EDGE_SPLIT_BY_PERCENT]=!0,Ts[ss.EDGE_EXTEND]=20,Ts[ss.EDGE_SPLIT_PERCENT]=.5,Ts[ss.EDGE_SPLIT_VALUE]=20,Ts[ss.EDGE_BUNDLE_GAP]=20,Ts[ss.EDGE_BUNDLE_LABEL_ANCHOR_POSITION]=mt.CENTER_BOTTOM,Ts[ss.EDGE_BUNDLE_LABEL_POSITION]=mt.CENTER_TOP,Ts[ss.EDGE_BUNDLE_LABEL_COLOR]="#075bc5",Ts[ss.SHAPE_STROKE]=1,Ts[ss.SHAPE_STROKE_STYLE]="#2898E0",Ts[ss.RENDER_COLOR_BLEND_MODE]=rt.BLEND_MODE,Ts[ss.ALPHA]=1,rt.LOOKING_EDGE_ENDPOINT_TOLERANCE=2,tt(Ps.prototype={originAtCenter:!0,editable:!1,ondragover:function(t){we.stopEvent(t)},getDropInfo:function(t,e){var i=null;if(e)try{i=JSON.parse(e)}catch(t){}return i},ondrop:function(t){var e=t.dataTransfer;if(e){var i=e.getData("text"),n=this.getDropInfo(t,i);n||((n={}).image=e.getData("image"),n.type=e.getData("type"),n.label=e.getData("label"),n.groupImage=e.getData("groupImage"));var s=this.globalToLocal(t);if(s=this.toLogical(s.x,s.y),!(this.dropAction instanceof Function&&!1===this.dropAction.call(this,t,s,n))&&(n.image||n.label||n.type)){var r,o=n.image,h=n.type,a=n.label,l=n.groupImage;if(we.stopEvent(t),h&&"Node"!=h?"Text"==h?r=this.createText(a,s.x,s.y):"ShapeNode"==h?r=this.createShapeNode(a,s.x,s.y):"Group"==h?(r=this.createGroup(a,s.x,s.y),(l=l&&Rs(l))&&(r.groupImage=l)):(h=et(h))instanceof Function&&h.prototype instanceof zn&&((r=new h).name=a,r.location=new at(s.x,s.y),this._keModel.add(r)):r=this.createNode(a,s.x,s.y),r){if((o=o&&Rs(o))&&(r.image=o),t.shiftKey){var _=this.getElementByMouseEvent(t);_&&this._m1i(_)&&(r.parent=_)}if(n.properties)for(var u in n.properties)r[u]=n.properties[u];if(n.clientProperties)for(var u in n.clientProperties)r.set(u,n.clientProperties[u]);if(n.styles&&r.putStyles(n.styles),!1===this.onElementCreated(r,t,n))return!1;var c=new mr(this,mr.ELEMENT_CREATED,t,r);return this.onInteractionEvent(c),r}}}},_m1i:function(t){return t.enableSubNetwork||t instanceof Zn||t.droppable},enableDoubleClickToOverview:!0,_8k:null,_$s:null,_1b:null,_8:null,_$l:null,_11:null,_$i:null,_1o:function(t){return this._$s.beforeEvent(t)},_4q:function(t){this._$s.onEvent(t),"viewport"==t.kind&&this.checkLimitedBounds()},isVisible:function(t){return this._8k._e7(t)},isMovable:function(t){return(t instanceof zn||t instanceof Gn&&t.hasPathSegments())&&!1!==t.movable},isSelectable:function(t){return!1!==t.selectable},isEditable:function(t){return!1!==t.editable},isRotatable:function(t){return!1!==t.rotatable},isResizable:function(t){return!1!==t.resizable},canLinkFrom:function(t){return!1!==t.linkable&&!1!==t.canLinkFrom},canLinkTo:function(t,e){return!(!1===t.linkable||!1===t.canLinkTo||e instanceof we.Group&&t.isDescendantOf(e)||t instanceof we.Group&&e.isDescendantOf(t))},isEndPointEditable:function(t,e){return!1!==t.endPointEditable},createNode:function(t,e,i){var n=new zn(t,e,i);return this._keModel.add(n),n},createText:function(t,e,i){var n=new Qn(t,e,i);return this._keModel.add(n),n},createShapeNode:function(t,e,i,n){H(e)&&(n=i,i=e,e=null);var s=new Hn(t,e);return s.$location=new at(i,n),this._keModel.add(s),s},createGroup:function(t,e,i){var n=new Zn(t,e,i);return this._keModel.add(n),n},createEdge:function(t,e,i){if(t instanceof zn){var n=i;i=e,e=t,t=n}var s=new Gn(e,i);return t&&(s.$name=t),this._keModel.add(s),s},addElement:function(t,e){this._keModel.add(t),e&&t.hasChildren()&&t.forEachChild(function(t){this.addElement(t,e)},this)},removeElement:function(t){this._keModel.remove(t)},clear:function(){this._keModel.clear()},getStyle:function(t,e){var i=t._j1[e];return void 0!==i?i:this.getDefaultStyle(e)},getDefaultStyle:function(t){if(this._j1){var e=this._j1[t];if(void 0!==e)return e}return Ts[t]},_2x:function(t,e){if(!this.limitedBounds||this.limitedBounds.contains(this.viewportBounds))return e&&e(),!1;t=this._2a(),this.stopAnimation();var i,n,s,r=this.viewportBounds,o=this.limitedBounds,h=r.width/this.limitedBounds.width,a=r.height/this.limitedBounds.height;if(h<=1&&a<=1)return i=o.left>r.left?o.left:o.right<r.right?r.left-(r.right-o.right):r.left,n=o.top>r.top?o.top:o.bottom<r.bottom?r.top-(r.bottom-o.bottom):r.top,void this.translateTo(-i*this.scale,-n*this.scale,this.scale,!1,e);var l=a<h;s=Math.max(h,a),l?(i=o.x,(n=o.y+(r.top-o.top)*(1-s)/s)>=o.y?n=o.y:n<o.bottom-r.height/s&&(n=o.bottom-r.height/s)):(n=o.y,(i=o.x+(r.left-o.left)*(1-s)/s)>=o.x?i=o.x:i<o.right-r.width/s&&(i=o.right-r.width/s)),i*=s*=this.scale,n*=s,this.translateTo(-i,-n,s,t,e)},checkLimitedBounds:function(t){if(this._m3heckingBounds||!this.limitedBounds||this.limitedBounds.contains(this.viewportBounds))return!1;this._m3heckingBounds=!0,this.callLater(function(){this._2x(t,function(){this._m3heckingBounds=!1}.bind(this))},this)},zoomByMouseEvent:function(t,e,i,n){var s=this.globalToLocal(t);return"number"==typeof e?this.zoomAt(Math.pow(1.1,e),s.x,s.y,i,n):e?this.zoomIn(s.x,s.y,i,n):this.zoomOut(s.x,s.y,i,n)},resetScale:1,translate:function(t,e,i){return this.translateTo(this.tx+t,this.ty+e,this.scale,i)},translateTo:function(t,e,i,n,s){if(i=i&&Math.min(this.maxScale,Math.max(this.minScale,i)),!n){var r=this._8k._m1c(t,e,i);return s&&s(),r}this._64()._ko(t,e,i,n,s)},centerTo:function(t,e,i,n,s){return(!i||i<=0)&&(i=this.scale),void 0===n&&(n=this._2a()),this.translateTo(this.width/2-t*i,this.height/2-e*i,i,n,s)},moveToCenter:function(t,e){if(!1!==arguments[2]&&this._8k.isInvalidate())return this._8k._m0t||(e=!1),this.callLater(this.moveToCenter.bind(this,t,e,!1));var i=this.bounds;this.centerTo(i.cx,i.cy,t,e)},zoomToOverview:function(t,e){if(!1!==arguments[2]&&this._8k.isInvalidate())return this._8k._m0t||(t=!1),this.callLater(this.zoomToOverview.bind(this,t,e,!1));var i=this._8k._1j();i&&(e&&(i.scale=Math.min(i.scale,e)),this.centerTo(i.cx,i.cy,i.scale,t))},_2a:function(){return!!this._8k._m0t&&(void 0===this.zoomAnimation||null===this.zoomAnimation?rt.ZOOM_ANIMATE:this.zoomAnimation)},zoomAt:function(t,e,i,n,s){void 0===n&&(n=this._2a()),void 0===e&&(e=this.width/2),e=e||0,void 0===i&&(i=this.height/2),i=i||0;var r=this.scale;return e=(t=Math.min(this.maxScale,Math.max(this.minScale,r*t)))*(this.tx-e)/r+e,i=t*(this.ty-i)/r+i,this.translateTo(e,i,t,n,s)},zoomOut:function(t,e,i,n){return this.zoomAt(1/this.scaleStep,t,e,i,n)},zoomIn:function(t,e,i,n){return this.zoomAt(this.scaleStep,t,e,i,n)},_64:function(){return this._panAnimation||(this._panAnimation=new Ys(this)),this._panAnimation},onAnimationStart:function(){},onAnimationEnd:function(){},isAnimating:function(){return this._panAnimation&&this._panAnimation._e0()},enableInertia:!0,_m03:function(t,e){return this._64()._h3(t||0,e||0)},stopAnimation:function(){this._panAnimation&&this._panAnimation._l7()},getUI:function(t){return it(t)?this._8k._3j(t):this._8k._kn(t)},getUIByMouseEvent:function(t){return this._8k._3j(t)},hitTest:function(t){return this._8k.hitTest(t)},globalToLocal:function(t){return this._8k._7v(t)},toCanvas:function(t,e){return this._8k._gv(t,e)},toLogical:function(t,e){return it(t)?this._8k._$c(t):this._8k._ef(t,e)},getElementByMouseEvent:function(t){var e=this._8k._3j(t);if(e)return e.$data},getElement:function(t){return it(t)?this.getElementByMouseEvent(t):this._keModel.getById(t)},invalidate:function(){this._8k._m3a()},invalidateUI:function(t){t.invalidate(),this.invalidate()},invalidateElement:function(t){this._8k._3n(t)},getUIBounds:function(t){return this._8k._2n(t)},forEachVisibleUI:function(t,e){return this._8k._4c(t,e)},forEachReverseVisibleUI:function(t,e){return this._8k._$u(t,e)},forEachUI:function(t,e){return this._8k._e8(t,e)},forEachReverseUI:function(t,e){return this._8k._4d(t,e)},forEach:function(t,e){return this._keModel.forEach(t,e)},getElementByName:function(t){var e;return this.forEach(function(i){if(i.name==t)return e=i,!1}),e},focus:function(e){if(e){var i=t.scrollX||t.pageXOffset,n=t.scrollY||t.pageYOffset;return this.canvasPanel.focus(),void t.scrollTo(i,n)}this.canvasPanel.focus()},callLater:function(t,e,i){this._8k._d3(t,e,i)},exportImage:function(t,e,i){return function(t,e,i,n){var s=t.bounds;i=i||s,e=e||1;var r=Ne();tn(r.g),r.width=i.width*e,r.height=i.height*e,t._8k._gt(r.g,e,i);var o=null;try{o=r.toDataURL(n||"image/png")}catch(t){we.error(t)}return{canvas:r,data:o,width:r.width,height:r.height}}(this,t,e,i)},setSelection:function(t){return this._keModel._selectionModel.set(t)},select:function(t){return this._keModel._selectionModel.select(t)},unselect:function(t){return this._keModel._selectionModel.unselect(t)},reverseSelect:function(t){return this._keModel._selectionModel.reverseSelect(t)},selectAll:function(){var t,e,i;e=(t=this).selectionModel,i=[],t.graphModel.forEach(function(e){t.isVisible(e)&&t.isSelectable(e)&&i.push(e)}),e.set(i)},unSelectAll:function(){this.selectionModel.clear()},unselectAll:function(){this.unSelectAll()},isSelected:function(t){return this._keModel._selectionModel.contains(t)},sendToTop:function(t){!function(t,e){if(e instanceof Gn)e.isInvalid()||function(t,e){var i=e.fromAgent;if(e.isLooped())Mn(t,i);else{var n=e.toAgent;Mn(t,i),Mn(t,n)}}(t,e);else for(Mn(t,e);e=e.parent;)Mn(t,e)}(this._keModel,t)},sendToBottom:function(t){!function(t,e){if(e instanceof Gn)e.isInvalid()||function(t,e){var i=e.fromAgent;if(e.isLooped())Bn(t,i);else{var n=e.toAgent;Bn(t,i),Bn(t,n)}}(t,e);else for(Bn(t,e);e=e.parent;)Bn(t,e)}(this._keModel,t)},moveElements:function(t,e,i){var n=[],s=new ot;return a(t,function(t){t instanceof zn?n.push(t):t instanceof Gn&&s.add(t)}),this._em(n,e,i,s)},_em:function(t,e,i,n){if(0==e&&0==i||0==t.length&&0==n.length)return!1;if(0!=t.length){var s=this._4t(t);n=this._4s(s,n),a(s,function(t){var n=t.$location;n?t.setLocation(n.x+e,n.y+i):t.setLocation(e,i)})}return n&&n.length&&this._eo(n,e,i),!0},_eo:function(t,e,i){t.forEach(function(t){t.move(e,i)})},_4s:function(t,e){return this.graphModel.forEach(function(i){i instanceof Gn&&this.isMovable(i)&&t.contains(i.fromAgent)&&t.contains(i.toAgent)&&e.add(i)},this),e},_4t:function(t){var e=new ot;return a(t,function(t){this.isMovable(t),e.add(t),function t(e,i,n){e._hx()&&e.hasChildren()&&e.children.forEach(function(e){e instanceof zn&&i.add(e)&&t(e,i,n)},this),e.hasFollowers()&&e._dp.forEach(function(e){(null==n||n.accept(e))&&i.add(e)&&t(e,i,n)})}(t,e,this._movableFilter)},this),e},reverseExpanded:function(t){if(!t.isBundleEnabled())return!1;var e=t.getEdgeBundle(!0);return!!e&&(!1!==e.reverseExpanded()?(this.invalidate(),!0):void 0)},_2z:null,_18:null,beforeInteractionEvent:function(t){return this._18.beforeEvent(t)},onInteractionEvent:function(t){this._18.onEvent(t)},addCustomInteraction:function(t){this._2z.addCustomInteraction(t)},removeCustomInteraction:function(t){this._2z.removeCustomInteraction(t)},enableWheelZoom:!0,enableTooltip:!0,getTooltip:function(t){return t.tooltip||t.name},updateViewport:function(){this._8k._7h()},destroy:function(){var e,i,n;this._4q(new It(this,"destroy",!0,this._i1ed)),this._i1ed=!0,this._onresize&&(e=t,i="resize",n=this._onresize,e.removeEventListener(i,n)),this._2z.destroy(),this.graphModel=new Kn;var s=this.html;this._8k._i1(),s&&(s.innerHTML="")},onPropertyChange:function(t,e,i){this._$s.addListener(function(n){n.kind==t&&e.call(i,n)})},removeSelection:function(){var t=this.selectionModel._j2;return!(!t||0==t.length)&&(t=t.slice(),this._keModel.remove(t),t)},removeSelectionByInteraction:function(t){var e=this.selectionModel.datas;if(!e||0==e.length)return!1;we.confirm("Delete Elements - "+e.length,function(){var e=this.removeSelection();if(e){var i=new mr(this,mr.ELEMENT_REMOVED,t,e);this.onInteractionEvent(i)}},this)},createShapeByInteraction:function(t,e,i,n){var s=new Mi(e);2<e.length&&s.closePath();var r=this.createShapeNode("Shape",s,i,n);this.onElementCreated(r,t);var o=new mr(this,mr.ELEMENT_CREATED,t,r);return this.onInteractionEvent(o),r},createLineByInteraction:function(t,e,i,n){var s=new Mi(e),r=this.createShapeNode("Line",s,i,n);r.setStyle(we.Styles.SHAPE_FILL_COLOR,null),r.setStyle(we.Styles.SHAPE_FILL_GRADIENT,null),r.setStyle(we.Styles.LAYOUT_BY_PATH,!0),this.onElementCreated(r,t);var o=new mr(this,mr.ELEMENT_CREATED,t,r);return this.onInteractionEvent(o),r},createEdgeByInteraction:function(t,e,i,n,s,r){var o=this.createEdge("Edge",t,e);if(s&&o.setStyle(we.Styles.EDGE_FROM_PORT,s),r&&o.setStyle(we.Styles.EDGE_TO_PORT,r),n)o._9f=n;else{var h=this.edgeUIClass,a=this.edgeType;this.interactionProperties&&(h=this.interactionProperties.uiClass||h,a=this.interactionProperties.edgeType||a),h&&(o.uiClass=h),a&&(o.edgeType=a)}this.onElementCreated(o,i);var l=new mr(this,mr.ELEMENT_CREATED,i,o);return this.onInteractionEvent(l),o},onElementCreated:function(t,e,i){!t.parent&&this.currentSubNetwork&&(t.parent=this.currentSubNetwork)},allowEmptyLabel:!1,startLabelEdit:function(t,e,i,n){var s=this;i.startEdit(n.x,n.y,e.data,this.getStyle(t,ss.LABEL_FONT_SIZE),function(i){return s.onLabelEdit(t,e,i,e.parent)})},onLabelEdit:function(t,e,i,n){if(!i&&!this.allowEmptyLabel)return we.alert("Label Can't Empty"),!1;if("label"==e.name){if(t.name==i)return!1;t.name=i}else!1===n._fs(e,i)&&(e.data=i,this.invalidateElement(t))},setInteractionMode:function(t,e){this.interactionMode=t,this.interactionProperties=e},upSubNetwork:function(){return!!this._34&&(this.currentSubNetwork=Ns(this._34))},_$m:!1,invalidateVisibility:function(){this._$m=!0,this.invalidate()},getBundleLabel:function(t){var e=t.getEdgeBundle(!0);return e&&e.agentEdge==t?"+"+e.bindableEdges.length:null},zoomAnimation:null,pauseRendering:function(t,e){(this.delayedRendering||e)&&this._8k._73(t)},_4u:void 0,enableRectangleSelectionByRightButton:!0,getLinkablePoints:function(t,e,i){return t.linkablePoints}},{center:{get:function(){return this.toLogical(this.html.clientWidth/2,this.html.clientHeight/2)}},visibleFilter:{get:function(){return this._hyFilter},set:function(t){this._hyFilter=t,this.invalidateVisibility()}},topCanvas:{get:function(){return this._8k._topCanvas}},propertyChangeDispatcher:{get:function(){return this._$s}},listChangeDispatcher:{get:function(){return this._1b}},dataPropertyChangeDispatcher:{get:function(){return this._8}},selectionChangeDispatcher:{get:function(){return this._$l}},parentChangeDispatcher:{get:function(){return this._11}},childIndexChangeDispatcher:{get:function(){return this._$i}},interactionDispatcher:{get:function(){return this._18}},cursor:{set:function(t){this.canvasPanel.style.cursor=t||this._2z.defaultCursor},get:function(){return this.canvasPanel.style.cursor}},interactionMode:{get:function(){return this._2z._m3urrentMode},set:function(t){var e=this.interactionMode;e!=t&&(this._2z.currentMode=t,this._4q(new It(this,"interactionMode",t,e)))}},scaleStep:{get:function(){return this._8k._ea},set:function(t){this._8k._ea=t}},maxScale:{get:function(){return this._8k._gc},set:function(t){this._8k._gc=t}},minScale:{get:function(){return this._8k._gd},set:function(t){this._8k._gd=t}},scale:{get:function(){return this._8k._scale},set:function(t){return this._8k._scale=t}},tx:{get:function(){return this._8k._tx}},ty:{get:function(){return this._8k._ty}},styles:{get:function(){return this._j1},set:function(t){this._j1=t}},selectionModel:{get:function(){return this._keModel._selectionModel}},graphModel:{get:function(){return this._keModel},set:function(t){if(this._keModel==t)return!1;var e=this._keModel,i=new It(this,"graphModel",e,t);if(!1===this._1o(i))return!1;null!=e&&(e.propertyChangeDispatcher.removeListener(this._$s,this),e.listChangeDispatcher.removeListener(this._1b,this),e.dataChangeDispatcher.removeListener(this._8,this),e.parentChangeDispatcher.removeListener(this._11,this),e.childIndexChangeDispatcher.removeListener(this._$i,this),e.selectionChangeDispatcher.removeListener(this._$l,this)),this._keModel=t,this._keModel&&(this._keModel.propertyChangeDispatcher.addListener(this._$s,this),this._keModel.listChangeDispatcher.addListener(this._1b,this),this._keModel.dataChangeDispatcher.addListener(this._8,this),this._keModel.parentChangeDispatcher.addListener(this._11,this),this._keModel.childIndexChangeDispatcher.addListener(this._$i,this),this._keModel.selectionChangeDispatcher.addListener(this._$l,this)),this._8k&&this._8k._kl(),this._4q(i)}},count:{get:function(){return this._keModel.length}},width:{get:function(){return this.html.clientWidth}},height:{get:function(){return this.html.clientHeight}},viewportBounds:{get:function(){return this._8k._viewportBounds}},bounds:{get:function(){return this._8k._4e()}},canvasPanel:{get:function(){return this._8k._m18}},html:{get:function(){return this._8k._m18.parentNode}},navigationType:{get:function(){return this._8k._7e},set:function(t){this._8k._3p(t)}},_34:{get:function(){return this._keModel._34}},currentSubNetwork:{get:function(){return this._keModel.currentSubNetwork},set:function(t){this._keModel.currentSubNetwork=t}},limitedBounds:{get:function(){return this._limitedBounds},set:function(t){if(Et.equals(t,this._limitedBounds))return!1;this._limitedBounds=t?new Et(t):null}},ratio:{get:function(){return this._8k.ratio}},delayedRendering:{get:function(){return void 0===this._4u?rt.DELAYED_RENDERING:this._4u},set:function(t){t!=this.delayedRendering&&(this._4u=t,this.pauseRendering(!1,!0))}},fullRefresh:{get:function(){return this._8k.fullRefresh},set:function(t){this._8k.fullRefresh=t}}}),rt.DELAYED_RENDERING=!0,rt.GROUP_MIN_WIDTH=60,rt.GROUP_MIN_HEIGHT=60,ks.prototype={_m38:function(){if(!this._5h())return E(this,ks,"_m38",arguments)},initialize:function(){E(this,ks,"initialize"),this.checkBody()},_m0y:function(){this._ky=new Mi,this.shape=new vs(this._ky),this.shape.layoutByPath=!1,this.addChild(this.shape,0),this.body=this.shape},checkBody:function(){if(this._5h())return this._21=!0,this.shape?(this.shape.visible=!0,this.body=this.shape):(this._m0y(),ls.initBindingProperties(this)),void(this.image&&(this.image.visible=!1));this.image?(this.image.visible=!0,this.body=this.image):this._m0x(),this.shape&&(this.shape.visible=!1)},_5h:function(){return this.$data._hx()&&this.$data.expanded},_ky:null,_21:!0,_5j:function(){this._1e=!0,this._21=!0},doValidate:function(){if(this._21&&this._5h()){if(this._21=!1,this.shape.invalidateData(),this.$data.groupImage){this.shape.data=this.$data.groupImage;var t=this._23();return this.shape.offsetX=t.x+t.width/2,this.shape.offsetY=t.y+t.height/2,this.shape.size={width:t.width,height:t.height},ys.prototype.doValidate.call(this)}this.shape.offsetX=0,this.shape.offsetY=0;var e=this._86(this.$data.groupType);if(this._ky.clear(),e instanceof Et){var i=this.getStyle(ss.GROUP_RADIUS)||0;Un(this._ky,e.x,e.y,e.width,e.height,e.rx||i,e.ry||i)}else e instanceof Xe?(n=this._ky,r=(s=e).r||1,o=s.cx||0,h=s.cy||0,a=r*Math.tan(Math.PI/8),l=r*Math.sin(Math.PI/4),n.moveTo(o+r,h),n.quadTo(o+r,h+a,o+l,h+l),n.quadTo(o+a,h+r,o,h+r),n.quadTo(o-a,h+r,o-l,h+l),n.quadTo(o-r,h+a,o-r,h),n.quadTo(o-r,h-a,o-l,h-l),n.quadTo(o-a,h-r,o,h-r),n.quadTo(o+a,h-r,o+l,h-l),n.quadTo(o+r,h-a,o+r,h)):e instanceof Ve&&Wn(this._ky,e);this._ky._6e=!0,this.shape.invalidateData()}var n,s,r,o,h,a,l;return ys.prototype.doValidate.call(this)},_6n:function(t,e,i,n,s){switch("number"!=typeof n&&(n=-e/2),"number"!=typeof s&&(s=-i/2),t){case Le.GROUP_TYPE_CIRCLE:return new Xe(n+e/2,s+i/2,Math.max(e,i)/2);case Le.GROUP_TYPE_ELLIPSE:return new Ve(n+e/2,s+i/2,e,i);default:return new Et(n,s,e,i)}},_23:function(){return this._86(null)},_86:function(t){var e=this.data,i=e.padding,n=e.minSize,s=rt.GROUP_MIN_WIDTH,r=rt.GROUP_MIN_HEIGHT;if(n&&("number"==typeof n.width&&(s=n.width),"number"==typeof n.height&&(r=n.height),m=n.x,y=n.y),!e.hasChildren())return this._6n(t,s,r,m,y);var o,h=this.$data._fr._j2;t!=Le.GROUP_TYPE_CIRCLE&&t!=Le.GROUP_TYPE_ELLIPSE||(o=[]);for(var a,l,_,u,c=new Et,d=0,f=h.length;d<f;d++){var g=h[d];if(this.graph.isVisible(g)&&!(g instanceof Gn)){var v=this.graph.getUI(g);v&&(a=v.$x+v._fu.x,l=v.$y+v._fu.y,_=v._fu.width,u=v._fu.height,c.addRect(a,l,_,u),o&&(o.push({x:a,y:l}),o.push({x:a+_,y:l}),o.push({x:a+_,y:l+u}),o.push({x:a,y:l+u})))}}if(c.isEmpty())return this._6n(t,s,r,m,y);var E=this.$data.$location;E?E.invalidateFlag&&(E.invalidateFlag=!1,void 0===m&&(E.x=c.cx),void 0===y&&(E.y=c.cy)):E=this.$data.$location={x:c.cx,y:c.cy},i&&c.grow(i),"number"==typeof m&&m+E.x<c.x&&(c.width+=c.x-(m+E.x),c.x=m+E.x,o&&o.push({x:c.x,y:c.cy})),"number"==typeof y&&y+E.y<c.y&&(c.height+=c.y-(c.y,y+E.y),c.y=y+E.y,o&&o.push({x:c.cx,y:c.y}));var p,m=E.x,y=E.y;if(t!=Le.GROUP_TYPE_CIRCLE)return t==Le.GROUP_TYPE_ELLIPSE?((p=function(t,e){for(var i,n=(e=e||function(t){for(var e,i=t.length,n=new Et,s=0;s<i;s++)e=t[s],n.add(e.x,e.y);return n}(t)).width/e.height,s=[],r=t.length,o=0;o<r;o++)i=t[o],s.push({x:i.x,y:i.y*n});var h=Ke(s);if(h)return new Ve(h.cx,h.cy/n,2*h.r,2*h.r/n)}(o,c)).cx-=m,p.cy-=y,p.width<s&&(p.cx+=(s-p.width)/2,p.width=s),p.height<r&&(p.cy+=(r-p.height)/2,p.height=r)):((p=c).width<s&&(c.width=s),c.height<r&&(c.height=r),c.offset(-m,-y)),p;(p=Ke(o)).cx-=m,p.cy-=y;var T=Math.max(s,r)/2;return p.r<T&&(p.cx+=T-p.r,p.cy+=T-p.r,p.r=T),p},_$t:function(t,e,i){if(!this._5h())return E(this,ks,"_$t",arguments);var n=this._m36.onBindingPropertyChange(this,t,e,i);return n=rs.onBindingPropertyChange(this,t,e,i)||n,n=as.onBindingPropertyChange(this,t,e,i)||n,ls.onBindingPropertyChange(this,t,e,i)||n}},g(ks,ys),we.GroupUI=ks,rt.NAVIGATION_IMAGE_LEFT=null,rt.NAVIGATION_IMAGE_TOP=null;var Ms={position:"absolute","text-align":"center"},Bs={padding:"10px",transition:"opacity 0.2s ease-in"},Gs={position:"relative",display:"block"};function Fs(t,i,n,s,r,o,h){var a=e.createElement("div");a.className="Q-Graph-Nav-Button",Wt(a,Ms),i&&Wt(a,i);var l=e.createElement("img");return o&&(G&&(l.ontouchstart=o),ne||(l.onclick=o)),l.name=h,l.src=n,Wt(l,Bs),r&&Wt(l,r),s&&qt(l,"transform","rotate(180deg)"),a._img=l,a.appendChild(l),t.appendChild(a),a}function $s(t,i){if(!rt.NAVIGATION_IMAGE_LEFT){var n=Ne(20,40),s=n.g;s.scale(s.ratio,s.ratio),s.moveTo(16,4),s.lineTo(4,20),s.lineTo(16,36),s.lineWidth=3,s.lineCap="round",s.lineJoin="round",s.strokeStyle="#FFF",s.shadowColor="#888",s.shadowBlur=5,s.stroke(),rt.NAVIGATION_IMAGE_LEFT=n.toDataURL();var r=Ne(n.height,n.width,!1);r.g.translate(r.width,0),r.g.rotate(Math.PI/2),r.g.drawImage(n,0,0),rt.NAVIGATION_IMAGE_TOP=r.toDataURL()}this._m1aseCanvas=t,function(t,i){this._navPane=e.createElement("div"),this._navPane.className="Q-Graph-Nav",Wt(this._navPane,{"background-color":"rgba(0, 0, 0, 0)",overflow:"hidden","user-select":"none",position:"relative"}),this._top=Fs(this._navPane,{width:"100%"},rt.NAVIGATION_IMAGE_TOP,!1,null,i,"top"),this._left=Fs(this._navPane,{height:"100%"},rt.NAVIGATION_IMAGE_LEFT,!1,Gs,i,"left"),this._right=Fs(this._navPane,{height:"100%",right:"0px"},rt.NAVIGATION_IMAGE_LEFT,!0,Gs,i,"right"),this._m1ottom=Fs(this._navPane,{width:"100%",bottom:"0px"},rt.NAVIGATION_IMAGE_TOP,!0,null,i,"bottom"),t.appendChild(this._navPane)}.call(this,i,function(e){var i,n;X(e);var s=e.target,r=s.name;if("left"==r)i=1;else if("right"==r)i=-1;else if("top"==r)n=1;else{if("bottom"!=r)return;n=-1}G&&(s.className="hover",setTimeout(function(){s.className=""},100)),X(e),t._ke._m03(i,n)}),this._37(i.clientWidth,i.clientHeight)}function js(t,e){this._m1aseCanvas=t,this.init(e,t)}function zs(t,e){v(this,zs,arguments)}function Hs(t,e){var i,n;this._m1aseCanvas=t,this._iv=(i=e,tn((n=Ne(!0)).g),n.onselectstart=function(){return!1},i.appendChild(n),n.className=an,n),this.g=this._iv.g,this._9c=new ot}Xt(".Q-Graph-Nav img","opacity:0.7;vertical-align:middle;"),Xt(".Q-Graph-Nav img:hover,img.hover","opacity:1;background-color: rgba(0, 0, 0, 0.5)"),G||(Xt(".Q-Graph-Nav","opacity:0;"+Ut("transition")+":opacity 3s cubic-bezier(0.8, 0, 0.8, 1)"),Xt(".Q-Graph-Nav:hover","opacity:1;"+Ut("transition")+":opacity 0.3s linear")),$s.prototype={_m39:function(t,e){if(t._hy==e)return!1;t._hy=e,t.style.visibility=e?"visible":"hidden"},_37:function(t,e){var i=e/2-this._left._img.clientHeight/2+"px";this._left._img.style.top=i,this._right._img.style.top=i,this._navPane.style.width=t+"px",this._navPane.style.height=e+"px"},_9b:function(t,e,i,n){this._m39(this._top,t),this._m39(this._left,e),this._m39(this._m1ottom,i),this._m39(this._right,n)},_i1:function(){var t=this._navPane.parentNode;t&&t.removeChild(this._navPane)},_je:function(){var t=this._m1aseCanvas._ke;if(t){var e=t.bounds;if(e.isEmpty())this._9b(!1,!1,!1,!1);else{var i=t.viewportBounds,n=i.y>e.y+1,s=i.x>e.x+1,r=i.bottom<e.bottom-1,o=i.right<e.right-1;this._9b(n,s,r,o)}}}},Xt(".Q-Graph-ScrollBar","margin: 2px; position: absolute;box-sizing: border-box;box-shadow: #FFF 0px 0px 1px; background-color: rgba(120,120,120,0.3);border-radius: 4px;margin: 1px;"),Xt(".Q-Graph-ScrollBar.hover, .Q-Graph-ScrollBar:hover","background-color: #7E7E7E;"+Ut("transition")+": background-color 0.2s linear;"),Xt(".Q-Graph-ScrollBar--V","width: 8px;right: 0px;"),Xt(".Q-Graph-ScrollBar--H","height: 8px;bottom: 0px;"),Xt(".Q-Graph-ScrollBar--V.Both","margin-bottom: 8px;"),Xt(".Q-Graph-ScrollBar--H.Both","margin-right: 8px;"),G||(Xt(".Q-Graph-ScrollPane","opacity:0;"+Ut("transition")+":opacity 3s cubic-bezier(0.8, 0, 0.8, 1);"),Xt(".Q-Graph:hover .Q-Graph-ScrollPane","opacity:1;"+Ut("transition")+":opacity 0.3s linear;")),js.prototype={_i1:function(){this._verticalDragSupport._i1(),this._horizontalDragSupport._i1(),delete this._verticalDragSupport,delete this._horizontalDragSupport,this._kz.parentNode&&this._kz.parentNode.removeChild(this._kz)},_kz:null,_m10:null,_87:null,init:function(t,i){var n=e.createElement("div");n.className="Q-Graph-ScrollPane",Wt(n,{width:"100%",height:"100%",position:"relative"});var s=e.createElement("div");s.className="Q-Graph-ScrollBar Q-Graph-ScrollBar--V";var r=e.createElement("div");r.className="Q-Graph-ScrollBar Q-Graph-ScrollBar--H",n.appendChild(s),n.appendChild(r),t.appendChild(n),this._kz=n,this._87=r,this._m10=s,r.isH=!0;var o=this,h={onstart:function(t,e){e.classList.add("hover")},onrelease:function(t,e){e.classList.remove("hover")},ondrag:function(t,e){var i=o._m1aseCanvas._ke;if(i){var n=e.isH,s=n?t.dx:t.dy;if(s&&e.scale){var r=i.scale/e.scale;n?i.translate(-r*s,0):i.translate(0,-r*s),we.stopEvent(t)}}},enddrag:function(t,e){var i=o._m1aseCanvas._ke;if(i&&i.enableInertia){var n=e.isH,s=n?t.vx:t.vy;.1<Math.abs(s)&&(s*=i.scale/e.scale,n?i._m03(-s,0):i._m03(0,-s))}}};this._verticalDragSupport=new ue(s,h),this._horizontalDragSupport=new ue(r,h)},_37:function(){var t=this._m1aseCanvas._ke;t&&t.callLater(this._je.bind(this))},_je:function(){var t=this._m1aseCanvas._ke;if(t){var e=t.bounds;if(e.isEmpty())return this._40(!1),void this._42(!1);var i=t.viewportBounds,n=t.width,s=t.height,r=1/t.scale,o=i.x>e.x+r||i.right<e.right-r,h=i.y>e.y+r||i.bottom<e.bottom-r,a=o&&h;a?(j(this._m10,"Both"),j(this._87,"Both")):(z(this._m10,"Both"),z(this._87,"Both")),this._40(o,i,e,a?n-10:n),this._42(h,i,e,a?s-10:s)}},_40:function(t,e,i,n,s){if(!t)return this._87.style.display="none",void(this._87.scale=0);var r=Math.min(e.x,i.x),o=Math.max(e.right,i.right),h=n/(o-r);this._87.scale=h,this._87.style.left=parseInt((e.x-r)*h)+"px",this._87.style.right=parseInt((o-e.right)*h)+"px",this._87.style.display=""},_42:function(t,e,i,n){if(!t)return this._m10.style.display="none",void(this._m10.scale=0);var s=Math.min(e.y,i.y),r=Math.max(e.bottom,i.bottom),o=n/(r-s);this._m10.scale=o,this._m10.style.top=parseInt((e.y-s)*o)+"px",this._m10.style.bottom=parseInt((r-e.bottom)*o)+"px",this._m10.style.display=""}},zs.prototype={shape:null,initialize:function(){E(this,zs,"initialize"),this._m0x(),cs.initBindingProperties(this)},_m0x:function(){this.image=new ps(this.$data.path),this.addChild(this.image,0),this.body=this.image},invalidateShape:function(){this.image.invalidateData(),this.invalidateRender()},_$t:function(t,e,i){var n=this._m36.onBindingPropertyChange(this,t,e,i);return n=rs.onBindingPropertyChange(this,t,e,i)||n,cs.onBindingPropertyChange(this,t,e,i)||n},doValidate:function(){this.body&&(this.image.data=this.data.path,this.body.$layoutByAnchorPoint=null!=this._2j,this.body.anchorPosition=this._2j);var t=this.$data.$location,e=0,i=0;t&&(e=t.x,i=t.y);var n=this.$x!=e||this.$y!=i;return n&&(this.$invalidateBounds=!0),this.$x=e,this.$y=i,fs.prototype.doValidate.call(this)||n},getLinkablePorts:function(){return this.data.linkablePorts},getLinkableBounds:function(){return this.bodyBounds},getDefaultPortPoint:function(t){return Lt(mt.CENTER_MIDDLE,t||this.getLinkableBounds())},getPortPoint:function(t,e){return t?((e=e||this.getLinkableBounds()).original?(i=Lt(t,e.original),e.rotate&&(i=xe(i.x,i.y,e.rotate,e.rotateX||0,e.rotateY||0)),i.x+=e.tx||0,i.y+=e.ty||0):i=Lt(t,e),i.port=t,i):this.getDefaultPortPoint(e);var i},getPortPoints:function(){var t=this.getLinkablePorts();if(t&&Array.isArray(t)){var e=[],i=this.getLinkableBounds();return t.forEach(function(t){e.push(this.getPortPoint(t,i))}.bind(this)),e}}},g(zs,fs),tt(zs.prototype,{path:{get:function(){return this.data.path}},length:{get:function(){return this.data.length}}}),zs.prototype.addPoint=function(t,e,i){var n=this._i0(t,e),s=this.data,r=Gi(this.path,n.x,n.y,this.data.addSegmentType,i);if(!r)return!1;s.pathSegments=r.segments},Hs.prototype={_l0:function(){this._iv.style.visibility="visible"},_jg:function(){this._iv.style.visibility="hidden"},clear:function(){this._9c.clear(),this._m3a()},contains:function(t){return t instanceof Object&&t.id&&(t=t.id),this._9c.containsById(t)},_5l:function(t){An.setStyle(this._iv,"transform",t?"matrix("+t.join(",")+")":"")},addDrawable:function(t,e){if(e){var i={id:++O,drawable:t,scope:e};return this._9c.add(i),i}return t.id||(t.id=++O),this._9c.add(t),t},removeDrawable:function(t){if(!t.id)return this._9c.removeById(t);this._9c.remove(t)},_9c:null,invalidate:function(){this._m3a()},_m3a:function(){this._m1aseCanvas._6e||this._jc()},_i3:function(t,e){this._iv.setSize(t,e)},_jc:function(){var t=this._m1aseCanvas._scale,e=this.g;e._kh(),e.save(),this._m1aseCanvas._9v(e);for(var i=this._9c._j2,n=0,s=i.length;n<s;n++)e.save(),e.beginPath(),this._fw(e,i[n],t),e.restore();e.restore()},_fw:function(t,e,i){e instanceof Function?e(t,i):e.drawable instanceof Function&&e.scope&&e.drawable.call(e.scope,t,i)}},rt.ZOOM_ANIMATE=!0;var Ys=function(t){this._ke=t};function Us(t){this.graph=t,this.topCanvas=t.topCanvas}rt.ANIMATION_MAXTIME=600,rt.ANIMATION_TYPE=ye.easeOut,Ys.prototype={_ke:null,_eq:null,_h3:function(t,e,i){this._l7();var n=Math.abs(t/2),s=Math.abs(e/2),r=Math.min(rt.ANIMATION_MAXTIME,.6*Math.max(n,s)*1e3);if(r<10)return!1;var o=t*r/3,h=e*r/3;this._ko(this._ke.tx+o,this._ke.ty+h,0,{duration:r,animationType:function(t){return-(2*Math.pow(t,1.5)-3*t)}},i)},_7l:function(t,e,i,n,s){this._eq&&this._eq._l7(),s&&(this.__delayRender=!0,this._ke.pauseRendering(!0)),this._4v(),this._eq=new Te(t,this,e,i),this._eq._6x=this._6x.bind(this),this._eq._kf(n)},_4v:function(){this._ke.onAnimationStart()},_6x:function(){this.__delayRender&&(this._ke.pauseRendering(!1),delete this.__delayRender),this._ke.onAnimationEnd()},_e0:function(){return this._eq&&this._eq._e0()},_l7:function(){this._eq&&this._eq._l7()},_il:function(t,e,i,n){var s=this._fromTX+(this._toTX-this._fromTX)*t,r=this._fromTY+(this._toTY-this._fromTY)*t,o=this._fromScale+(this._toScale-this._fromScale)*t;this._ke.translateTo(s,r,o,this.toInt)},_ko:function(t,e,i,n,s){this._l7();var r=this._ke,o=r.scale;if(i<=0&&(i=o),t!=r.tx||e!=r.ty||i!=o){var h,a,l;n instanceof Object&&(h=n.duration,a=n.maxTime,l=n.animationType);var _=r.tx,u=r.ty;if(!h)if(i!=o){var c=o<i?i/o:o/i;h=60*(c=Math.log(c)/Math.log(1.3))}else h=lt(t,e,_,u)/2;a=a||rt.ANIMATION_MAXTIME,l=l||rt.ANIMATION_TYPE,h=Math.min(a,h),this._fromTX=_,this._fromTY=u,this._fromScale=o,this._toTX=t,this._toTY=e,this._toScale=i,this._7l(this._il,h,l,s,i!=o)}}},rt.INTERACTION_HANDLER_SIZE_TOUCH=8,rt.INTERACTION_HANDLER_SIZE_DESKTOP=4,rt.INTERACTION_ROTATE_HANDLER_SIZE_TOUCH=30,rt.INTERACTION_ROTATE_HANDLER_SIZE_DESKTOP=20;var Ws=Math.PI;function qs(t,e){this.interactions=t,this.defaultCursor=e||"default"}function Xs(t){v(this,Xs,arguments)}function Vs(t){v(this,Vs,arguments)}function Ks(t){this.rect=t.getBounds(),this.points=t.getPortPoints(),this.defaultPoint=t.getDefaultPortPoint()}function Zs(t){v(this,Zs,arguments)}function Qs(t){v(this,Qs,arguments)}function Js(t){v(this,Js,arguments)}function tr(t,e,i){var n=t.offsetWidth,s=t.offsetHeight;t.style.left=e-n/2+"px",t.style.top=i-s/2+"px"}function er(){}function ir(t){this.graph=t}function nr(t){this.graph=t}function sr(t){this.graph=t}function rr(t){this.graph=t}function or(t){this.graph=t}function hr(t){v(this,hr,arguments),this.handlerSize=G?8:5}function ar(t){return t.type==Ci||t.type==Di}function lr(t){this.graph=t,this.topCanvas=t.topCanvas}Us.prototype={element:null,_$j:!1,setCurrentElement:function(t,e){this.element=t,e&&this.addDataPropertyChangeListener()},onDataPropertyChange:function(t){},addDataPropertyChangeListener:function(){this._$j||(this._$j=!0,this.graph.dataPropertyChangeDispatcher.addListener(this._1g,this))},removeDataPropertyChangeListener:function(){this._$j&&(this._$j=!1,this.graph.dataPropertyChangeDispatcher.removeListener(this._1g,this))},_1g:function(t){this.element&&t.source==this.element&&this.onDataPropertyChange(t)},onElementRemoved:function(t,e){var i,n,s;this.element&&(t==this.element||U(t)&&(i=t,n=this.element,s=!1,a(i,function(t){if(n==t)return!(s=!0)}),s))&&this.destroy(e)},onClear:function(t){this.element&&this.destroy(t)},destroy:function(t){delete this.element,this.removeDataPropertyChangeListener(),this.removeDrawable(),this.drawableList=null},invalidate:function(){this.topCanvas.invalidate()},removeDrawable:function(){this._l8ableId&&(this.topCanvas.removeDrawable(this._l8ableId),delete this._l8ableId,this.invalidate())},drawableList:null,addDrawable:function(){this._l8ableId||(this._l8ableId=this.topCanvas.addDrawable(this.draw,this).id,this.invalidate())},isShowing:function(){return this._l8ableId},draw:function(t,e){this.drawableList&&this.drawableList.forEach(function(i){i.draw(t,e)}),this.doDraw(t,e)},doDraw:function(t,e){},escapable:!0,onkeydown:function(t,e){this.escapable&&27==t.keyCode&&(X(t),this.destroy(e))}},we.DrawableInteraction=Us,qs.prototype={defaultCursor:"default",getInteractionInstances:function(t){if(!this.interactions)return null;for(var e=[],i=0,n=this.interactions.length;i<n;i++){var s=this.interactions[i];s instanceof Function&&(s=new s(t)),s.install instanceof Function&&s.install(t),e.push(s)}return e}},Xs.prototype={_dt:null,_jh:null,destroy:function(t){E(this,Xs,"destroy",arguments),delete this._jh,delete this._9g,delete this._dt},doDraw:function(t,e){var i=this.points;i&&(t.beginPath(),i.forEach(function(e){this.drawPoint(t,e)},this),this.isClosePath&&t.closePath(),this.styleDraw(t))},styleDraw:function(t){var e=function(t,e){if(!t)return e;var i={};for(var n in t)i[n]=t[n];for(var n in e)void 0===i[n]&&(i[n]=e[n]);return i}(this.graph.interactionProperties,this.getDefaultDrawStyles(this.graph));e.lineWidth&&(t.lineWidth=e.lineWidth,e.lineCap&&(t.lineCap=e.lineCap),e.lineJoin&&(t.lineJoin=e.lineJoin),e.lineDash&&(t.lineDash=e.lineDash,t.lineDashOffset=e.lineDashOffset||0),t.strokeStyle=e.strokeStyle,t.stroke()),e.fillStyle&&(t.fillStyle=e.fillStyle,t.fill())},drawPoint:function(t,e,i){if(i)t.moveTo(e.x,e.y);else if(we.isArray(e)){var n=e[0],s=e[1];t.quadraticCurveTo(n.x,n.y,s.x,s.y)}else t.lineTo(e.x,e.y)},setCurrentPoint:function(t){this.currentPoint=t},addPoint:function(t){this._jh||(this._jh=[],this.addDrawable()),this._jh.push(t),this.invalidate()}},g(Xs,Us),tt(Xs.prototype,{currentPoint:{get:function(){return this._9g},set:function(t){this._9g=t,this.invalidate()}},prevPoint:{get:function(){return this._jh&&this._jh.length?this._jh[this._jh.length-1]:null}},points:{get:function(){if(this._9g&&this._jh&&this._jh.length)return this._jh.concat(this._9g)}}}),we.DrawPathInteraction=Xs,Vs.prototype={_i4:function(t,e){return this.start&&t!=this.start?this._du(t,e):this._m11(t,e)},_m11:function(t,e){return t instanceof zn&&e.canLinkFrom(t)},_du:function(t,e){return t instanceof zn&&e.canLinkTo(t,this.start)},_9d:function(t,e,i,n){if(this._m3urrentPort)return this._m3urrentPort.nearestPoint(i,n);var s=e.getUI(t);return s&&s.bodyBounds?s.bodyBounds.center:t.location},_m3b:function(t,e){this._kc&&(clearTimeout(this._kc),delete this._kc),this._kc=setTimeout(function(t){if(delete this._kc,this.start&&this.currentPoint){var e=t.x-this.currentPoint.x,i=t.y-this.currentPoint.y;Math.sqrt(e*e+i*i)*this.graph.scale<=2&&this.addPoint(this.currentPoint)}}.bind(this,this.toLogicalPoint(t)),rt.LONG_PRESS_INTERVAL)},destroy:function(t){E(this,Vs,"destroy",arguments),this.start=null,this.startPort=null,this._kc&&(clearTimeout(this._kc),delete this._kc),this._m12=null,this._m3urrentPort=null},ondblclick:function(t,e){this.destroy(e)},finish:function(t,e,i,n){var s;this._jh&&2<=this._jh.length&&(this._jh.shift(),s=new ot,a(this._jh,function(t){if(we.isArray(t)){var e=t[0],i=t[1];s.add(new Ni(Le.SEGMENT_QUAD_TO,[e.x,e.y,i.x,i.y]))}else s.add(new Ni(Le.SEGMENT_LINE_TO,[t.x,t.y]))},this)),e.createEdgeByInteraction(this.start,i,t,s,this.startPort,n),this.destroy(e)},onstart:function(t,e){if(this.start){var i=t.getData(),n=e.toLogical(t);this._du(i,e)?this.finish(t,e,i,new Ks(e.getUI(i)).nearestPoint(n.x,n.y).port):this.addPoint(n)}},startdrag:function(t,e){if(!this.start&&!t.responded){var i=t.getData();if(i&&this._m11(i,e)){t.responded=!0,this.start=i;var n=e.toLogical(t),s=this._9d(i,e,n.x,n.y);this.startPort=s.port,this.addPoint(s)}}},ondrag:function(t,e){this.onmousemove(t,e)},enddrag:function(t,e){if(this.start){var i=this._m12||t.getData();if(this._du(i,e)){var n=e.toLogical(t);this.finish(t,e,i,new Ks(e.getUI(i)).nearestPoint(n.x,n.y).port)}}},onrelease:function(t,e){ae(t)&&this.destroy(e)},_m12:null,onmousemove:function(t,e){var i,n,s,r,o,h,a=e.toLogical(t),l=(n=e,s=a.x,r=a.y,o=function(t){return this._i4(t,e)}.bind(this),n.forEachReverseVisibleUI(function(t){var e=t.data;if(e instanceof we.Node&&(!o||!1!==o(e))&&t.uiBounds.intersectsPoint(s-t.x,r-t.y)&&t.hitTest(s,r,rt.SELECTION_TOLERANCE/n.scale))return h=e,!1}),h);l!=this._m12&&(this._m12=l,this._m3urrentPort=l?new Ks(e.getUI(l)):null,l?(this.addDrawable(),this.drawableList=[this._m3urrentPort]):this.drawableList=null,this.invalidate()),this._m3urrentPort&&(i=this._m3urrentPort.nearestPoint(a.x,a.y),this.invalidate()),this.start&&(this.currentPoint=i||a,ae(t)&&this._m3b(t,e))},toLogicalPoint:function(t){return this.graph.toLogical(t)},getDefaultDrawStyles:function(t){return{lineWidth:this.graph.getDefaultStyle(ss.EDGE_WIDTH),strokeStyle:this.graph.getDefaultStyle(ss.EDGE_COLOR),lineDash:this.graph.getDefaultStyle(ss.EDGE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(ss.EDGE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(ss.LINE_CAP),lineJoin:this.graph.getDefaultStyle(ss.LINE_JOIN)}}},g(Vs,Xs),we.CreateEdgeInteraction=Vs,Ks.prototype.drawRect=function(t,e,i){t.beginPath(),t.rect(i.x-0,i.y-0,i.width+0,i.height+0),t.lineWidth=2/e,t.strokeStyle="#2898E0",t.stroke()},Ks.prototype.drawPoint=function(t,e,i){t.beginPath();var n=4/e;t.moveTo(i.x+n,i.y),t.arc(i.x,i.y,n,0,2*Math.PI,!1),t.lineWidth=1/e,i.marked?(t.strokeStyle="#1D4876",t.fillStyle="#E21667"):(t.strokeStyle="#2898E0",t.fillStyle="rgba(255, 255, 255, 0.8)"),t.fill(),t.stroke()},Ks.prototype.draw=function(t,e){var i=this.rect;this.drawRect(t,e,i),this.points&&this.points.forEach(function(i){this.drawPoint(t,e,i)}.bind(this))},Ks.prototype.nearestPoint=function(t,e,i){if(this.points){i=i||20;var n,s=i*=i;return this.points.forEach(function(r){r.marked&&(r.marked=!1);var o=r.x-t,h=r.y-e,a=o*o+h*h;a<i&&a<s&&(s=a,n=r)}),n&&(n.marked=!0),n||this.defaultPoint}return this.defaultPoint},Zs.prototype={getDefaultDrawStyles:function(t){return{lineWidth:this.graph.getDefaultStyle(ss.SHAPE_STROKE),strokeStyle:this.graph.getDefaultStyle(ss.SHAPE_STROKE_STYLE),fillStyle:this.graph.getDefaultStyle(ss.SHAPE_FILL_COLOR)}},finish:function(t,e){if(this._jh&&this._jh.length){var i=this._jh,n=0,s=0,r=0;i.forEach(function(t){we.isArray(t)?t.forEach(function(e){n+=t.x,s+=t.y,r++}):(n+=t.x,s+=t.y,r++)}),n/=r,s/=r;var o=[];i.forEach(function(t,e){if(0!=e)if(we.isArray(t)){var i=t[0],r=t[1];o.push(new Ni(Le.SEGMENT_QUAD_TO,[i.x-n,i.y-s,r.x-n,r.y-s]))}else o.push(new Ni(Le.SEGMENT_LINE_TO,[t.x-n,t.y-s]));else o.push(new Ni(Le.SEGMENT_MOVE_TO,[t.x-n,t.y-s]))}),this.createElement(t,o,n,s),this.destroy(e)}},startdrag:function(t,e){t.responded=!0},createElement:function(t,e,i,n){return this.graph.createShapeByInteraction(t,e,i,n)},onstart:function(t,e){var i=e.toLogical(t);this._dt=i,this.addPoint(i)},onmousemove:function(t,e){this._dt&&(this.currentPoint=e.toLogical(t))},ondblclick:function(t,e){if(this._dt){if(this._jh.length<3)return void this.destroy(e);delete this._jh[this._jh.length-1],this.finish(t,e)}},isClosePath:!0},g(Zs,Xs),we.CreateShapeInteraction=Zs,Qs.prototype={isClosePath:!1,createElement:function(t,e,i,n){return this.graph.createLineByInteraction(t,e,i,n)},getDefaultDrawStyles:function(){return{lineWidth:Ts[ss.SHAPE_STROKE],strokeStyle:Ts[ss.SHAPE_STROKE_STYLE],lineDash:this.graph.getDefaultStyle(ss.SHAPE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(ss.SHAPE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(ss.LINE_CAP),lineJoin:this.graph.getDefaultStyle(ss.LINE_JOIN)}}},g(Qs,Zs),we.CreateLineInteraction=Qs,Js.prototype={destroy:function(t){E(this,Js,"destroy",arguments),t.cursor="",this.start=null},doDraw:function(t,e){if(this.start&&this.currentPoint){var i,n;this.graph.interactionProperties&&(i=this.graph.interactionProperties.uiClass,n=this.graph.interactionProperties.edgeType),i=i||this.graph.edgeUIClass||we.EdgeUI,n=n||this.graph.edgeType;var s=i.drawReferenceLine||we.EdgeUI.drawReferenceLine,r=this.graph.getUI(this.start);r&&r.bodyBounds&&(r=r.bodyBounds.center,t.beginPath(),s(t,r,this.currentPoint,n),this.styleDraw(t))}},canLinkFrom:function(t,e){return t instanceof zn&&e.canLinkFrom(t)},canLinkTo:function(t,e){return t instanceof zn&&e.canLinkTo(t,this.start)},startdrag:function(t,e){var i=t.getData();this.canLinkFrom(i,e)&&(t.responded=!0,this.start=i,e.cursor="crosshair",this.addDrawable())},ondrag:function(t,e){this.start&&(we.stopEvent(t),this.currentPoint=e.toLogical(t),this.invalidate())},enddrag:function(t,e){if(this.start){this.invalidate();var i=t.getData();this.canLinkTo(i,e)&&e.createEdgeByInteraction(this.start,i,t),this.destroy(e)}},getDefaultDrawStyles:function(){return{lineWidth:this.graph.getDefaultStyle(ss.EDGE_WIDTH),strokeStyle:this.graph.getDefaultStyle(ss.EDGE_COLOR),lineDash:this.graph.getDefaultStyle(ss.EDGE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(ss.EDGE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(ss.LINE_CAP),lineJoin:this.graph.getDefaultStyle(ss.LINE_JOIN)}}},g(Js,Xs),we.CreateSimpleEdgeInteraction=Js,rt.LABEL_EDITOR_SUBMIT_WHEN_LOST_FOCUS=!1,er.prototype={html:null,createHTML:function(){var t=e.createElement("textarea");t.className="Q-LabelEditor",t.style.position="absolute",t.style.textAlign="center",t.style.border="solid #08E 1px",t.style.padding="5px",t.style.boxShadow="0px 0px 10px rgba(40, 85, 184, 0.75)",t.style.display="none",t.style.overflow="hidden";var i=this;return t.oninput=function(t){i.onValueChange(t)},t.onkeydown=function(t){27!=t.keyCode||i.cancelEdit()},t.onkeypress=function(n){if(13==n.keyCode||10==n.keyCode){if(n.preventDefault(),n.altKey||n.ctrlKey||n.shiftKey)return function(t,i){if("number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd){var n=t.value,s=t.selectionStart;t.value=n.slice(0,s)+i+n.slice(t.selectionEnd),t.selectionEnd=t.selectionStart=s+i.length}else if(void 0!==e.selection){var r=e.selection.createRange();r.text=i,r.collapse(!1),r.select()}}(t,"\n"),void i.onValueChange(n);i.stopEdit()}},e.body.appendChild(t),t},setText:function(e,i){this.html.value=e||"",i&&(this.html.style.fontSize=i),function(e){if(A){var i=t.scrollX||t.pageXOffset,n=t.scrollY||t.pageYOffset;return e.select(),t.scrollTo(i,n)}e.select()}(this.html),this.onSizeChange(this.html)},onSizeChange:function(t){t.offsetWidth,t.offsetHeight;var i=function(t){var i=e.createElement("canvas").getContext("2d"),n=getComputedStyle(t,null),s=n.font;s=s||n.fontStyle+" "+n.fontSize+" "+n.fontFamily,i.font=s;var r=t.value.split("\n"),o=parseInt(n.fontSize),h=0,a=0;return we.forEach(r,function(t){var e=i.measureText(t).width;h<e&&(h=e),a+=1.2*o}),{width:h,height:a}}(t);return t.style.width=i.width+30+"px",t.style.height=i.height+10+"px",i},onValueChange:function(t){var e=t.target;this.onSizeChange(e),e.style.left=e.x-e.offsetWidth/2+"px"},onClickOnWindow:function(t){t.target!=this.html&&(rt.LABEL_EDITOR_SUBMIT_WHEN_LOST_FOCUS?this.stopEdit():this.cancelEdit())},startEdit:function(e,i,n,s,r){this.html||(this.html=this.createHTML()),this.stopEditWhenClickOnWindow||(this.stopEditWhenClickOnWindow=function(t){this.onClickOnWindow(t)}.bind(this)),t.addEventListener("mousedown",this.stopEditWhenClickOnWindow,!0),this.callback=r,this.html.x=e,this.html.y=i,this.html.style.display="block",tr(this.html,e,i),this.setText(n,s||10),tr(this.html,e,i)},isEditing:function(){return"none"!=this.html.style.display},cancelEdit:function(){this.stopEdit(!0)},stopEdit:function(e){if(this.isEditing()){t.removeEventListener("mousedown",this.stopEditWhenClickOnWindow);var i=this.html.value;!e&&this.callback&&this.callback(i),this.html.style.display="none",this.html.value=null,this.callback=null}},destroy:function(){this.html&&e.body.removeChild(this.html)}},we.LabelEditor=er,ir.prototype={destroy:function(t){t.labelEditor&&(t.labelEditor.destroy(),delete t.labelEditor)},ondblclick:function(e,i){var n=e.getData();if(n){if(!1!==n.dblclickable){if(i.editable&&i.isEditable(n)){var s=i.hitTest(e);if(s instanceof Es&&!1!==s.editable){var r=i.labelEditor;r||(i.labelEditor=r=new er);var o=s.getBounds();return o=function(e,i,n){e+=t.pageXOffset,i+=t.pageYOffset;var s=n.getBoundingClientRect();return{x:e+s.left,y:i+s.top}}((o=i.toCanvas(o.x+o.width/2,o.y+o.height/2)).x,o.y,i.html),void i.startLabelEdit(n,s,r,o)}}var h=n instanceof Zn,a=n instanceof Gn&&n.hasEdgeBundle();if(!n._3v||!de(e)&&(h||a))return h?(n.expanded=!n.expanded,void this.graph.onInteractionEvent(new mr(this.graph,mr.GROUP_EXPANDED,e,n))):void(a&&this.graph.reverseExpanded(n)&&this.graph.onInteractionEvent(new mr(this.graph,mr.EDGE_BUNDLE,e,n)));i.currentSubNetwork=n}}else{if(i.currentSubNetwork)return void i.upSubNetwork();if(i.enableDoubleClickToOverview){var l=i.resetScale||1;Math.abs(i.scale-l)<1e-4?i.zoomToOverview():i.moveToCenter(l)}}}},nr.prototype={onkeydown:function(t,e){if(e.editable){var i=t.keyCode;if(8==i||46==i||127==i)return e.removeSelectionByInteraction(t),void W(t);de(t)&&(67!=i&&86!=i&&90!=i&&89!=i||W(t))}}},we.EditInteraction=nr,sr.prototype={onkeydown:function(e,i){if(e.metaKey&&83==e.keyCode){var n=i.exportImage(i.scale,i.viewportBounds),s=t.open().document;s.title="export image - "+n.width+" x "+n.height;var r=s.createElement("img");r.src=n.data,s.body.appendChild(r),W(e)}}},or.prototype={onkeydown:function(t,e){de(t)||(37==t.keyCode?(this._65(e,1,0),W(t)):39==t.keyCode?(this._65(e,-1,0),W(t)):38==t.keyCode?(this._65(e,0,1),W(t)):40==t.keyCode&&(this._65(e,0,-1),W(t)))},_65:function(t,e,i){t._m03(e,i)},onstart:function(t,e){this._kf&&this.destroy(e)},_kf:!(rr.prototype={destroy:function(t){delete this.draggingElements,delete this.currentDraggingElement},_2b:function(t){var e=new ot;return t.selectionModel.forEach(function(i){t.isMovable(i)&&t.isVisible(i)&&e.add(i)},this),e},onstart:function(t,e){this.currentDraggingElement&&this.destroy(e)},startdrag:function(t,e){if(!(t.responded||t.touches&&1!=t.touches.length)){var i=t.getData();if(i&&e.isSelected(i)&&e.isMovable(i)){t.responded=!0,this.currentDraggingElement=i,this.draggingElements=this._2b(e);var n=new mr(e,mr.ELEMENT_MOVE_START,t,this.currentDraggingElement,this.draggingElements.datas);!1!==e.beforeInteractionEvent(n)?e.onInteractionEvent(n):this.destroy(e)}else this.destroy(e)}},ondrag:function(t,e){if(this.currentDraggingElement)if(t.touches&&1!=t.touches.length)this.enddrag(t,e);else{X(t);var i=t.dx,n=t.dy,s=e.scale;i/=s,n/=s;var r=new mr(e,mr.ELEMENT_MOVING,t,this.currentDraggingElement,this.draggingElements.datas);e.moveElements(this.draggingElements.datas,i,n),e.onInteractionEvent(r)}},enddrag:function(t,e){if(this.currentDraggingElement){if(this.draggingElements&&this.draggingElements.length){if(t.shiftKey){var i,n=e.toLogical(t),s=n.x,r=n.y;e.forEachReverseVisibleUI(function(t){var e=t.data;if(!this.draggingElements.contains(e)&&t.uiBounds.intersectsPoint(s-t.x,r-t.y)&&t.hitTest(s,r,1)){if(e instanceof we.Edge){if(!e.enableSubNetwork)return;for(var n=this.draggingElements.length;0<n--;){var o=this.draggingElements.get(n);if(o instanceof we.Node&&o.linkedWith(e))return}return i=e,!1}return(e.enableSubNetwork||e._hx()&&e.expanded)&&(i=e),!1}},this),i&&this.draggingElements.forEach(function(t){for(var e=t.parent;e;){if(this.draggingElements.contains(e))return;e=e.parent}t.parent=i},this)}var o=new mr(e,mr.ELEMENT_MOVE_END,t,this.currentDraggingElement,this.draggingElements.datas);e.onInteractionEvent(o)}this.destroy(e)}},onpinch:function(t,e){this.currentDraggingElement&&this.enddrag(t,e)},step:1,onkeydown:function(t,e){var i,n;if(de(t)&&(37==t.keyCode?i=-1:39==t.keyCode?i=1:38==t.keyCode?n=-1:40==t.keyCode&&(n=1),i||n)){var s=this._2b(e).datas;if(0!=s.length){W(t),i=i||0,n=n||0;var r=this.step/e.scale,o=new mr(e,mr.ELEMENT_MOVE_END,t,null,s);e.moveElements(s,i*r,n*r),e.onInteractionEvent(o)}}}}),startdrag:function(t,e){if(!t.responded){e.stopAnimation(),t.responded=!0,this._kf=!0,e.cursor=Zt;var i=new mr(e,mr.PAN_START,t);e.onInteractionEvent(i)}},ondrag:function(t,e){this._kf&&e.translate(t.dx||0,t.dy||0)},enddrag:function(t,e){if(this._kf){if(!1!==e.enableInertia){var i=t.vx,n=t.vy;(.1<Math.abs(i)||.1<Math.abs(n))&&e._m03(i,n)}this.destroy(e);var s=new mr(e,mr.PAN_END,t);e.onInteractionEvent(s)}},startpinch:function(t,e){e.pauseRendering(!0)},onpinch:function(t,e){this._kf=!0;var i=t.dScale;if(i){var n=e.globalToLocal(t.center);e.zoomAt(i,n.x,n.y,!1)}},endpinch:function(t,e){e.pauseRendering(!1)},destroy:function(t){this._kf=!1,t.cursor=null}},hr.prototype={onDataPropertyChange:function(t){this.graph.callLater(function(){this._je()},this)},destroy:function(){this.graph.cursor=null,this.element&&delete this.element._editting,this._mousePressed=!1,delete this._9f,delete this._9g,delete this._m3anEdit,E(this,hr,"destroy",arguments)},_9f:null,_5n:function(t){this._9f=t,this.invalidate()},isEndPointEditable:function(t,e){return this.graph.isEndPointEditable(t,e)},drawPoint:function(t,e,i){e.isEndPoint&&!this.isEndPointEditable(this.element,e.isFrom)||(t.beginPath(),e.isControlPoint?t.rect(e.x-this.handlerSize/i,e.y-this.handlerSize/i,this.handlerSize/i*2,this.handlerSize/i*2):t.arc(e.x,e.y,this.handlerSize/i,0,2*Math.PI,!1),t.lineWidth=1/i,t.lineDash=[],t.strokeStyle="#888",t.fillStyle="rgba(255, 255, 0, 0.8)",t.stroke(),t.fill())},_fy:function(t,e,i,n){n?t.moveTo(e,i):t.lineTo(e,i)},doDraw:function(t,e){this.drawLine(t,e)},drawLine:function(t,e){if(this._9f&&this._9f.length){var i=this._9f;t.save(),this.element instanceof Hn&&(t.translate(this.element.x,this.element.y),this.element.rotate&&t.rotate(this.element.rotate));var n,s=[];t.beginPath();var r=i.length;i.forEach(function(e,i){if(e.type!=Le.SEGMENT_CLOSE)for(var o=!i||i==r-1,h=0,a=e.points;h+1<a.length;){var l={x:a[h],y:a[h+1],isControlPoint:this._6o(e,h)};o&&(l.isEndPoint=!0,l.isFrom=0==i),s.push(l),this._fy(t,l.x,l.y,null==n),n=l,h+=2}},this),t.lineWidth=1/e,t.lineDash=[2/e,3/e],t.strokeStyle="#555",t.stroke(),s.forEach(function(i,n){this.drawPoint(t,i,e,n)},this),t.restore()}},invalidate:function(){this.topCanvas.invalidate()},_38:function(t){if(this.element!=t&&(this.element&&this.destroy(),t&&this.isEditable(t))){var e=this._5o(t,this.graph);e&&(this.setCurrentElement(t,!0),t._editting=!0,this._m3anEdit=!0,this._5n(e),this.addDrawable())}},_je:function(){if(this.isShowing()&&this.element){var t=this._5o(this.element,this.graph);t?this._5n(t):this.destroy(this.graph)}},_5o:function(t,e){if(e.isEditable(t)){var i=t.pathSegments||[];i instanceof ot&&(i=i.toDatas());var n=e.getUI(t);if(n instanceof we.EdgeUI){var s=n.getEndPointBounds(e.getUI(t.fromAgent)),r=n.getEndPointBounds(e.getUI(t.toAgent)),o=s.center,h=r.center,a=n.getStyle(ss.EDGE_FROM_OFFSET),l=n.getStyle(ss.EDGE_TO_OFFSET);a&&(o.x+=a.x||0,o.y+=a.y||0),l&&(h.x+=l.x||0,h.y+=l.y||0),i.splice(0,0,new we.PathSegment(Le.SEGMENT_MOVE_TO,[o.x,o.y])),i.push(new we.PathSegment(Le.SEGMENT_MOVE_TO,[h.x,h.y]))}return i}},_i0:function(t,e){var i={x:t-=this.element.x,y:e-=this.element.y};return this.element.rotate&&As(i,-this.element.rotate),i},isPointAddable:function(t,e){return!0},isPointRemovable:function(t,e,i){return!0},onclick:function(t,e){if(e.editable&&t.altKey&&this.element){var i=this._g0(t,e);if(i&&i.isControlPoint&&!1!==this.isPointRemovable(this.element,i,e))0<=i.index&&(this.element.removePathSegmentByIndex(i.index),(n=new mr(e,mr.POINT_REMOVE,t,this.element)).point=i,e.onInteractionEvent(n));else if(this.element==t.getData()&&!1!==this.isPointAddable(this.element,e)){var n,s=e.toLogical(t);!1!==e.getUI(this.element).addPoint(s.x,s.y,this.handlerSize||2)&&((n=new mr(e,mr.POINT_ADD,t,this.element)).point=s,e.onInteractionEvent(n))}}},isEditable:function(t){return this.graph.isEditable(t)&&(t instanceof Hn||t instanceof Gn&&(!t.isLooped()||t.hasPathSegments()))},ondblclick:function(t,e){if(e.editable){var i=t.getData();i&&i!=this.element&&!i._editting?this._38(i):this.destroy(e)}else this.element&&this.destroy(e)},onstart:function(t,e){if(this._mousePressed=!0,e.editable){if(!t.responded)if(this.element&&this._g0(t,e))t.responded=!0;else{var i=t.getData();i&&e.isResizable(i)&&i instanceof Hn?this.element&&i!=this.element&&this.destroy():this._38(i)}}else this.element&&this.destroy(e)},onrelease:function(t,e){this._mousePressed=!1,this.element&&(this._m3anEdit=!0)},_9g:null,_g0:function(t,e){var i=e.toLogical(t);this.element instanceof Hn&&(i=this._i0(i.x,i.y));var n,s=e.scale,r=this.handlerSize/s,o=this._9f,h=o.length,a=this.element instanceof we.Edge;if(o.forEach(function(t,s){for(var l=0,_=t.points;l+1<_.length;){var u=_[l],c=_[l+1];if(lt(i.x,i.y,u,c)<r){if(n={oldPoints:_.slice(0),segment:t,index:s,pointIndex:l},a&&--n.index,a&&!ar(t)&&(0==s||s==o.length-1)){n.isEndPoint=!0;var d=0==s,f=(n.isFrom=d)?we.Styles.EDGE_FROM_OFFSET:we.Styles.EDGE_TO_OFFSET,g=e.getStyle(this.element,f)||{};n.oldPoints=[g.x||0,g.y||0]}return this._6o(t,l)&&(n.isControlPoint=!0,0<s&&(n.prevSegment=o instanceof ot?o.getByIndex(s-1):o[s-1]),s+1<h&&(n.nextSegment=o instanceof ot?o.getByIndex(s+1):o[s+1],n.nextSegment.points&&(n.oldNextPoints=n.nextSegment.points.slice(0)))),!1}l+=2}},this),!n||!n.isEndPoint||this.isEndPointEditable(this.element,n.isFrom))return n},_6o:function(t,e){return e==t.points.length-2},startdrag:function(t,e){if(this.element&&this._m3anEdit&&(this._9g=this._g0(t,e),this._9g)){this.removeDrawable(),t.responded=!0;var i=new mr(e,mr.POINT_MOVE_START,t,this.element);i.point=this._9g,e.onInteractionEvent(i)}},onkeyup:function(t,e){this._mousePressed&&16!=!t.keyCode&&this.element&&this._9g&&this._9g.delta&&this._m3c(this._9g.delta.x,this._9g.delta.y,e,t,!1)},onkeydown:function(t,e){E(this,hr,"onkeydown",arguments),this._mousePressed&&this.element&&this._9g&&t.shiftKey&&this._9g.delta&&this._m3c(this._9g.delta.x,this._9g.delta.y,e,t,!0)},_m3c:function(t,e,i,n,s){var r=this._9g,o=this.element,h=r.oldPoints,a=r.segment;if(r.isEndPoint){var l,_=r.isFrom?we.Styles.EDGE_FROM_OFFSET:we.Styles.EDGE_TO_OFFSET,u={x:h[0]+t,y:h[1]+e};return o.setStyle(_,u),(l=new mr(i,mr.POINT_MOVING,n,o)).point=r,void i.onInteractionEvent(l)}if(s&&r.isControlPoint){var c=h[h.length-2]+t,d=h[h.length-1]+e,f=r.prevSegment,g=r.nextSegment,v=20/i.scale,E=Number.MAX_VALUE,p=E,m=E,y=E;f&&(f=f.lastPoint,E=Math.abs(c-f.x),m=Math.abs(d-f.y)),g&&(g=g.lastPoint,p=Math.abs(c-g.x),y=Math.abs(d-g.y)),E<v&&E<p?t+=f.x-c:p<v&&p<E&&(t+=g.x-c),m<v&&m<y?e+=f.y-d:y<v&&y<m&&(e+=g.y-d)}if(r.isControlPoint&&ar(a)){for(var T=a.points.length-4;T<a.points.length;){var b=h[T]+t,O=h[T+1]+e;a.points[T]=b,a.points[T+1]=O,T+=2}if(r.nextSegment&&ar(r.nextSegment)){var w=r.oldNextPoints;b=w[0]+t,O=w[1]+e,r.nextSegment.points[0]=b,r.nextSegment.points[1]=O}}else b=h[T=r.pointIndex]+t,O=h[T+1]+e,a.points[T]=b,a.points[T+1]=O;o.firePathChange(),(l=new mr(i,mr.POINT_MOVING,n,o)).point=r,i.onInteractionEvent(l)},ondrag:function(t,e){if(this.element&&this._9g){var i=this._9g,n=this.element,s=t.totalDeltaX,r=t.totalDeltaY,o=e.scale;if(s/=o,r/=o,n.rotate){var h={x:s,y:r};As(h,-n.rotate),s=h.x,r=h.y}i.delta={x:s,y:r},this._m3c(s,r,e,t,t.shiftKey)}},enddrag:function(t,e){if(this.element&&this._9g){this.addDrawable(),this._je();var i=new mr(e,mr.POINT_MOVE_END,t,this.element);i.point=this._9g,e.onInteractionEvent(i)}},onmousemove:function(t,e){this.element&&(e.cursor=t.altKey&&(this._g0(t,e)||this.element==t.getData())?"crosshair":null)}},g(hr,Us),rt.SELECTION_RECTANGLE_STROKE=1,rt.SELECTION_RECTANGLE_STROKE_COLOR=Q(3724541951),rt.SELECTION_RECTANGLE_FILL_COLOR=Q(1430753245),Le.RECTANGLE_SELECTION_MODE_INTERSECT="intersect",Le.RECTANGLE_SELECTION_MODE_CONTAIN="contain",rt.RECTANGLE_SELECTION_MODE=Le.RECTANGLE_SELECTION_MODE_INTERSECT,lr.prototype={onstart:function(t,e){this._kf&&this.destroy(e)},startdrag:function(t,e){t.responded||(t.responded=!0,this._kf=e.toLogical(t),e.cursor="crosshair",this._12Id=this.topCanvas.addDrawable(this._12,this).id)},ondrag:function(t,e){if(this._kf){X(t),this._end=e.toLogical(t),this.invalidate();var i=new mr(e,mr.SELECT_START,t,e.selectionModel);e.onInteractionEvent(i)}},enddrag:function(t,e){if(this._kf){this._fbTimer&&(clearTimeout(this._fbTimer),this._fbTimer=null),this._fb(!0),this.destroy(e);var i=new mr(e,mr.SELECT_END,t,e.selectionModel);e.onInteractionEvent(i)}},onpinch:function(t,e){this._kf&&this.enddrag(t,e)},_12:function(t,e){t.strokeStyle=rt.SELECTION_RECTANGLE_STROKE_COLOR,t.fillStyle=rt.SELECTION_RECTANGLE_FILL_COLOR,t.lineWidth=rt.SELECTION_RECTANGLE_STROKE/e;var i=this._kf.x,n=this._kf.y;t.rect(i,n,this._end.x-i,this._end.y-n),t.fill(),t.stroke()},invalidate:function(){this.invalidateFlag?this.topCanvas.invalidate():(this.invalidateFlag=!0,this._fbTimer=setTimeout(this._fb.bind(this),100))},_fb:function(t){if(this.invalidateFlag=!1,this._fbTimer=null,!this._kf||S&&!t)this.topCanvas.invalidate();else{var e=Math.min(this._kf.x,this._end.x),i=Math.min(this._kf.y,this._end.y),n=Math.abs(this._kf.x-this._end.x),s=Math.abs(this._kf.y-this._end.y);if(n&&s){var r=[],o=this.graph.scale,h=this.graph.rectangleSelectionMode;if(this.graph.forEachVisibleUI(function(t){t._hy&&this.graph.isSelectable(t.$data)&&this.inRectangle(e,i,n,s,t,o,h)&&r.push(t.data)}.bind(this)),this.graph.selectionModel.set(r),this.topCanvas.invalidate(),!t){var a=new mr(this.graph,mr.SELECT_BETWEEN,null,this.graph.selectionModel);this.graph.onInteractionEvent(a)}}else this.graph.selectionModel.clear()}},inRectangle:function(t,e,i,n,s,r,o){var h=s.getBounds();return!!vt(t,e,i,n,h.x,h.y,h.width,h.height)||(o=o||rt.RECTANGLE_SELECTION_MODE)!=Le.RECTANGLE_SELECTION_MODE_CONTAIN&&function(t,e,i,n,s,r){t-=s.$x,e-=s.$y;var o=s._fu.intersection(t,e,i,n);if(!o)return!1;t=o.x*r,e=o.y*r,i=o.width*r,n=o.height*r,i=Math.round(i)||1,n=Math.round(n)||1;var h=ke(),a=h.canvas;a.width<i||a.height<n?(a.width=i,a.height=n):(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,i,n)),h.setTransform(1,0,0,1,-t-s.$x*r,-e-s.$y*r),h.scale(r,r),s._jc(h,1);var l=Ge(h,0,0,i,n);if(!l)return!1;for(var _=(l=l.data).length/4;0<_--;)if(l[4*_-1]>ki)return!0;return!1}(t,e,i,n,s,r)},destroy:function(t){this._kf=null,t.cursor=null,this._12Id&&(this.topCanvas.removeDrawable(this._12Id),delete this._12Id,this.topCanvas.invalidate())}};var _r=y({super:lr,onstart:null,startdrag:null,ondrag:null,enddrag:null,accept:function(t,e,i){return!1!==i.enableRectangleSelectionByRightButton},oncontextmenu:function(t,e){e.popupmenu||X(t)},onstart2:function(t,e){lr.prototype.onstart.apply(this,arguments)},startdrag2:function(t,e){t.responded||(e.popupmenu&&e.popupmenu.hide instanceof Function&&e.popupmenu.hide(),lr.prototype.startdrag.apply(this,arguments))},ondrag2:function(t,e){lr.prototype.ondrag.apply(this,arguments)},enddrag2:function(t,e){lr.prototype.enddrag.apply(this,arguments)}});function ur(t){v(this,ur,arguments),this.handlerSize=G?8:4,this._rotateHandleLength=G?30:20}function cr(t,e){var i=new Et;return i.addPoint(Xi.call(t,{x:e.x,y:e.y})),i.addPoint(Xi.call(t,{x:e.x+e.width,y:e.y})),i.addPoint(Xi.call(t,{x:e.x+e.width,y:e.y+e.height})),i.addPoint(Xi.call(t,{x:e.x,y:e.y+e.height})),i}function dr(t){this.graph=t}function fr(){}function gr(t){this.graph=t}function vr(t){this.graph=t}function Er(t){this.graph=t}function pr(t){this.graph=t}function mr(t,e,i,n,s){this.source=t,this.type="interaction",this.kind=e,this.event=i,this.data=n,this.datas=s}function yr(t){this._46={},this._ke=t,this._ke._1b.addListener(this._9n,this),this.currentMode=Le.INTERACTION_MODE_DEFAULT}Ws=Math.PI/4,ur.prototype={_dv:!1,_dw:!1,onDataPropertyChange:function(t){this.graph.callLater(function(){this._9i()},this)},ondblclick:function(t,e){this.element&&this.destroy(e)},destroy:function(t){t.cursor=null,delete this._m3d,delete this._m1ody,delete this._9g,delete this._m3anEdit,delete this._jh,delete this._rotatePoint,delete this._dw,delete this._dv,delete this._insets,E(this,ur,"destroy",arguments)},_m3d:null,_jh:null,_89:function(t){this._m3d=t;var e=this._m3d.x,i=this._m3d.y,n=this._m3d.width,s=this._m3d.height;if(this.element instanceof Zn&&this.element.expanded,this._dw){var r=[];r.push({x:e,y:i,p:mt.LEFT_TOP,cursor:"nwse-resize",rotate:5*Ws}),r.push({x:e+n/2,y:i,p:mt.CENTER_TOP,cursor:"ns-resize",rotate:6*Ws}),r.push({x:e+n,y:i,p:mt.RIGHT_TOP,cursor:"nesw-resize",rotate:7*Ws}),r.push({x:e,y:i+s/2,p:mt.LEFT_MIDDLE,cursor:"ew-resize",rotate:4*Ws}),r.push({x:e,y:i+s,p:mt.LEFT_BOTTOM,cursor:"nesw-resize",rotate:3*Ws}),r.push({x:e+n,y:i+s/2,p:mt.RIGHT_MIDDLE,cursor:"ew-resize",rotate:0}),r.push({x:e+n/2,y:i+s,p:mt.CENTER_BOTTOM,cursor:"ns-resize",rotate:2*Ws}),r.push({x:e+n,y:i+s,p:mt.RIGHT_BOTTOM,cursor:"nwse-resize",rotate:Ws}),this._jh=r}this._dv?this._rotatePoint={x:e+n/2,y:i,cursor:"url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFVJREFUeNpi/P//PwMlgBGfAYyMIOn/jGQZANIMoskyAKYZGeAyiGgX4PIOSWGAzRBGUmMBw1CqGUBMlA1yA4gxhKhYwBnfpKQDqqREquRGYgBAgAEAD8h/4adTIzwAAAAASUVORK5CYII=) 8 8,crosshair"}:this._rotatePoint=null,this.invalidate()},_dy:function(t,e,i,n){t.beginPath();var s=(this.handlerSize-1)/n;t.rect(e-s,i-s,2*s,2*s),t.lineWidth=1/n,t.lineDash=[],t.strokeStyle="#888",t.fillStyle="rgba(255, 255, 255, 0.8)",t.stroke(),t.fill()},_5q:function(t,e,i,n,s,r){s=s||this.handlerSize,r=r||"rgba(0, 255, 0, 1)",t.beginPath(),s/=n,t.arc(e,i,s,0,2*Math.PI,!1),t.lineWidth=1/n,t.lineDash=[],t.strokeStyle="#888",t.fillStyle=r,t.stroke(),t.fill()},_i0:function(t,e){var i={x:t-=this.element.x,y:e-=this.element.y};return this.element.rotate&&As(i,-this.element.rotate),i},doDraw:function(t,e){if(this._m3d){if(t.save(),t.translate(this.element.x,this.element.y),this.element.rotate&&t.rotate(this.element.rotate),this._rotatePoint){this._5q(t,0,0,e,3,"#FF0");var i=this._rotatePoint.x,n=this._rotatePoint.y-this._rotateHandleLength/e;t.beginPath(),t.moveTo(i,this._rotatePoint.y),t.lineTo(i,n),t.lineWidth=1/e,t.strokeStyle="#555",t.stroke(),this._5q(t,i,n,e)}if(this._jh){var s=this._m3d.x,r=this._m3d.y,o=this._m3d.width,h=this._m3d.height;t.beginPath(),t.rect(s,r,o,h),t.lineWidth=1/e,t.lineDash=[2/e,3/e],t.strokeStyle="#555",t.stroke(),a(this._jh,function(i){this._dy(t,i.x,i.y,e)},this)}t.restore()}},_9i:function(){if(this.isShowing()&&this.element){var t=this.graph.getUI(this.element);this._m1ody=t.body;var e=cr(this._m1ody,this._m1ody._j4),i=cr(this._m1ody,this._m1ody._83);this._insets=new pt(e.y-i.y,e.x-i.x,i.bottom-e.bottom,i.right-e.right),this._89(i)}},_m13:function(t,e,i){return e.isResizable(t)},_m15:function(t,e){return(!(t instanceof Zn)||!t.expanded)&&e.isRotatable(t)},_m3e:function(t,e){return t instanceof zn&&e.isEditable(t)},onstart:function(t,e){if(e.editable){if(!t.responded){var i=e.getUI(t),n=t.getData();if(n!=this.element){if(this.element){if(this._g0(t,e))return void(t.responded=!0);this.destroy(e)}if(n&&!n._editting&&this._m3e(n,e)){var s=this._m13(n,e,i),r=this._m15(n,e,i);(s||r)&&(this.setCurrentElement(n,!0),this.addDrawable(),this._dw=s,this._dv=r,this._9i())}}}}else this.element&&this.destroy(e)},onrelease:function(t,e){this.element&&(this._m3anEdit=!0,this.addDrawable(),e.callLater(function(){this._9i()},this))},_9g:null,_g0:function(t,e){var i=e.toLogical(t);i=this._i0(i.x,i.y);var n,s=e.scale,r=this.handlerSize/s;if(this._rotatePoint){var o=this._rotatePoint.x,h=this._rotatePoint.y-this._rotateHandleLength/s;if(lt(i.x,i.y,o,h)<r)return this._rotatePoint}if(this._jh&&this._jh.length)return a(this._jh,function(t,e){if(lt(i.x,i.y,t.x,t.y)<r)return n=t,!1},this),n},onmousemove:function(t,e){if(this.element){var i=this._g0(t,e);if(i)if(i!=this._rotatePoint&&this.element.rotate){var n=i.rotate+this.element.rotate;e.cursor=function(t){t%=2*Math.PI;var e=Math.round(t/Ws);return 0==e||4==e?"ew-resize":1==e||5==e?"nwse-resize":2==e||6==e?"ns-resize":"nesw-resize"}(n)}else e.cursor=i.cursor;else e.cursor=null}},startdrag:function(t,e){if(this.element&&(this.removeDrawable(),this._m3anEdit&&(this._9g=this._g0(t,e),this._9g))){var i;if(t.responded=!0,this._9g==this._rotatePoint)return this._9g.start=e.toLogical(t),this._9g.rotate=this.element.rotate||0,(i=new mr(e,mr.ROTATE_START,t,this.element)).value=this.element.rotate,void e.onInteractionEvent(i);(i=new mr(e,mr.RESIZE_START,t,this.element)).point=this._9g,e.onInteractionEvent(i)}},_6p:function(t,e,i,n,s,r){var o=this._m3d,h=o.x,a=o.y,l=o.width,_=o.height;r&&(n!=l?s=n*_/l:n=s*l/_);var u=t.path.segments,c=n/l,d=s/_,f=-h*c+e,g=-a*d+i;u.forEach(function(t){if(t.type!=Le.SEGMENT_CLOSE){var n=t.points;if(n&&n.length)for(var s=0,r=n.length;s<r;s+=2){var o=n[s],l=n[s+1];n[s]=(o-h)*c+e-f,n[s+1]=(l-a)*d+i-g}}}),this._m3d.set(e-f,i-g,n,s),t.setLocation(t.x+f,t.y+g),t.firePathChange()},_9k:function(t,e,i,n,s,r){this._m3d.set(e,i,n,s),t.minSize={x:e,y:i,width:n,height:s}},_44:function(t,e,i,n,s){if(this.element instanceof Zn&&this.element.expanded)return this._9k(this.element,t,e,i,n,s);if(this.element instanceof Hn)return this._6p(this.element,t,e,i,n,s);var r=this._m1ody instanceof Es;if(!r&&s){var o=this._m3d,h=this._m1ody.originalBounds;i!=o.width?n=i*h.height/h.width:i=n*h.width/h.height}var a=this.element.anchorPosition,l=new dt(i-this._insets.left-this._insets.right,n-this._insets.top-this._insets.bottom);if(l.width<1&&(i=this._insets.left+this._insets.right+1,l.width=1),l.height<1&&(n=this._insets.top+this._insets.bottom+1,l.height=1),r?this.element.setStyle(ss.LABEL_SIZE,l):this.element.size=l,a){var _=(c=At(a,i,n)).x+t-(this._m1ody.offsetX||0),u=c.y+e-(this._m1ody.offsetY||0);this._m3d.set(t-_,e-u,i,n),this.element.rotate&&(_=(c=As({x:_,y:u},this.element.rotate)).x,u=c.y),this.element.x+=_,this.element.y+=u}else{var c;_=this._m3d.x*i/this._m3d.width-t,u=this._m3d.y*n/this._m3d.height-e,this._m3d.set(t+_,e+u,i,n),this.element.rotate&&(_=(c=As({x:_,y:u},this.element.rotate)).x,u=c.y),this.element.x-=_,this.element.y-=u}},ondrag:function(t,e){if(this.element&&this._9g){if(this._9g==this._rotatePoint){var i=(g=(s=e.toLogical(t)).x,v=s.y,E=this.element.x,p=this.element.y,m=this._9g.start.x,y=this._9g.start.y,!0,ei(E,p,g,v)-ei(E,p,m,y));i+=this._9g.rotate||0,t.shiftKey&&(i=Math.round(i/Math.PI*4)*Math.PI/4);var n=this.element.rotate;return this.element.rotate=i%(2*Math.PI),(a=new mr(e,mr.ROTATING,t,this.element)).oldValue=n,a.value=this.element.rotate,void e.onInteractionEvent(a)}var s,r=t.dx,o=t.dy,h=e.scale;r/=h,o/=h,this.element.rotate&&(As(s={x:r,y:o},-this.element.rotate),r=s.x,o=s.y);var a,l=this._9g.p,_=this._m3d,u=_.x,c=_.y,d=_.width,f=_.height;l.horizontalPosition==yt?d<=r?(u+=d,d=r-d||1):(u+=r,d-=r):l.horizontalPosition==Tt&&(d<=-r?u-=d=-r-d||1:d+=r),l.verticalPosition==bt?f<=o?(c+=f,f=o-f||1):(c+=o,f-=o):l.verticalPosition==Ot&&(f<=-o?c-=f=-o-f||1:f+=o),this._44(u,c,d,f,t.shiftKey),(a=new mr(e,mr.RESIZING,t,this.element)).point=this._9g,e.onInteractionEvent(a)}var g,v,E,p,m,y},enddrag:function(t,e){if(this.element&&this._9g){var i;if(this._9g==this._rotatePoint)return(i=new mr(e,mr.ROTATE_END,t,this.element)).value=this.element.rotate,void e.onInteractionEvent(i);(i=new mr(e,mr.RESIZE_END,t,this.element)).point=this._9g,e.onInteractionEvent(i)}}},g(ur,Us),we.ResizeInteraction=ur,dr.prototype={onstart2:function(t,e){this.onstart(t,e)},onstart:function(t,e){if(!t.responded){var i=t.getData();if(i&&!e.isSelectable(i)&&(i=null),i&&de(t)){e.reverseSelect(i);var n=new mr(e,mr.SELECT,t,e.selectionModel);e.onInteractionEvent(n)}else i&&e.selectionModel.isSelected(i)||(i?(e.setSelection(i),e.sendToTop(i)):e.setSelection(null),n=new mr(e,mr.SELECT,t,e.selectionModel),e.onInteractionEvent(n))}},onkeydown:function(t,e){27!=t.keyCode?de(t)&&65==t.keyCode&&(e.selectAll(),W(t)):e.unSelectAll()}},rt.TOOLTIP_DURATION=3e3,rt.TOOLTIP_DELAY=1e3,fr.CLASS_NAME="Q-Tooltip",fr.CURSOR_OFFSET_X=0,fr.CURSOR_OFFSET_Y=15,Xt("."+fr.CLASS_NAME,{"user-select":"none","background-color":"#FFFFCA",overflow:"hidden","box-shadow":"0 5px 10px rgba(136, 136, 136, 0.5)",color:"#000","pointer-events":"none",border:"1px solid #D9D9D9",padding:"2px 4px",display:"block",position:"absolute"}),fr.getInstance=function(){return fr.instance||(fr.instance=new fr)},fr.show=function(t,e,i){fr.getInstance().show(t,e,i)},fr.hide=function(){fr.getInstance().hide()},fr.prototype={getTooltipElement:function(){var t=this._kz;return t||((t=e.createElement("div")).className=fr.CLASS_NAME,this._kz=t,e.body.appendChild(t)),t},update:function(i,n){if(this.isShowing()){var s="text"==n;i&&!s&&(i=i.replace(/\n/g,"<br>"));var r=this.getTooltipElement();s?r.textContent=i||"":r.innerHTML=i||"",o=r,h=this._info.x+fr.CURSOR_OFFSET_X,a=this._info.y+fr.CURSOR_OFFSET_Y,l=e.documentElement,_=new Et(t.pageXOffset,t.pageYOffset,l.clientWidth-2,l.clientHeight-2),u=o.offsetWidth,c=o.offsetHeight,h+u>_.x+_.width&&(h=_.x+_.width-u),a+c>_.y+_.height&&(a=_.y+_.height-c),h<_.x&&(h=_.x),a<_.y&&(a=_.y),o.style.left=h+"px",o.style.top=a+"px"}var o,h,a,l,_,u,c},setTooltip:function(t,e){if(!t||!t.content)return this._info=null,this._kz&&(this._kz.style.display="none"),void(this._9m=Date.now());this._9m=null,this._info=t,this.getTooltipElement().style.display="",this.update(this._info.content,this._info.type),isNaN(e)&&(e=rt.TOOLTIP_DURATION),e&&this.startTimer(this.setTooltip.bind(this,!1),e)},_9m:null,_kc:null,stopTimer:function(){this._kc&&(clearTimeout(this._kc),this._kc=null)},startTimer:function(t,e){this.stopTimer(),this._kc=setTimeout(function(t){this._kc=null,t()}.bind(this,t),e)},show:function(t,e,i){this.isShowing()||this._9m&&Date.now()-this._9m<1e3?this.setTooltip(t,i):(isNaN(e)&&(e=rt.TOOLTIP_DELAY),e?this.startTimer(this.setTooltip.bind(this,t,i),e):this.setTooltip(t,i))},isShowing:function(){return this._kz&&"none"!==this._kz.style.display},hide:function(){this.stopTimer(),this.isShowing()&&this.setTooltip(!1)}},gr.prototype={onstart:function(t,e){this.destroy(e)},_in:null,onmousemove:function(t,e){if(e.enableTooltip){var i=t.getData(),n=i?e.getTooltip(i,t):null;n?fr.show({target:i,content:n,type:i.tooltipType,x:t.pageX,y:t.pageY},e.tooltipDelay,e.tooltipDuration):fr.hide()}},destroy:function(t){fr.hide()}},vr.prototype={destroy:function(t){this.delayAction&&(this.delayAction=null)},onmousewheel:function(t,e){if(!1!==e.enableWheelZoom&&t.delta){if(we.stopEvent(t),e.stopAnimation(),e.delayedRendering){var i=this.delayAction;i=i||(this.delayAction=new function(t){this._m0ction=t,this.action=function(t){if(this._kc&&(this._isFrameTimer?(cancelAnimationFrame(this._kc),this._isFrameTimer=null):clearTimeout(this._kc),this._kc=null),!0!==t&&!1!==t)return t?void(this._kc=setTimeout(function(){this._m0ction(),this._kc=null}.bind(this),t)):(this._isFrameTimer=!0,void(this._kc=requestAnimationFrame(function(){this._m0ction(),this._kc=null,this._isFrameTimer=null}.bind(this))));this._m0ction()}}(function(){e.pauseRendering(!1)})),e.pauseRendering(!0),i.action(100)}e.zoomByMouseEvent(t,t.delta,!1)}}},Er.prototype={onclick:function(t,e){e.zoomByMouseEvent(t,!de(t))}},pr.prototype={onclick:function(t,e){e.zoomByMouseEvent(t,de(t))}},g(mr,St),mr.ELEMENT_MOVE_START="element.move.start",mr.ELEMENT_MOVING="element.moving",mr.ELEMENT_MOVE_END="element.move.end",mr.ELEMENT_CREATED="element.created",mr.ELEMENT_REMOVED="element.removed",mr.POINT_MOVE_START="point.move.start",mr.POINT_MOVING="point.moving",mr.POINT_MOVE_END="point.move.end",mr.POINT_ADD="point.add",mr.POINT_REMOVE="point.remove",mr.RESIZE_START="resize.start",mr.RESIZING="resizing",mr.RESIZE_END="resize.end",mr.ROTATE_START="rotate.start",mr.ROTATING="rotating",mr.ROTATE_END="rotate.end",mr.PAN_START="pan.start",mr.PAN_END="pan.end",mr.GROUP_EXPANDED="group.expanded",mr.EDGE_BUNDLE="edge.bundle",mr.SELECT="select",mr.SELECT_START="select.start",mr.SELECT_BETWEEN="select.between",mr.SELECT_END="select.end",mr.LONG_CLICK="long.click",tt(yr.prototype={_9n:function(t){if(this._interactionSupport)switch(t.kind){case Bt.KIND_REMOVE:this._interactionSupport._onElementRemoved(t.data);break;case Bt.KIND_CLEAR:this._interactionSupport._onElementClear(t.data)}},destroy:function(){delete this._ke,delete this._46,this._interactionSupport&&(this._interactionSupport._i1(),delete this._interactionSupport)},_ke:null,_46:null,defaultMode:null,_g2:function(t,e,i){this._46[t]=new qs(e,i),t==this.currentMode&&this._interactionSupport._loInteraction(e)},addCustomInteraction:function(t){this._interactionSupport._lkCustomInteractionListener(t)},removeCustomInteraction:function(t){this._interactionSupport._iqCustomInteractionListener(t)},_ln:function(t){return this._46[t]||Tr[t]}},{defaultCursor:{get:function(){if(this.currentInteractionMode)return this.currentInteractionMode.defaultCursor}},currentMode:{get:function(){return this._m3urrentMode},set:function(t){this._m3urrentMode!=t&&(this._m3urrentMode,this._interactionSupport||(this._interactionSupport=new ce(this._ke)),this._m3urrentMode=t,this.currentInteractionMode=this._ln(this._m3urrentMode),this._ke.cursor=this.defaultCursor,this.currentInteractionMode?this._interactionSupport._loInteraction(this.currentInteractionMode.getInteractionInstances(this._ke)):this._interactionSupport._loInteraction([]))}}});var Tr={};function br(t){this.graph=t}rt.registerInteractions=function(t,e,i){var n=new qs(e,i);Tr[t]=n},Le.INTERACTION_MODE_VIEW="view",Le.INTERACTION_MODE_DEFAULT="default",Le.INTERACTION_MODE_SELECTION="selection",Le.INTERACTION_MODE_ZOOMIN="zoomin",Le.INTERACTION_MODE_ZOOMOUT="zoomout",Le.INTERACTION_MODE_CREATE_SIMPLE_EDGE="create.simple.edge",Le.INTERACTION_MODE_CREATE_EDGE="create.edge",Le.INTERACTION_MODE_CREATE_SHAPE="create.shape",Le.INTERACTION_MODE_CREATE_LINE="create.line",rt.registerInteractions(Le.INTERACTION_MODE_VIEW,[dr,or,vr,sr,ir,gr,_r]),rt.registerInteractions(Le.INTERACTION_MODE_CREATE_SIMPLE_EDGE,[nr,Js,dr,or,vr,sr,gr]),rt.registerInteractions(Le.INTERACTION_MODE_CREATE_EDGE,[nr,hr,dr,Vs,or,vr,sr,gr]),rt.registerInteractions(Le.INTERACTION_MODE_CREATE_SHAPE,[nr,Zs,dr,or,vr,sr,gr]),rt.registerInteractions(Le.INTERACTION_MODE_CREATE_LINE,[Qs,dr,or,vr,sr,gr]),rt.registerInteractions(Le.INTERACTION_MODE_DEFAULT,[nr,hr,ur,dr,rr,or,vr,sr,ir,gr,_r]),rt.registerInteractions(Le.INTERACTION_MODE_SELECTION,[nr,hr,ur,dr,rr,lr,or,vr,sr,ir,gr]),rt.registerInteractions(Le.INTERACTION_MODE_ZOOMIN,[vr,sr,Er],Vt),rt.registerInteractions(Le.INTERACTION_MODE_ZOOMOUT,[vr,sr,pr],Kt),we.PanInteraction=or,we.SelectionInteraction=dr,we.MoveInteraction=rr,we.WheelZoomInteraction=vr,we.DoubleClickInteraction=ir,we.ExportInteraction=sr,we.TooltipInteraction=gr,we.RectangleSelectionInteraction=lr,we.RectangleSelectionInteractionByRightButton=_r,we.PointsInteraction=hr,(we.Layouter=br).prototype={getNodeBounds:function(t){return this.graph.getUIBounds(t)},isLayoutable:function(t,e){return this.graph.isVisible(t)&&!1!==t.layoutable},getLayoutResult:function(t){},updateLocations:function(t,e,i,n,s){if(!0!==e){for(var r in t){var o=t[r];o.node.setLocation(o.x,o.y)}s&&s.call(this,t)}else{if(this.animate||(this.animate=new Fr),i&&(this.animate.duration=i),n&&(this.animate.animationType=n),this.animate.locations=t,s){var h=s,a=this;s=function(){h.call(a,t)}}this.animate.start(s)}},_g4:function(t){var e,i,n,s=null;t&&(e=t.byAnimate,s=t.callback,i=t.duration,n=t.animationType);var r=this.getLayoutResult(t);return!!r&&(this.updateLocations(r,e,i,n,s),r)},doLayout:function(t,e){if(!this.graph||!0===e)return this._g4(t);this.graph.callLater(function(){this._g4(t)},this)}},Le.DIRECTION_RIGHT=110,Le.DIRECTION_LEFT=120,Le.DIRECTION_CENTER=130,Le.DIRECTION_BOTTOM=210,Le.DIRECTION_TOP=220,Le.DIRECTION_MIDDLE=230,Le.DIRECTION_RIGHT_TOP=111,Le.DIRECTION_RIGHT_BOTTOM=112,Le.DIRECTION_LEFT_TOP=121,Le.DIRECTION_LEFT_BOTTOM=122,Le.DIRECTION_BOTTOM_LEFT=211,Le.DIRECTION_BOTTOM_RIGHT=212,Le.DIRECTION_TOP_LEFT=221,Le.DIRECTION_TOP_RIGHT=222;var Or="even",wr="two.side";function Lr(t){return 100<=t&&t<200}function Ar(t){this.graph=t}Le.LAYOUT_TYPE_EVEN=Or,Le.LAYOUT_TYPE_EVEN_HORIZONTAL="even.h",Le.LAYOUT_TYPE_EVEN_VERTICAL="even.v",Le.LAYOUT_TYPE_TWO_SIDE=wr,we.isHorizontalDirection=Lr,Ar.prototype={hGap:50,vGap:50,parentChildrenDirection:210,layoutType:Or,defaultSize:{width:50,height:60},getNodeSize:function(t){if(this.graph._8k._m0t){var e=this.graph.getUI(t);if(e)return e._fu}return t.image&&t.image.bounds?{width:t.image.bounds.width,height:t.image.bounds.height}:this.defaultSize},_m3x:function(t,e){var i=t.id;if(!(i in this._m04)&&this.isLayoutable(t)){var n,s=this.getNodeSize(t);n=s instanceof Et?[-s.x,-s.y]:[s.width/2,s.height/2],t.parentChildrenDirection;var r=e?this._m04[e.id]:this._m1j;this._m04[i]=new xr(this.getHGap(t),this.getVGap(t),this.getLayoutType(t),t.parentChildrenDirection,r,t,s.width,s.height,n)}},getHGap:function(t){return t&&H(t.hGap)?t.hGap:this.hGap},getVGap:function(t){return t&&H(t.vGap)?t.vGap:this.vGap},getLayoutType:function(t){return t&&t.layoutType?t.layoutType:this.layoutType},_m04:null,_m1j:null,_kh:function(){this._m04=null,this._m1j=null},getLayoutResult:function(t){var e,i,n,s,r=this.graph;t instanceof Object&&(e=t.x,i=t.y,r=t.root||this.graph,n=t.bounds,s=t.undirected),this._m04={},this._m1j=new xr,this._m1j._lo(this.hGap,this.vGap,this.parentChildrenDirection,this.layoutType);var o={};return jr(r,this._m3x,this,!1,s)&&(this._m1j._g4(e||0,i||0,o),n&&n.set(this._m1j.x,this._m1j.y,this._m1j.width,this._m1j.height)),this._kh(),o},doLayout:function(t,e){if(H(t)){var i=t,n=0;H(e)&&(n=e),t={x:i,y:n},e=!0}return E(this,Ar,"doLayout",[t,e])}},g(Ar,br);var xr=function(t,e,i,n,s,r,o,h,a){this._lc=t||0,this._ld=e||0,this.layoutType=i,this.parentChildrenDirection=n,(this.parentBounds=s)&&s._h4(this),this.node=r,this._er=o,this._m3z=h,this._m0nchorLocation=a};function Sr(t){this.graph=t,this.currentMovingNodes={}}function Ir(t,e,i,n){this.graph=t,H(e)&&(this.radius=e),H(i)&&(this.gap=i),H(n)&&(this.startAngle=n)}xr.prototype={_lo:function(t,e,i,n){this._lc=t,this._ld=e,this.parentChildrenDirection=i,this.layoutType=n},_8m:function(){this._fr=[]},_lc:0,_ld:0,_fr:null,_er:0,_m3z:0,layoutType:null,parentChildrenDirection:null,_h4:function(t){this._fr||(this._fr=[]),this._fr.push(t)},_d0:function(t,e,i,n,s){var r=new Et;return i(this._fr,function(i){i._3r(t,e),r.add(i),n?t+=i.width+this._lc:e+=i.height+this._ld},this),r},_8o:function(t,e,i,n,s){var r,o=n?this._lc:this._ld,h=n?this._ld:this._lc,l=n?"width":"height",_=n?"height":"width",u=n?"_er":"_m3z",c=n?"_m3z":"_er",d=n?"hostDX":"hostDY",f=n?"hostDY":"hostDX",g=new Et,v=0,E=0,p=[],m=0,y=0;i(this._fr,function(i){var s=E<=y;i._inheritedParentChildrenDirection=s?n?120:220:n?110:210,i._3r(t,e),s?(p.push(i),v=Math.max(v,i[l]),E+=i[_]+h):((r=r||[]).push(i),m=Math.max(m,i[l]),y+=i[_]+h)},this),E-=h,y-=h;var T=Math.max(E,y),b=o,O=0;this.node&&(s&&(b+=this[u]+o,T>this[c]?this[f]=(T-this[c])/2:O=(this[c]-T)/2),this[d]=v+b/2-this[u]/2);var w,L=O;return a(p,function(t){n?t.offset(v-t[l],L):t.offset(L,v-t[l]),L+=h+t[_],g.add(t)},this),r&&(L=O,w=v+b,a(r,function(t){n?t.offset(w,L):t.offset(L,w),L+=h+t[_],g.add(t)},this)),g},offset:function(t,e){this.x+=t,this.y+=e,this.nodeX+=t,this.nodeY+=e,this._7n(t,e)},_m1l:function(t,e){return 2*this.cx-t-e-t},_m1m:function(t,e){return 2*this.cy-t-e-t},_lf:function(t){if(this._fr&&0!=this._fr.length){if(t)return this.node&&(this.nodeX+=this._m1l(this.nodeX,this._er)),void a(this._fr,function(t){t.offset(this._m1l(t.x,t.width),0)},this);this.node&&(this.nodeY+=this._m1m(this.nodeY,this._m3z)),a(this._fr,function(t){t.offset(0,this._m1m(t.y,t.height))},this)}},_7n:function(t,e){this._fr&&a(this._fr,function(i){i.offset(t,e)},this)},_3r:function(t,e){this.x=t||0,this.y=e||0,this._fr&&0!=this._fr.length?this._1q(this.x,this.y,this.layoutType):this.node&&(this.width=this._er,this.height=this._m3z,this.nodeX=this.x,this.nodeY=this.y)},_7o:function(t){if(this.node){var e=this._m0nchorLocation,i=e[0],n=e[1];t[this.node.id]={node:this.node,x:this.nodeX+i,y:this.nodeY+n,left:this.nodeX,top:this.nodeY,width:this._er,height:this._m3z}}this._fr&&a(this._fr,function(e){e._7o(t)},this)},_g4:function(t,e,i){this._3r(t,e),this._7o(i)},_1q:function(t,e,i){var n,s=t,r=e;!this.parentChildrenDirection&&this.parentBounds&&(this.parentChildrenDirection=this._inheritedParentChildrenDirection||this.parentBounds.parentChildrenDirection);var o,h=this.parentChildrenDirection,l=Lr(h);if(this.node){var u=120==(o=h)||122==o||121==o||220==o||221==o||222==o;(n=130==h||230==h)||(l?t+=this._er+this._lc:e+=this._m3z+this._ld)}var c,d,f,g=this.node&&this.node.layoutReverse?_:a,v=0,E=0;(c=i==wr?this._8o(t,e,g,!l,n):(d=i==Or?!l:"even.h"==i,this._d0(t,e,g,d,n)))&&!c.isEmpty()&&(v=c.width,E=c.height,this.add(c)),this.node&&(this.nodeX=s,this.nodeY=r,void 0!==this.hostDX||void 0!==this.hostDY?(this.nodeX+=this.hostDX||0,this.nodeY+=this.hostDY||0):(f=210==h||220==h||120==h||110==h?1:212==h||222==h||122==h||112==h?0:2,l?(1==f?this.nodeY+=E/2-this._m3z/2:2==f&&(this.nodeY+=E-this._m3z),r>this.nodeY&&this.offset(0,r-this.nodeY)):(1==f?this.nodeX+=v/2-this._er/2:2==f&&(this.nodeX+=v-this._er),s>this.nodeX&&this.offset(s-this.nodeX,0))),this.addRect(this.nodeX,this.nodeY,this._er,this._m3z),u&&this._lf(l))},node:null,uiBounds:null},g(xr,Et),Sr.prototype={layoutDatas:null,isMovable:function(t){return!this.currentMovingNodes[t.id]},_6r:!1,_3a:function(){this._6r=!0,this.graph._1b.addListener(this._9p,this),this.graph._18.addListener(this._25,this)},_1h:function(){this._6r=!1,this.graph._1b.removeListener(this._9p,this),this.graph._18.removeListener(this._25,this)},invalidateFlag:!0,invalidateLayoutDatas:function(){this.invalidateFlag=!0},resetLayoutDatas:function(){return this.invalidateFlag=!1,this.layoutDatas=function(){var t,e,i={},n=[],s=0,r={},o=0;this.graph.forEach(function(h){if(this.isLayoutable(h))if(h instanceof zn){var a={node:h,id:h.id,x:h.x,y:h.y};for(this.appendNodeInfo&&this.appendNodeInfo(h,a),i[h.id]=a,n.push(a),s++,e=h.parent;e instanceof Zn;){var l=(t=t||{})[e.id];(l=l||(t[e.id]={id:e.id,children:[]})).children.push(a),e=e.parent}}else h instanceof Gn&&!h.isLooped()&&h.fromAgent&&h.toAgent&&(a={edge:h},r[h.id]=a,o++)},this);var h={};for(var a in r){var l=r[a],_=l.edge,u=_.fromAgent,c=_.toAgent,d=u.id+"-"+c.id,f=c.id+"-"+u.id;if(i[u.id]&&i[c.id]&&!h[d]&&!h[f]){var g=i[u.id],v=i[c.id];l.from=g,l.to=v,h[d]=l,this.appendEdgeInfo&&this.appendEdgeInfo(_,l)}else delete r[a],o--}return{groups:t,nodesArray:n,nodes:i,nodeCount:s,edges:r,edgeCount:o,minEnergy:this.minEnergyFunction(s,o)}}.call(this)},_25:function(t){mr.ELEMENT_MOVE_START==t.kind?(this.currentMovingNodes={},t.datas.forEach(function(t){this.currentMovingNodes[t.id]=t},this)):mr.ELEMENT_MOVE_END==t.kind&&(this.currentMovingNodes={})},_9p:function(t){this.invalidateLayoutDatas()},isRunning:function(){return this.timer&&this.timer._e0()},getLayoutResult:function(t){this.stop(),this.resetLayoutDatas();for(var e=this.getMaxIterations(this.layoutDatas.nodeCount||0,this.layoutDatas.edgeCount||0),i=0;i<e&&!1!==this.step(!1);i++);var n=this.layoutDatas.nodes;return this.onstop(),n},_l1:function(){return!1},step:function(t){if(!1===t)return this._l1(this.timeStep);!this.invalidateFlag&&this.layoutDatas||this.resetLayoutDatas();var e=this._l1(t),i=this.layoutDatas.nodes;for(var n in i){var s=i[n],r=s.node;this.isMovable(r)?r.setLocation(s.x,s.y):(s.x=r.x,s.y=r.y,s.vx=0,s.vy=0)}return e},onstop:function(){delete this.layoutDatas},start:function(t){if(this.isRunning())return!1;this._6r||this._3a(),this._jkr||(this._jkr=function(t){return this.step(t)}.bind(this)),this.invalidateLayoutDatas(),this.timer=new ge(this._jkr);var e=this;return this.timer._kf(function(){e.onstop(),t&&t()}),!0},stop:function(){this.timer&&(this.timer._l7(),this.onstop())},getMaxIterations:function(t,e){return Math.min(1e3,3*t+10)},minEnergyFunction:function(t,e){return 10+Math.pow(t+e,1.4)},resetGraph:function(){this._6r||this._3a(),this.resetLayoutDatas()},destroy:function(){this.stop(),this._1h()}},g(Sr,br),we.BalloonLayouter=Ir;var Cr="proportional",Dr="regular",Rr="variable";Le.ANGLE_SPACING_PROPORTIONAL=Cr,Le.ANGLE_SPACING_REGULAR=Dr,Le.RADIUS_MODE_UNIFORM="uniform",Le.RADIUS_MODE_VARIABLE=Rr,Ir.prototype={angleSpacing:Cr,radiusMode:Rr,gap:4,radius:50,startAngle:0,_m04:null,_m1j:null,_kh:function(){this._m04=null,this._m1j=null},getLayoutResult:function(t){var e,i=0,n=0,s=this.graph;t instanceof Object&&(i=t.cx||0,n=t.cy||0,s=t.root||this.graph,e=t.bounds),this._m04={},this._m1j=new Pr(this);var r={};return zr(s,this._m3x,this)&&(this._m1j._fr&&1==this._m1j._fr.length&&(this._m1j=this._m1j._fr[0]),this._m1j._eu(!0),this._m1j._66(i,n,this.startAngle,r,e)),this._kh(),r},_m3x:function(t,e){if(this.isLayoutable(t)){var i=e?this._m04[e.id]:this._m1j;this._m04[t.id]=new Pr(this,t,i)}},defaultSize:40,getRadius:function(t,e,i){return this.radius},getNodeSize:function(t,e,i){if(this.graph._8k._m0t){var n=this.graph.getUI(t);if(n)return(n._fu.width+n._fu.height)/2}return this.defaultSize},getGap:function(t,e,i){return this.gap},_30:function(t,e,i){return this.getNodeSize(t,e,i)+this.getGap(t,e,i)}};var Pr=function(t,e,i){this.layouter=t,e&&(this._lj=e,this.id=e.id),i&&(i._h4(this),i._lh=!1,this._kr=i._kr+1)};mn=2*Math.PI,Pr.prototype={_kp:0,_kq:0,_k0:0,_et:0,_d1:0,_kr:0,_lh:!0,_li:0,_h6:0,_fr:null,_lj:null,_h4:function(t){this._fr||(this._fr=[]),this._fr.push(t),t.parent=this},_h7:function(t){this._kq=(this._kq+t)%mn,this._fr&&(1!=this._fr.length?(t=this._kq+Math.PI,a(this._fr,function(e){e._h7(t)},this)):this._fr[0]._h7(this._kq))},_8p:0,_7p:function(t){return this._lj&&(this._h6=this.layouter._30(this._lj,this._kr,this._lh)/2),this._fr?(this._h6,this._8p=this._fr.length,this._8p<=2||this.layouter.angleSpacing==Dr?function(t){var e=this._8p,i=2*Math.PI/e,n=0,s=t?0:1<e?-i/2:0;return a(this._fr,function(t){t._kq=s%mn,s+=i,t._kp=i;var e=t._eu();n<e&&(n=e)},this),[n,i]}.call(this,t):function(t){var e,i=this._fr.length,n=0,s=0;if(a(this._fr,function(t){var i=t._eu();i<1&&(i=1),s+=i,n<i&&(n=i,e=t)},this),1<i){var r=0,o={},h=s/i/3;s=0,a(this._fr,function(t){var e=t._li;e<h&&(e=h),o[t.id]=e,s+=e},this);var l=mn/s;a(this._fr,function(e,i){var n=o[e.id]*l;0===i&&(r=t?-n/2:-n),e._kq=r+n/2,e._kp=n,r+=n},this)}return[n,e._kp]}.call(this,t)):null},_eu:function(t){var e=this._7p(t);if(!e)return this._li=this._h6;var i=e[0],n=e[1],s=this.layouter.getRadius(this._lj,this._kr);if(s<this._h6&&(s=this._h6),this._et=s,this._h6+i>s&&(s=this._h6+i),i&&1<this._8p&&n<Math.PI){var r=i/Math.sin(n/2);s<r&&(s=r)}return this._k0=s,this._li=s+i,this._lj&&this._fr&&this.layouter.radiusMode==Rr&&a(this._fr,function(t){var e=t._li;1==t._8p&&(e/=2);var i=this._h6+e,n=t._kp;if(n&&n<Math.PI){var s=e/Math.sin(n/2);e<s&&(e=s)}e<i&&(e=i),t._d1=e},this),this._lj&&!t||this._h7(0),this._li},_66:function(t,e,i,n,s){if(this._lj&&(n[this._lj.id]={x:t,y:e,node:this._lj},s&&s.addRect(t-this._h6/2,e-this._h6/2,this._h6,this._h6)),this._fr)if(this._lj||1!=this._fr.length){i=i||0;var r=this._k0,o=this._et;a(this._fr,function(h){var a=r;h._d1&&(a=Math.max(o,h._d1));var l=h._kq+i,_=t+a*Math.cos(l),u=e+a*Math.sin(l);h._66(_,u,i,n,s)},this)}else this._fr[0]._66(t,e,i,n,s)}},g(Ir,br);var Nr=function(t){v(this,Nr,arguments)};g(Nr,Gr);var kr=function(t,e){(this.node1=t)==(this.node2=e)?(this.isLooped=!0,this._ks=t._k8):this._ks=new ot,this._8r=[],this._h9=rt.EDGE_BUNDLE_EXPANDED};function Mr(t){t.fx-=t.x*this.attractive,t.fy-=t.y*this.attractive}function Br(t){if(0!=t.k){var e=this._m3g,i=t.from,n=t.to,s=n.x-i.x,r=n.y-i.y,o=s*s+r*r,h=Math.sqrt(o)||.1,a=(h-e)*t.k*this.elastic,l=(a/=h)*s,_=a*r;n.fx-=l,n.fy-=_,i.fx+=l,i.fy+=_}}function Gr(t){v(this,Gr,arguments)}rt.EDGE_BUNDLE_EXPANDED=!0,kr.prototype={node1:null,node2:null,_ks:null,_h9:rt.EDGE_BUNDLE_EXPANDED,_8r:null,_ha:null,agentEdge:null,_m1o:function(t,e,i){this._ks.forEach(function(n){if(!i||n.$from==i||n.fromAgent==i)return t.call(e,n)})},_67:0,_68:0,_io:function(t,e){if(!1===this._ks.add(t))return!1;e==this.node1?this._67++:this._68++,this._m0t?this._14(t):this._m0t=!0},_d2:function(t,e){if(!1===this._ks.remove(t))return!1;e==this.node1?this._67--:this._68--,this._14(t),this._ks.forEach(function(t){t._edgeBundleInvalidateFlag=!0,t.__3y=!0},this)},_14:function(t){this._m3aBindableFlag=!0,this._6e=!0,t._edgeBundleInvalidateFlag=!0,t.__3y=!0},invalidate:function(){this._m3a()},_m3a:function(){this._6e||(this._6e=!0,this._ks.forEach(function(t){t._edgeBundleInvalidateFlag=!0}))},isEmpty:function(){return this._ks.isEmpty()},isPositiveOrder:function(t){return this.node1==t.$from||this.node1==t.fromAgent},canBind:function(t){return t&&this._6e&&this.validate(t),1<this._ks.length&&1<this._8r.length},_hr:function(t){return this._8r.indexOf(t)},getYOffset:function(t){return this._ha[t.id]},_4x:function(t){if(this.canBind()){var e={},i=this._8r.length;if(!(i<2)){var n=0,s=this._8r[0];e[s.id]=0;for(var r=1;r<i;r++)s=this._8r[r],n+=t.getStyle(s,ss.EDGE_BUNDLE_GAP)||Ts[ss.EDGE_BUNDLE_GAP],e[s.id]=n;if(!this.isLooped&&n){var o=n/2;for(r=0;r<i;r++)e[(s=this._8r[r]).id]-=o}this._ha=e}}else this._ha={}},_m1q:function(t){return this._h9!=t&&(this._h9=t,this._m3a(),!0)},reverseExpanded:function(){return this._m1q(!this._h9)},_19:function(){var t;this._8r.length=0,this._ks.forEach(function(e){if(e.isBundleEnabled()){if(!this.isPositiveOrder(e))return void(t=t||[]).push(e);this._8r.push(e)}},this),t&&(this._8r=t.concat(this._8r))},_e7:function(t){return t==this.agentEdge||!this.canBind()||this._h9},validate:function(t){this._6e=!1,this._ks.forEach(function(t){t._edgeBundleInvalidateFlag=!1}),this._m3aBindableFlag&&(this._19(),this._m3aBindableFlag=!1),1<this._8r.length&&this.sortBindingEdges instanceof Function&&this.sortBindingEdges(this._8r);var e=this._h9,i=!this.canBind()||e;if(a(this._8r,function(t){t._$m=!0,(t._hyInBundle=i)&&(t.__3y=!0)},this),!i)return this._m06(this._8r[0],t),this.agentEdge._hyInBundle=!0,void(this.agentEdge.__3y=!0);this._m06(null,t),this._4x(t)},_m06:function(t,e){if(t!=this.agentEdge){var i=this.agentEdge;return this.agentEdge=t,e&&e._4q(new It(this,"agentEdge",t,i)),!0}}},tt(kr.prototype,{bindableEdges:{get:function(){return this._8r}},edges:{get:function(){return this._ks._j2}},length:{get:function(){return this._ks?this._ks.length:1}},expanded:{get:function(){return this._h9},set:function(t){if(this._h9==t)return!1;this._h9=t,this._m3a()}}}),Gr.prototype={appendNodeInfo:function(t,e){e.mass=t.layoutMass||1,e.fx=0,e.fy=0,e.vx=0,e.vy=0},appendEdgeInfo:function(t,e){e.k=t.layoutElasticity||1},setMass:function(t,e){t.layoutMass=e,this.layoutDatas&&this.layoutDatas.nodes&&(t=this.layoutDatas.nodes[t.id])&&(t.mass=e)},setElasticity:function(t,e){t.layoutElasticity=e,this.layoutDatas&&this.layoutDatas.edges&&(t=this.layoutDatas.edges[t.id])&&(t.k=e)},_m3g:50,_i6:.5,timeStep:.05,repulsion:50,attractive:.1,elastic:3,_l3:1e3,_ji:function(t){return this._l3+.3*(t-this._l3)},_l1:function(t,e){Date.now();var i=this.layoutDatas.nodes;for(var n in i){var s=i[n];e&&(s.x+=Math.random()-.5,s.y+=Math.random()-.5),Mr.call(this,s)}var r=this.layoutDatas.groups;if(r)for(var n in r){var o=r[n].children,h=0,a=0;o.forEach(function(t){h+=t.x,a+=t.y}),h/=o.length,a/=o.length;var l=10*this.attractive;o.forEach(function(t){t.fx-=(t.x-h)*l,t.fy-=(t.y-a)*l})}var _=this._nbodyForce;for(var n in(_=_||(this._nbodyForce=function(){var t=-1e6;function e(){this.stack=[],this.popIdx=0}function i(){var t;return h[a]?((t=h[a]).quads[0]=null,t.quads[1]=null,t.quads[2]=null,t.quads[3]=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0,t.isInternal=!1):(t=new function(){this.body=null,this.quads=[],this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0,this.isInternal=!1},h[a]=t),++a,t}function n(t,e){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return i<1e-8&&n<1e-8}function s(t){for(o.reset(),o.push(l,t);!o.isEmpty();){var e=o.pop(),s=e.node,r=e.body;if(s.isInternal){var h=r.x,a=r.y;s.mass=s.mass+r.mass,s.massX=s.massX+r.mass*h,s.massY=s.massY+r.mass*a;var _=0,u=s.left,c=(s.right+u)/2,d=s.top,f=(s.bottom+d)/2;if(c<h){_+=1;var g=u;c+=(u=c)-g}if(f<a){_+=2;var v=d;f+=(d=f)-v}var E=s.quads[_];E||((E=i()).left=u,E.top=d,E.right=c,E.bottom=f,s.quads[_]=E),o.push(E,r)}else if(s.body){var p=s.body;if(s.body=null,s.isInternal=!0,n(p,r)){if(s.right-s.left<1e-8)return;do{var m=Math.random(),y=(s.right-s.left)*m,T=(s.bottom-s.top)*m;p.x=s.left+y,p.y=s.top+T}while(n(p,r))}o.push(s,p),o.push(s,r)}else s.body=r}}e.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var i=this.stack[this.popIdx];i?(i.node=t,i.body=e):this.stack[this.popIdx]=new function(t,e){this.node=t,this.body=e}(t,e),++this.popIdx},pop:function(){if(0<this.popIdx)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};var r=[],o=new e,h=[],a=0,l=i();return{init:function(e,n){t=n;var r,o=Number.MAX_VALUE,h=Number.MAX_VALUE,_=Number.MIN_VALUE,u=Number.MIN_VALUE,c=e,d=c.length;for(r=d;r--;){var f=c[r].x,g=c[r].y;f<o&&(o=f),_<f&&(_=f),g<h&&(h=g),u<g&&(u=g)}var v=_-o,E=u-h;for(E<v?u=h+v:_=o+E,a=0,(l=i()).left=o,l.right=_,l.top=h,l.bottom=u,r=d;r--;)s(c[r])},update:function(e){var i,n,s,o,h=r,a=1,_=0,u=1;for(h[0]=l;a;){var c=h[_],d=c.body;--a,_+=1,d&&d!==e?(n=d.x-e.x,s=d.y-e.y,0===(o=Math.sqrt(n*n+s*s))&&(n=(Math.random()-.5)/50,s=(Math.random()-.5)/50,o=Math.sqrt(n*n+s*s)),(i=t*d.mass*e.mass/(o*o))<-1e3&&(i=-1e3),i/=o,e.fx=e.fx+i*n,e.fy=e.fy+i*s):(c.mass||(c.mass=1),n=c.massX/c.mass-e.x,s=c.massY/c.mass-e.y,0===(o=Math.sqrt(n*n+s*s))&&(n=(Math.random()-.5)/50,s=(Math.random()-.5)/50,o=Math.sqrt(n*n+s*s)),(c.right-c.left)/o<.8?((i=t*c.mass*e.mass/(o*o))<-1e3&&(i=-1e3),i/=o,e.fx=e.fx+i*n,e.fy=e.fy+i*s):(c.quads[0]&&(h[u]=c.quads[0],a+=1,u+=1),c.quads[1]&&(h[u]=c.quads[1],a+=1,u+=1),c.quads[2]&&(h[u]=c.quads[2],a+=1,u+=1),c.quads[3]&&(h[u]=c.quads[3],a+=1,u+=1)))}}}}())).init(this.layoutDatas.nodesArray,-this.repulsion*this.repulsion*this.repulsion),i)_.update(i[n]);if(this.elastic){var u=this.layoutDatas.edges;for(var n in u)Br.call(this,u[n])}return this._l5(t)},_l5:function(t){var e=this.layoutDatas.minEnergy,i=(this.layoutDatas.currentEnergy,this.layoutDatas.nodes),n=(t=this.timeStep,0),s=this._i6;for(var r in i){var o=i[r],h=o.fx/o.mass,a=o.fy/o.mass,l=o.vx+=h*t,_=o.vy+=a*t;o.x+=l*t,o.y+=_*t,n<e&&(n+=2*(l*l+_*_)),o.fx=0,o.fy=0,o.vx*=s,o.vy*=s}return e<=(this.layoutDatas.currentEnergy=n)}},g(Gr,Sr),we.SpringLayouter=Gr;var Fr=function(t){this.locations=t};function $r(t,e,i,n,s,r){if(e instanceof Gt)return t(e,i,n,s,r),e;if(e instanceof Ps){var o=new ot;e._keModel.forEach(function(t){e.isVisible(t)&&(t._hx()&&t._h9&&t.hasChildren()?t.$location&&(t.$location.invalidateFlag=!1):o.add(t))}),e=o}else if(Array.isArray(e))e=new ot(e);else if(!(e instanceof ot))throw new Error("roots error");return(h=e,l=new ot,h.forEach(function(t){var e,i;t instanceof zn&&(i=!1,t.forEachInEdge(function(t){if(h.contains(t)&&!t.isLooped())return!(i=!0)}),i?!a&&(e=!1,t.forEachOutEdge(function(t){if(h.contains(t)&&!t.isLooped())return!(e=!0)}),e)&&(a=t):l.add(t))}),l.isEmpty()&&a&&l.add(a),e=l).forEach(function(e){t(e,i,n,s,r)}),e;var h,a,l}Fr.prototype={oldLocations:null,_ev:null,duration:700,animationType:ye.easeOutStrong,_7r:function(t){if(this._ev=t,this.oldLocations={},t)for(var e in t){var i=t[e].node;this.oldLocations[e]={x:i.x,y:i.y}}},setLocation:function(t,e,i){t.setLocation(e,i)},forEach:function(t,e){for(var i in this.locations){var n=this.oldLocations[i],s=this.locations[i];t.call(e,n,s)}},_k2:function(t,e,i,n){this.forEach(function(e,i){var n=i.node,s=e.x+(i.x-e.x)*t,r=e.y+(i.y-e.y)*t;this.setLocation(n,s,r)},this)},stop:function(){this._m0nimate&&this._m0nimate._l7()},start:function(t){this._m0nimate?(this._m0nimate._l7(),this._m0nimate._i8=this.duration,this._m0nimate._eqType=this.animationType,this._m0nimate._onfinish=this._onfinish):this._m0nimate=new Te(this._k2,this,this.duration,this.animationType),this._m0nimate._kf(t)}},tt(Fr.prototype,{locations:{get:function(){return this._ev},set:function(t){this._ev!=t&&this._7r(t)}}});var jr=function(t,e,i,n,s){return $r(Hr,t,e,i,n,s)},zr=function(t,e,i,n,s){return $r(Ur,t,e,i,n,s)};Kn.prototype.forEachByTopoDepthFirstSearch=function(t,e,i,n){jr(this,t,e,i,n)},Kn.prototype.forEachByTopoBreadthFirstSearch=function(t,e,i,n){t instanceof Object&&1==arguments.length&&(e=t.scope),zr(this,t,e,i,n)},we.forEachByTopoDepthFirstSearch=jr,we.forEachByTopoBreadthFirstSearch=zr;var Hr=function(t,e,i,n,s,r,o,h){!function t(e,i,n,s,r,o,h,a){e._marker=o,s||i.call(n,e,a,h),Yr(e,function(a){t(a,i,n,s,r,o,h+1,e)},a,r,o),s&&i.call(n,e,a,h)}(t,e,i,n,s,{},0)};function Yr(t,e,i,n,s){n?t.forEachEdge(function(n){var r=n.otherNode(t);r!=i&&r._marker!=s&&e(r,t)},this,!0):t.forEachOutEdge(function(n){var r=n.toAgent;r!=i&&r._marker!=s&&e(r,t)})}var Ur=function(t,e,i,n,s){!function t(e,i,n,s,r,o,h){var a,l=e.length;e.forEach(function(t,e){var _=t.v;_._marker=o,s||i.call(n,_,t._from,h,e,l),Yr(_,function(t){a=a||[],t._marker=o,a.push({v:t,_from:_})},_,r,o)}),a&&t(a,i,n,s,r,o,h+1),s&&e.forEach(function(t,e){i.call(n,t.v,t._from,h,e,l)})}([{v:t}],e,i,n,s,{},0)};return we.toColor=Q,we.log=nt,we.error=st,we.trace=function(e){t.console&&console.trace(e)},we.isIE=A,we.isOpera=L,we.isWebkit=I,we.isGecko=C,we.isFirefox=D,we.isSafari=P,we.isChrome=R,we.isMac=N,we.DefaultStyles=Ts,we.Defaults=rt,we.Styles=ss,we.Consts=Le,we.Graphs=Wi,we.Graph=Ps,we.BaseUI=Jn,we.ElementUI=fs,we.NodeUI=ys,we.EdgeUI=ms,we.LabelUI=Es,we.ImageUI=vs,we.Shapes=Yn,we.Path=Mi,we.Gradient=mi,we.InteractionEvent=mr,we.Element=Nn,we.Node=zn,we.Edge=Gn,we.GraphModel=Kn,we.EdgeBundle=kr,we.TreeLayouter=Ar,we.name="Qunee for HTML5",we.version="2.7.7.4",we.about="Qunee - Diagramming Components for HTML5/Canvas",we.copyright="Copyright  2019 Qunee.com",we.css=Wt,we.IDrawable={draw:function(t,e){}},nt=function(){},we.publishDate="18/12/2019",we}(window,document)},"57Wx":function(t,e){},Vkh4:function(t,e,i){"use strict";(function(t){var n,s=i("/IH0"),r=(i.n(s),'<div class="graph-export-panel modal fade">  <div class="modal-dialog">  <div class="modal-content">  <div class="modal-body">  <h3 style="text-align: center;"></h3>  <div>  <label></label>  <span class ="graph-export-panel__canvas_size"></span>  </div>  <div style="text-align: center;" title="Double click  to select the whole canvas range">  <div class ="graph-export-panel__export_canvas" style="position: relative; display: inline-block;">  </div>  </div>  <div>  <label></label>  <span class ="graph-export-panel__export_bounds"></span>  </div>  <div>  <label>: <input class ="graph-export-panel__export_scale" type="range" value="1" step="0.2" min="0.2" max="3"><span class ="graph-export-panel__export_scale_label">1</span></label>  </div>  <div>  <label>: </label><span class ="graph-export-panel__export_size"></span>  </div>  <div style="text-align: right">  <button type="submit" class="btn btn-primary graph-export-panel__export_submit"></button>  </div>  </div>  </div>  </div>  </div>');function o(t,e){this.onBoundsChange=e,this.parent=t,this.handleSize=Q.isTouchSupport?20:8,this.boundsDiv=this._createDiv(this.parent),this.boundsDiv.type="border",this.boundsDiv.style.position="absolute",this.boundsDiv.style.border="dashed 1px #888";for(var i="lt,t,rt,l,r,lb,b,rb",n=0,s=(i=i.split(",")).length;n<s;n++){var r,o=i[n],h=this._createDiv(this.parent);h.type="handle",h.name=o,h.style.position="absolute",h.style.backgroundColor="#FFF",h.style.border="solid 1px #555",h.style.width=h.style.height=this.handleSize+"px",r="lt"==o||"rb"==o?"nwse-resize":"rt"==o||"lb"==o?"nesw-resize":"t"==o||"b"==o?"ns-resize":"ew-resize",h.style.cursor=r,this[i[n]]=h}this.interaction=new Q.DragSupport(this.parent,this)}function h(){var e=t("<div/>").html(r).contents();this.html=e=e[0],document.body.appendChild(this.html),e.addEventListener("mousedown",function(t){t.target==e&&this.destroy()}.bind(this),!1);var i=this._getChild(".graph-export-panel__export_scale"),n=this._getChild(".graph-export-panel__export_scale_label");i.onchange=function(t){n.textContent=this.scale=i.value,this.updateOutputSize()}.bind(this),this.export_scale=i;var s=this._getChild(".graph-export-panel__export_submit");window.saveAs&&HTMLCanvasElement.prototype.toBlob?s.onclick=function(t){var e=this.exportImageInfo();if(e){var i=e.canvas,n=this.graph.name||"graph";i.toBlob(function(e){t(e,n+".png")},"image/png")}}.bind(this,window.saveAs):s.onclick=function(t){var e=this.exportImageInfo();if(e){var i=this.clipBounds,n=window.open(),s=n.document;s.title=this.graph.name||"",s.body.style.textAlign="center",s.body.style.margin="0px";var r=s.createElement("img");if(r.style.maxWidth="100%",r.style.maxHeight="100%",!0===t){r.onload=function(){n.print(),n.close()};var o=s.createElement("style");o.setAttribute("type","text/css"),o.setAttribute("media","print");var h="img {max-width: 100%; max-height: 100%;}";i.width/i.height>1.2&&(h+="\n @page { size: landscape; }"),o.appendChild(s.createTextNode(h)),s.head.appendChild(o)}r.src=e.data,s.body.appendChild(r)}}.bind(this)}o.prototype={destroy:function(){this.interaction.destroy()},update:function(t,e){this.wholeBounds=new Q.Rect(0,0,t,e),this._setBounds(this.wholeBounds.clone())},ondblclick:function(t){if(this._bounds.equals(this.wholeBounds))return this.oldBounds||(this.oldBounds=this.wholeBounds.clone().grow(-this.wholeBounds.height/5,-this.wholeBounds.width/5)),void this._setBounds(this.oldBounds,!0);this._setBounds(this.wholeBounds.clone(),!0)},startdrag:function(t){t.target.type&&(this.dragItem=t.target)},ondrag:function(t){if(this.dragItem){Q.stopEvent(t);var e=t.dx,i=t.dy;if("border"==this.dragItem.type)this._bounds.offset(e,i),this._setBounds(this._bounds,!0);else if("handle"==this.dragItem.type){var n=this.dragItem.name;"l"==n[0]?(this._bounds.x+=e,this._bounds.width-=e):"r"==n[0]&&(this._bounds.width+=e),"t"==n[n.length-1]?(this._bounds.y+=i,this._bounds.height-=i):"b"==n[n.length-1]&&(this._bounds.height+=i),this._setBounds(this._bounds,!0)}}},enddrag:function(t){this.dragItem&&(this.dragItem=!1,this._bounds.width<0?(this._bounds.x+=this._bounds.width,this._bounds.width=-this._bounds.width):0==this._bounds.width&&(this._bounds.width=1),this._bounds.height<0?(this._bounds.y+=this._bounds.height,this._bounds.height=-this._bounds.height):0==this._bounds.height&&(this._bounds.height=1),this._bounds.width>this.wholeBounds.width&&(this._bounds.width=this.wholeBounds.width),this._bounds.height>this.wholeBounds.height&&(this._bounds.height=this.wholeBounds.height),this._bounds.x<0&&(this._bounds.x=0),this._bounds.y<0&&(this._bounds.y=0),this._bounds.right>this.wholeBounds.width&&(this._bounds.x-=this._bounds.right-this.wholeBounds.width),this._bounds.bottom>this.wholeBounds.height&&(this._bounds.y-=this._bounds.bottom-this.wholeBounds.height),this._setBounds(this._bounds,!0))},_createDiv:function(t){var e=document.createElement("div");return t.appendChild(e),e},_setHandleLocation:function(t,e,i){t.style.left=e-this.handleSize/2+"px",t.style.top=i-this.handleSize/2+"px"},_setBounds:function(t){t.equals(this.wholeBounds)||(this.oldBounds=t),this._bounds=t,(t=t.clone()).width+=1,t.height+=1,this.boundsDiv.style.left=t.x+"px",this.boundsDiv.style.top=t.y+"px",this.boundsDiv.style.width=t.width+"px",this.boundsDiv.style.height=t.height+"px",this._setHandleLocation(this.lt,t.x,t.y),this._setHandleLocation(this.t,t.cx,t.y),this._setHandleLocation(this.rt,t.right,t.y),this._setHandleLocation(this.l,t.x,t.cy),this._setHandleLocation(this.r,t.right,t.cy),this._setHandleLocation(this.lb,t.x,t.bottom),this._setHandleLocation(this.b,t.cx,t.bottom),this._setHandleLocation(this.rb,t.right,t.bottom),this.onBoundsChange&&this.onBoundsChange(this._bounds)}},Object.defineProperties(o.prototype,{bounds:{get:function(){return this._bounds},set:function(t){this._setBounds(t)}}}),h.prototype={canvas:null,html:null,exportImageInfo:function(t){if(t=this.graph){var e=this.export_scale.value,i=this.imageInfo.scale,n=new Q.Rect(this.clipBounds.x/i,this.clipBounds.y/i,this.clipBounds.width/i,this.clipBounds.height/i);n.offset(this.bounds.x,this.bounds.y);var s=t.exportImage(e,n);if(s&&s.data)return s}},_getChild:function(e){return t(this.html).find(e)[0]},initCanvas:function(){var t=this._getChild(".graph-export-panel__export_canvas");t.innerHTML="";var e=Q.createCanvas(!0);t.appendChild(e),this.canvas=e;var i,n=this._getChild(".graph-export-panel__export_bounds"),s=this._getChild(".graph-export-panel__export_size");this.updateOutputSize=function(){var t=this._getChild(".graph-export-panel__export_scale").value,e=i.width/this.imageInfo.scale*t|0,n=i.height/this.imageInfo.scale*t|0,r=e+" X "+n;e*n>12e6&&(r+="<span style='color: #F66;'></span>"),s.innerHTML=r};var r=new o(e.parentNode,function(t){i=t,this.clipBounds=i,function(){var t=this.canvas,e=t.g,n=t.ratio||1;e.save(),e.clearRect(0,0,t.width,t.height),e.drawImage(this.imageInfo.canvas,0,0),e.beginPath(),e.moveTo(0,0),e.lineTo(t.width,0),e.lineTo(t.width,t.height),e.lineTo(0,t.height),e.lineTo(0,0);var s=i.x*n,r=i.y*n,o=i.width*n,h=i.height*n;e.moveTo(s,r),e.lineTo(s,r+h),e.lineTo(s+o,r+h),e.lineTo(s+o,r),e.closePath(),e.fillStyle="rgba(0, 0, 0, 0.3)",e.fill(),e.restore()}.call(this);var e=i.width/this.imageInfo.scale|0,s=i.height/this.imageInfo.scale|0;n.textContent=(i.x/this.imageInfo.scale|0)+", "+(i.y/this.imageInfo.scale|0)+", "+e+", "+s,this.updateOutputSize()}.bind(this));this.update=function(){var t=this.canvas.ratio||1,e=this.imageInfo.width/t,i=this.imageInfo.height/t;this.canvas.setSize(e,i),r.update(e,i)}},destroy:function(){this.graph=null,this.imageInfo=null,this.clipBounds=null,this.bounds=null},show:function(e){t(this.html).modal("show"),this.graph=e;var i=e.bounds;this.bounds=i,this._getChild(".graph-export-panel__canvas_size").textContent=(0|i.width)+" X "+(0|i.height);var n,s=Math.min(500,screen.width/1.3);n=i.width>i.height?Math.min(1,s/i.width):Math.min(1,s/i.height),this.canvas||this.initCanvas(),this.imageInfo=e.exportImage(n*this.canvas.ratio),this.imageInfo.scale=n,this.update()}},Q.showExportPanel=function(t){n||(n=new h),n.show(t)},e.a=Q,function(t,e){var i=i||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,i=function(){return t.URL||t.webkitURL||t},n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in n,r=t.webkitRequestFileSystem,o=t.requestFileSystem||r||t.mozRequestFileSystem,h=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},a=0,l=function(e){var n=function(){"string"==typeof e?i().revokeObjectURL(e):e.remove()};t.chrome?n():setTimeout(n,500)},_=function(t,e,i){for(var n=(e=[].concat(e)).length;n--;){var s=t["on"+e[n]];if("function"==typeof s)try{s.call(t,i||t)}catch(t){h(t)}}},u=function(h,u){var c,d,f,g,v,E=this,p=h.type,m=!1,y=function(){_(E,"writestart progress write writeend".split(" "))},T=function(){(!m&&c||(c=i().createObjectURL(h)),d)?d.location.href=c:void 0==t.open(c,"_blank")&&"undefined"!=typeof safari&&(t.location.href=c);E.readyState=E.DONE,y(),l(c)},b=function(t){return function(){if(E.readyState!==E.DONE)return t.apply(this,arguments)}},O={create:!0,exclusive:!1};if(E.readyState=E.INIT,u||(u="download"),s)return c=i().createObjectURL(h),n.href=c,n.download=u,g=n,(v=e.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),g.dispatchEvent(v),E.readyState=E.DONE,y(),void l(c);t.chrome&&p&&"application/octet-stream"!==p&&(f=h.slice||h.webkitSlice,h=f.call(h,0,h.size,"application/octet-stream"),m=!0),r&&"download"!==u&&(u+=".download"),("application/octet-stream"===p||r)&&(d=t),o?(a+=h.size,o(t.TEMPORARY,a,b(function(t){t.root.getDirectory("saved",O,b(function(t){var e=function(){t.getFile(u,O,b(function(t){t.createWriter(b(function(e){e.onwriteend=function(e){d.location.href=t.toURL(),E.readyState=E.DONE,_(E,"writeend",e),l(t)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&T()},"writestart progress write abort".split(" ").forEach(function(t){e["on"+t]=E["on"+t]}),e.write(h),E.abort=function(){e.abort(),E.readyState=E.DONE},E.readyState=E.WRITING}),T)}),T)};t.getFile(u,{create:!1},b(function(t){t.remove(),e()}),b(function(t){t.code===t.NOT_FOUND_ERR?e():T()}))}),T)}),T)):T()},c=u.prototype;return c.abort=function(){this.readyState=this.DONE,_(this,"abort")},c.readyState=c.INIT=0,c.WRITING=1,c.DONE=2,c.error=c.onwritestart=c.onprogress=c.onwrite=c.onabort=c.onerror=c.onwriteend=null,function(t,e){return new u(t,e)}}}("undefined"!=typeof self&&self||void 0!==t&&t||this.content);t.saveAs=i}(window,document),function(t){if(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,t.isFileSupported=null!=window.requestFileSystem,t.isFileSupported){t.readerSingleFile=function(e,i,n){var s=e.name;if(t.isString(i)){if(!new RegExp("."+i+"$","gi").test(s))return void alert("Please selects ."+i+" file")}else i instanceof Function&&(n=i);var r=new FileReader;r.onload=function(t){n(r.result)},r.readAsText(e,"utf-8")}}}(Q)}).call(e,i("qqHy"))},gZUt:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("vWDS"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"networkTopo networkTopo-"+t.skinStyle},[i("aside",[i("h3",[t._v("")]),t._v(" "),i("ul",{staticClass:"z_header"},[i("li",[i("span",{staticStyle:{display:"inline-block",width:"72px"}},[t._v(":")]),t._v(" "),i("Select",{model:{value:t.model1,callback:function(e){t.model1=e},expression:"model1"}},t._l(t.cityList,function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),i("li",[i("Input",{attrs:{placeholder:"..."}}),t._v(" "),i("Button",{attrs:{type:"primary"}},[t._v("")])],1)]),t._v(" "),i("section",[i("Tree",{attrs:{data:t.data5,render:t.renderContent}}),t._v(" "),i("Tree",{attrs:{data:t.data6,render:t.renderContent}}),t._v(" "),i("Tree",{attrs:{data:t.data7,render:t.renderContent}})],1),t._v(" "),i("h3",[t._v("")]),t._v(" "),i("footer",{ref:"footer"},[i("Table",{attrs:{columns:t.colums,data:t.data,height:t.tableHeight}})],1)]),t._v(" "),i("div",{attrs:{id:"canvas"}}),t._v(" "),i("div",{staticClass:"btn"},[i("Button",{attrs:{type:"primary"}},[t._v("")]),t._v(" "),i("Button",{attrs:{type:"primary"},on:{click:t.outPutpicture}},[t._v("")])],1)])},staticRenderFns:[]};var r=function(t){i("r6em"),i("57Wx")},o=i("C7Lr")(n.a,s,!1,r,"data-v-69fc2d06",null);e.default=o.exports},r6em:function(t,e){},vWDS:function(t,e,i){"use strict";(function(t){var n=i("qqHy"),s=(i.n(n),i("IcnI")),r=i("/IH0"),o=(i.n(r),i("Vkh4"));e.a={name:"networkTopo",data:function(){return{graph:{},createNode:{},createLine:{},model1:"",cityList:[{value:"",label:""},{value:"",label:""}],colums:[{title:"",align:"center",key:"cj"},{title:"",align:"center",key:"lx"},{title:"",align:"center",key:"sl"}],data:[{cj:"",lx:"NE40E-X8",sl:"4"},{cj:"",lx:"NE40E-X8",sl:"10"},{cj:"",lx:"NE40E-X8",sl:"8"},{cj:"",lx:"M6000-2S",sl:"8"},{cj:"",lx:"NE40E-X8",sl:"14"},{cj:"",lx:"NE40E-X8",sl:"2"},{cj:"",lx:"M6000-2S",sl:"3"},{cj:"",lx:"M6000-2S",sl:"6"}],tableHeight:null,data5:[{title:"",expand:!0,render:function(t,e){e.root,e.node;var i=e.data;return t("span",{style:{display:"inline-block",width:"100%",cursor:"pointer"}},[t("span",[t("Icon",{props:{type:"ios-folder-outline"},style:{marginRight:"8px"}}),t("span",i.title)]),t("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}})])},children:[{title:" CR01",expand:!0},{title:" CR02",expand:!0}]}],data6:[{title:"XX ",expand:!0,children:[{title:"DR 02",expand:!0},{title:"GSMDR 01",expand:!0},{title:"GSMDR 02",expand:!0}]}],data7:[{title:"XX ",expand:!0,children:[{title:"DR 01",expand:!0},{title:"DR 02",expand:!0},{title:"DR 03",expand:!0},{title:"DR 04",expand:!0}]}]}},computed:{skinStyle:function(){return s.a.state.skinStyle}},mounted:function(){var e=this;this.graph=new Q.Graph("canvas"),this.graph.fullRefresh=!0,Q.Defaults.DELAY_CLICK=!1,Q.Defaults.TOOLTIP_DURATION=3e4,document.getElementsByClassName("Q-Canvas")[1].remove(0),this.graph.callLater(function(){e.graph.zoomToOverview()}),this.initCanvas(),this.$nextTick(function(){e.tableHeight=e.$refs.footer.clientHeight-2}),window.addEventListener("resize",this.getCurrentclientHeight),t(".ivu-icon-ios-paper-outline").parent("span").addClass("ivu-tree-title")},destroyed:function(){window.removeEventListener("resize",this.getCurrentclientHeight)},methods:{getCurrentclientHeight:function(){var t=this;setTimeout(function(){t.tableHeight=t.$refs.footer.clientHeight-2},200)},renderContent:function(t,e){e.root,e.node;var i=e.data;return t("span",{style:{display:"inline-block",width:"100%"}},[t("span",[t("Icon",{props:{type:"ios-paper-outline"},style:{marginRight:"8px"}}),t("span",i.title)]),t("span",{style:{display:"inline-block",float:"right",marginRight:"32px"}})])},initCanvas:function(){console.time("otime");for(var t=[{name:"H3C-1"},{name:"H3C-2"},{name:"H3C-3"},{name:"H3C-4"},{name:"HW-1"},{name:"HW-2"},{name:"HW-3"},{name:"HW-4"},{name:"ZTE-1"},{name:"ZTE-2"},{name:"ZTE-3"},{name:"ZTE-4"}],e=0;e<4;e++)s(t[e].name,200*e,200,this);for(var i=4;i<8;i++)s(t[i].name,300*i,250*i,this);for(var n=8;n<12;n++)s(t[n].name,300*n,900,this);function s(t,e,i,n){n.createNode[t]=n.graph.createNode(t,parseInt(e),parseInt(i)),n.createNode[t].size={width:100},n.createNode[t].image="static/icon/"+t+".svg",n.createNode[t].setStyle(Q.Styles.LABEL_COLOR,"black"),n.createNode[t].setStyle(Q.Styles.LABEL_BACKGROUND_COLOR,"white"),n.createNode[t].tooltip=":"+t+"\n:NC-NC-CR01-NE80E\n:10.10.10.1"}for(var r in this.createNode)for(var o in this.createNode)r[r.length-1]==o[o.length-1]&&(this.createLine[r]=this.graph.createEdge(r,this.createNode[r],this.createNode[o]),this.createLine[r].from.id==this.createLine[r].to.id&&this.graph.removeElement(this.createLine[r]),this.createLine[r].tooltip=""+r+"\nGE0/0/1\nIP10.10.20.1\ncost200\nFE()\n"+o+"\nGE0/0/1",this.createLine[r].setStyle(Q.Styles.EDGE_BUNDLE_TYPE,Q.Consts.EDGE_BUNDLE_TYPE_PARALLEL),this.createLine[r].setStyle(Q.Styles.LABEL_COLOR,"black"),this.createLine[r].setStyle(Q.Styles.LABEL_BACKGROUND_COLOR,"rgba(255, 255, 255, 0.5)"),this.createLine[r].setStyle(Q.Styles.ARROW_TO,!1),this.createLine[r].setStyle(Q.Styles.EDGE_COLOR,"green"),this.createLine[r].setStyle(Q.Styles.EDGE_WIDTH,2));console.timeEnd("otime")},outPutpicture:function(){o.a.showExportPanel(this.graph)}}}}).call(e,i("qqHy"))}});